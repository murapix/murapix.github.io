/* empty css                    */import"./vue.17dc9343.js";import{q as dt,D as u,ad as A,a0 as w,aG as Qt,aM as _,a3 as C,a4 as b,K as U,Q as X,aR as be,a2 as T,J as ie,aa as Y,aP as Re,aN as Le,l as Te,u as Dt,t as q,ba as Ve,aS as ze,H as re,w as St,bb as At,ab as L,az as mt,aO as Mt,A as xe,a1 as z,bf as B,bh as en,bB as pr,ay as We,bD as ct,bk as ht,V as vr,j as mr,bE as pn,aF as hr,aT as Jt,aV as oe,z as Ge,bw as br,bA as yr,bl as Wt,as as vn,aK as _r,av as Nr,bn as kr}from"./@vue.f39bd477.js";import{c as Mn}from"./nanoevents.1080beb7.js";import{L as Ze}from"./lz-string.dccec454.js";import{Y as wr}from"./vue-next-select.3f210d97.js";import{D as Sr}from"./vuedraggable.3138c559.js";import{p as Cr}from"./vue-textarea-autosize.35804eaf.js";import{P as xr}from"./vue-panzoom.db51701d.js";import{u as $n,s as Mr}from"./vue-toastification.277609fd.js";import"./amator.662264f3.js";import"./bezier-easing.a990b400.js";import"./sortablejs.d2aaca1a.js";import"./panzoom.f5ccc6c8.js";import"./wheel.c9cad283.js";import"./ngraph.events.083734c6.js";const $r=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};$r();const Ir="modulepreload",mn={},Rr="./",bt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${Rr}${r}`,r in mn)return;mn[r]=!0;const i=r.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const s=document.createElement("link");if(s.rel=i?"stylesheet":Ir,i||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),i)return new Promise((o,l)=>{s.addEventListener("load",o),s.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Lr="./projInfo-schema.json",Fr="Nanite",Pr="A project made in Profectus",Tr="break-the-cycle",Or="Escapee",Er="",zr="",Dr="0.0",Ar="Initial Commit",jr=!0,Vr=!1,Br=2,qr=!0,Ur=null,Zr="",Wr=["main"],Gr=3600,Hr=!0,Yr="base64";var te={$schema:Lr,title:Fr,description:Pr,id:Tr,author:Or,discordName:Er,discordLink:zr,versionNumber:Dr,versionTitle:Ar,allowGoBack:jr,defaultShowSmall:Vr,defaultDecimalsShown:Br,useHeader:qr,banner:Ur,logo:Zr,initialTabs:Wr,maxTickLength:Gr,enablePausing:Hr,exportEncoding:Yr};const Jr=dt({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var K=window.player=Jr;function In(e){return JSON.stringify(e,(t,n)=>u(n))}var G=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const Rn=e=>(Re("data-v-1b5356cf"),e=e(),Le(),e),Kr={class:"error"},Xr={class:"error-title"},Qr={class:"error-details",style:{"margin-top":"-10px"}},ei={key:0},ti={class:"instructions"},ni=["href"],ri=Rn(()=>b("br",null,null,-1)),ii={key:0,style:{"margin-top":"20px"}},si=Rn(()=>b("h3",null,"Other errors",-1)),oi=[si],ai={class:"error-details"},li={key:0,style:{"margin-top":"10px"}},ui={key:1,style:{"margin-top":"10px"}},ci=A({__name:"Error",props:{errors:{}},setup(e){const t=e,n=w(()=>t.errors[0]),r=w(()=>t.errors.map(a=>a.stack==null?[]:a.stack.split(`
`))),i=w(()=>t.errors.map(a=>a.cause==null?[]:(typeof a.cause=="string"?a.cause:JSON.stringify(a.cause)).split(`
`)));return Qt(()=>{K.autosave=!1,K.devSpeed=0}),(a,s)=>(_(),C("div",Kr,[b("h1",Xr,U(n.value.name)+": "+U(n.value.message),1),b("div",Qr,[n.value.cause?(_(),C("div",ei,[(_(!0),C(X,null,be(i.value[0],o=>(_(),C("div",{key:o},U(o),1))),128))])):T("",!0),n.value.stack?(_(),C("div",{key:1,style:ie(n.value.cause?"margin-top: 10px":"")},[(_(!0),C(X,null,be(r.value[0],o=>(_(),C("div",{key:o},U(o),1))),128))],4)):T("",!0)]),b("div",ti,[Y(" Check the console for more details, and consider sharing it with the developers on "),b("a",{href:u(te).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,ni),Y("!"),ri,a.errors.length>1?(_(),C("div",ii,oi)):T("",!0),(_(!0),C(X,null,be(a.errors.slice(1),(o,l)=>(_(),C("div",{key:l,style:{"margin-top":"20px"}},[b("details",ai,[b("summary",null,U(o.name)+": "+U(o.message),1),o.cause?(_(),C("div",li,[(_(!0),C(X,null,be(i.value[l+1],c=>(_(),C("div",{key:c},U(c),1))),128))])):T("",!0),o.stack?(_(),C("div",ui,[(_(!0),C(X,null,be(r.value[l+1],c=>(_(),C("div",{key:c},U(c),1))),128))])):T("",!0)])]))),128))])]))}});var Ln=G(ci,[["__scopeId","data-v-1b5356cf"]]);class di{constructor(t){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}get size(){return this.map.size}get(t){const n=this.map.get(t);if(n!==void 0)return n!==this.first&&(n===this.last?(this.last=n.prev,this.last.next=void 0):(n.prev.next=n.next,n.next.prev=n.prev),n.next=this.first,this.first.prev=n,this.first=n),n.value}set(t,n){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");const r=new fi(t,n);for(this.first===void 0?(this.first=r,this.last=r):(r.next=this.first,this.first.prev=r,this.first=r),this.map.set(t,r);this.map.size>this.maxSize;){const i=this.last;this.map.delete(i.key),this.last=i.prev,this.last.next=void 0}}}class fi{constructor(t,n){this.next=void 0,this.prev=void 0,this.key=t,this.value=n}}const Gt=17,gi=9e15,pi=Math.log10(9e15),vi=1/9e15,mi=308,hi=-324,hn=5,bi=(1<<10)-1,yi=function(){const e=[];for(let n=hi+1;n<=mi;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Ye=[2,Math.E,3,4,5,6,7,8,9,10],_i=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Ni=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let x=function(t){return N.fromValue_noAlloc(t)},Z=function(e,t,n){return N.fromComponents(e,t,n)},J=function(t,n,r){return N.fromComponents_noNormalize(t,n,r)};const qe=function(t,n){const r=n+1,i=Math.ceil(Math.log10(Math.abs(t))),a=Math.round(t*Math.pow(10,r-i))*Math.pow(10,i-r);return parseFloat(a.toFixed(Math.max(r-i,0)))},Ht=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},ki=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const r=e*e;let i=e;return n=n+1/(12*i),i=i*r,n=n+1/(360*i),i=i*r,n=n+1/(1260*i),i=i*r,n=n+1/(1680*i),i=i*r,n=n+1/(1188*i),i=i*r,n=n+691/(360360*i),i=i*r,n=n+7/(1092*i),i=i*r,n=n+3617/(122400*i),Math.exp(n)/t},Fn=.5671432904097838,bn=function(e,t=1e-10){let n,r;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Fn;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let i=0;i<100;++i){if(r=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(r-n)<t*Math.abs(r))return r;n=r}throw Error(`Iteration failed to converge: ${e.toString()}`)};function yn(e,t=1e-10){let n,r,i,a;if(!Number.isFinite(e.mag)||e.eq(N.dZero))return e;if(e.eq(N.dOne))return N.fromNumber(Fn);n=N.ln(e);for(let s=0;s<100;++s){if(r=n.neg().exp(),i=n.sub(e.mul(r)),a=n.sub(i.div(n.add(1).sub(n.add(2).mul(i).div(N.mul(2,n).add(2))))),N.abs(a.sub(n)).lt(N.abs(a).mul(t)))return a;n=a}throw Error(`Iteration failed to converge: ${e.toString()}`)}const k=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof k?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/yi(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new k().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new k().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new k().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new k().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new k().fromDecimal(e)}static fromNumber(e){return new k().fromNumber(e)}static fromString(e){return new k().fromString(e)}static fromValue(e){return new k().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof k)return e;if(typeof e=="string"){const t=k.fromStringCache.get(e);return t!==void 0?t:k.fromString(e)}else return typeof e=="number"?k.fromNumber(e):k.dZero}static abs(e){return x(e).abs()}static neg(e){return x(e).neg()}static negate(e){return x(e).neg()}static negated(e){return x(e).neg()}static sign(e){return x(e).sign}static sgn(e){return x(e).sign}static round(e){return x(e).round()}static floor(e){return x(e).floor()}static ceil(e){return x(e).ceil()}static trunc(e){return x(e).trunc()}static add(e,t){return x(e).add(t)}static plus(e,t){return x(e).add(t)}static sub(e,t){return x(e).sub(t)}static subtract(e,t){return x(e).sub(t)}static minus(e,t){return x(e).sub(t)}static mul(e,t){return x(e).mul(t)}static multiply(e,t){return x(e).mul(t)}static times(e,t){return x(e).mul(t)}static div(e,t){return x(e).div(t)}static divide(e,t){return x(e).div(t)}static recip(e){return x(e).recip()}static reciprocal(e){return x(e).recip()}static reciprocate(e){return x(e).reciprocate()}static cmp(e,t){return x(e).cmp(t)}static cmpabs(e,t){return x(e).cmpabs(t)}static compare(e,t){return x(e).cmp(t)}static isNaN(e){return e=x(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=x(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return x(e).eq(t)}static equals(e,t){return x(e).eq(t)}static neq(e,t){return x(e).neq(t)}static notEquals(e,t){return x(e).notEquals(t)}static lt(e,t){return x(e).lt(t)}static lte(e,t){return x(e).lte(t)}static gt(e,t){return x(e).gt(t)}static gte(e,t){return x(e).gte(t)}static max(e,t){return x(e).max(t)}static min(e,t){return x(e).min(t)}static minabs(e,t){return x(e).minabs(t)}static maxabs(e,t){return x(e).maxabs(t)}static clamp(e,t,n){return x(e).clamp(t,n)}static clampMin(e,t){return x(e).clampMin(t)}static clampMax(e,t){return x(e).clampMax(t)}static cmp_tolerance(e,t,n){return x(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return x(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return x(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return x(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return x(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return x(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return x(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return x(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return x(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return x(e).gte_tolerance(t,n)}static pLog10(e){return x(e).pLog10()}static absLog10(e){return x(e).absLog10()}static log10(e){return x(e).log10()}static log(e,t){return x(e).log(t)}static log2(e){return x(e).log2()}static ln(e){return x(e).ln()}static logarithm(e,t){return x(e).logarithm(t)}static pow(e,t){return x(e).pow(t)}static pow10(e){return x(e).pow10()}static pow_base(e,t){return x(e).pow_base(t)}static root(e,t){return x(e).root(t)}static factorial(e,t){return x(e).factorial()}static gamma(e,t){return x(e).gamma()}static lngamma(e,t){return x(e).lngamma()}static exp(e){return x(e).exp()}static sqr(e){return x(e).sqr()}static sqrt(e){return x(e).sqrt()}static cube(e){return x(e).cube()}static cbrt(e){return x(e).cbrt()}static tetrate(e,t=2,n=J(1,0,1)){return x(e).tetrate(t,n)}static iteratedexp(e,t=2,n=J(1,0,1)){return x(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return x(e).iteratedlog(t,n)}static layeradd10(e,t){return x(e).layeradd10(t)}static layeradd(e,t,n=10){return x(e).layeradd(t,n)}static slog(e,t=10){return x(e).slog(t)}static lambertw(e){return x(e).lambertw()}static ssqrt(e){return x(e).ssqrt()}static pentate(e,t=2,n=J(1,0,1)){return x(e).pentate(t,n)}static sin(e){return x(e).sin()}static cos(e){return x(e).cos()}static tan(e){return x(e).tan()}static asin(e){return x(e).asin()}static acos(e){return x(e).acos()}static atan(e){return x(e).atan()}static sinh(e){return x(e).sinh()}static cosh(e){return x(e).cosh()}static tanh(e){return x(e).tanh()}static asinh(e){return x(e).asinh()}static acosh(e){return x(e).acosh()}static atanh(e){return x(e).atanh()}static affordGeometricSeries(e,t,n,r){return this.affordGeometricSeries_core(x(e),x(t),x(n),r)}static sumGeometricSeries(e,t,n,r){return this.sumGeometricSeries_core(e,x(t),x(n),r)}static affordArithmeticSeries(e,t,n,r){return this.affordArithmeticSeries_core(x(e),x(t),x(n),x(r))}static sumArithmeticSeries(e,t,n,r){return this.sumArithmeticSeries_core(x(e),x(t),x(n),x(r))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(x(e),x(t),x(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return J(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return J(t,0,1);const n=Math.floor(Math.random()*(e+1));let r=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let i=Math.pow(10,r);return Math.random()>.9&&(i=Math.trunc(i)),Z(t,n,i)}static affordGeometricSeries_core(e,t,n,r){const i=t.mul(n.pow(r));return k.floor(e.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,r){return t.mul(n.pow(r)).mul(k.sub(1,n.pow(e))).div(k.sub(1,n))}static affordArithmeticSeries_core(e,t,n,r){const a=t.add(r.mul(n)).sub(n.div(2)),s=a.pow(2);return a.neg().add(s.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,r){const i=t.add(r.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<vi)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=gi)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<pi&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,n=k.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");const r=e.split("^^^");if(r.length===2){const g=parseFloat(r[0]),v=parseFloat(r[1]),S=r[1].split(";");let M=1;if(S.length===2&&(M=parseFloat(S[1]),isFinite(M)||(M=1)),isFinite(g)&&isFinite(v)){const y=k.pentate(g,v,M);return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}}const i=e.split("^^");if(i.length===2){const g=parseFloat(i[0]),v=parseFloat(i[1]),S=i[1].split(";");let M=1;if(S.length===2&&(M=parseFloat(S[1]),isFinite(M)||(M=1)),isFinite(g)&&isFinite(v)){const y=k.tetrate(g,v,M);return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}}const a=e.split("^");if(a.length===2){const g=parseFloat(a[0]),v=parseFloat(a[1]);if(isFinite(g)&&isFinite(v)){const S=k.pow(g,v);return this.sign=S.sign,this.layer=S.layer,this.mag=S.mag,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}}e=e.trim().toLowerCase();let s,o,l=e.split("pt");if(l.length===2){s=10,o=parseFloat(l[0]),l[1]=l[1].replace("(",""),l[1]=l[1].replace(")","");let g=parseFloat(l[1]);if(isFinite(g)||(g=1),isFinite(s)&&isFinite(o)){const v=k.tetrate(s,o,g);return this.sign=v.sign,this.layer=v.layer,this.mag=v.mag,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}}if(l=e.split("p"),l.length===2){s=10,o=parseFloat(l[0]),l[1]=l[1].replace("(",""),l[1]=l[1].replace(")","");let g=parseFloat(l[1]);if(isFinite(g)||(g=1),isFinite(s)&&isFinite(o)){const v=k.tetrate(s,o,g);return this.sign=v.sign,this.layer=v.layer,this.mag=v.mag,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}}const c=e.split("e"),p=c.length-1;if(p===0){const g=parseFloat(e);if(isFinite(g))return this.fromNumber(g),k.fromStringCache.size>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}else if(p===1){const g=parseFloat(e);if(isFinite(g)&&g!==0)return this.fromNumber(g),k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}const h=e.split("e^");if(h.length===2){this.sign=1,h[0].charAt(0)=="-"&&(this.sign=-1);let g="";for(let v=0;v<h[1].length;++v){const S=h[1].charCodeAt(v);if(S>=43&&S<=57||S===101)g+=h[1].charAt(v);else return this.layer=parseFloat(g),this.mag=parseFloat(h[1].substr(v+1)),this.normalize(),k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}}if(p<1)return this.sign=0,this.layer=0,this.mag=0,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this;const f=parseFloat(c[0]);if(f===0)return this.sign=0,this.layer=0,this.mag=0,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this;let d=parseFloat(c[c.length-1]);if(p>=2){const g=parseFloat(c[c.length-2]);isFinite(g)&&(d*=Math.sign(g),d+=Ht(g))}if(!isFinite(f))this.sign=c[0]==="-"?-1:1,this.layer=p,this.mag=d;else if(p===1)this.sign=Math.sign(f),this.layer=1,this.mag=d+Math.log10(Math.abs(f));else if(this.sign=Math.sign(f),this.layer=p,p===2){const g=k.mul(Z(1,2,d),x(f));return this.sign=g.sign,this.layer=g.layer,this.mag=g.mag,k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}else this.mag=d;return this.normalize(),k.fromStringCache.maxSize>=1&&k.fromStringCache.set(t,k.fromDecimal(this)),this}fromValue(e){return e instanceof k?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:qe(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:qe(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=hn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):qe(this.m,e)+"e"+qe(this.e,e):this.layer===1?qe(this.m,e)+"e"+qe(this.e,e):this.layer<=hn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+qe(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+qe(this.mag,e)}abs(){return J(this.sign===0?0:1,this.layer,this.mag)}neg(){return J(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?k.dZero:this.layer===0?Z(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?k.dZero:this.layer===0?Z(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?k.dZero:this.layer===0?Z(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?k.dZero:this.layer===0?Z(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=x(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return J(0,0,0);let n,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(k.cmpabs(this,t)>0?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return k.fromNumber(n.sign*n.mag+r.sign*r.mag);const i=n.layer*Math.sign(n.mag),a=r.layer*Math.sign(r.mag);if(i-a>=2)return n;if(i===0&&a===-1){if(Math.abs(r.mag-Math.log10(n.mag))>Gt)return n;{const s=Math.pow(10,Math.log10(n.mag)-r.mag),o=r.sign+n.sign*s;return Z(Math.sign(o),1,r.mag+Math.log10(Math.abs(o)))}}if(i===1&&a===0){if(Math.abs(n.mag-Math.log10(r.mag))>Gt)return n;{const s=Math.pow(10,n.mag-Math.log10(r.mag)),o=r.sign+n.sign*s;return Z(Math.sign(o),1,Math.log10(r.mag)+Math.log10(Math.abs(o)))}}if(Math.abs(n.mag-r.mag)>Gt)return n;{const s=Math.pow(10,n.mag-r.mag),o=r.sign+n.sign*s;return Z(Math.sign(o),1,r.mag+Math.log10(Math.abs(o)))}}plus(e){return this.add(e)}sub(e){return this.add(x(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=x(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return J(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return J(this.sign*t.sign,0,1);let n,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return k.fromNumber(n.sign*r.sign*n.mag*r.mag);if(n.layer>=3||n.layer-r.layer>=2)return Z(n.sign*r.sign,n.layer,n.mag);if(n.layer===1&&r.layer===0)return Z(n.sign*r.sign,1,n.mag+Math.log10(r.mag));if(n.layer===1&&r.layer===1)return Z(n.sign*r.sign,1,n.mag+r.mag);if(n.layer===2&&r.layer===1){const i=Z(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(Z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return Z(n.sign*r.sign,i.layer+1,i.sign*i.mag)}if(n.layer===2&&r.layer===2){const i=Z(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(Z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return Z(n.sign*r.sign,i.layer+1,i.sign*i.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=x(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?k.dNaN:this.layer===0?Z(this.sign,0,1/this.mag):Z(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=x(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=x(e),n=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return n>r?1:n<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=x(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=x(e);return this.lt(t)?t:this}min(e){const t=x(e);return this.gt(t)?t:this}maxabs(e){const t=x(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=x(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=x(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=x(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let r=this.mag,i=n.mag;return this.layer>n.layer&&(i=Ht(i)),this.layer<n.layer&&(r=Ht(r)),Math.abs(r-i)<=t*Math.max(Math.abs(r),Math.abs(i))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=x(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=x(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=x(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=x(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(k.dZero)?k.dZero:this.log10()}absLog10(){return this.sign===0?k.dNaN:this.layer>0?Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):Z(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?k.dNaN:this.layer>0?Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):Z(this.sign,0,Math.log10(this.mag))}log(e){return e=x(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?k.dNaN:this.layer===0&&e.layer===0?Z(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):k.div(this.log10(),e.log10())}log2(){return this.sign<=0?k.dNaN:this.layer===0?Z(this.sign,0,Math.log2(this.mag)):this.layer===1?Z(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?Z(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?k.dNaN:this.layer===0?Z(this.sign,0,Math.log(this.mag)):this.layer===1?Z(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?Z(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=x(e),n=this,r=t;if(n.sign===0)return r.eq(0)?J(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(r.sign===0)return J(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return n;const i=n.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?i.neg():Math.abs(r.toNumber()%2)%2===0?i:k.dNaN:i}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return k.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return Z(1,0,t);if(e.sign===0)return k.dOne;e=J(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?Z(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?Z(-e.sign,e.layer+1,-e.mag):k.dOne}pow_base(e){return x(e).pow(this)}root(e){const t=x(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?k.exp(k.mul(this,k.ln(this).sub(1))):k.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(J(1,0,24)))return k.fromNumber(ki(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let r=e,i=12*r,a=1/i,s=t+a;if(s===t||(t=s,r=r*n,i=360*r,a=1/i,s=t-a,s===t))return k.exp(t);t=s,r=r*n,i=1260*r;let o=1/i;return t=t+o,r=r*n,i=1680*r,o=1/i,t=t-o,k.exp(t)}else return this.layer===1?k.exp(k.mul(this,k.ln(this).sub(1))):k.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?k.dOne:this.layer===0&&this.mag<=709.7?k.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?Z(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?Z(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):Z(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return k.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return Z(1,2,Math.log10(this.mag)-.3010299956639812);{const e=k.div(J(this.sign,this.layer-1,this.mag),J(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=J(1,0,1)){if(e===1)return k.pow(this,t);if(e===0)return new k(t);if(this.eq(k.dOne))return k.dOne;if(this.eq(-1))return k.pow(this,t);if(e===Number.POSITIVE_INFINITY){const i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){if(i>1.444667861009099)return k.fromNumber(Math.E);const a=k.ln(this).neg();return a.lambertw().div(a)}else return i>1.444667861009766?k.fromNumber(Number.POSITIVE_INFINITY):k.dNaN}if(this.eq(k.dZero)){let i=Math.abs((e+1)%2);return i>1&&(i=2-i),k.fromNumber(i)}if(e<0)return k.iteratedlog(t,this,-e);t=x(t);const n=e;e=Math.trunc(e);const r=n-e;if(this.gt(k.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let i=0;i<e;++i){const a=t;if(t=this.pow(t),a.eq(t))return t}if(r!=0){const i=this.pow(t);return t.mul(1-r).add(i.mul(r))}return t}r!==0&&(t.eq(k.dOne)?this.gt(10)?t=this.pow(r):(t=k.fromNumber(k.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let i=0;i<e;++i){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return J(t.sign,t.layer+(e-i-1),t.mag);if(i>1e4)return t}return t}iteratedexp(e=2,t=J(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return k.tetrate(e,-t,this);e=x(e);let n=k.fromDecimal(this);const r=t;t=Math.trunc(t);const i=r-t;if(n.layer-e.layer>3){const a=Math.min(t,n.layer-e.layer-3);t-=a,n.layer-=a}for(let a=0;a<t;++a){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(a>1e4)return n}return i>0&&i<1&&(e.eq(10)?n=n.layeradd10(-i):n=n.layeradd(-i,e)),n}slog(e=10,t=100){let n=.001,r=!1,i=!1,a=this.slog_internal(e).toNumber();for(let s=1;s<t;++s){const l=new k(e).tetrate(a).gt(this);if(s>1&&i!=l&&(r=!0),i=l,r?n/=2:n*=2,n=Math.abs(n)*(l?-1:1),a+=n,n===0)break}return k.fromNumber(a)}slog_internal(e=10){if(e=x(e),e.lte(k.dZero)||e.eq(k.dOne))return k.dNaN;if(e.lt(k.dOne))return this.eq(k.dOne)?k.dZero:this.eq(k.dZero)?k.dNegOne:k.dNaN;if(this.mag<0||this.eq(k.dZero))return k.dNegOne;let t=0,n=k.fromDecimal(this);if(n.layer-e.layer>3){const r=n.layer-e.layer-3;t+=r,n.layer-=r}for(let r=0;r<100;++r)if(n.lt(k.dZero))n=k.pow(e,n),t-=1;else{if(n.lte(k.dOne))return k.fromNumber(t+k.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=k.log(n,e)}return k.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:k.critical_section(e,t,Ni)}static tetrate_critical(e,t){return k.critical_section(e,t,_i)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,i=0;for(let s=0;s<Ye.length;++s)if(Ye[s]==e){r=n[s][Math.floor(t)],i=n[s][Math.ceil(t)];break}else if(Ye[s]<e&&Ye[s+1]>e){const o=(e-Ye[s])/(Ye[s+1]-Ye[s]);r=n[s][Math.floor(t)]*(1-o)+n[s+1][Math.floor(t)]*o,i=n[s][Math.ceil(t)]*(1-o)+n[s+1][Math.ceil(t)]*o;break}const a=t-Math.floor(t);return r<=0||i<=0?r*(1-a)+i*a:Math.pow(e,Math.log(r)/Math.log(e)*(1-a)+Math.log(i)/Math.log(e)*a)}layeradd10(e){e=k.fromValue_noAlloc(e).toNumber();const t=k.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?k.tetrate(t,r):Number.isFinite(r)?r>=-1?k.log(k.tetrate(t,r+1),t):k.log(k.log(k.tetrate(t,r+2),t),t):k.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return k.fromNumber(bn(this.toNumber()));if(this.layer===0)return k.fromNumber(bn(this.sign*this.mag));if(this.layer===1)return yn(this);if(this.layer===2)return yn(this);if(this.layer>=3)return J(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return J(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=J(1,0,1)){t=x(t);const n=e;e=Math.trunc(e);const r=n-e;r!==0&&(t.eq(k.dOne)?(++e,t=k.fromNumber(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let i=0;i<e;++i){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(i>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?k.fromNumber(Math.sin(this.sign*this.mag)):J(0,0,0)}cos(){return this.mag<0?k.dOne:this.layer===0?k.fromNumber(Math.cos(this.sign*this.mag)):J(0,0,0)}tan(){return this.mag<0?this:this.layer===0?k.fromNumber(Math.tan(this.sign*this.mag)):J(0,0,0)}asin(){return this.mag<0?this:this.layer===0?k.fromNumber(Math.asin(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?k.fromNumber(Math.acos(this.toNumber())):this.layer===0?k.fromNumber(Math.acos(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?k.fromNumber(Math.atan(this.sign*this.mag)):k.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return k.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return k.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?J(Number.NaN,Number.NaN,Number.NaN):k.ln(this.add(1).div(k.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(k.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let N=k;N.fromStringCache=new di(bi);N.dZero=J(0,0,0);N.dOne=J(1,0,1);N.dNegOne=J(-1,0,1);N.dTwo=J(1,0,2);N.dTen=J(1,0,10);N.dNaN=J(Number.NaN,Number.NaN,Number.NaN);N.dInf=J(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);N.dNegInf=J(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);N.dNumberMax=Z(1,0,Number.MAX_VALUE);N.dNumberMin=Z(1,0,Number.MIN_VALUE);x=N.fromValue_noAlloc;Z=N.fromComponents;J=N.fromComponents_noNormalize;N.fromMantissaExponent;N.fromMantissaExponent_noNormalize;const wi=new N(1);function gt(e,t,n=!0){let r=N.log10(e).floor(),i=N.div(e,N.pow(10,r));i.toStringWithDecimalPlaces(t)==="10"&&(i=wi,r=r.add(1));const a=r.gte(1e9)?Ee(r,Math.max(Math.max(t,3),te.defaultDecimalsShown)):r.gte(1e4)?Ft(r,0):r.toStringWithDecimalPlaces(0);return n?i.toStringWithDecimalPlaces(t)+"e"+a:"e"+a}function Ft(e,t){if(e==null)return"NaN";if(e=new N(e),e.mag<.001)return 0 .toFixed(t);const r=e.toStringWithDecimalPlaces(t).split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.length==1?r[0]:r[0]+"."+r[1]}function Pn(e,t){return e==null?"NaN":(e=new N(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),te.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Si=new N("eeee1000"),Ci=new N("e100000"),_n=new N("e1000");new N(1e9);const Kt=new N(1e6),xi=new N(1e3);new N(.98);const Mi=new N(.001),$i=new N(0);function Ee(e,t,n){if(t==null&&(t=te.defaultDecimalsShown),n=n!=null?n:te.defaultShowSmall,e=new N(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+Ee(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Si)){const r=e.slog();return r.gte(Kt)?"F"+Ee(r.floor()):N.pow(10,r.sub(r.floor())).toStringWithDecimalPlaces(3)+"F"+Ft(r.floor(),0)}else{if(e.gte(Ci))return gt(e,0,!1);if(e.gte(_n))return gt(e,0);if(e.gte(Kt))return gt(e,t);if(e.gte(xi))return Ft(e,0);if(e.gte(Mi)||!n)return Pn(e,t);if(e.eq($i))return 0 .toFixed(t)}return e=On(e),e.lt(_n)?gt(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):Ee(e,t)+"\u207B\xB9"}function ee(e){return e=new N(e),e.sign<0?"-"+ee(e.neg()):e.gte(Kt)?Ee(e):Ee(e,0)}function Tn(e){return N.lt(e,0)?"-"+Tn(N.neg(e)):N.gt(e,2**51)?Ee(N.div(e,31536e3))+"y":(e=new N(e).toNumber(),e<60?Ee(e)+"s":e<3600?ee(Math.floor(e/60))+"m "+Ee(e%60)+"s":e<86400?ee(Math.floor(e/3600))+"h "+ee(Math.floor(e/60)%60)+"m "+ee(e%60)+"s":e<31536e3?ee(Math.floor(e/84600)%365)+"d "+ee(Math.floor(e/3600)%24)+"h "+ee(Math.floor(e/60)%60)+"m":ee(Math.floor(e/31536e3))+"y "+ee(Math.floor(e/84600)%365)+"d "+ee(Math.floor(e/3600)%24)+"h")}function Ii(e,t,n){e=new N(e);let r=e.toStringWithDecimalPlaces(t);return new N(r).gte(n)&&(r=N.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),r}function Ri(e,t){return Ee(e,t,!0)}function On(e){let t=N.log10(e).ceil();const n=N.div(e,N.pow(10,t));return t=t.neg(),e=new N(10).pow(t).times(n),e}var Li=Object.freeze(Object.defineProperty({__proto__:null,default:N,exponentialFormat:gt,commaFormat:Ft,regularFormat:Pn,format:Ee,formatWhole:ee,formatTime:Tn,toPlaces:Ii,formatSmall:Ri,invertOOM:On},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Fi,commaFormat:Pi,regularFormat:Ti,format:En,formatWhole:zn,formatTime:tn,toPlaces:Oi,formatSmall:Ei,invertOOM:zi}=Li;window.Decimal=N;window.exponentialFormat=Fi;window.commaFormat=Pi;window.regularFormat=Ti;window.format=En;window.formatWhole=zn;window.formatTime=tn;window.toPlaces=Oi;window.formatSmall=Ei;window.invertOOM=zi;function Di(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Ai(e){return(e[0]+e.slice(1).replace(/[A-Z]/g,t=>`-${t}`)).toLowerCase()}function Pt(e){return typeof e=="function"}var H=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(H||{});const yt=Symbol("DoNotCache");function W(e,t){const n=e[t];Pt(n)&&n.length===0&&!n[yt]?e[t]=w(n.bind(e)):Pt(n)&&(e[t]=n.bind(e),e[t][yt]=!0)}function Nn(e){return Pt(e)&&!e[yt]&&(e=w(e)),e}const jt=Symbol("Component"),Vt=Symbol("GatherProps");let ji=0;function Dn(e="feature-"){return e+ji++}var Tt=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(Tt||{});function Bt(e){const t=u(e);return t!==2&&t!==!1}function Se(e){return e[yt]=!0,e}function pe(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}function nn(e,...t){const n=[],r=i=>{Object.keys(i).forEach(a=>{const s=i[a];s!=null&&typeof s=="object"&&(t.includes(s.type)?n.push(s):!(s instanceof N)&&!Te(s)&&r(s))})};return r(e),n}var le=window.state=Dt({lastTenTicks:[],hasNaN:!1,NaNPath:[],errors:dt([])});const Ae={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!1,mergeAdjacent:!0,showPin:!0};var rn=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e.Console="console",e))(rn||{}),Oe={classic:Ae,paper:{...Ae,variables:{...Ae.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"}},nordic:{...Ae,variables:{...Ae.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"}},aqua:{...Ae,variables:{...Ae.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}},console:{...Ae,variables:{...Ae.variables,"--foreground":"#F2F2F2","--background":"#000000","--feature-foreground":"#13A10E","--raised-background":"#272727","--points":"#F2F2F2","--locked":"#272727","--danger":"#C50F1F","--link":"#3A96DD","--outline":"#13A10E","--accent1":"#10570D","--border-radius":"4px","--modal-border":"solid 2px #13A10E","--feature-margin":"5px"}}};const Ne=Mn();"fonts"in document&&(document.fonts.onloadingdone=()=>Ne.emit("fontsLoaded"));var Vi=Object.freeze(Object.defineProperty({__proto__:null,globalBus:Ne},Symbol.toStringTag,{value:"Module"}));function An(e={}){return Object.assign({id:`${te.id}-0`,name:"Default Save",tabs:te.initialTabs.slice(),time:Date.now(),autosave:!0,timePlayed:0,keepGoing:!1,modID:te.id,modVersion:te.versionNumber,layers:{}},e)}function Ce(e){const t=Ze.compressToUTF16(In(e!=null?e:K));return localStorage.setItem((e!=null?e:K).id,t),t}async function Bi(){Zi();try{let e=localStorage.getItem(ne.active);if(e==null){await Ke(at());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ze.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==te.id){await Ke(at());return}t.id=ne.active,await Ke(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Ke(at())}}function at(){const e=$t(),t=An({id:e});return Ce(t),ne.saves.push(e),t}function $t(){let e,t=0;do e=`${te.id}-${t++}`;while(localStorage.getItem(e)!=null);return e}const qi=q(!1);async function Ke(e){console.info("Loading save",e),qi.value=!0;const{layers:t,removeLayer:n,addLayer:r}=await bt(()=>Promise.resolve().then(function(){return qo}),void 0),{fixOldSave:i,getInitialLayers:a}=await bt(()=>Promise.resolve().then(function(){return Qd}),void 0);for(const s in t){const o=t[s];o&&n(o)}a(e).forEach(s=>r(s,e)),e=An(e),e.time=Date.now(),e.modVersion!==te.versionNumber&&(i(e.modVersion,e),e.modVersion=te.versionNumber),Object.assign(K,e),ne.active=K.id,Ne.emit("onLoad")}setInterval(()=>{K.autosave&&Ce()},1e3);window.onbeforeunload=()=>{K.autosave&&Ce()};window.save=Ce;const Ui=window.hardReset=async()=>{await Ke(at())};window.deleteLowerSaves=()=>{const e=Object.values(ne.saves).indexOf(K.id)+1;Object.values(ne.saves).slice(e).forEach(t=>localStorage.removeItem(t)),ne.saves=ne.saves.slice(0,e)};const _t=dt({active:"",saves:[],showTPS:!0,theme:rn.Console,unthrottled:!1,alignUnits:!1});Ve(_t,e=>{const t=Ze.compressToUTF16(JSON.stringify(e));localStorage.setItem(te.id,t)},{deep:!0});var ne=window.settings=_t;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:rn.Console,alignUnits:!1};Ne.emit("loadSettings",e),Object.assign(_t,e),Ui()};function Zi(){try{let e=localStorage.getItem(te.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ze.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(_t,t)}Ne.emit("loadSettings",_t)}catch{}}const Wi=dt([]),jn=dt([]);function Gi(e){jn.push(e)}const Hi=dt([]),Yi={class:"table"};A({__name:"Column",setup(e){const t=w(()=>Oe[ne.theme].mergeAdjacent);return(n,r)=>(_(),C("div",Yi,[b("div",{class:re(["col",{mergeAdjacent:t.value}])},[ze(n.$slots,"default")],2)]))}});const Ji={class:"table"};A({__name:"Row",setup(e){const t=w(()=>Oe[ne.theme].mergeAdjacent);return(n,r)=>(_(),C("div",Ji,[b("div",{class:re(["row",{mergeAdjacent:t.value}])},[ze(n.$slots,"default")],2)]))}});function ye(e,t="span"){return typeof e=="function"?A({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),A({template:e})):A({render:()=>({})}):e}function et(e){if(Vn(e))return typeof e=="function"?e():ye(e);const t=e[jt];return L(t,e[Vt](),null)}function Ki(e){if(Vn(e))return typeof e=="function"?e():typeof e=="string"?L(X,null,[e]):L(e,null,null);const t=e[jt];return L(t,e[Vt](),null)}function Vn(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[yt]===!0}function Xi(e,t="div"){const n=St();return At(()=>{n.value=ye(tt(e),t)}),n}function qt(e,t="div"){const n=St(null);return At(()=>{const r=tt(e);n.value=r==""||r==null?null:ye(r,t)}),n}function tt(e){return u(u(e))}function Pe(...e){return e.includes(Object)||e.push(Object),e}function Qi(e){return Object.keys(e).reduce((t,n)=>(t[Ai(n)]=e[n],t),{})}const es=A({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var p;const n=q({}),r=new ResizeObserver(o),i=q(null);Qt(()=>{const h=i.value;h!=null&&r.observe(h)});let a=!0,s=q((p=i.value)==null?void 0:p.getBoundingClientRect());function o(){a&&(a=!1,mt(()=>{var h;s.value=(h=i.value)==null?void 0:h.getBoundingClientRect(),Object.values(n.value).filter(f=>f).forEach(f=>f.rect=f.element.getBoundingClientRect()),t("updateNodes",n.value),a=!0}))}Ne.on("fontsLoaded",o);const l={attributes:!1,childList:!0,subtree:!1};Mt(sn,(h,f)=>{const d=new MutationObserver(()=>c(h));d.observe(f,l),n.value[h]={element:f,observer:d,rect:f.getBoundingClientRect()},o()}),Mt(on,h=>{var f;(f=n.value[h])==null||f.observer.disconnect(),n.value[h]=void 0,o()}),Mt(Un,n),Mt(Zn,s);function c(h){const f=n.value[h];f!=null&&(f.rect=f.element.getBoundingClientRect(),t("updateNodes",n.value))}return(h,f)=>(_(),C(X,null,[ze(h.$slots,"default",{},void 0,!0),b("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var Bn=G(es,[["__scopeId","data-v-2b1dc1bc"]]);const ts=["onPointerdown"],ns={class:"modal-wrapper"},rs={class:"modal-container"},is={class:"modal-header"},ss={class:"modal-body"},os={class:"modal-footer"},as=b("div",{class:"modal-default-flex-grow"},null,-1),rt=A({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const i=xe(e),a=w(()=>u(i.modelValue)||o.value);function s(){n("update:modelValue",!1)}const o=q(!1),l=q(null),c=w(()=>{var p,h;return(h=(p=l.value)==null?void 0:p.nodes)!=null?h:null});return t({isOpen:a,nodes:c}),(p,h)=>(_(),z(vr,{to:"#modal-root"},[L(ht,{name:"modal",onBeforeEnter:h[0]||(h[0]=f=>o.value=!0),onAfterLeave:h[1]||(h[1]=f=>o.value=!1)},{default:B(()=>[en(b("div",We({class:"modal-mask",onPointerdown:ct(s,["self"])},p.$attrs),[b("div",ns,[b("div",rs,[b("div",is,[ze(p.$slots,"header",{shown:a.value},()=>[Y(" default header ")])]),b("div",ss,[L(Bn,{ref_key:"contextRef",ref:l},{default:B(()=>[ze(p.$slots,"body",{shown:a.value},()=>[Y(" default body ")])]),_:3},512)]),b("div",os,[ze(p.$slots,"footer",{shown:a.value},()=>[b("div",{class:"modal-default-footer"},[as,b("button",{class:"button modal-default-button",onClick:s}," Close ")])])])])])],16,ts),[[pr,p.modelValue]])]),_:3})]))}}),Je=Symbol("ProxyState");function Ie(e,t={}){const n=t;let r=!1,i=!1;function a(){return r||(i&&console.error("Cyclical dependency detected. Cannot evaluate lazy proxy."),i=!0,Object.assign(n,e.call(n,n)),r=!0),n}return new Proxy(n,{get(s,o){if(o===Je)return a();const l=a()[o];return l!=null&&typeof l=="object"&&Xe in l?l[Xe]:l},set(s,o,l){return a()[o]=l,!0},has(s,o){return o===Je?!0:Reflect.has(a(),o)},ownKeys(){return Reflect.ownKeys(a())},getOwnPropertyDescriptor(s,o){return r||(Object.assign(n,e.call(n,n)),r=!0),Object.getOwnPropertyDescriptor(s,o)}})}const qn=N.ln(10);function pt(e){return e}function ls(e,t){return F(t)?t.invert(N.neg(e)):(console.error("Could not invert due to no input being a variable"),0)}function us(e,t){return F(t)?t.isIntegrable()?m.neg(t.getIntegralFormula(e)):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function cs(e){return m.neg(e)}function ds(e,t,n){return F(t)?t.invert(N.sub(e,ue(n))):F(n)?n.invert(N.sub(e,ue(t))):(console.error("Could not invert due to no input being a variable"),0)}function fs(e,t,n){var r,i;if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const a=t.getIntegralFormula(e);return m.times(n,(r=t.innermostVariable)!=null?r:0).add(a)}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const a=n.getIntegralFormula(e);return m.times(t,(i=n.innermostVariable)!=null?i:0).add(a)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function gs(e,t,n){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(e);return m.add(r,n)}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=n.getIntegralFormula(e);return m.add(r,t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ps(e,t,n){return F(t)?t.invert(N.add(e,ue(n))):F(n)?n.invert(N.sub(ue(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function vs(e,t,n){var r,i;if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const a=t.getIntegralFormula(e);return m.sub(a,m.times(n,(r=t.innermostVariable)!=null?r:0))}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const a=n.getIntegralFormula(e);return m.times(t,(i=n.innermostVariable)!=null?i:0).sub(a)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ms(e,t,n){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(e);return m.sub(r,n)}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=n.getIntegralFormula(e);return m.sub(r,t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function hs(e,t,n){return F(t)?t.invert(N.div(e,ue(n))):F(n)?n.invert(N.div(e,ue(t))):(console.error("Could not invert due to no input being a variable"),0)}function bs(e,t,n){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(e);return m.times(r,n)}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=n.getIntegralFormula(e);return m.times(r,t)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ys(e,t,n){return F(t)?m.div(e,n):F(n)?m.div(e,t):(console.error("Could not apply substitution due to no input being a variable"),m.constant(0))}function _s(e,t,n){return F(t)?t.invert(N.mul(e,ue(n))):F(n)?n.invert(N.div(ue(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Ns(e,t,n){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(e);return m.div(r,n)}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=n.getIntegralFormula(e);return m.div(t,r)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ks(e,t,n){return F(t)?m.mul(e,n):F(n)?m.mul(e,t):(console.error("Could not apply substitution due to no input being a variable"),m.constant(0))}function ws(e,t){return F(t)?t.invert(N.recip(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ss(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.ln(n)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Cs(e,t){return F(t)?t.invert(N.pow10(e)):(console.error("Could not invert due to no input being a variable"),0)}function xs(e){return N.ln(e).sub(1).times(e).div(qn)}function Ms(e,t){if(F(t)){const n=qn.times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function $s(e,t){return F(t)?t.isIntegrable()?new m({inputs:[t.getIntegralFormula(e)],evaluate:xs,invert:Ms}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function Is(e,t,n){return F(t)?t.invert(N.pow(ue(n),e)):F(n)?n.invert(N.root(ue(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Rs(e,t){return N.ln(e).sub(1).times(e).div(N.ln(t))}function Ls(e,t,n){if(F(t)){const r=N.ln(ue(n)).times(e);return t.invert(r.div(r.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Fs(e,t,n){return F(t)?t.isIntegrable()?new m({inputs:[t.getIntegralFormula(e),n],evaluate:Rs,invert:Ls}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function Ps(e,t){return F(t)?t.invert(N.pow(2,e)):(console.error("Could not invert due to no input being a variable"),0)}function Ts(e){return N.ln(e).sub(1).times(e).div(N.ln(2))}function Os(e,t){if(F(t)){const n=N.ln(2).times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Es(e,t){return F(t)?t.isIntegrable()?new m({inputs:[t.getIntegralFormula(e)],evaluate:Ts,invert:Os}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function zs(e,t){return F(t)?t.invert(N.exp(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ds(e){return N.ln(e).sub(1).times(e)}function As(e,t){return F(t)?t.invert(N.div(e,N.div(e,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function js(e,t){return F(t)?t.isIntegrable()?new m({inputs:[t.getIntegralFormula(e)],evaluate:Ds,invert:As}):(console.error("Could not integrate due to variable not being integrable"),m.constant(0)):(console.error("Could not integrate due to no input being a variable"),m.constant(0))}function Vs(e,t,n){return F(t)?t.invert(N.root(e,ue(n))):F(n)?n.invert(N.ln(e).div(N.ln(ue(t)))):(console.error("Could not invert due to no input being a variable"),0)}function Bs(e,t,n){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(e),i=m.add(n,1);return m.pow(r,i).div(i)}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=n.getIntegralFormula(e);return m.pow(t,r).div(m.ln(t))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function qs(e,t){return F(t)?t.invert(N.root(e,10)):(console.error("Could not invert due to no input being a variable"),0)}function Us(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.pow10(n).div(m.ln(10))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Zs(e,t,n){return F(t)?t.invert(N.ln(e).div(N.ln(ue(n)))):F(n)?n.invert(N.root(ue(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function Ws(e,t,n){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(e);return m.pow(n,r).div(m.ln(n))}else if(F(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=n.getIntegralFormula(e),i=m.add(t,1);return m.pow(r,i).div(i)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Gs(e,t,n){return F(t)?t.invert(N.root(e,N.recip(ue(n)))):F(n)?n.invert(N.ln(ue(t)).div(N.ln(e))):(console.error("Could not invert due to no input being a variable"),0)}function Hs(e,t,n){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const r=t.getIntegralFormula(e);return m.pow(r,m.recip(n).add(1)).times(n).div(m.add(n,1))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Ys(e,t){return F(t)?t.invert(N.ln(e)):(console.error("Could not invert due to no input being a variable"),0)}function Js(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.exp(n)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Ks(e,t=2,n=N.fromComponents_noNormalize(1,0,1)){const r=N.minabs(t,1e308).toNumber();return N.tetrate(e,r,n)}function Xs(e,t,n,r){return F(t)?t.invert(N.ssqrt(e)):(console.error("Could not invert due to no input being a variable"),0)}function Qs(e,t=2,n=N.fromComponents_noNormalize(1,0,1)){const r=N.minabs(t,1e308).toNumber();return N.iteratedexp(e,r,new N(n))}function eo(e,t,n,r){return F(t)?t.invert(N.iteratedlog(e,Math.E,N.minabs(1e308,ue(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function to(e,t=10,n=2){const r=N.minabs(n,1e308).toNumber();return N.iteratedlog(e,t,r)}function no(e,t=10){const n=N.minabs(t,1e308).toNumber();return N.slog(e,n)}function ro(e,t,n){return F(t)?t.invert(N.tetrate(e,N.minabs(1e308,ue(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function io(e,t,n){const r=N.minabs(t,1e308).toNumber();return N.layeradd(e,r,n)}function so(e,t,n,r){return F(t)?t.invert(N.layeradd(e,N.minabs(1e308,ue(n)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function oo(e,t){return F(t)?t.invert(N.pow(Math.E,e).times(e)):(console.error("Could not invert due to no input being a variable"),0)}function ao(e,t){return F(t)?t.invert(N.tetrate(e,2)):(console.error("Could not invert due to no input being a variable"),0)}function lo(e,t,n){const r=N.minabs(t,1e308).toNumber();return N.pentate(e,r,n)}function uo(e,t){return F(t)?t.invert(N.asin(e)):(console.error("Could not invert due to no input being a variable"),0)}function co(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.cos(n).neg()}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function fo(e,t){return F(t)?t.invert(N.acos(e)):(console.error("Could not invert due to no input being a variable"),0)}function go(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.sin(n)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function po(e,t){return F(t)?t.invert(N.atan(e)):(console.error("Could not invert due to no input being a variable"),0)}function vo(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.cos(n).ln().neg()}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function mo(e,t){return F(t)?t.invert(N.sin(e)):(console.error("Could not invert due to no input being a variable"),0)}function ho(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.asin(n).times(n).add(m.sqrt(m.sub(1,m.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function bo(e,t){return F(t)?t.invert(N.cos(e)):(console.error("Could not invert due to no input being a variable"),0)}function yo(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.acos(n).times(n).sub(m.sqrt(m.sub(1,m.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function _o(e,t){return F(t)?t.invert(N.tan(e)):(console.error("Could not invert due to no input being a variable"),0)}function No(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.atan(n).times(n).sub(m.ln(m.pow(n,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ko(e,t){return F(t)?t.invert(N.asinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function wo(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.cosh(n)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function So(e,t){return F(t)?t.invert(N.acosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Co(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.sinh(n)}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function xo(e,t){return F(t)?t.invert(N.atanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Mo(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.cosh(n).ln()}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function $o(e,t){return F(t)?t.invert(N.sinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Io(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.asinh(n).times(n).sub(m.pow(n,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Ro(e,t){return F(t)?t.invert(N.cosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Lo(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.acosh(n).times(n).sub(m.add(n,1).sqrt().times(m.sub(n,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function Fo(e,t){return F(t)?t.invert(N.tanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Po(e,t){if(F(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),m.constant(0);const n=t.getIntegralFormula(e);return m.atanh(n).times(n).add(m.sub(1,m.pow(n,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),m.constant(0)}function ft(e){return(t,n)=>new m({inputs:[t,n],evaluate:e,invert:pt})}function F(e){return e instanceof ae&&e.hasVariable()}function ue(e,t){return e instanceof ae?e.evaluate(t):u(e)}function To(){return m.pow(this,2).div(2)}function Oo(){return this}const fe=class{constructor(e){this.negate=this.neg,this.negated=this.neg,this.sgn=this.sign,this.plus=this.add,this.subtract=this.sub,this.minus=this.sub,this.multiply=this.mul,this.times=this.mul,this.divide=this.div,this.divideBy=this.div,this.dividedBy=this.div,this.reciprocal=this.recip,this.reciprocate=this.recip,this.logarithm=this.log;let t;"inputs"in e&&(e.inputs=e.inputs.map(n=>typeof n=="object"&&Xe in n?n[Xe]:n)),"variable"in e?(typeof e.variable=="object"&&Xe in e.variable&&(e.variable=e.variable[Xe]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:To,internalIntegrateInner:Oo,applySubstitution:pt}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){var f,d;const{inputs:t,evaluate:n,invert:r,integrate:i,integrateInner:a,applySubstitution:s}=e,o=t.reduce((g,v)=>g+(v instanceof fe?v.internalVariables:0),0),l=t.find(g=>g instanceof fe&&g.hasVariable()),c=o===1?l==null?void 0:l.innermostVariable:void 0,p=(f=l==null?void 0:l.isInvertible())!=null?f:!1,h=(d=l==null?void 0:l.isIntegrable())!=null?d:!1;return{inputs:t,internalEvaluate:n,internalInvert:p?r:void 0,internalIntegrate:h?i:void 0,internalIntegrateInner:a,applySubstitution:s,innermostVariable:c,internalVariables:o}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t,n,r;return(r=(n=(t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>ue(i,e))))!=null?n:this.hasVariable()?e:null)!=null?r:ue(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,n)=>t instanceof fe&&e.inputs[n]instanceof fe?t.equals(e.inputs[n]):!(t instanceof fe)&&!(e.inputs[n]instanceof fe)&&N.eq(u(t),u(e.inputs[n])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new m({inputs:[e]})}static variable(e){return new m({variable:e})}static step(e,t,n){const r=n(m.variable(0)),i=Nn(t);function a(o){return N.lt(o,u(i))?o:N.add(r.evaluate(N.sub(o,u(i))),u(i))}function s(o,l){return F(l)&&r.isInvertible()?(N.gt(o,u(i))&&(o=N.add(r.invert(N.sub(o,u(i))),u(i))),l.invert(o)):(console.error("Could not invert due to no input being a variable"),0)}return new m({inputs:[e],evaluate:a,invert:r.isInvertible()&&r.hasVariable()?s:void 0})}static if(e,t,n,r){const i=q(0),a=m.variable(i),s=n(a),o=r==null?void 0:r(a),l=Nn(t);function c(h){return u(l)?(i.value=h,s.evaluate()):o?(i.value=h,o.evaluate()):h}function p(h,f){return!F(f)||!s.isInvertible()||o!=null&&!o.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):u(l)?f.invert(s.invert(h)):o?f.invert(o.invert(h)):f.invert(h)}return new m({inputs:[e],evaluate:c,invert:s.isInvertible()&&s.hasVariable()?p:void 0})}static conditional(e,t,n,r){return m.if(e,t,n,r)}static abs(e){return new m({inputs:[e],evaluate:N.abs})}static neg(e){return new m({inputs:[e],evaluate:N.neg,invert:ls,applySubstitution:cs,integrate:us})}static sign(e){return new m({inputs:[e],evaluate:N.sign})}static round(e){return new m({inputs:[e],evaluate:N.round})}static floor(e){return new m({inputs:[e],evaluate:N.floor})}static ceil(e){return new m({inputs:[e],evaluate:N.ceil})}static trunc(e){return new m({inputs:[e],evaluate:N.trunc})}static add(e,t){return new m({inputs:[e,t],evaluate:N.add,invert:ds,integrate:fs,integrateInner:gs,applySubstitution:pt})}static sub(e,t){return new m({inputs:[e,t],evaluate:N.sub,invert:ps,integrate:vs,integrateInner:ms,applySubstitution:pt})}static mul(e,t){return new m({inputs:[e,t],evaluate:N.mul,invert:hs,integrate:bs,applySubstitution:ys})}static div(e,t){return new m({inputs:[e,t],evaluate:N.div,invert:_s,integrate:Ns,applySubstitution:ks})}static recip(e){return new m({inputs:[e],evaluate:N.recip,invert:ws,integrate:Ss})}static clamp(e,t,n){return new m({inputs:[e,t,n],evaluate:N.clamp,invert:pt})}static pLog10(e){return new m({inputs:[e],evaluate:N.pLog10})}static absLog10(e){return new m({inputs:[e],evaluate:N.absLog10})}static log10(e){return new m({inputs:[e],evaluate:N.log10,invert:Cs,integrate:$s})}static log(e,t){return new m({inputs:[e,t],evaluate:N.log,invert:Is,integrate:Fs})}static log2(e){return new m({inputs:[e],evaluate:N.log2,invert:Ps,integrate:Es})}static ln(e){return new m({inputs:[e],evaluate:N.ln,invert:zs,integrate:js})}static pow(e,t){return new m({inputs:[e,t],evaluate:N.pow,invert:Vs,integrate:Bs})}static pow10(e){return new m({inputs:[e],evaluate:N.pow10,invert:qs,integrate:Us})}static pow_base(e,t){return new m({inputs:[e,t],evaluate:N.pow_base,invert:Zs,integrate:Ws})}static root(e,t){return new m({inputs:[e,t],evaluate:N.root,invert:Gs,integrate:Hs})}static factorial(e){return new m({inputs:[e],evaluate:N.factorial})}static gamma(e){return new m({inputs:[e],evaluate:N.gamma})}static lngamma(e){return new m({inputs:[e],evaluate:N.lngamma})}static exp(e){return new m({inputs:[e],evaluate:N.exp,invert:Ys,integrate:Js})}static sqr(e){return m.pow(e,2)}static sqrt(e){return m.root(e,2)}static cube(e){return m.pow(e,3)}static cbrt(e){return m.root(e,3)}static tetrate(e,t=2,n=N.fromComponents_noNormalize(1,0,1)){return new m({inputs:[e,t,n],evaluate:Ks,invert:Xs})}static iteratedexp(e,t=2,n=N.fromComponents_noNormalize(1,0,1)){return new m({inputs:[e,t,n],evaluate:Qs,invert:eo})}static iteratedlog(e,t=10,n=1){return new m({inputs:[e,t,n],evaluate:to})}static slog(e,t=10){return new m({inputs:[e,t],evaluate:no,invert:ro})}static layeradd10(e,t){return new m({inputs:[e,t],evaluate:N.layeradd10})}static layeradd(e,t,n=10){return new m({inputs:[e,t,n],evaluate:io,invert:so})}static lambertw(e){return new m({inputs:[e],evaluate:N.lambertw,invert:oo})}static ssqrt(e){return new m({inputs:[e],evaluate:N.ssqrt,invert:ao})}static pentate(e,t=2,n=N.fromComponents_noNormalize(1,0,1)){return new m({inputs:[e,t,n],evaluate:lo})}static sin(e){return new m({inputs:[e],evaluate:N.sin,invert:mo,integrate:co})}static cos(e){return new m({inputs:[e],evaluate:N.cos,invert:bo,integrate:go})}static tan(e){return new m({inputs:[e],evaluate:N.tan,invert:_o,integrate:vo})}static asin(e){return new m({inputs:[e],evaluate:N.asin,invert:uo,integrate:ho})}static acos(e){return new m({inputs:[e],evaluate:N.acos,invert:fo,integrate:yo})}static atan(e){return new m({inputs:[e],evaluate:N.atan,invert:po,integrate:No})}static sinh(e){return new m({inputs:[e],evaluate:N.sinh,invert:$o,integrate:wo})}static cosh(e){return new m({inputs:[e],evaluate:N.cosh,invert:Ro,integrate:Co})}static tanh(e){return new m({inputs:[e],evaluate:N.tanh,invert:Fo,integrate:Mo})}static asinh(e){return new m({inputs:[e],evaluate:N.asinh,invert:ko,integrate:Io})}static acosh(e){return new m({inputs:[e],evaluate:N.acosh,invert:So,integrate:Lo})}static atanh(e){return new m({inputs:[e],evaluate:N.atanh,invert:xo,integrate:Po})}step(e,t){return m.step(this,e,t)}if(e,t){return m.if(this,e,t)}conditional(e,t){return m.if(this,e,t)}abs(){return m.abs(this)}neg(){return m.neg(this)}sign(){return m.sign(this)}round(){return m.round(this)}floor(){return m.floor(this)}ceil(){return m.ceil(this)}trunc(){return m.trunc(this)}add(e){return m.add(this,e)}sub(e){return m.sub(this,e)}mul(e){return m.mul(this,e)}div(e){return m.div(this,e)}recip(){return m.recip(this)}max(e){return m.max(this,e)}min(e){return m.min(this,e)}maxabs(e){return m.maxabs(this,e)}minabs(e){return m.minabs(this,e)}clamp(e,t){return m.clamp(this,e,t)}clampMin(e){return m.clampMin(this,e)}clampMax(e){return m.clampMax(this,e)}pLog10(){return m.pLog10(this)}absLog10(){return m.absLog10(this)}log10(){return m.log10(this)}log(e){return m.log(this,e)}log2(){return m.log2(this)}ln(){return m.ln(this)}pow(e){return m.pow(this,e)}pow10(){return m.pow10(this)}pow_base(e){return m.pow_base(this,e)}root(e){return m.root(this,e)}factorial(){return m.factorial(this)}gamma(){return m.gamma(this)}lngamma(){return m.lngamma(this)}exp(){return m.exp(this)}sqr(){return m.pow(this,2)}sqrt(){return m.root(this,2)}cube(){return m.pow(this,3)}cbrt(){return m.root(this,3)}tetrate(e=2,t=N.fromComponents_noNormalize(1,0,1)){return m.tetrate(this,e,t)}iteratedexp(e=2,t=N.fromComponents_noNormalize(1,0,1)){return m.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return m.iteratedlog(this,e,t)}slog(e=10){return m.slog(this,e)}layeradd10(e){return m.layeradd10(this,e)}layeradd(e,t){return m.layeradd(this,e,t)}lambertw(){return m.lambertw(this)}ssqrt(){return m.ssqrt(this)}pentate(e=2,t=N.fromComponents_noNormalize(1,0,1)){return m.pentate(this,e,t)}sin(){return m.sin(this)}cos(){return m.cos(this)}tan(){return m.tan(this)}asin(){return m.asin(this)}acos(){return m.acos(this)}atan(){return m.atan(this)}sinh(){return m.sinh(this)}cosh(){return m.cosh(this)}tanh(){return m.tanh(this)}asinh(){return m.asinh(this)}acosh(){return m.acosh(this)}atanh(){return m.atanh(this)}};let ae=fe;ae.negate=fe.neg;ae.negated=fe.neg;ae.sgn=fe.sign;ae.plus=fe.add;ae.subtract=fe.sub;ae.minus=fe.sub;ae.multiply=fe.mul;ae.times=fe.mul;ae.divide=fe.div;ae.divideBy=fe.div;ae.dividedBy=fe.div;ae.reciprocal=fe.recip;ae.reciprocate=fe.recip;ae.max=ft(N.max);ae.min=ft(N.min);ae.minabs=ft(N.minabs);ae.maxabs=ft(N.maxabs);ae.clampMin=ft(N.clampMin);ae.clampMax=ft(N.clampMax);ae.logarithm=fe.log;class m extends ae{invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),n=N.add(this.evaluate(0),this.evaluate(1)).div(2);return N.sub(n,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),m.constant(0);let n=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(r=>n=r(n)),this.integralFormula=n}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),m.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),m.constant(0)):(t.push(n=>this.applySubstitution.call(this,n,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),m.constant(0)))}}const lt=Symbol("PersistentState"),Nt=Symbol("DefaultValue"),Ot=Symbol("StackTrace"),Et=Symbol("Deleted"),Xe=Symbol("NonPersistent"),Qe=Symbol("SaveDataPath"),Eo=Symbol("SkipPersistence");function zo(){var e,t;return(t=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(n=>n.trim()).join(`
`))!=null?t:""}function kn(e,t){var n;N.isNaN(t)&&(le.hasNaN||(K.autosave=!1,le.hasNaN=!0,le.NaNPath=e[Qe],le.NaNPersistent=e),console.error(`Attempted to save NaN value to ${(n=e[Qe])==null?void 0:n.join(".")}`)),e[lt].value=t}function kt(e,t=!0){const n=Te(e)?e:q(e);Te(e)&&(e=e.value);const r=w({get(){return n.value},set(a){t?kn(i,a):i[lt].value=a}});r[Nt]=e;const i={get value(){return n.value},set value(a){t?kn(i,a):i[lt].value=a},__v_isRef:!0,[lt]:n,[Nt]:e,[Ot]:zo(),[Et]:!1,[Xe]:r,[Qe]:void 0};return we.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",i,`
Created at:
`+i[Ot]):nt[we[we.length-1]].add(i),i}function Do(e){return e!=null&&typeof e=="object"&&lt in e}function Ao(e){we.length===0?console.warn("Deleting a persistent ref outside of a layer. Ignoring...",e):nt[we[we.length-1]].delete(e),e[Et]=!0}Ne.on("addLayer",(e,t)=>{const n=[],r=(i,a=[])=>{let s=!1;return Object.keys(i).forEach(o=>{let l=i[o];if(l!=null&&typeof l=="object"){if(l[Eo]===!0)return;if(Je in l&&(l=l[Je]),Do(l)){if(s=!0,l[Et]){console.warn("Deleted persistent ref present in returned object. Ignoring...",l,`
Created at:
`+l[Ot]);return}nt[e.id].delete(l);const c=[e.id,...a,o];l[Qe]!=null&&JSON.stringify(c)!==JSON.stringify(l[Qe])&&console.error(`Persistent ref is being saved to \`${c.join(".")}\` when it's already present at \`${l[Qe].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),l[Qe]=c;const p=a.reduce((f,d)=>(d in f||(f[d]={}),f[d]),t),h=p[o];p[o]=l[lt],mr(p)?h!=null?p[o]=h:p[o]=l[Nt]:h!=null?p[o].value=h:p[o].value=l[Nt]}else!(l instanceof N)&&!(l instanceof m)&&!Te(l)&&!n.includes(l)&&(typeof l.type=="symbol"&&n.push(l),r(l,[...a,o])&&(pn(l)&&!pn(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",Je in i?i[Je]:i,o):s=!0))}}),s};r(e[Je]),nt[e.id].forEach(i=>{i[Et]||console.error(`Created persistent ref in ${e.id} without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+i[Ot])}),nt[e.id].clear()});const sn=Symbol("RegisterNode"),on=Symbol("UnregisterNode"),Un=Symbol("Nodes"),Zn=Symbol("Bounds"),ke=Dt({});window.layers=ke;const nt={},we=[];function Wn(e,t){return Ie(()=>{const n={},r=n.emitter=Mn();if(n.on=r.on.bind(r),n.emit=r.emit.bind(r),n.nodes=q({}),n.id=e,we.push(e),nt[e]=new Set,n.minimized=kt(!1,!1),Object.assign(n,t.call(n,n)),we[we.length-1]==null||we[we.length-1]!==e)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${we}
Trying to pop ${n.id}`);we.pop(),W(n,"color"),W(n,"display"),W(n,"classes"),W(n,"style"),W(n,"name"),pe(n,"name",n.id),W(n,"minWidth"),pe(n,"minWidth",600),W(n,"minimizable"),pe(n,"minimizable",!0),W(n,"minimizedDisplay");const i=n.style;return n.style=w(()=>{var s,o;let a=u(n.minWidth);return(typeof a=="number"||!Number.isNaN(parseInt(a)))&&(a=a+"px"),[(s=u(i))!=null?s:"",(o=n.minimized)!=null&&o.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:a,flexBasis:a,margin:""}]}),n})}function Gn(e,t){if(console.info("Adding layer",e.id),ke[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,ke[e.id]);return}pe(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),ke[e.id]=e,Ne.emit("addLayer",e,t.layers[e.id])}function jo(e){return ke[e]}function Hn(e){console.info("Removing layer",e.id),Ne.emit("removeLayer",e),ke[e.id]=void 0}function Vo(e){Hn(e),Gn(e,K)}function Bo(e){const t=q(!1);return{openModal:()=>t.value=!0,modal:Se(()=>L(rt,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>L("h2",null,[u(e.name)]),body:u(e.display)}))}}Ne.on("update",function(t){Object.values(ke).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(ke).forEach(n=>{n==null||n.emit("update",t)}),Object.values(ke).forEach(n=>{n==null||n.emit("postUpdate",t)})});var qo=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:sn,UnregisterNodeInjectionKey:on,NodesInjectionKey:Un,BoundsInjectionKey:Zn,layers:ke,persistentRefs:nt,addingLayers:we,createLayer:Wn,addLayer:Gn,getLayer:jo,removeLayer:Hn,reloadLayer:Vo,setupLayerModal:Bo},Symbol.toStringTag,{value:"Module"}));const Uo=A({components:{Context:Bn,ErrorVue:Ln},props:{index:{type:Number,required:!0},display:{type:Pe(Object,String,Function),required:!0},minimizedDisplay:Pe(Object,String,Function),minimized:{type:Object,required:!0},name:{type:Pe(String),required:!0},color:Pe(String),minimizable:Pe(Boolean),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:t,index:n,minimized:r,minimizedDisplay:i}=xe(e),a=Xi(t),s=qt(i),o=w(()=>te.allowGoBack&&n.value>0&&!tt(r));function l(){K.tabs.splice(u(e.index),1/0)}function c(h){e.nodes.value=h}const p=q([]);return hr((h,f,d)=>(console.warn(`Error caught in "${e.name}" layer`,h,f,d),p.value.push(h instanceof Error?h:new Error(JSON.stringify(h))),!1)),{component:a,minimizedComponent:s,showGoBack:o,updateNodes:c,unref:u,goBack:l,errors:p}}}),Zo={key:1};function Wo(e,t,n,r,i,a){const s=Jt("ErrorVue"),o=Jt("Context");return e.errors.length>0?(_(),z(s,{key:0,errors:e.errors},null,8,["errors"])):(_(),C("div",We({key:1,class:"layer-container",style:{"--layer-color":e.unref(e.color)}},e.$attrs),[e.showGoBack?(_(),C("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...l)=>e.goBack&&e.goBack(...l))},"\u274C")):T("",!0),e.unref(e.minimized)?(_(),C("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=l=>e.$emit("setMinimized",!1))},[e.minimizedComponent?(_(),z(oe(e.minimizedComponent),{key:0})):(_(),C("div",Zo,U(e.unref(e.name)),1))])):(_(),C("div",{key:2,class:re(["layer-tab",{showGoBack:e.showGoBack}])},[L(o,{onUpdateNodes:e.updateNodes},{default:B(()=>[(_(),z(oe(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(_(),C("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=l=>e.$emit("setMinimized",!0))}," \u25BC ")):T("",!0)],16))}var Go=G(Uo,[["render",Wo],["__scopeId","data-v-217346d2"]]);const Yn=e=>(Re("data-v-4b4bda40"),e=e(),Le(),e),Ho=Yn(()=>b("h2",null,"Changelog",-1)),Yo=Yn(()=>b("details",{open:""},[b("summary",null,[Y("v0.0 Initial Commit - "),b("time",null,"2021-09-04")]),Y(" This is the first release :D "),b("ul",null,[b("li",{class:"feature"},"Did everything"),b("li",{class:"fix"},"Had some fun"),b("li",{class:"breaking"},"Removed everything"),b("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),Jo=A({__name:"Changelog",setup(e,{expose:t}){const n=q(!1);return t({open(){n.value=!0}}),(r,i)=>(_(),z(rt,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=a=>n.value=a)},{header:B(()=>[Ho]),body:B(()=>[Yo]),_:1},8,["modelValue"]))}});var Ko=G(Jo,[["__scopeId","data-v-4b4bda40"]]),Xo=A({props:{element:Object,display:{type:Pe(Object,String,Function),required:!0},style:Pe(Object,String,Array),classes:Pe(Object),direction:Pe(String),xoffset:Pe(String),yoffset:Pe(String),pinned:Object},setup(e){const{element:t,display:n,pinned:r}=xe(e),i=q(!1),a=w(()=>(tt(r)||i.value)&&s.value),s=qt(n),o=St(ye(Se(()=>{const p=tt(t);return p==null?"":Ki(p)})));function l(p){const h=r;p.shiftKey&&h&&(h.value=!h.value,p.stopPropagation(),p.preventDefault())}const c=w(()=>tt(r)&&Oe[ne.theme].showPin);return{Direction:H,isHovered:i,isShown:a,comp:s,elementComp:o,unref:u,togglePinned:l,showPin:c}}});const Qo={key:0,class:"material-icons pinned"};function ea(e,t,n,r,i,a){return _(),C("div",{class:re(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=s=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=s=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...s)=>e.togglePinned&&e.togglePinned(...s))},[ze(e.$slots,"default",{},void 0,!0),e.elementComp?(_(),z(oe(e.elementComp),{key:0})):T("",!0),L(ht,{name:"fade"},{default:B(()=>{var s;return[e.isShown?(_(),C("div",{key:0,class:re(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:ie([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(s=e.unref(e.style))!=null?s:{}])},[e.showPin?(_(),C("span",Qo,"push_pin")):T("",!0),e.comp?(_(),z(oe(e.comp),{key:1})):T("",!0)],6)):T("",!0)]}),_:1})],34)}var me=G(Xo,[["render",ea],["__scopeId","data-v-6102fa3a"]]);const it=e=>(Re("data-v-4f97aa40"),e=e(),Le(),e),ta={class:"info-modal-header"},na=["src","alt"],ra={class:"info-modal-title"},ia={key:0},sa={key:0},oa={key:0},aa=it(()=>b("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),la=it(()=>b("br",null,null,-1)),ua=it(()=>b("br",null,null,-1)),ca=["href"],da=it(()=>b("span",{class:"material-icons info-modal-discord"},"discord",-1)),fa=it(()=>b("div",null,[b("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[b("span",{class:"material-icons info-modal-discord"},"discord"),Y(" The Paper Pilot Community ")])],-1)),ga=it(()=>b("div",null,[b("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[b("span",{class:"material-icons info-modal-discord"},"discord"),Y(" The Modding Tree ")])],-1)),pa=it(()=>b("br",null,null,-1));var va=A({__name:"Info",props:{changelog:{}},setup(e,{expose:t}){const n=e,{title:r,logo:i,author:a,discordName:s,discordLink:o,versionNumber:l,versionTitle:c}=te,p=xe(n),h=q(!1),f=w(()=>tn(K.timePlayed)),d=w(()=>ye(Se(()=>L(X,null,[jn.map(et)]))));t({open(){h.value=!0}});function g(){var v;(v=u(p.changelog))==null||v.open()}return(v,S)=>(_(),z(rt,{modelValue:h.value,"onUpdate:modelValue":S[0]||(S[0]=M=>h.value=M)},{header:B(()=>[b("div",ta,[u(i)?(_(),C("img",{key:0,class:"info-modal-logo",src:u(i),alt:u(r)},null,8,na)):T("",!0),b("div",ra,[b("h2",null,U(u(r)),1),b("h4",null,[Y(" v"+U(u(l)),1),u(c)?(_(),C("span",ia,": "+U(u(c)),1)):T("",!0)])])])]),body:B(({shown:M})=>[M?(_(),C("div",sa,[u(a)?(_(),C("div",oa,"By "+U(u(a)),1)):T("",!0),aa,la,b("div",{class:"link",onClick:g},"Changelog"),ua,b("div",null,[u(o)?(_(),C("a",{key:0,href:u(o),class:"info-modal-discord-link",target:"_blank"},[da,Y(" "+U(u(s)),1)],8,ca)):T("",!0)]),fa,ga,pa,b("div",null,"Time Played: "+U(f.value),1),(_(),z(oe(d.value)))])):T("",!0)]),_:1},8,["modelValue"]))}});var ma=G(va,[["__scopeId","data-v-4f97aa40"]]);const ha={class:"field"},ba={key:0,class:"field-title"},Jn=A({__name:"Select",props:{title:{type:[String,Object,Function]},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var s;const n=e,r=qt(Ge(n,"title"),"span"),i=q((s=n.options.find(o=>o.value===n.modelValue))!=null?s:null);Ve(Ge(n,"modelValue"),o=>{var l;tt(i)!==o&&(i.value=(l=n.options.find(c=>c.value===o))!=null?l:null)});function a(o){t("update:modelValue",o.value)}return(o,l)=>(_(),C("div",ha,[u(r)?(_(),C("span",ba,[(_(),z(oe(u(r))))])):T("",!0),L(u(wr),{options:o.options,modelValue:i.value,"onUpdate:modelValue":[l[0]||(l[0]=c=>i.value=c),a],min:1,"label-by":"label",placeholder:o.placeholder,"close-on-select":o.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const ya={class:"field"},_a=A({__name:"Toggle",props:{title:{type:[String,Object,Function]},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=w(()=>{var a;return ye((a=u(n.title))!=null?a:"<span></span>","span")}),i=w({get(){return!!n.modelValue},set(a){t("update:modelValue",a)}});return(a,s)=>(_(),C("label",ya,[en(b("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o)},null,512),[[br,i.value]]),(_(),z(oe(r.value)))]))}});var Ue=G(_a,[["__scopeId","data-v-11046116"]]);const Na=["onClick"],ka=A({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=q(!1),r=q(null);function i(){t("click"),r.value&&clearTimeout(r.value),n.value=!1,mt(()=>{n.value=!0,r.value=setTimeout(()=>n.value=!1,500)})}return(a,s)=>(_(),C("button",{onClick:ct(i,["stop"]),class:re(["feedback",{activated:n.value,left:a.left}])},[ze(a.$slots,"default",{},void 0,!0)],10,Na))}});var Kn=G(ka,[["__scopeId","data-v-01a1b95c"]]);const wa={class:"header"},Sa=b("h2",null,"Settings",-1),Ca={class:"option-tabs"},xa={key:0},Ma={key:1};var $a=A({__name:"Options",setup(e,{expose:t}){const n=q(!1),r=q("behaviour");function i(O){return O==r.value}function a(O){r.value=O}t({isTab:i,setTab:a,save:Ce,open(){n.value=!0}});const s=Object.keys(Oe).map(O=>({label:Di(O),value:O})),o=w(()=>ye(Se(()=>L(X,null,[Wi.map(et)])))),{showTPS:l,theme:c,unthrottled:p,alignUnits:h}=xe(ne),{autosave:f}=xe(K),d=w({get(){return K.devSpeed===0},set(O){K.devSpeed=O?0:null}}),g=Se(()=>L("span",{class:"option-title"},[Y("Unthrottled"),L("desc",null,[Y("Allow the game to run as fast as possible. Not battery friendly.")])])),v=Se(()=>L("span",{class:"option-title"},[Y("Autosave"),L(me,{display:"Save-specific",direction:H.Right},{default:()=>[Y("*")]}),L("desc",null,[Y("Automatically save the game every second or when the game is closed.")])])),S=Se(()=>L("span",{class:"option-title"},[Y("Pause game"),L(me,{display:"Save-specific",direction:H.Right},{default:()=>[Y("*")]}),L("desc",null,[Y("Stop everything from moving.")])])),M=Se(()=>L("span",{class:"option-title"},[Y("Theme"),L("desc",null,[Y("How the game looks.")])])),y=Se(()=>L("span",{class:"option-title"},[Y("Show TPS"),L("desc",null,[Y("Show TPS meter at the bottom-left corner of the page.")])])),R=Se(()=>L("span",{class:"option-title"},[Y("Align modifier units"),L("desc",null,[Y("Align numbers to the beginning of the unit in modifier view.")])]));return(O,j)=>(_(),z(rt,{modelValue:n.value,"onUpdate:modelValue":j[9]||(j[9]=Q=>n.value=Q)},{header:B(()=>[b("div",wa,[Sa,b("div",Ca,[b("button",{class:re({selected:i("behaviour")}),onClick:j[0]||(j[0]=Q=>a("behaviour"))},"Behaviour",2),b("button",{class:re({selected:i("appearance")}),onClick:j[1]||(j[1]=Q=>a("appearance"))},"Appearance",2)])])]),body:B(()=>[i("behaviour")?(_(),C("div",xa,[L(Ue,{title:u(g),modelValue:u(p),"onUpdate:modelValue":j[2]||(j[2]=Q=>Te(p)?p.value=Q:null)},null,8,["title","modelValue"]),u(te).enablePausing?(_(),z(Ue,{key:0,title:u(S),modelValue:d.value,"onUpdate:modelValue":j[3]||(j[3]=Q=>d.value=Q)},null,8,["title","modelValue"])):T("",!0),L(Ue,{title:u(v),modelValue:u(f),"onUpdate:modelValue":j[4]||(j[4]=Q=>Te(f)?f.value=Q:null)},null,8,["title","modelValue"]),u(f)?T("",!0):(_(),z(Kn,{key:1,class:"button save-button",onClick:j[5]||(j[5]=Q=>u(Ce)())},{default:B(()=>[Y("Manually save")]),_:1}))])):T("",!0),i("appearance")?(_(),C("div",Ma,[L(Jn,{title:u(M),options:u(s),modelValue:u(c),"onUpdate:modelValue":j[6]||(j[6]=Q=>Te(c)?c.value=Q:null)},null,8,["title","options","modelValue"]),(_(),z(oe(o.value))),L(Ue,{title:u(y),modelValue:u(l),"onUpdate:modelValue":j[7]||(j[7]=Q=>Te(l)?l.value=Q:null)},null,8,["title","modelValue"]),L(Ue,{title:u(R),modelValue:u(h),"onUpdate:modelValue":j[8]||(j[8]=Q=>Te(h)?h.value=Q:null)},null,8,["title","modelValue"])])):T("",!0)]),_:1},8,["modelValue"]))}});const Ia=["onSubmit"],Ra={class:"field"},La={key:0,class:"field-title"},Fa=["placeholder"],Pa=A({__name:"Text",props:{title:{type:[String,Object,Function]},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,r=qt(Ge(n,"title"),"span"),i=St(null);Qt(()=>{var l;(l=i.value)==null||l.focus()});const a=w({get(){var l;return(l=u(n.modelValue))!=null?l:""},set(l){t("update:modelValue",l)}});function s(){t("submit")}function o(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(l,c)=>(_(),C("form",{onSubmit:ct(s,["prevent"])},[b("div",Ra,[u(r)?(_(),C("span",La,[(_(),z(oe(u(r))))])):T("",!0),l.textArea?(_(),z(u(Cr),{key:1,modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=p=>a.value=p),placeholder:l.placeholder,maxHeight:l.maxHeight,onBlur:o,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):en((_(),C("input",{key:2,type:"text","onUpdate:modelValue":c[1]||(c[1]=p=>a.value=p),placeholder:l.placeholder,class:re({fullWidth:!l.title}),onBlur:o,ref_key:"field",ref:i},null,42,Fa)),[[yr,a.value]])])],40,Ia))}});var Xn=G(Pa,[["__scopeId","data-v-90bd4994"]]);const Ta={key:0},Oa=["onClick","disabled"],Ea={key:0},za=["onClick"],Da=A({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const r=xe(e),i=q(!1);Ve(i,o=>{t("confirmingChanged",o)});function a(){if(u(r.skipConfirm)){t("click");return}i.value&&t("click"),i.value=!i.value}function s(){i.value=!1}return(o,l)=>(_(),C("span",{class:re(["container",{confirming:i.value}])},[i.value?(_(),C("span",Ta,"Are you sure?")):T("",!0),b("button",{onClick:ct(a,["stop"]),class:"button danger",disabled:o.disabled},[i.value?(_(),C("span",Ea,"Yes")):ze(o.$slots,"default",{key:1},void 0,!0)],8,Oa),i.value?(_(),C("button",{key:1,class:"button",onClick:ct(s,["stop"])},"No",8,za)):T("",!0)],2))}});var Aa=G(Da,[["__scopeId","data-v-87fc344c"]]);const Be=e=>(Re("data-v-d864a08c"),e=e(),Le(),e),ja=Be(()=>b("div",{class:"handle material-icons"},"drag_handle",-1)),Va={key:0,class:"actions"},Ba=Be(()=>b("span",{class:"material-icons"},"content_paste",-1)),qa=Be(()=>b("span",{class:"material-icons"},"content_copy",-1)),Ua=Be(()=>b("span",{class:"material-icons"},"edit",-1)),Za=Be(()=>b("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),Wa={key:1,class:"actions"},Ga=Be(()=>b("span",{class:"material-icons"},"check",-1)),Ha=Be(()=>b("span",{class:"material-icons"},"close",-1)),Ya={key:2,class:"details"},Ja={class:"save-version"},Ka=Be(()=>b("br",null,null,-1)),Xa={key:0},Qa={key:3,class:"details"},el={key:4,class:"details error"},tl=Be(()=>b("br",null,null,-1)),nl=A({__name:"Save",props:{save:{}},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:r}=xe(n),i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=q(!1),s=q(!1),o=q("");Ve(a,()=>{var h;return o.value=(h=r.value.name)!=null?h:""});const l=w(()=>r.value!=null&&r.value.id===K.id),c=w(()=>{var h;return l.value?K.time:(h=r.value!=null&&r.value.time)!=null?h:0});function p(){t("editName",o.value),a.value=!1}return(h,f)=>(_(),C("div",{class:re(["save",{active:l.value}])},[ja,a.value?(_(),C("div",Wa,[b("button",{onClick:p,class:"button"},[L(me,{display:"Save",direction:u(H).Left,class:"info"},{default:B(()=>[Ga]),_:1},8,["direction"])]),b("button",{onClick:f[5]||(f[5]=d=>a.value=!a.value),class:"button"},[L(me,{display:"Cancel",direction:u(H).Left,class:"info"},{default:B(()=>[Ha]),_:1},8,["direction"])])])):(_(),C("div",Va,[u(r).error==null&&!s.value?(_(),z(Kn,{key:0,onClick:f[0]||(f[0]=d=>t("export")),class:"button",left:""},{default:B(()=>[L(me,{display:"Export",direction:u(H).Left,class:"info"},{default:B(()=>[Ba]),_:1},8,["direction"])]),_:1})):T("",!0),u(r).error==null&&!s.value?(_(),C("button",{key:1,onClick:f[1]||(f[1]=d=>t("duplicate")),class:"button"},[L(me,{display:"Duplicate",direction:u(H).Left,class:"info"},{default:B(()=>[qa]),_:1},8,["direction"])])):T("",!0),u(r).error==null&&!s.value?(_(),C("button",{key:2,onClick:f[2]||(f[2]=d=>a.value=!a.value),class:"button"},[L(me,{display:"Edit Name",direction:u(H).Left,class:"info"},{default:B(()=>[Ua]),_:1},8,["direction"])])):T("",!0),L(Aa,{disabled:l.value,onClick:f[3]||(f[3]=d=>t("delete")),onConfirmingChanged:f[4]||(f[4]=d=>s.value=d)},{default:B(()=>[L(me,{display:"Delete",direction:u(H).Left,class:"info"},{default:B(()=>[Za]),_:1},8,["direction"])]),_:1},8,["disabled"])])),u(r).error==null&&!a.value?(_(),C("div",Ya,[b("button",{class:"button open",onClick:f[6]||(f[6]=d=>t("open"))},[b("h3",null,U(u(r).name),1)]),b("span",Ja,"v"+U(u(r).modVersion),1),Ka,c.value?(_(),C("div",Xa,"Last played "+U(u(i).format(c.value)),1)):T("",!0)])):u(r).error==null&&a.value?(_(),C("div",Qa,[L(Xn,{modelValue:o.value,"onUpdate:modelValue":f[7]||(f[7]=d=>o.value=d),class:"editname",onSubmit:p},null,8,["modelValue"])])):(_(),C("div",el,[Y(" Error: Failed to load save with id "+U(u(r).id),1),tl,Y(U(u(r).error),1)]))],2))}});var rl=G(nl,[["__scopeId","data-v-d864a08c"]]);const an=e=>(Re("data-v-2a4275be"),e=e(),Le(),e),il=an(()=>b("h2",null,"Saves Manager",-1)),sl={class:"modal-footer"},ol={class:"field"},al=an(()=>b("span",{class:"field-title"},"Create Save",-1)),ll={class:"field-buttons"},ul={class:"footer"},cl=an(()=>b("div",{style:{"flex-grow":"1"}},null,-1)),dl=A({__name:"SavesManager",setup(e,{expose:t}){const n=q(!1),r=q(null);t({open(){n.value=!0}});const i=q(!1),a=q(""),s=q(null);Ve(a,y=>{y?mt(()=>{try{if(y[0]!=="{")if(y[0]==="e")y=decodeURIComponent(escape(atob(y)));else if(y[0]==="\u1BE1")y=Ze.decompressFromUTF16(y);else{console.warn("Unable to determine preset encoding",y),i.value=!0;return}const R=JSON.parse(y);if(typeof R!="object"){i.value=!0;return}const O=$t();R.id=O,Ce(R),a.value="",i.value=!1,ne.saves.push(O)}catch{i.value=!0}}):i.value=!1});let o={},l=q(Object.keys(o).reduce((y,R)=>(y.push({label:R.split("/").slice(-1)[0].slice(0,-4),value:o[R]}),y),[]));const c=Dt({});function p(y){if(c[y]==null){let R=localStorage.getItem(y);if(R==null)c[y]={error:"Save doesn't exist in localStorage",id:y};else if(R==="dW5kZWZpbmVk")c[y]={error:"Save is undefined",id:y};else try{if(R[0]!=="{")if(R[0]==="e")R=decodeURIComponent(escape(atob(R)));else if(R[0]==="\u1BE1")R=Ze.decompressFromUTF16(R);else return console.warn("Unable to determine preset encoding",R),i.value=!0,c[y]={error:"Unable to determine preset encoding",id:y},c[y];c[y]={...JSON.parse(R),id:y}}catch(O){c[y]={error:O,id:y},console.warn(`SavesManager: Failed to load info about save with id ${y}:
${O}
${R}`)}}return c[y]}Ve(n,y=>{y&&Object.keys(c).forEach(R=>delete c[R])});const h=w(()=>ne.saves.reduce((y,R)=>(y[R]=p(R),y),{}));function f(y){let R;switch(K.id===y?R=In(K):R=JSON.stringify(h.value[y]),te.exportEncoding){default:console.warn(`Unknown save encoding: ${te.exportEncoding}. Defaulting to lz`);case"lz":R=Ze.compressToUTF16(R);break;case"base64":R=btoa(unescape(encodeURIComponent(R)));break;case"plain":break}const O=document.createElement("textarea");O.value=R,document.body.appendChild(O),O.select(),O.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(O)}function d(y){K.id===y&&Ce();const R={...h.value[y],id:$t()};Ce(R),ne.saves.push(R.id)}function g(y){ne.saves=ne.saves.filter(R=>R!==y),localStorage.removeItem(y),c[y]=void 0}function v(y){h.value[K.id].time=K.time,Ce(),c[K.id]=void 0,Ke(h.value[y]),c[y]=void 0}function S(y){if(s.value=y,mt(()=>{s.value=null}),y[0]!=="{")if(y[0]==="e")y=decodeURIComponent(escape(atob(y)));else if(y[0]==="\u1BE1")y=Ze.decompressFromUTF16(y);else{console.warn("Unable to determine preset encoding",y);return}const R=JSON.parse(y);R.id=$t(),Ce(R),ne.saves.push(R.id),v(R.id)}function M(y,R){const O=h.value[y];O!=null&&(O.name=R,K.id===y?(K.name=R,Ce()):(Ce(O),c[y]=void 0))}return(y,R)=>(_(),z(rt,{modelValue:n.value,"onUpdate:modelValue":R[4]||(R[4]=O=>n.value=O),ref_key:"modal",ref:r},{header:B(()=>[il]),body:B(({shown:O})=>[O?(_(),z(u(Sr),{key:0,list:u(ne).saves,handle:".handle",itemKey:j=>j},{item:B(({element:j})=>[L(rl,{save:h.value[j],onOpen:Q=>v(j),onExport:Q=>f(j),onEditName:Q=>M(j,Q),onDuplicate:Q=>d(j),onDelete:Q=>g(j)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):T("",!0)]),footer:B(()=>[b("div",sl,[L(Xn,{modelValue:a.value,"onUpdate:modelValue":R[0]||(R[0]=O=>a.value=O),title:"Import Save",placeholder:"Paste your save here!",class:re({importingFailed:i.value})},null,8,["modelValue","class"]),b("div",ol,[al,b("div",ll,[b("button",{class:"button",onClick:R[1]||(R[1]=O=>v(u(at)().id))},"New Game"),Object.keys(u(l)).length>0?(_(),z(Jn,{key:0,options:u(l),modelValue:s.value,"onUpdate:modelValue":R[2]||(R[2]=O=>S(O)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):T("",!0)])]),b("div",ul,[cl,b("button",{class:"button modal-default-button",onClick:R[3]||(R[3]=O=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var Qn=G(dl,[["__scopeId","data-v-2a4275be"]]);const Fe=e=>(Re("data-v-106a74bf"),e=e(),Le(),e),fl=["src","alt"],gl={key:1,class:"title"},pl={style:{"flex-grow":"1",cursor:"unset"}},vl={key:0,style:{"text-shadow":"5px 0 10px var(--link), -3px 0 12px var(--foreground)"}},ml={class:"discord"},hl={class:"discord-links"},bl={key:0},yl=["href"],_l=Fe(()=>b("li",null,[b("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"The Paper Pilot Community")],-1)),Nl=Fe(()=>b("li",null,[b("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),kl={href:"https://forums.moddingtree.com/",target:"_blank"},wl=Fe(()=>b("span",{class:"material-icons"},"forum",-1)),Sl=Fe(()=>b("span",{class:"material-icons"},"info",-1)),Cl=Fe(()=>b("span",{class:"material-icons"},"library_books",-1)),xl=Fe(()=>b("span",{class:"material-icons"},"settings",-1)),Ml=Fe(()=>b("span",{class:"material-icons"},"library_books",-1)),$l=Fe(()=>b("span",{class:"material-icons"},"settings",-1)),Il=Fe(()=>b("span",{class:"material-icons"},"info",-1)),Rl={href:"https://forums.moddingtree.com/",target:"_blank"},Ll=Fe(()=>b("span",{class:"material-icons"},"forum",-1)),Fl={class:"discord"},Pl={class:"discord-links"},Tl={key:0},Ol=["href"],El=Fe(()=>b("li",null,[b("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"The Paper Pilot Community")],-1)),zl=Fe(()=>b("li",null,[b("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Dl=A({__name:"Nav",setup(e){const t=q(null),n=q(null),r=q(null),i=q(null),{useHeader:a,banner:s,title:o,discordName:l,discordLink:c,versionNumber:p}=te;function h(){window.open(c,"mywindow")}return(f,d)=>(_(),C(X,null,[u(a)?(_(),C("div",We({key:0,class:"nav"},f.$attrs),[u(s)?(_(),C("img",{key:0,src:u(s),class:"banner",alt:u(o)},null,8,fl)):(_(),C("div",gl,U(u(o)),1)),b("div",{onClick:d[0]||(d[0]=g=>{var v;return(v=i.value)==null?void 0:v.open()}),class:"version-container"},[L(me,{display:"Changelog",direction:u(H).Down,class:"version"},{default:B(()=>[b("span",null,"v"+U(u(p)),1)]),_:1},8,["direction"])]),b("div",pl,[u(K).devSpeed===0?(_(),C("div",vl,"Game Paused!")):T("",!0)]),b("div",ml,[b("span",{onClick:h,class:"material-icons"},"discord"),b("ul",hl,[u(c)?(_(),C("li",bl,[b("a",{href:u(c),target:"_blank"},U(u(l)),9,yl)])):T("",!0),_l,Nl])]),b("div",null,[b("a",kl,[L(me,{display:"Forums",direction:u(H).Down,yoffset:"5px"},{default:B(()=>[wl]),_:1},8,["direction"])])]),b("div",{onClick:d[1]||(d[1]=g=>{var v;return(v=t.value)==null?void 0:v.open()})},[L(me,{display:"Info",direction:u(H).Down,class:"info"},{default:B(()=>[Sl]),_:1},8,["direction"])]),b("div",{onClick:d[2]||(d[2]=g=>{var v;return(v=n.value)==null?void 0:v.open()})},[L(me,{display:"Saves",direction:u(H).Down,xoffset:"-20px"},{default:B(()=>[Cl]),_:1},8,["direction"])]),b("div",{onClick:d[3]||(d[3]=g=>{var v;return(v=r.value)==null?void 0:v.open()})},[L(me,{display:"Settings",direction:u(H).Down,xoffset:"-66px"},{default:B(()=>[xl]),_:1},8,["direction"])])],16)):(_(),C("div",We({key:1,class:"overlay-nav"},f.$attrs),[b("div",{onClick:d[4]||(d[4]=g=>{var v;return(v=i.value)==null?void 0:v.open()}),class:"version-container"},[L(me,{display:"Changelog",direction:u(H).Right,xoffset:"25%",class:"version"},{default:B(()=>[b("span",null,"v"+U(u(p)),1)]),_:1},8,["direction"])]),b("div",{onClick:d[5]||(d[5]=g=>{var v;return(v=n.value)==null?void 0:v.open()})},[L(me,{display:"Saves",direction:u(H).Right},{default:B(()=>[Ml]),_:1},8,["direction"])]),b("div",{onClick:d[6]||(d[6]=g=>{var v;return(v=r.value)==null?void 0:v.open()})},[L(me,{display:"Settings",direction:u(H).Right},{default:B(()=>[$l]),_:1},8,["direction"])]),b("div",{onClick:d[7]||(d[7]=g=>{var v;return(v=t.value)==null?void 0:v.open()})},[L(me,{display:"Info",direction:u(H).Right},{default:B(()=>[Il]),_:1},8,["direction"])]),b("div",null,[b("a",Rl,[L(me,{display:"Forums",direction:u(H).Right,xoffset:"7px"},{default:B(()=>[Ll]),_:1},8,["direction"])])]),b("div",Fl,[b("span",{onClick:h,class:"material-icons"},"discord"),b("ul",Pl,[u(c)?(_(),C("li",Tl,[b("a",{href:u(c),target:"_blank"},U(u(l)),9,Ol)])):T("",!0),El,zl])])],16)),L(ma,{ref_key:"info",ref:t,changelog:i.value},null,8,["changelog"]),L(Qn,{ref_key:"savesManager",ref:n},null,512),L($a,{ref_key:"options",ref:r},null,512),L(Ko,{ref_key:"changelog",ref:i},null,512)],64))}});var er=G(Dl,[["__scopeId","data-v-106a74bf"]]);const Al={class:"inner-tab"},jl=A({__name:"Game",setup(e){const t=Ge(K,"tabs"),n=w(()=>Object.keys(ke)),r=te.useHeader;function i(a){const{display:s,minimized:o,name:l,color:c,minimizable:p,nodes:h,minimizedDisplay:f}=a;return{display:s,minimized:o,name:l,color:c,minimizable:p,nodes:h,minimizedDisplay:f}}return(a,s)=>(_(),C("div",{class:re(["tabs-container",{useHeader:u(r)}])},[(_(!0),C(X,null,be(t.value,(o,l)=>{var c,p;return _(),C("div",{key:l,class:re(["tab",u((c=u(ke)[o])==null?void 0:c.classes)]),style:ie(u((p=u(ke)[o])==null?void 0:p.style))},[l===0&&!u(r)?(_(),z(er,{key:0})):T("",!0),b("div",Al,[n.value.includes(o)?(_(),z(Go,We({key:0},i(u(ke)[o]),{index:l,onSetMinimized:h=>u(ke)[o].minimized.value=h}),null,16,["index","onSetMinimized"])):(_(),z(oe(o),{key:1,index:l},null,8,["index"]))])],6)}),128))],2))}});var Vl=G(jl,[["__scopeId","data-v-88992ffc"]]);const Bl=["x1","y1","x2","y2"],ql=["x1","y1","x2","y2"],Ul=A({__name:"BoardLink",props:{link:{},dragging:{},dragged:{}},setup(e){const t=e,n=xe(t),r=w(()=>{var v,S,M,y,R,O,j;const g={...n.link.value.startNode.position};return n.link.value.offsetStart&&(g.x+=u(n.link.value.offsetStart).x,g.y+=u(n.link.value.offsetStart).y),((v=n.dragging)==null?void 0:v.value)===n.link.value.startNode&&(g.x+=(y=(M=(S=n.dragged)==null?void 0:S.value)==null?void 0:M.x)!=null?y:0,g.y+=(j=(O=(R=n.dragged)==null?void 0:R.value)==null?void 0:O.y)!=null?j:0),g}),i=w(()=>{var v,S,M,y,R,O,j;const g={...n.link.value.endNode.position};return n.link.value.offsetEnd&&(g.x+=u(n.link.value.offsetEnd).x,g.y+=u(n.link.value.offsetEnd).y),((v=n.dragging)==null?void 0:v.value)===n.link.value.endNode&&(g.x+=(y=(M=(S=n.dragged)==null?void 0:S.value)==null?void 0:M.x)!=null?y:0,g.y+=(j=(O=(R=n.dragged)==null?void 0:R.value)==null?void 0:O.y)!=null?j:0),g}),a=w(()=>Qi(t.link)),s=w(()=>i.value.x-r.value.x),o=w(()=>Math.abs(s.value)),l=w(()=>i.value.y-r.value.y),c=w(()=>Math.abs(l.value)),p=w(()=>Math.min(o.value,c.value)),h=w(()=>Math.max(o.value,c.value)-p.value),f=w(()=>p.value>h.value),d=w(()=>f.value?{x:r.value.x+(s.value>0?p.value:-p.value),y:r.value.y+(l.value>0?p.value:-p.value)}:{x:i.value.x-(s.value>0?p.value:-p.value),y:i.value.y-(l.value>0?p.value:-p.value)});return(g,v)=>(_(),C(X,null,[b("line",We({class:"link"},a.value,{class:{pulsing:g.link.pulsing},x1:r.value.x,y1:r.value.y,x2:d.value.x,y2:d.value.y,"stroke-linecap":"round"}),null,16,Bl),b("line",We({class:"link"},a.value,{class:{pulsing:g.link.pulsing},x1:d.value.x,y1:d.value.y,x2:i.value.x,y2:i.value.y,"stroke-linecap":"round"}),null,16,ql)],64))}});var Zl=G(Ul,[["__scopeId","data-v-78507cb5"]]);const Wl={key:0},Gl=["transform","onMousedown","onTouchstartPassive","onMouseup","onTouchend"],Hl=["fill","stroke-width","stroke"],Yl=["fill"],Jl=A({__name:"BoardNodeAction",props:{node:{},nodeType:{},actions:{},isSelected:{type:Boolean},selectedAction:{}},emits:["clickAction"],setup(e,{emit:t}){const r=xe(e),i=w(()=>P(r.nodeType.value.size,u(r.node))),a=w(()=>{var p;return(p=P(r.nodeType.value.outlineColor,u(r.node)))!=null?p:Oe[ne.theme].variables["--outline"]}),s=w(()=>{var p;return(p=P(r.nodeType.value.titleColor,u(r.node)))!=null?p:Oe[ne.theme].variables["--foreground"]}),o=w(()=>P(r.nodeType.value.actionDistance,u(r.node)));function l(p,h){t("clickAction",h.id),p.preventDefault(),p.stopPropagation()}function c(p,h){var f;((f=u(r.selectedAction))==null?void 0:f.id)===h.id&&(p.preventDefault(),p.stopPropagation())}return(p,h)=>(_(),z(ht,{name:"actions",appear:""},{default:B(()=>[p.isSelected&&p.actions?(_(),C("g",Wl,[(_(!0),C(X,null,be(p.actions,(f,d)=>{var g,v;return _(),C("g",{key:f.id,class:re(["action",{selected:((g=p.selectedAction)==null?void 0:g.id)===f.id}]),transform:`translate(
                        ${(-i.value-10)*Math.sin(((p.actions.length-1)/2-d)*o.value)},
                        ${(i.value+10)*Math.cos(((p.actions.length-1)/2-d)*o.value)}
                    )`,onMousedown:S=>l(S,f),onTouchstartPassive:S=>l(S,f),onMouseup:S=>c(S,f),onTouchend:ct(S=>c(S,f),["stop"])},[b("circle",{fill:u(P)(f.fillColor,p.node),r:"5","stroke-width":((v=p.selectedAction)==null?void 0:v.id)===f.id?1:0,stroke:a.value},null,8,Hl),b("text",{fill:s.value,class:"material-icons"},U(u(P)(f.icon,p.node)),9,Yl)],42,Gl)}),128))])):T("",!0)]),_:1}))}});var Kl=G(Jl,[["__scopeId","data-v-8b91ff32"]]);const Xl=["r","fill","stroke"],Ql=["r","fill","stroke"],eu=["r","fill"],tu=["r","stroke-dasharray","stroke-dashoffset","stroke"],nu=A({__name:"CircleNode",props:{receivingNode:{type:Boolean},canAccept:{type:Boolean},size:{},progress:{},progressDisplay:{},progressColor:{},backgroundColor:{},fillColor:{},outlineColor:{}},setup(e){return(t,n)=>(_(),C("g",null,[t.canAccept?(_(),C("circle",{key:0,class:"receiver",r:t.size+8,fill:t.backgroundColor,stroke:t.receivingNode?"#0F0":"#0F03","stroke-width":2},null,8,Xl)):T("",!0),b("circle",{class:"body",r:t.size,fill:t.fillColor,stroke:t.outlineColor,"stroke-width":4},null,8,Ql),t.progressDisplay===u(dn).Fill?(_(),C("circle",{key:1,class:"progress progressFill",r:Math.max(t.size*t.progress-2,0),fill:t.progressColor},null,8,eu)):(_(),C("circle",{key:2,r:t.size+4.5,class:"progress progressRing",fill:"transparent","stroke-dasharray":(t.size+4.5)*2*Math.PI,"stroke-width":5,"stroke-dashoffset":(t.size+4.5)*2*Math.PI-t.progress*(t.size+4.5)*2*Math.PI,stroke:t.progressColor},null,8,tu))]))}});var ru=G(nu,[["__scopeId","data-v-4e08eac2"]]);const iu={transform:"rotate(45, 0, 0)"},su=["width","height","transform","fill","stroke"],ou=["width","height","transform","fill","stroke"],au=["width","height","transform","fill"],lu=["width","height","transform","stroke-dasharray","stroke-dashoffset","stroke"],uu=A({__name:"DiamondNode",props:{receivingNode:{type:Boolean},canAccept:{type:Boolean},size:{},progress:{},progressDisplay:{},progressColor:{},backgroundColor:{},fillColor:{},outlineColor:{}},setup(e){const t=Math.sqrt(2);return(n,r)=>(_(),C("g",iu,[n.canAccept?(_(),C("rect",{key:0,class:"receiver",width:n.size*u(t)+16,height:n.size*u(t)+16,transform:`translate(${-(n.size*u(t)+16)/2}, ${-(n.size*u(t)+16)/2})`,fill:n.backgroundColor,stroke:n.receivingNode?"#0F0":"#0F03","stroke-width":2},null,8,su)):T("",!0),b("rect",{class:"body",width:n.size*u(t),height:n.size*u(t),transform:`translate(${-n.size*u(t)/2}, ${-n.size*u(t)/2})`,fill:n.fillColor,stroke:n.outlineColor,"stroke-width":4},null,8,ou),n.progressDisplay===u(dn).Fill?(_(),C("rect",{key:1,class:"progress progressFill",width:Math.max(n.size*u(t)*n.progress-2,0),height:Math.max(n.size*u(t)*n.progress-2,0),transform:`translate(${-Math.max(n.size*u(t)*n.progress-2,0)/2}, ${-Math.max(n.size*u(t)*n.progress-2,0)/2})`,fill:n.progressColor},null,8,au)):(_(),C("rect",{key:2,class:"progress progressDiamond",width:n.size*u(t)+9,height:n.size*u(t)+9,transform:`translate(${-(n.size*u(t)+9)/2}, ${-(n.size*u(t)+9)/2})`,fill:"transparent","stroke-dasharray":(n.size*u(t)+9)*4,"stroke-width":5,"stroke-dashoffset":(n.size*u(t)+9)*4-n.progress*(n.size*u(t)+9)*4,stroke:n.progressColor},null,8,lu))]))}});var cu=G(uu,[["__scopeId","data-v-6838efb6"]]);function tr(e,t=!1){var r,i,a;const n=V[e.type];switch(n.alignment){case he.Friendly:{if(n.building){const s=P(n.building,e);e.buildMaterials=Object.fromEntries(Object.entries(s.cost).map(([o,l])=>[o,t?0:l])),s.storage&&(e.storage=s.storage.map(o=>{var l;return{resource:$.Empty,amount:(l=o.default)!=null?l:0}})),s.recipes&&(e.recipeTime=0,s.recipes.filter(o=>o.unlocked===void 0||P(o.unlocked,e)).length===1&&(e.activeRecipe=s.recipes.indexOf(s.recipes.find(o=>o.unlocked===void 0||P(o.unlocked,e)))))}e.type===D.Analyzer&&(e.state={timeLeft:0,index:4,0:{resource:$.ConsumptionResearch,amount:0},1:{resource:$.LogisticalResearch,amount:0},2:{resource:$.BalisticsResearch,amount:0},3:{resource:$.RampancyResearch,amount:0},4:{resource:$.CircularResearch,amount:0}});break}case he.Neutral:break;case he.Hostile:break}(r=e.connectedNodes)!=null||(e.connectedNodes=[]),(i=e.distance)!=null||(e.distance=-1),(a=e.buildMaterials)!=null||(e.buildMaterials={})}function ce(e){return tr(e,!0),e}function It(e){return tr(e),{...e,id:id(I.board)}}w(()=>I.board.nodes.value[0]);function du(){const e=[ce({position:{x:0,y:0},type:D.Core,distance:0}),ce({position:{x:-100,y:0},type:D.Scrap}),ce({position:{x:-400,y:60},type:D.Scrap}),ce({position:{x:-190,y:270},type:D.Scrap}),ce({position:{x:310,y:-170},type:D.Scrap}),ce({position:{x:220,y:400},type:D.Scrap}),ce({position:{x:-40,y:490},type:D.Scrap}),ce({position:{x:-20,y:-250},type:D.Scrap}),ce({position:{x:-450,y:290},type:D.Scrap}),ce({position:{x:500,y:10},type:D.Scrap}),ce({position:{x:380,y:230},type:D.Scrap}),ce({position:{x:-180,y:-430},type:D.Scrap}),ce({position:{x:-280,y:-270},type:D.Scrap}),ce({position:{x:250,y:-380},type:D.Scrap}),ce({position:{x:10,y:-520},type:D.Scrap}),ce({position:{x:160,y:180},type:D.Scrap}),ce({position:{x:-210,y:-60},type:D.Scrap}),ce({position:{x:-490,y:-180},type:D.Scrap}),ce({position:{x:440,y:-310},type:D.Scrap}),ce({position:{x:-270,y:460},type:D.Scrap}),ce({position:{x:0,y:0},type:D.ContainmentRing})];return e[0].storage[0]={resource:$.Nanites,amount:_e.core.storage[0].limit},e[1].storage=[{resource:$.Scrap,amount:45}],e[2].storage=[{resource:$.Scrap,amount:55}],e[3].storage=[{resource:$.Scrap,amount:95}],e[4].storage=[{resource:$.Scrap,amount:100}],e[5].storage=[{resource:$.Scrap,amount:95}],e[6].storage=[{resource:$.Scrap,amount:45}],e[7].storage=[{resource:$.Scrap,amount:95}],e[8].storage=[{resource:$.Scrap,amount:95}],e[9].storage=[{resource:$.Scrap,amount:50}],e[10].storage=[{resource:$.Scrap,amount:35}],e[11].storage=[{resource:$.Scrap,amount:95}],e[12].storage=[{resource:$.Scrap,amount:40}],e[13].storage=[{resource:$.Scrap,amount:35}],e[14].storage=[{resource:$.Scrap,amount:55}],e[15].storage=[{resource:$.Scrap,amount:55}],e[16].storage=[{resource:$.Scrap,amount:40}],e[17].storage=[{resource:$.Scrap,amount:80}],e[18].storage=[{resource:$.Scrap,amount:95}],e[19].storage=[{resource:$.Scrap,amount:90}],e[20].state={durability:1800,angle:0,size:600},fu(e),e}function fu(e){for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)ln(e[t],e[n])&&(e[t].connectedNodes.push(n),e[n].connectedNodes.push(t))}function gu(e,t){for(const r of e)r.distance=-1;t.distance=0;const n=[t];for(;n.length>0;){const r=n.shift();for(const i of r.connectedNodes.map(a=>I.idToNodeMap.value[a]))i.distance>=0&&i.distance<=r.distance+1||(i.distance=r.distance+1,!Object.values(r.buildMaterials).some(a=>a>0)&&P(V[i.type].building,r).transferDistance!==void 0&&n.push(i))}}const ut=w(()=>{let e=1/0;for(const t of I.board.nodes.value){if(V[t.type].alignment!==he.Hostile||t.type!==D.ContainmentRing)continue;const n=t.state.size;n<e&&(e=n)}return e});function wn(e){const t=P(V[e.type].size,e),n=Math.sqrt(e.position.x*e.position.x+e.position.y*e.position.y);if(n+t>=ut.value||e.type===D.Bore&&n<ut.value-100)return!1;if(e.type===D.Scrap){if(Xt.value===void 0)return!1;const i=Xt.value;if((e.position.x-i.position.x)**2+(e.position.y-i.position.y)**2>100**2)return!1}const r=P(V[e.type].building,e);for(const i of I.board.nodes.value){if(r!==void 0&&r.buildableOn!==void 0&&r.buildableOn.includes(i.type))continue;const a=P(V[i.type].size,i),s=t+a;if(!(Math.abs(e.position.x-i.position.x)>=s)&&!(Math.abs(e.position.y-i.position.y)>=s))return!1}return!0}function zt(e){const t=I.board.nodes.value.filter(n=>ln(n,e));for(const n of t)n.connectedNodes.push(e.id),e.connectedNodes.push(n.id);I.board.nodes.value.push(e),I.dirty.value=!0}function pu(e){const t=P(V[e.type].building,e);if(t!==void 0){const r=Object.values(t.cost).reduce((i,a)=>i+a);for(const i of I.board.nodes.value.filter(a=>a.type===D.Analyzer).filter(a=>a!==e)){if((e.position.x-i.position.x)**2+(e.position.y-i.position.y)**2>100**2)continue;const s=i.state;s[1].amount+=r,s[1].amount>100&&(s[1].amount=100)}}const n=I.board.nodes.value.filter(r=>ln(r,e));for(const r of n)r.connectedNodes.includes(e.id)||r.connectedNodes.push(e.id),e.connectedNodes.includes(r.id)||e.connectedNodes.push(r.id);I.dirty.value=!0}function Rt(e){I.board.state.value.nodes=I.board.state.value.nodes.filter(i=>i.id!==e.id);const t=V[e.type].alignment,r=I.board.nodes.value.filter(i=>V[i.type].alignment===t);for(const i of r)i.connectedNodes=i.connectedNodes.filter(a=>a!==e.id);I.dirty.value=!0}function Sn(e){const t=P(V[e.type].building,e);return t===void 0||t.transferDistance===void 0||Object.values(e.buildMaterials).some(n=>n>0)?0:t.transferDistance}function ln(e,t){if(V[e.type].alignment!==V[t.type].alignment)return!1;const n=Math.abs(e.position.x-t.position.x)+Math.abs(e.position.y-t.position.y);return n<=Sn(e)||n<=Sn(t)}const vu=w(()=>I.board.nodes.value.filter(e=>e.transferRoute).map(e=>e.transferRoute)),Yt=w(()=>{var t,n,r,i;const e={};for(const a of I.board.nodes.value)e[a.id]={};for(const a of vu.value)for(let s=0;s<a.path.length-1;s++){const o=a.path[s],l=a.path[s+1];e[o]!==void 0&&e[l]!==void 0&&((n=(t=e[o])[l])!=null||(t[l]=0),e[o][l]+=1,(i=(r=e[l])[o])!=null||(r[o]=0),e[l][o]+=1)}return e}),mu=w(()=>I.research.buildSpeed10.researched.value?144:I.research.buildSpeed9.researched.value?89:I.research.buildSpeed8.researched.value?55:I.research.buildSpeed7.researched.value?34:I.research.buildSpeed6.researched.value?21:I.research.buildSpeed5.researched.value?13:I.research.buildSpeed4.researched.value?8:I.research.buildSpeed3.researched.value?5:I.research.buildSpeed2.researched.value?3:I.research.buildSpeed.researched.value?2:1),un=w(()=>I.research.transferSpeed10.researched.value?144:I.research.transferSpeed9.researched.value?89:I.research.transferSpeed8.researched.value?55:I.research.transferSpeed7.researched.value?34:I.research.transferSpeed6.researched.value?21:I.research.transferSpeed5.researched.value?13:I.research.transferSpeed4.researched.value?8:I.research.transferSpeed3.researched.value?5:I.research.transferSpeed2.researched.value?3:I.research.transferSpeed.researched.value?2:1);let he=function(e){return e.Friendly="friendly",e.Neutral="neutral",e.Hostile="hostile",e}({}),D=function(e){return e.Core="core",e.Extractor="extractor",e.Router="router",e.Foundry="foundry",e.Analyzer="analyzer",e.Researcher="researcher",e.Bore="bore",e.Scrap="scrap",e.ContainmentRing="containmentRing",e}({});const V=Ie(()=>{const e={id:"delete-node",visibility:!0,icon:"\u{1F5D1}\uFE0F",tooltip(){return{text:"Remove this node",color:"var(--foreground)"}},onClick(s){Rt(s),V[s.type].onDelete!==void 0&&V[s.type].onDelete(s)}},t={id:"place-scrap",visibility(s){return!(s.state in I.idToNodeMap.value)},icon:"\u{1F517}",tooltip(){return{text:"Pick the output scrap pile location",color:"var(--foreground)"}},onClick(s){Xt.value=s;const o=It({position:{x:0,y:0},type:D.Scrap});o.storage=[{resource:$.Scrap,amount:0}],s.state=o.id,I.board.draggingNode.value=o}},n={id:"previous-recipe",visibility(s){if(s.activeRecipe!==void 0)return!1;const o=P(V[s.type].building,s);return o===void 0||o.recipes===void 0?!1:o.recipes.filter(c=>c.unlocked===void 0||P(c.unlocked,s)).length>1},icon:"<",tooltip(s){var d;const l=P(V[s.type].building,s).recipes.filter(g=>g.unlocked===void 0||P(g.unlocked,s)),c=(d=s.selectedRecipe)!=null?d:0,p="Current Recipe:",h=Object.entries(l[c].input).map(([g,v])=>`${ee(v)} ${ve[g].name}`).join(", "),f=Object.entries(l[c].output).map(([g,v])=>`${ee(v)} ${ve[g].name}`).join(", ");return{text:`${p} ${h} -> ${f}`,color:"var(--foreground)"}},onClick(s){var p;const l=P(V[s.type].building,s).recipes.filter(h=>h.unlocked===void 0||P(h.unlocked,s)),c=((p=s.selectedRecipe)!=null?p:0)-1;s.selectedRecipe=c<0?l.length-1:c}},r={id:"next-recipe",visibility(s){if(s.activeRecipe!==void 0)return!1;const o=P(V[s.type].building,s);return o===void 0||o.recipes===void 0?!1:o.recipes.filter(c=>c.unlocked===void 0||P(c.unlocked,s)).length>1},icon:">",tooltip(s){var d;const l=P(V[s.type].building,s).recipes.filter(g=>g.unlocked===void 0||P(g.unlocked,s)),c=(d=s.selectedRecipe)!=null?d:0,p="Current Recipe:",h=Object.entries(l[c].input).map(([g,v])=>`${ee(v)} ${ve[g].name}`).join(", "),f=Object.entries(l[c].output).map(([g,v])=>`${ee(v)} ${ve[g].name}`).join(", ");return{text:`${p} ${h} -> ${f}`,color:"var(--foreground)"}},onClick(s){var p;const l=P(V[s.type].building,s).recipes.filter(h=>h.unlocked===void 0||P(h.unlocked,s)),c=((p=s.selectedRecipe)!=null?p:0)+1;s.selectedRecipe=c>=l.length?0:c}},i={id:"select-recipe",visibility(s){if(s.activeRecipe!==void 0)return!1;const o=P(V[s.type].building,s);return o===void 0||o.recipes===void 0?!1:o.recipes.filter(c=>c.unlocked===void 0||P(c.unlocked,s)).length>1},icon:"\u23FB",tooltip(s){var d;const l=P(V[s.type].building,s).recipes.filter(g=>g.unlocked===void 0||P(g.unlocked,s)),c=(d=s.selectedRecipe)!=null?d:0,p="Select Recipe:",h=Object.entries(l[c].input).map(([g,v])=>`${ee(v)} ${ve[g].name}`).join(", "),f=Object.entries(l[c].output).map(([g,v])=>`${ee(v)} ${ve[g].name}`).join(", ");return{text:`${p} ${h} -> ${f}`,color:"var(--foreground)"}},onClick(s){var c;const o=P(V[s.type].building,s),l=o.recipes.filter(p=>p.unlocked===void 0||P(p.unlocked,s));s.activeRecipe=o.recipes.indexOf(l[(c=s.selectedRecipe)!=null?c:0]),s.activeRecipe<0&&delete s.activeRecipe}},a={[he.Friendly]:{[D.Core]:{size:20,shape:()=>de.Core,building:_e.core,label:s=>{if(I.board.selectedNode.value!==s||s.activeRecipe===void 0)return;const o=P(V[s.type].building,s);if(o===void 0||o.recipes===void 0)return;const l="Active Recipe:",c=Object.entries(o.recipes[s.activeRecipe].input).map(([h,f])=>`${ee(f)} ${ve[h].name}`).join(", "),p=Object.entries(o.recipes[s.activeRecipe].output).map(([h,f])=>`${ee(f)} ${ve[h].name}`).join(", ");return{text:`${l} ${c} -> ${p}`,color:"var(--foreground)"}}},[D.Extractor]:{size:10,shape:()=>de.Extractor,building:_e.extractor,onStoreEmpty(s){Rt(s)},onDelete(s){const o=It({position:s.position,type:D.Scrap});o.storage=[s.storage[0]],delete o.storage[0].limit,zt(o)},label:s=>{if(I.board.selectedNode.value!==s)return;const o=s.storage[0];if(o.limit!==void 0)return{text:`${ve[o.resource].name}: ${ee(o.amount)}/${ee(o.limit)}`}},actions:[e]},[D.Router]:{size:10,shape:()=>de.Router,building:_e.router,actions:[e]},[D.Foundry]:{size:15,shape:()=>de.Foundry,building:_e.foundry,label:s=>{if(I.board.selectedNode.value!==s||s.activeRecipe===void 0)return;const o=P(V[s.type].building,s);if(o===void 0||o.recipes===void 0)return;const l="Active Recipe:",c=Object.entries(o.recipes[s.activeRecipe].input).map(([h,f])=>`${ee(f)} ${ve[h].name}`).join(", "),p=Object.entries(o.recipes[s.activeRecipe].output).map(([h,f])=>`${ee(f)} ${ve[h].name}`).join(", ");return{text:`${l} ${c} -> ${p}`,color:"var(--foreground)"}},actions:[n,i,r,e]},[D.Analyzer]:{size:15,shape:()=>de.Analyzer,building:_e.analyzer,update(s,o){const l=P(V[s.type].building,s);if(l===void 0||Object.values(s.buildMaterials).some(p=>p>0))return;const c=s.state;if(c.timeLeft>0&&(c.timeLeft-=o,c.timeLeft<=0)){c.timeLeft=0;const h=(l.storage[c.index].limit==="node"?s.storage[c.index].limit:l.storage[c.index].limit)-s.storage[c.index].amount;s.storage[c.index].amount+=Math.min(1,c[c.index].amount,h),s.storage[c.index].resource=c[c.index].resource,c[c.index].amount-=Math.min(1,c[c.index].amount,h)}if(c.timeLeft===0)for(let p=c.index+1;p<c.index+6;p++){const h=p%5,f=s.storage[h],d=l.storage[h];if(!(c[h].amount<1||(d.limit==="node"?f.limit:d.limit)-f.amount<1)){c.timeLeft=1,c.index=h;return}}},actions:[e]},[D.Researcher]:{size:15,shape:()=>de.Researcher,building:_e.researcher,update(s,o){Nu(s,o)},actions:[e]},[D.Bore]:{size:20,shape:()=>de.Bore,building:_e.bore,update(s,o){var h;if(s.storage[0].amount<o||s.state===void 0||s.state===((h=I.board.draggingNode.value)==null?void 0:h.id))return;if(!(s.state in I.idToNodeMap.value)){s.state=void 0;return}if(I.idToNodeMap.value[s.state].storage===void 0){s.state=void 0;return}if(s.position.x**2+s.position.y**2<(ut.value-100)**2)return;s.storage[0].amount-=o;const l=I.idToNodeMap.value[s.state].storage[0];l.resource=$.Scrap,l.amount+=o*1.5,l.amount>l.limit&&(l.limit=l.amount);const p=I.board.nodes.value.find(f=>f.type===D.ContainmentRing).state;p.durability-=o;for(const f of I.board.nodes.value.filter(d=>d.type===D.Analyzer)){if((s.position.x-f.position.x)**2+(s.position.y-f.position.y)**2>100**2)continue;const g=f.state;g[2].amount+=o,g[2].amount>100&&(g[2].amount=100)}},actions:[t,e]}},[he.Neutral]:{[D.Scrap]:{size:15,shape:()=>de.Scrap,label:s=>{let o=!1;if(I.board.selectedNode.value===s&&(o=!0),I.board.draggingNode.value!=null&&Lt(s,I.board.draggingNode.value)&&(o=!0),o){const l=s.storage[0];return{text:`${ve[l.resource].name}: ${ee(l.amount)}`}}}}},[he.Hostile]:{[D.ContainmentRing]:{size:0,shape:()=>de.ContainmentRing,durability(s){const o=s.state;return o===void 0?1800:180*10**(o.size/600)},update(s,o){const l=s.state;if(l.durability<=0){Rt(s);const c=1+s.state.size/600,p=It({position:{x:0,y:0},type:D.ContainmentRing});p.state={durability:180*10**c,angle:0,size:600*c},zt(p);return}l.angle+=o*Math.PI/30,l.angle%=2*Math.PI}}}};for(const s of Object.values(a[he.Friendly]))s.canAccept=Lt,s.onDrop=Cn,s.alignment=he.Friendly;for(const s of Object.values(a[he.Neutral]))s.canAccept=Lt,s.onDrop=Cn,s.alignment=he.Neutral;for(const s of Object.values(a[he.Hostile]))s.alignment=he.Hostile,s.onClick=o=>{};return{...a[he.Friendly],...a[he.Neutral],...a[he.Hostile]}});function Lt(e,t){const n=P(V[t.type].building,t);return n===void 0||n.buildableOn===void 0?!1:n.buildableOn.includes(e.type)}function Cn(e,t){var r;if(!Lt(e,t))return;t.position=e.position;const n=P(V[t.type].building,t);(r=n==null?void 0:n.onBuild)==null||r.call(n,t,e),Rt(e),zt(t)}function wt(e,t,n=[],r=new Set){r.add(e.id);const i=e.connectedNodes.filter(a=>!r.has(a));for(const a of i)r.add(a);for(const a of i.map(s=>I.idToNodeMap.value[s])){if(a===void 0||Object.values(a.buildMaterials).some(o=>o>0))continue;const s=nr(a,t,[e.id,...n],r);if(s!==void 0)return s}}function nr(e,t,n,r){const i=P(V[e.type].building,e);if(i===void 0)return;if(i.storage!==void 0)for(let s=0;s<e.storage.length;s++){if(i.storage[s].type!=="output")continue;const o=e.storage[s];if(o.resource===t&&!(o.amount<=0))return{resource:t,path:[e.id,...n],store:s}}if(i.transferDistance===void 0)return;const a=e.connectedNodes.filter(s=>!r.has(s));for(const s of a)r.add(s);for(const s of a.map(o=>I.idToNodeMap.value[o])){if(Object.values(s.buildMaterials).some(l=>l>0))continue;const o=nr(s,t,[e.id,...n],r);if(o!==void 0)return o}}let $=function(e){return e.Empty="empty",e.Nanites="nanites",e.Scrap="scrap",e.Plates="plates",e.Circuits="circuits",e.ConsumptionResearch="consumption",e.LogisticalResearch="logistics",e.BalisticsResearch="balistics",e.RampancyResearch="rampancy",e.CircularResearch="circularLogic",e}({});const cn=w(()=>{var n;const e=I.board.nodes.value,t={};for(const r of e){const i=V[r.type];if(i.alignment!==he.Friendly||!i.building)continue;const a=P(i.building,r);if(!!a.storage&&!Object.values(r.buildMaterials).some(s=>s>0))for(let s=0;s<r.storage.length;s++){const o=r.storage[s];!((n=ve[o.resource].includeInput)!=null&&n)&&a.storage[s].type==="input"||(t[o.resource]===void 0&&(t[o.resource]=0),t[o.resource]+=o.amount)}}return t}),ve={[$.Empty]:{name:"Empty",symbol:"",visibility:!1},[$.Nanites]:{name:"Nanites",symbol:"\u{1F517}&#xFE0E;"},[$.Scrap]:{name:"Scrap",symbol:'<div style="transform: rotate(45deg)">\u{1F4CE}&#xFE0E;</div>'},[$.Plates]:{name:"Metal Plates",symbol:'<div style="transform: rotate(45deg)">\u{1F536}&#xFE0E;</div>'},[$.Circuits]:{name:"Basic Circuit",symbol:"\u23DA"},[$.ConsumptionResearch]:{name:"Consumption Reports",symbol:"\u{1F50C}&#xFE0E;",includeInput:!0},[$.LogisticalResearch]:{name:"Logistical Notes",symbol:"\u{1F529}&#xFE0E;",includeInput:!0},[$.BalisticsResearch]:{name:"Balistics Tests",symbol:"\u{1F536}&#xFE0E;",includeInput:!0},[$.RampancyResearch]:{name:"Rampant Studies",symbol:'<div style="transform: rotate(45deg)">\u{1F4A2}&#xFE0E;</div>',includeInput:!0},[$.CircularResearch]:{name:"Circular Logic",symbol:"\u{1F300}&#xFE0E;",includeInput:!0}};let Xt=q(void 0);const _e={core:Ie(()=>({cost:{},transferDistance:200,storage:[{resources:[$.Nanites],limit:100,default:100,type:"output"},{resources:[$.Scrap],limit:1,type:"input"}],recipes:[{input:{[$.Scrap]:1},output:{[$.Nanites]:1},duration:1}]})),extractor:Ie(()=>({buildableOn:[D.Scrap],cost:{[$.Nanites]:10},storage:[{resources:[$.Scrap],limit:"node",type:"output"}],display:{name:"Extractor",description:"Extract scrap from ruined nodes"},onBuild(e,t){if(t===void 0)return;e.storage[0]=t.storage[0],e.storage[0].limit=t.storage[0].amount;const n=I.board.nodes.value.filter(r=>r.type===D.Bore).find(r=>r.state===t.id);n!==void 0&&(n.state=e.id)}})),router:Ie(()=>({cost:{[$.Nanites]:5},transferDistance:100,display:{name:"Router",description:"Transfer resources to further-away nodes"}})),foundry:Ie(()=>({cost:{[$.Nanites]:25},display:{name:"Foundry",description:"Form clusters of nanites into structural materials"},storage:[{resources:[$.Scrap,$.Nanites,$.Plates],limit:10,type:"input"},{resources:[$.Nanites,$.Plates,$.Circuits],limit:5,type:"output"}],recipes:[{input:{[$.Nanites]:10},output:{[$.Plates]:1},duration:10},{input:{[$.Scrap]:1},output:{[$.Nanites]:1},duration:1,unlocked:I.research.naniteSmelting.researched},{input:{[$.Plates]:2},output:{[$.Circuits]:1},duration:30,unlocked:I.research.circuits.researched}]})),analyzer:Ie(()=>({cost:{[$.Nanites]:25,[$.Plates]:5},display:{name:"Analyzer",description:"Computational attachement module, produces data based on surrounding activity"},storage:[{resources:[$.ConsumptionResearch],limit:100,type:"output"},{resources:[$.LogisticalResearch],limit:100,type:"output"},{resources:[$.BalisticsResearch],limit:100,type:"output"},{resources:[$.RampancyResearch],limit:100,type:"output"},{resources:[$.CircularResearch],limit:100,type:"output"}]})),researcher:Ie(()=>({cost:{[$.Nanites]:25,[$.Plates]:5},display:{name:"Researcher",description:"Process data to improve and iterate upon nanite structures and design"},storage:[{resources:[$.ConsumptionResearch],limit:100,type:"input"},{resources:[$.LogisticalResearch],limit:100,type:"input"},{resources:[$.BalisticsResearch],limit:100,type:"input"},{resources:[$.RampancyResearch],limit:100,type:"input"},{resources:[$.CircularResearch],limit:100,type:"input"}]})),bore:Ie(()=>({cost:{[$.Nanites]:25,[$.Plates]:5},display:{name:"Nanite Bore",description:"Send a stream of nanites to break down nearby hardened structures. Must be placed near foreign machinery"},storage:[{resources:[$.Nanites],limit:15,type:"input"}]}))};function hu(e,t){var a,s;if(e.activeRecipe===void 0)return;const n=P(V[e.type].building,e);if(n===void 0||n.storage===void 0||n.recipes===void 0)return;const r=n.storage,i=n.recipes[e.activeRecipe];if(e.recipeTime>0){if(e.recipeTime-=t,e.recipeTime<=0){e.recipeTime=0;const o=[],l=e.storage.map((c,p)=>[c,p]).filter((c,p)=>r[p].type==="output");for(const[c,p]of Object.entries(i.output)){const h=(a=l.find(([f,d])=>f.resource===c))==null?void 0:a[0];h===void 0?o.push(c):h.amount+=p}for(const c of o){const p=(s=l.find(([h,f])=>h.resource===$.Empty&&r[f].resources.includes(c)))==null?void 0:s[0];if(p===void 0){console.error(`Node ${e.id} storage too full for recipe!`,e,n);return}p.resource=c,p.amount+=i.output[c]}for(const c of I.board.nodes.value.filter(p=>p.type===D.Analyzer)){if((e.position.x-c.position.x)**2+(e.position.y-c.position.y)**2>100**2)continue;const h=c.state;h[0].amount+=i.duration,h[0].amount>100&&(h[0].amount=100)}}}else{const o=[];for(let p=0;p<e.storage.length;p++)r[p].type==="output"&&o.push([e.storage[p],r[p]]);for(const p of Object.keys(i.output)){const h=o.find(f=>f[0].resource===p);if(h!==void 0&&h[0].amount+i.output[p]>(h[1].limit==="node"?h[0].limit:h[1].limit))return}const l=e.storage.filter((p,h)=>r[h].type==="input"),c={};for(const[p,h]of Object.entries(i.input)){for(let d=0;d<e.storage.length;d++)r[d].type;const f=l.find(d=>d.resource===p);if(f===void 0||f.amount<h)return;c[p]=f}if(Object.keys(c).length!==Object.keys(i.input).length)return;for(const[p,h]of Object.entries(c))h.amount-=i.input[p],h.amount<=0&&(h.amount=0,h.resource=$.Empty);e.recipeTime=i.duration}}function bu(e,t){if(!(e.distance<0)&&!Object.values(e.buildMaterials).every(n=>n===0))if(e.transferRoute===void 0){for(const n of Object.keys(e.buildMaterials).filter(r=>e.buildMaterials[r]>0))if(e.transferRoute=wt(e,n),e.transferRoute!==void 0)return}else{for(const s of e.transferRoute.path)if(!(s in I.idToNodeMap.value&&I.idToNodeMap.value[s].distance>=0)){delete e.transferRoute;return}const n=I.idToNodeMap.value[e.transferRoute.path[0]],{resource:r,store:i}=e.transferRoute,a=Math.min(n.storage[i].amount,e.buildMaterials[r],mu.value*t);e.buildMaterials[r]-=a,n.storage[i].amount-=a,n.storage[i].amount<=0&&(n.storage[i].amount=0,n.storage[i].resource=$.Empty,delete e.transferRoute),e.buildMaterials[r]<=0&&(e.buildMaterials[r]=0,Object.values(e.buildMaterials).every(s=>s===0)&&pu(e),delete e.transferRoute)}}function yu(e,t){var r,i;if(e.distance<0||e.type!==D.Bore||Object.values(e.buildMaterials).some(a=>a>0))return;const n=P(V[e.type].building,e);if(n!==void 0&&n.storage!==void 0)if(e.transferRoute===void 0){if(e.storage[0].amount>=n.storage[0].limit||(e.transferRoute=wt(e,n.storage[0].resources[0]),e.transferRoute!==void 0))return}else{for(const h of e.transferRoute.path)if(!(h in I.idToNodeMap.value&&I.idToNodeMap.value[h].distance>=0)){delete e.transferRoute;return}const a=I.idToNodeMap.value[e.transferRoute.path[0]],{resource:s,store:o}=e.transferRoute,l=n.storage[0].limit==="node"?e.storage[0].limit:n.storage[0].limit,c=l-e.storage[0].amount,p=Math.min(a.storage[o].amount,c,un.value*t);e.storage[0].resource=s,e.storage[0].amount+=p,a.storage[o].amount-=p,a.storage[o].amount<=0&&(a.storage[o].amount=0,a.storage[o].resource=$.Empty,(i=(r=V[a.type]).onStoreEmpty)==null||i.call(r,a,o),delete e.transferRoute),l-e.storage[0].amount<=0&&(e.storage[0].amount=l,delete e.transferRoute)}}function _u(e,t){var i,a;if(e.distance<0||Object.values(e.buildMaterials).some(s=>s>0)||e.activeRecipe===void 0)return;const n=P(V[e.type].building,e);if(n===void 0||n.storage===void 0||n.recipes===void 0)return;const r=[];for(let s=0;s<e.storage.length;s++)n.storage[s].type==="input"&&r.push([e.storage[s],n.storage[s]]);if(e.transferRoute===void 0){const s=n.recipes[e.activeRecipe].input,o=[],l=[],c=[];for(let p=0;p<r.length;p++)for(const[h,f]of Object.entries(s))if(!o.includes(h)&&!l.includes(h)&&!c.includes(h)&&r[p][0].resource===h){if(r[p][0].amount>=f){const d=e.storage[p],g=n.storage[p];d.amount>=(g.limit==="node"?d.limit:g.limit)?o.push(h):l.push(h)}else c.push(h);break}c.push(...Object.keys(s).filter(p=>!o.includes(p)).filter(p=>!l.includes(p)).filter(p=>!c.includes(p)));for(const p of c)if(e.transferRoute=wt(e,p),e.transferRoute!==void 0)return;for(const p of l)if(e.transferRoute=wt(e,p),e.transferRoute!==void 0)return}else{for(const d of e.transferRoute.path)if(!(d in I.idToNodeMap.value&&I.idToNodeMap.value[d].distance>=0)){delete e.transferRoute;return}const s=I.idToNodeMap.value[e.transferRoute.path[0]],{resource:o,store:l}=e.transferRoute;let c=r.find(([d,g])=>d.resource===o);if(c===void 0&&(c=r.find(([d,g])=>d.resource===$.Empty&&g.resources.includes(o))),c===void 0){delete e.transferRoute;return}const p=c[1].limit==="node"?c[0].limit:c[1].limit,h=p-c[0].amount,f=Math.min(s.storage[l].amount,h,un.value*t);c[0].resource=o,c[0].amount+=f,s.storage[l].amount-=f,s.storage[l].amount<=0&&(s.storage[l].amount=0,s.storage[l].resource=$.Empty,(a=(i=V[s.type]).onStoreEmpty)==null||a.call(i,s,l),delete e.transferRoute),p-c[0].amount<=0&&(c[0].amount=p,delete e.transferRoute)}}function Nu(e,t){var i,a;if(e.distance<0||e.type!==D.Researcher||Object.values(e.buildMaterials).some(s=>s>0))return;const n=P(V[e.type].building,e);if(n===void 0||n.storage===void 0)return;const r=[];for(let s=0;s<e.storage.length;s++)n.storage[s].type==="input"&&r.push([e.storage[s],n.storage[s]]);if(e.transferRoute===void 0){for(const[s,o]of r)if((o.limit==="node"?s.limit:o.limit)-s.amount>=1&&(e.transferRoute=wt(e,o.resources[0]),e.transferRoute!==void 0))return}else{for(const d of e.transferRoute.path)if(!(d in I.idToNodeMap.value&&I.idToNodeMap.value[d].distance>=0)){delete e.transferRoute;return}const s=I.idToNodeMap.value[e.transferRoute.path[0]],{resource:o,store:l}=e.transferRoute;let c=r.find(([d,g])=>d.resource===o);if(c===void 0&&(c=r.find(([d,g])=>d.resource===$.Empty&&g.resources.includes(o))),c===void 0){delete e.transferRoute;return}const p=c[1].limit==="node"?c[0].limit:c[1].limit,h=p-c[0].amount,f=Math.min(s.storage[l].amount,h,un.value*t);c[0].resource=o,c[0].amount+=f,s.storage[l].amount-=f,s.storage[l].amount<=0&&(s.storage[l].amount=0,s.storage[l].resource=$.Empty,(a=(i=V[s.type]).onStoreEmpty)==null||a.call(i,s,l),delete e.transferRoute),p-c[0].amount<=0&&(c[0].amount=p,delete e.transferRoute)}}function ku(e,t,n){if(!(t.distance<0)&&t.type===D.Researcher&&!Object.values(t.buildMaterials).some(r=>r>0))for(const r of t.storage){if(r.amount<=0||e.progress.value[r.resource]===void 0||e.progress.value[r.resource]<=0)continue;const i=Math.min(r.amount,e.progress.value[r.resource],1*n);e.progress.value[r.resource]-=i,e.progress.value[r.resource]<0&&(e.progress.value[r.resource]=0),r.amount-=i,r.amount<0&&(r.amount=0,r.resource=$.Empty)}}function wu(){for(const e of I.board.nodes.value)if(e.storage!==void 0)for(const t of e.storage)t.resource!==$.Empty&&(t.amount>.98||(t.amount=Math.round(t.amount*100)/100,t.amount<=0&&(t.amount=0,t.resource=$.Empty)))}const Su=["d"],Cu=["width","height","transform","stroke"],xu=["d"],Mu=["width","height","transform","stroke"],$u=["d"],je=2,Iu=A({__name:"Core",props:{node:{},size:{},placing:{type:Boolean}},setup(e){const t=e,n=Math.sqrt(2),r=w(()=>{var d;return(d=t.size)!=null?d:10}),i=w(()=>-r.value*n/2),a=w(()=>2*i.value+je),s=w(()=>2*i.value-je),o=w(()=>{if(t.node===void 0)return"var(--outline)";const d=t.node;return Object.values(d.buildMaterials).some(g=>g>0)?"var(--locked)":d.distance===-1?"var(--danger)":"var(--outline)"}),l=w(()=>{var S;const d=_e.core.storage;if(t.node===void 0)return Array.from({length:d.length}).fill(0);const g=t.node,v=[];for(let M=0;M<d.length;M++){const y=d[M];v[M]=g.storage[M].amount/(y.limit==="node"?(S=g.storage[M].limit)!=null?S:1:y.limit),v[M]<0&&(v[M]=0),v[M]>1&&(v[M]=1)}return v}),c=w(()=>{const d=l.value[0],g=a.value/2,v={x:-g/2,y:-g/2};return(d<.5?["M",v.x,v.y,"L",v.x+g*d*2,v.y,"L",v.x,v.y+g*d*2,"Z"]:["M",v.x,v.y,"L",v.x+g,v.y,"L",v.x+g,v.y+g*(d-.5)*2,"L",v.x+g*(d-.5)*2,v.y+g,"L",v.x,v.y+g,"Z"]).join(" ")}),p=w(()=>{const d=l.value[1],g={x:-a.value/2,y:-a.value/2};return(d<.5?["M",g.x,g.y,"L",g.x,g.y+a.value*d*2,"L",g.x+a.value*d*2,g.y,"Z"]:["M",g.x,g.y,"L",g.x,g.y+a.value,"L",g.x+a.value*(d-.5)*2,g.y+a.value,"L",g.x+a.value,g.y+a.value*(d-.5)*2,"L",g.x+a.value,g.y,"Z"]).join(" ")}),h=w(()=>{if(t.node===void 0||t.node.activeRecipe===void 0||t.node.recipeTime<=0)return 0;const d=P(V[t.node.type].building,t.node);return d===void 0||d.recipes===void 0?0:Math.max(0,1-t.node.recipeTime/d.recipes[t.node.activeRecipe].duration)}),f=w(()=>{const d=-s.value/2+je,g={x:d,y:d};if(h.value<.25){const v=h.value*4;return["M",0,0,"L",g.x,g.y,"L",g.x,g.y-2*d*v,"Z"].join(" ")}else if(h.value<.5){const v=(h.value-.25)*4;return["M",0,0,"L",g.x,g.y,"L",g.x,-g.y,"L",g.x-2*d*v,-g.y,"Z"].join(" ")}else if(h.value<.75){const v=(h.value-.5)*4;return["M",0,0,"L",g.x,g.y,"L",g.x,-g.y,"L",-g.x,-g.y,"L",-g.x,-g.y+2*d*v,"Z"].join(" ")}else{const v=h.value>1?1:(h.value-.75)*4;return["M",0,0,"L",g.x,g.y,"L",g.x,-g.y,"L",-g.x,-g.y,"L",-g.x,g.y,"L",-g.x+2*d*v,g.y,"Z"].join(" ")}});return(d,g)=>(_(),C("g",{transform:"rotate(45, 0, 0)",style:ie({opacity:d.placing?.5:1})},[h.value>0?(_(),C("path",{key:0,class:"progress",d:f.value,fill:"var(--foreground)"},null,8,Su)):T("",!0),b("rect",{class:"body",width:r.value*u(n),height:r.value*u(n),transform:`translate(${i.value} ${i.value})`,fill:"var(--locked)",stroke:o.value,"stroke-width":je},null,8,Cu),l.value[1]>0?(_(),C("path",{key:1,class:"storage",d:p.value,fill:"var(--accent1)"},null,8,xu)):T("",!0),b("rect",{class:"storage",width:-a.value/2+je,height:-a.value/2+je,transform:`translate(${a.value/4-je/2} ${a.value/4-je/2})`,fill:"var(--locked)",stroke:o.value,"stroke-width":je},null,8,Mu),l.value[0]>0?(_(),C("path",{key:2,class:"storage",d:c.value,fill:"var(--outline)"},null,8,$u)):T("",!0)],4))}});var Ru=G(Iu,[["__scopeId","data-v-36fca5be"]]);const Lu=["r","stroke"],Fu={key:0,transform:"rotate(90, 0, 0) scale(1, -1)"},Pu=["r","stroke-dashoffset"],Tu=A({__name:"Router",props:{node:{},size:{},placing:{type:Boolean}},emits:["select-building","place-building"],setup(e,{emit:t}){const n=e,r=w(()=>{if(n.node===void 0||I.board.draggingNode.value===n.node)return"var(--outline)";const s=n.node;return Object.values(s.buildMaterials).some(o=>o>0)?"var(--locked)":s.distance===-1?"var(--danger)":"var(--outline)"}),i=w(()=>{if(n.node===void 0||Object.values(n.node.buildMaterials).every(c=>c===0))return 0;const s=P(V[n.node.type].building,n.node);if(s===void 0)return 0;const o=Object.values(s.cost).reduce((c,p)=>c+p,0);if(o===0)return 0;const l=Object.values(n.node.buildMaterials).reduce((c,p)=>c+p,0);return Math.max(0,1-l/o)});function a(){n.node?I.board.draggingNode.value===n.node&&t("place-building",n.node):t("select-building")}return(s,o)=>{var l,c;return _(),C("g",{onMouseup:a,onTouchendPassive:a,style:ie({opacity:s.placing?.5:1})},[b("circle",{class:"body",r:(l=s.size)!=null?l:10,fill:"var(--locked)",stroke:r.value,"stroke-width":"2"},null,8,Lu),i.value>0?(_(),C("g",Fu,[b("circle",{class:"build",r:(c=s.size)!=null?c:10,fill:"none",stroke:"var(--outline)","stroke-width":"2",pathLength:"1","stroke-dasharray":"1","stroke-dashoffset":1-i.value},null,8,Pu)])):T("",!0)],36)}}});var rr=G(Tu,[["__scopeId","data-v-75feb0ba"]]);const Ou=["stroke"],Eu=["x1","x2","y2"],zu=["x1","x2","y2"],Du=["x1","x2","y2"],Au=["x1","x2","y2"],ju=["y1","y2","x2"],Vu=["y1","y2","x2"],Bu=["y1","y2","x2"],qu=["y1","y2","x2"],Uu=A({__name:"Target",props:{size:{},stroke:{}},setup(e){const t=e,n=w(()=>{var r;return(r=t.stroke)!=null?r:"var(--outline)"});return(r,i)=>(_(),C("g",{stroke:n.value,"stroke-width":"2","stroke-linecap":"square"},[b("line",{x1:r.size,x2:r.size*1.25,y1:0,y2:r.size/4},null,8,Eu),b("line",{x1:r.size,x2:r.size*1.25,y1:0,y2:-r.size/4},null,8,zu),b("line",{x1:-r.size,x2:-r.size*1.25,y1:0,y2:r.size/4},null,8,Du),b("line",{x1:-r.size,x2:-r.size*1.25,y1:0,y2:-r.size/4},null,8,Au),b("line",{y1:r.size,y2:r.size*1.25,x1:0,x2:r.size/4},null,8,ju),b("line",{y1:r.size,y2:r.size*1.25,x1:0,x2:-r.size/4},null,8,Vu),b("line",{y1:-r.size,y2:-r.size*1.25,x1:0,x2:r.size/4},null,8,Bu),b("line",{y1:-r.size,y2:-r.size*1.25,x1:0,x2:-r.size/4},null,8,qu)],8,Ou))}}),Zu=["width","height","transform"],ir=A({__name:"Scrap",props:{node:{},size:{},canAccept:{type:Boolean},placing:{type:Boolean}},emits:["place-building"],setup(e,{emit:t}){const n=e,r=w(()=>{var s;return(s=n.size)!=null?s:10}),i=w(()=>-r.value/2);function a(){n.node&&I.board.draggingNode.value===n.node&&t("place-building",n.node)}return(s,o)=>(_(),C("g",{onMouseup:a,onTouchendPassive:a,style:ie({opacity:s.placing?.5:1})},[s.canAccept?(_(),z(Uu,{key:0,size:r.value},null,8,["size"])):T("",!0),b("rect",{class:"body",width:r.value,height:r.value,transform:`translate(${i.value} ${i.value})`,fill:"var(--locked)",stroke:"var(--highlighted)","stroke-width":"2"},null,8,Zu)],36))}});const Wu=["width","height","transform","stroke"],Gu={key:0},Hu=["d"],Yu=["width","height","transform"],Ju=["d"],Ku=A({__name:"Extractor",props:{node:{},size:{},placing:{type:Boolean}},emits:["select-building","place-building"],setup(e,{emit:t}){const n=e,r=Math.sqrt(2),i=w(()=>{var f;return(f=n.size)!=null?f:10}),a=w(()=>-i.value*r/2),s=w(()=>{if(n.node===void 0||I.board.draggingNode.value===n.node)return"var(--outline)";const f=n.node;return Object.values(f.buildMaterials).some(d=>d>0)?"var(--locked)":f.distance===-1?"var(--danger)":"var(--outline)"}),o=w(()=>{if(n.node===void 0)return 0;const f=n.node;return f.storage[0].amount/f.storage[0].limit}),l=w(()=>{const f=2*a.value+2;if(o.value<.5){const d={x:-f/2,y:-f/2};return["M",d.x,d.y,"L",d.x+f*o.value*2,d.y,"L",d.x,d.y+f*o.value*2,"Z"].join(" ")}else{const d={x:-f/2,y:-f/2};return["M",d.x,d.y,"L",d.x+f,d.y,"L",d.x+f,d.y+f*(o.value-.5)*2,"L",d.x+f*(o.value-.5)*2,d.y+f,"L",d.x,d.y+f,"Z"].join(" ")}}),c=w(()=>{if(n.node===void 0||Object.values(n.node.buildMaterials).every(v=>v===0))return 0;const f=P(V[n.node.type].building,n.node);if(f===void 0)return 0;const d=Object.values(f.cost).reduce((v,S)=>v+S,0);if(d===0)return 0;const g=Object.values(n.node.buildMaterials).reduce((v,S)=>v+S,0);return Math.max(0,1-g/d)}),p=w(()=>{const f=-a.value+2,d={x:f,y:f};if(c.value<.25){const g=c.value*4;return["M",0,0,"L",d.x,d.y,"L",d.x,d.y-2*f*g,"Z"].join(" ")}else if(c.value<.5){const g=(c.value-.25)*4;return["M",0,0,"L",d.x,d.y,"L",d.x,-d.y,"L",d.x-2*f*g,-d.y,"Z"].join(" ")}else if(c.value<.75){const g=(c.value-.5)*4;return["M",0,0,"L",d.x,d.y,"L",d.x,-d.y,"L",-d.x,-d.y,"L",-d.x,-d.y+2*f*g,"Z"].join(" ")}else{const g=c.value>1?1:(c.value-.75)*4;return["M",0,0,"L",d.x,d.y,"L",d.x,-d.y,"L",-d.x,-d.y,"L",-d.x,d.y,"L",-d.x+2*f*g,d.y,"Z"].join(" ")}});function h(){n.node?I.board.draggingNode.value===n.node&&t("place-building",n.node):t("select-building")}return(f,d)=>(_(),C(X,null,[f.node!==void 0&&u(I).board.draggingNode.value!==f.node?(_(),z(ir,{key:0,size:u(P)(u(V)[u(D).Scrap].size,f.node)},null,8,["size"])):T("",!0),b("g",{transform:"rotate(45, 0, 0)",onMouseup:h,onTouchendPassive:h,style:ie({opacity:f.placing?.5:1})},[b("rect",{class:"body",width:i.value*u(r),height:i.value*u(r),transform:`translate(${a.value} ${a.value})`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,8,Wu),c.value>0?(_(),C("g",Gu,[b("path",{class:"build",d:p.value,fill:"var(--outline)"},null,8,Hu),b("rect",{class:"build",width:i.value*u(r)-2,height:i.value*u(r)-2,transform:`translate(${a.value+1} ${a.value+1})`,fill:"var(--locked)"},null,8,Yu)])):T("",!0),o.value>0?(_(),C("path",{key:1,class:"storage",d:l.value,fill:"var(--accent1)"},null,8,Ju)):T("",!0)],36)],64))}});var sr=G(Ku,[["__scopeId","data-v-58d6e9f2"]]);const Xu=["width","height","transform","stroke"],Qu={key:0},ec=["d"],tc=["width","height","transform"],nc=["d"],rc=["d"],ic=["d"],sc={transform:"rotate(135, 0, 0)"},oc=["width","height","transform"],ac=["d","stroke"],lc=A({__name:"Foundry",props:{node:{},size:{},placing:{type:Boolean}},emits:["select-building","place-building"],setup(e,{emit:t}){const n=e,r=Math.sqrt(2),i=w(()=>{var S;return(S=n.size)!=null?S:15}),a=w(()=>-i.value*r/2),s=w(()=>{if(n.node===void 0||I.board.draggingNode.value===n.node)return"var(--outline)";const S=n.node;return Object.values(S.buildMaterials).some(M=>M>0)?"var(--locked)":S.distance===-1?"var(--danger)":"var(--outline)"}),o=w(()=>{const S=i.value/12*r,M={x:-a.value-1,y:-a.value-1};return["M",M.x,M.y,"M",M.x+S,M.y-S,"A",S,S,0,0,1,M.x-S,M.y+S,"L",-M.x-S,-M.y+S,"A",S,S,0,0,1,-M.x+S,-M.y-S,"Z"].join(" ")}),l=w(()=>{if(n.node===void 0||n.node.activeRecipe===void 0||n.node.recipeTime<=0)return 0;const S=P(V[n.node.type].building,n.node);return S===void 0||S.recipes===void 0?0:Math.max(0,1-n.node.recipeTime/S.recipes[n.node.activeRecipe].duration)}),c=w(()=>({width:i.value/6*r,height:1.5*i.value*r})),p=w(()=>{if(n.node===void 0||Object.values(n.node.buildMaterials).every(R=>R===0))return 0;const S=P(V[n.node.type].building,n.node);if(S===void 0)return 0;const M=Object.values(S.cost).reduce((R,O)=>R+O,0);if(M===0)return 0;const y=Object.values(n.node.buildMaterials).reduce((R,O)=>R+O,0);return Math.max(0,1-y/M)}),h=w(()=>{const S=-a.value+1,M={x:S,y:S};if(p.value<.25){const y=p.value*4;return["M",0,0,"L",M.x,M.y,"L",M.x,M.y-2*S*y,"Z"].join(" ")}else if(p.value<.5){const y=(p.value-.25)*4;return["M",0,0,"L",M.x,M.y,"L",M.x,-M.y,"L",M.x-2*S*y,-M.y,"Z"].join(" ")}else if(p.value<.75){const y=(p.value-.5)*4;return["M",0,0,"L",M.x,M.y,"L",M.x,-M.y,"L",-M.x,-M.y,"L",-M.x,-M.y+2*S*y,"Z"].join(" ")}else{const y=p.value>1?1:(p.value-.75)*4;return["M",0,0,"L",M.x,M.y,"L",M.x,-M.y,"L",-M.x,-M.y,"L",-M.x,M.y,"L",-M.x+2*S*y,M.y,"Z"].join(" ")}}),f=w(()=>{var R;const S=_e.foundry.storage;if(n.node===void 0)return Array.from({length:S.length}).fill(0);const M=n.node,y=[];for(let O=0;O<S.length;O++){const j=S[O];y[O]=M.storage[O].amount/(j.limit==="node"?(R=M.storage[O].limit)!=null?R:1:j.limit),y[O]<0&&(y[O]=0),y[O]>1&&(y[O]=1)}return y}),d=w(()=>{const S=f.value[0],M=2*a.value+2,y={x:-M/2,y:-M/2};return(S<.5?["M",y.x,y.y,"L",y.x+M*S*2,y.y,"L",y.x+M*S,y.y+M*S,"Z"]:["M",y.x,y.y,"L",y.x+M,y.y,"L",y.x+M,y.y+M*(S-.5)*2,"L",M*(S-.5),M*(S-.5),"Z"]).join(" ")}),g=w(()=>{const S=f.value[1],M=2*a.value+2,y={x:-M/2,y:-M/2};return(S<.5?["M",y.x,y.y,"L",y.x,y.y+M*S*2,"L",y.x+M*S,y.y+M*S,"Z"]:["M",y.x,y.y,"L",y.x,y.y+M,"L",y.x+M*(S-.5)*2,y.y+M,"L",M*(S-.5),M*(S-.5),"Z"]).join(" ")});function v(){n.node?I.board.draggingNode.value===n.node&&t("place-building",n.node):t("select-building")}return(S,M)=>(_(),C("g",{transform:"rotate(45, 0, 0)",onMouseup:v,onTouchendPassive:v,style:ie({opacity:S.placing?.5:1})},[b("rect",{class:"body",width:i.value*u(r),height:i.value*u(r),transform:`translate(${a.value} ${a.value})`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,8,Xu),p.value>0?(_(),C("g",Qu,[b("path",{class:"build",d:h.value,fill:"var(--outline)"},null,8,ec),b("rect",{class:"build",width:i.value*u(r)-2,height:i.value*u(r)-2,transform:`translate(${a.value+1} ${a.value+1})`,fill:"var(--locked)"},null,8,tc)])):T("",!0),f.value[0]>0?(_(),C("path",{key:1,class:"storage",d:d.value,fill:"var(--accent1)"},null,8,nc)):T("",!0),f.value[1]>0?(_(),C("path",{key:2,class:"storage",d:g.value,fill:"var(--accent1)"},null,8,rc)):T("",!0),b("path",{class:"body",d:o.value,fill:"var(--locked)"},null,8,ic),b("g",sc,[l.value>0?(_(),C("rect",{key:0,class:"progress",width:c.value.width,height:c.value.height*l.value,transform:`translate(${-c.value.width/2} ${-c.value.height/2})`,fill:"var(--foreground)"},null,8,oc)):T("",!0)]),b("path",{class:"body",d:o.value,stroke:s.value,"stroke-width":"2",fill:"none"},null,8,ac)],36))}});var or=G(lc,[["__scopeId","data-v-7fd1c338"]]);const uc={transform:"rotate(45, 0, 0)"},cc=["width","height","transform","stroke"],dc=["width","height","stroke"],fc=["d"],gc=["d"],pc=["width","height","transform"],vc=["width","height","transform"],mc=["r","stroke"],hc={key:0,transform:"rotate(90, 0, 0) scale(1, -1)"},bc=["r","stroke-dashoffset"],yc=["r"],st=.05,_c=A({__name:"Analyzer",props:{node:{},size:{},placing:{type:Boolean}},emits:["select-building","place-building"],setup(e,{emit:t}){const n=e,r=Math.sqrt(2),i=w(()=>{var f;return(f=n.size)!=null?f:15}),a=w(()=>n.placing?!0:n.node===void 0?!1:I.board.selectedNode.value===n.node),s=w(()=>{if(n.node===void 0||I.board.draggingNode.value===n.node)return"var(--outline)";const f=n.node;return Object.values(f.buildMaterials).some(d=>d>0)?"var(--locked)":f.distance===-1?"var(--danger)":"var(--outline)"}),o=w(()=>{if(n.node===void 0||Object.values(n.node.buildMaterials).every(v=>v===0))return 0;const f=P(V[n.node.type].building,n.node);if(f===void 0)return 0;const d=Object.values(f.cost).reduce((v,S)=>v+S,0);if(d===0)return 0;const g=Object.values(n.node.buildMaterials).reduce((v,S)=>v+S,0);return Math.max(0,1-g/d)}),l=w(()=>{if(n.node===void 0||n.node.state===void 0)return 0;const f=n.node.state.timeLeft;return f<=0||f>=1?0:1-f}),c=w(()=>{const f=i.value*r/2;let d=(l.value-st)*2,g=(l.value+st)*2,v=[];return d<0&&(d=0),g>1&&(g=1),d<.25?(v.push("M",0,f*d*4),g>.25?v.push("L",0,f,"L",f*(g-.25)*4,f):v.push("L",0,f*g*4)):d<.5?(v.push("M",f*(d-.25)*4,f),g>.5?v.push("L",f,f,"L",f,f-f*(g-.5)*4):v.push("L",f*(g-.25)*4,f)):d<.75?(v.push("M",f,f-f*(d-.5)*4),g>.75?v.push("L",f,0,"L",f-f*(g-.75)*4,0):v.push("L",f,f-f*(g-.5)*4)):v.push("M",f-f*(d-.75)*4,0,"L",f-f*(g-.75)*4,0),v.push("L",f/2,f/2,"Z"),v.join(" ")}),p=w(()=>{const f=i.value*r/2;let d=(l.value-.5-st)*2,g=(l.value-.5+st)*2,v=[];return d<0&&(d=0),g>1&&(g=1),d<.25?(v.push("M",0,f*d*4),g>.25?v.push("L",0,f,"L",f*(g-.25)*4,f):v.push("L",0,f*g*4)):d<.5?(v.push("M",f*(d-.25)*4,f),g>.5?v.push("L",f,f,"L",f,f-f*(g-.5)*4):v.push("L",f*(g-.25)*4,f)):d<.75?(v.push("M",f,f-f*(d-.5)*4),g>.75?v.push("L",f,0,"L",f-f*(g-.75)*4,0):v.push("L",f,f-f*(g-.5)*4)):v.push("M",f-f*(d-.75)*4,0,"L",f-f*(g-.75)*4,0),v.push("L",f/2,f/2,"Z"),v.join(" ")});function h(){n.node?I.board.draggingNode.value===n.node&&t("place-building",n.node):t("select-building")}return(f,d)=>(_(),C("g",{onMouseup:h,onTouchendPassive:h,style:ie({opacity:f.placing?.5:1})},[b("g",uc,[b("rect",{class:"body",width:i.value*u(r)/2,height:i.value*u(r)/2,transform:`translate(${-i.value*u(r)/2} ${-i.value*u(r)/2})`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,8,cc),b("rect",{class:"body",width:i.value*u(r)/2,height:i.value*u(r)/2,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,8,dc),l.value>0&&l.value<.5+st?(_(),C("path",{key:0,class:"progress",d:c.value,stroke:"var(--foreground)","stroke-width":"2"},null,8,fc)):T("",!0),l.value>.5-st?(_(),C("path",{key:1,class:"progress",transform:"rotate(90, 0, 0) scale(-1, 1)",d:p.value,stroke:"var(--foreground)","stroke-width":"2"},null,8,gc)):T("",!0),b("rect",{class:"body",width:i.value*u(r)/2-2,height:i.value*u(r)/2-2,transform:`translate(${-i.value*u(r)/2+1} ${-i.value*u(r)/2+1})`,fill:"var(--locked)"},null,8,pc),b("rect",{class:"body",width:i.value*u(r)/2-2,height:i.value*u(r)/2-2,transform:"translate(1 1)",fill:"var(--locked)"},null,8,vc)]),b("circle",{class:"body",r:i.value/2,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,8,mc),o.value>0?(_(),C("g",hc,[b("circle",{class:"build",r:i.value/2,fill:"none",stroke:"var(--outline)","stroke-width":"2",pathLength:"1","stroke-dasharray":"1","stroke-dashoffset":1-o.value},null,8,bc)])):T("",!0),a.value?(_(),C("circle",{key:1,r:n.node!==void 0&&u(I).board.selectedNode.value===n.node?100/1.2:100,fill:"none",stroke:"var(--outline)","stroke-width":"2"},null,8,yc)):T("",!0)],36))}});var ar=G(_c,[["__scopeId","data-v-57da2d56"]]);const Nc=["r","transform","stroke"],kc=["r","transform","stroke"],wc=["r","transform","stroke"],Sc=["r","transform","stroke"],Cc=["width","height","transform","stroke"],xc={key:0},Mc=["d"],$c=["width","height","transform"],Ic=A({__name:"Researcher",props:{node:{},size:{},placing:{type:Boolean}},emits:["select-building","place-building"],setup(e,{emit:t}){const n=e,r=Math.sqrt(2),i=w(()=>{var d;return(d=n.size)!=null?d:15}),a=w(()=>-i.value*r/2),s=w(()=>{if(n.node===void 0||I.board.draggingNode.value===n.node)return"var(--outline)";const d=n.node;return Object.values(d.buildMaterials).some(g=>g>0)?"var(--locked)":d.distance===-1?"var(--danger)":"var(--outline)"}),o=w(()=>{if(n.node===void 0||Object.values(n.node.buildMaterials).every(S=>S===0))return 0;const d=P(V[n.node.type].building,n.node);if(d===void 0)return 0;const g=Object.values(d.cost).reduce((S,M)=>S+M,0);if(g===0)return 0;const v=Object.values(n.node.buildMaterials).reduce((S,M)=>S+M,0);return Math.max(0,1-v/g)}),l=w(()=>{const d=-a.value+1,g={x:d,y:d};if(o.value<.25){const v=o.value*4;return["M",0,0,"L",g.x,g.y,"L",g.x,g.y-2*d*v,"Z"].join(" ")}else if(o.value<.5){const v=(o.value-.25)*4;return["M",0,0,"L",g.x,g.y,"L",g.x,-g.y,"L",g.x-2*d*v,-g.y,"Z"].join(" ")}else if(o.value<.75){const v=(o.value-.5)*4;return["M",0,0,"L",g.x,g.y,"L",g.x,-g.y,"L",-g.x,-g.y,"L",-g.x,-g.y+2*d*v,"Z"].join(" ")}else{const v=o.value>1?1:(o.value-.75)*4;return["M",0,0,"L",g.x,g.y,"L",g.x,-g.y,"L",-g.x,-g.y,"L",-g.x,g.y,"L",-g.x+2*d*v,g.y,"Z"].join(" ")}}),c=w(()=>n.node===void 0||I.activeResearch.value==="none"?0:n.node.storage.filter(d=>d.amount>0).length),p=w(()=>{switch(c.value){default:return[];case 1:return["pulsing","pulse-one"];case 2:return["pulsing","pulse-two"];case 3:return["pulsing","pulse-three"];case 4:return["pulsing","pulse-four"];case 5:return["pulsing","pulse-five"]}}),h=w(()=>{switch(c.value){default:return[];case 1:return[{animationDelay:"-0.625s"},{animationDelay:"-1.25s"},{animationDelay:"-1.875s"}];case 2:return[{animationDelay:"-0.5s"},{animationDelay:"-1s"},{animationDelay:"-1.5s"}];case 3:return[{animationDelay:"-0.375s"},{animationDelay:"-0.75s"},{animationDelay:"-1.125s"}];case 4:return[{animationDelay:"-0.25s"},{animationDelay:"-0.5s"},{animationDelay:"-0.75s"}];case 5:return[{animationDelay:"-0.125s"},{animationDelay:"-0.25s"},{animationDelay:"-0.375s"}]}});function f(){n.node?I.board.draggingNode.value===n.node&&t("place-building",n.node):t("select-building")}return(d,g)=>(_(),C("g",{transform:"rotate(45, 0, 0)",onMouseup:f,onTouchendPassive:f,style:ie({opacity:d.placing?.5:1})},[b("circle",{class:re(["body",p.value]),r:i.value/u(r)/2,transform:`translate(${a.value} 0)`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,10,Nc),b("circle",{class:re(["body",p.value]),style:ie(h.value[0]),r:i.value/u(r)/2,transform:`translate(0 ${a.value})`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,14,kc),b("circle",{class:re(["body",p.value]),style:ie(h.value[1]),r:i.value/u(r)/2,transform:`translate(${-a.value} 0)`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,14,wc),b("circle",{class:re(["body",p.value]),style:ie(h.value[2]),r:i.value/u(r)/2,transform:`translate(0 ${-a.value})`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,14,Sc),b("rect",{class:"body",width:i.value*u(r),height:i.value*u(r),transform:`translate(${a.value} ${a.value})`,fill:"var(--locked)",stroke:s.value,"stroke-width":"2"},null,8,Cc),o.value>0?(_(),C("g",xc,[b("path",{class:"build",d:l.value,fill:"var(--outline)"},null,8,Mc),b("rect",{class:"build",width:i.value*u(r)-2,height:i.value*u(r)-2,transform:`translate(${a.value+1} ${a.value+1})`,fill:"var(--locked)"},null,8,$c)])):T("",!0)],36))}});var lr=G(Ic,[["__scopeId","data-v-a428cb44"]]);const Rc={transform:"rotate(45, 0, 0)"},Lc=["width","height","transform","stroke"],Fc=["r","stroke"],Pc={key:0,transform:"rotate(90, 0, 0) scale(1, -1)"},Tc=["r","stroke-dashoffset"],Oc={key:1},Ec=["d"],zc=A({__name:"Bore",props:{node:{},size:{},placing:{type:Boolean}},emits:["select-building","place-building"],setup(e,{emit:t}){const n=e,r=Math.sqrt(2),i=w(()=>{var p;return(p=n.size)!=null?p:20}),a=w(()=>{if(n.node===void 0||I.board.draggingNode.value===n.node)return"var(--outline)";const p=n.node;return Object.values(p.buildMaterials).some(h=>h>0)?"var(--locked)":p.distance===-1?"var(--danger)":"var(--outline)"}),s=w(()=>{if(n.node===void 0||Object.values(n.node.buildMaterials).every(d=>d===0))return 0;const p=P(V[n.node.type].building,n.node);if(p===void 0)return 0;const h=Object.values(p.cost).reduce((d,g)=>d+g,0);if(h===0)return 0;const f=Object.values(n.node.buildMaterials).reduce((d,g)=>d+g,0);return Math.max(0,1-f/h)}),o=w(()=>{if(n.node===void 0)return 0;const p=n.node,h=P(V[p.type].building,p);return h===void 0?0:p.storage[0].amount/h.storage[0].limit}),l=w(()=>{const p=i.value/r-2,h=2*p*(o.value-.5),f=Math.sqrt(p*p-h*h);return o.value>=1?["M",p,0,"A",p,p,0,0,0,-p,0,"A",p,p,0,0,0,p,0].join(" "):o.value<.5?["M",-f,-h,"A",p,p,0,0,0,f,-h,"Z"].join(" "):["M",-f,-h,"A",p,p,0,1,0,f,-h,"Z"].join(" ")});function c(){n.node?I.board.draggingNode.value===n.node&&t("place-building",n.node):t("select-building")}return(p,h)=>(_(),C("g",{onMouseup:c,onTouchendPassive:c,style:ie({opacity:p.placing?.5:1})},[b("g",Rc,[b("rect",{class:"body",width:i.value*u(r),height:i.value*u(r),transform:`translate(${-i.value*u(r)/2} ${-i.value*u(r)/2})`,fill:"var(--locked)",stroke:a.value,"stroke-width":"2"},null,8,Lc)]),b("circle",{class:"body",r:i.value/u(r)-1,fill:"var(--locked)",stroke:a.value,"stroke-width":"2"},null,8,Fc),s.value>0?(_(),C("g",Pc,[b("circle",{class:"build",r:i.value/u(r)-1,fill:"none",stroke:"var(--outline)","stroke-width":"2",pathLength:"1","stroke-dasharray":"1","stroke-dashoffset":1-s.value},null,8,Tc)])):T("",!0),o.value>0?(_(),C("g",Oc,[b("path",{class:"storage",d:l.value,fill:"var(--accent1)"},null,8,Ec)])):T("",!0)],36))}});var ur=G(zc,[["__scopeId","data-v-467d665a"]]);const Dc=["transform"],Ac=["d"],jc=["d"],Vc=A({__name:"ContainmentRing",props:{node:{},size:{}},setup(e){const t=e,n=w(()=>{var d;return(d=t.node.state.origin)!=null?d:{x:0,y:0}}),r=w(()=>{var d;return(d=t.node.state.size)!=null?d:600}),i=w(()=>r.value),a=w(()=>i.value+50),s=w(()=>t.node.state),o=w(()=>s.value.angle),l=w(()=>o.value*180/Math.PI),c=w(()=>{const d=P(V[t.node.type].durability,t.node);return s.value.durability/d}),p=Math.PI/360/2,h=w(()=>{const d=Math.PI/4,g={x:Math.cos(p),y:Math.sin(p)},v={x:Math.cos(d-p),y:Math.sin(d-p)},S=[{x:a.value*g.x,y:a.value*g.y},{x:a.value*v.x,y:a.value*v.y},{x:i.value*v.x,y:i.value*v.y},{x:i.value*g.x,y:i.value*g.y}];return["M",S[0].x,S[0].y,"A",a.value,a.value,0,0,1,S[1].x,S[1].y,"L",S[2].x,S[2].y,"A",i.value,i.value,0,0,0,S[3].x,S[3].y,"Z"].join(" ")}),f=w(()=>{const d=i.value+1,g=a.value-1,v=Math.PI/4,S=v*c.value,M=(v-S)/2+p+Math.PI/360/8,y=M+S-2*p-2*Math.PI/360/8,R={x:Math.cos(M),y:Math.sin(M)},O={x:Math.cos(y),y:Math.sin(y)},j=[{x:g*R.x,y:g*R.y},{x:g*O.x,y:g*O.y},{x:d*O.x,y:d*O.y},{x:d*R.x,y:d*R.y}];return["M",j[0].x,j[0].y,"A",g,g,0,0,1,j[1].x,j[1].y,"L",j[2].x,j[2].y,"A",d,d,0,0,0,j[3].x,j[3].y,"Z"].join(" ")});return(d,g)=>(_(),C(X,null,be(8,v=>b("g",{transform:`translate(${n.value.x}, ${n.value.y}) rotate(${l.value+v*45})`},[b("path",{class:"body",d:h.value,fill:"var(--locked)",stroke:"var(--link)","stroke-width":"2"},null,8,Ac),b("path",{class:"health",d:f.value,fill:"#2A6DA1"},null,8,jc)],8,Dc)),64))}});var Bc=G(Vc,[["__scopeId","data-v-1055c0ee"]]);const qc=["transform"],Uc=["fill"],Zc={key:0},Wc=["fill","y"],Gc=["fill","y"],Hc=A({__name:"BoardNode",props:{node:{},nodeType:{},dragging:{},dragged:{},hasDragged:{type:Boolean},receivingNode:{type:Boolean},isSelected:{type:Boolean},selectedAction:{}},emits:["mouseDown","endDragging","clickAction","place-building"],setup(e,{emit:t}){const r=xe(e),i=w(()=>P(r.nodeType.value.draggable,u(r.node)));Ve(i,E=>{const ge=u(r.node);u(r.dragging)===ge&&!E&&t("endDragging",ge)});const a=w(()=>{var ge;const E=u(r.node);return(ge=P(r.nodeType.value.actions,E))==null?void 0:ge.filter(De=>Bt(P(De.visibility,E)))}),s=w(()=>{var ge;const E=u(r.node);if(P(r.nodeType.value.draggable,E)&&((ge=u(r.dragging))==null?void 0:ge.id)===E.id&&u(r.dragged)!=null){const{x:De,y:Me}=u(r.dragged);return{x:E.position.x+Math.round(De/25)*25,y:E.position.y+Math.round(Me/25)*25}}return E.position}),o=w(()=>P(r.nodeType.value.shape,u(r.node))),l=w(()=>P(r.nodeType.value.title,u(r.node))),c=w(()=>{var E;return(E=r.isSelected.value?u(r.selectedAction)&&P(u(r.selectedAction).tooltip,u(r.node)):null)!=null?E:P(r.nodeType.value.label,u(r.node))}),p=w(()=>{var E,ge;return P((ge=(E=u(r.selectedAction))==null?void 0:E.confirmationLabel)!=null?ge:{text:"Click again to confirm"},u(r.node))}),h=w(()=>P(r.nodeType.value.size,u(r.node))),f=w(()=>{var E;return(E=P(r.nodeType.value.progress,u(r.node)))!=null?E:0}),d=w(()=>Oe[ne.theme].variables["--background"]),g=w(()=>{var E;return(E=P(r.nodeType.value.outlineColor,u(r.node)))!=null?E:Oe[ne.theme].variables["--outline"]}),v=w(()=>{var E;return(E=P(r.nodeType.value.fillColor,u(r.node)))!=null?E:Oe[ne.theme].variables["--raised-background"]}),S=w(()=>P(r.nodeType.value.progressColor,u(r.node))),M=w(()=>{var E;return(E=P(r.nodeType.value.titleColor,u(r.node)))!=null?E:Oe[ne.theme].variables["--foreground"]}),y=w(()=>P(r.nodeType.value.progressDisplay,u(r.node))),R=w(()=>r.dragging.value!=null&&u(r.hasDragged)&&P(r.nodeType.value.canAccept,u(r.node),r.dragging.value)),O=w(()=>P(r.nodeType.value.classes,u(r.node)));function j(E){t("mouseDown",E,r.node.value,i.value)}function Q(E){var ge,De,Me;(ge=r.hasDragged)!=null&&ge.value||(t("endDragging",r.node.value),(Me=(De=r.nodeType.value).onClick)==null||Me.call(De,r.node.value),E.stopPropagation())}const xt=w(()=>I.board.draggingNode.value!==r.node.value?!1:!wn(r.node.value));function He(E){const ge=P(V[E.type].building,E);ge!==void 0&&ge.buildableOn!==void 0||!wn(E)||(zt(E),I.board.draggingNode.value=null,t("place-building"))}return(E,ge)=>{var De;return _(),C("g",{class:re(["boardnode",{[E.node.type]:!0,isSelected:E.isSelected,isDraggable:i.value,invalidPlacement:xt.value,...O.value}]),transform:`translate(${s.value.x},${s.value.y})${E.isSelected?" scale(1.2)":""}`},[L(Kl,{actions:(De=a.value)!=null?De:[],"is-selected":E.isSelected,node:E.node,"node-type":E.nodeType,"selected-action":E.selectedAction,onClickAction:ge[0]||(ge[0]=Me=>t("clickAction",Me))},null,8,["actions","is-selected","node","node-type","selected-action"]),b("g",{class:"node-container",onMousedown:j,onTouchstartPassive:j,onMouseup:Q,onTouchendPassive:Q},[o.value===u(de).Circle?(_(),z(ru,{key:0,receivingNode:E.receivingNode,canAccept:R.value,size:h.value,progress:f.value,progressDisplay:y.value,progressColor:S.value,backgroundColor:d.value,fillColor:v.value,outlineColor:g.value},null,8,["receivingNode","canAccept","size","progress","progressDisplay","progressColor","backgroundColor","fillColor","outlineColor"])):o.value===u(de).Diamond?(_(),z(cu,{key:1,receivingNode:E.receivingNode,canAccept:R.value,size:h.value,progress:f.value,progressDisplay:y.value,progressColor:S.value,backgroundColor:d.value,fillColor:v.value,outlineColor:g.value},null,8,["receivingNode","canAccept","size","progress","progressDisplay","progressColor","backgroundColor","fillColor","outlineColor"])):o.value===u(de).Core?(_(),z(Ru,{key:2,node:E.node,size:h.value,placing:u(I).board.draggingNode.value===E.node},null,8,["node","size","placing"])):o.value===u(de).Router?(_(),z(rr,{key:3,node:E.node,size:h.value,placing:u(I).board.draggingNode.value===E.node,onPlaceBuilding:He},null,8,["node","size","placing"])):o.value===u(de).Extractor?(_(),z(sr,{key:4,node:E.node,size:h.value,placing:u(I).board.draggingNode.value===E.node,onPlaceBuilding:He},null,8,["node","size","placing"])):o.value===u(de).Foundry?(_(),z(or,{key:5,node:E.node,size:h.value,placing:u(I).board.draggingNode.value===E.node,onPlaceBuilding:He},null,8,["node","size","placing"])):o.value===u(de).Analyzer?(_(),z(ar,{key:6,node:E.node,size:h.value,placing:u(I).board.draggingNode.value===E.node,onPlaceBuilding:He},null,8,["node","size","placing"])):o.value===u(de).Researcher?(_(),z(lr,{key:7,node:E.node,size:h.value,placing:u(I).board.draggingNode.value===E.node,onPlaceBuilding:He},null,8,["node","size","placing"])):o.value===u(de).Bore?(_(),z(ur,{key:8,node:E.node,size:h.value,placing:u(I).board.draggingNode.value===E.node,onPlaceBuilding:He},null,8,["node","size","placing"])):o.value===u(de).Scrap?(_(),z(ir,{key:9,node:E.node,size:h.value,canAccept:R.value,placing:u(I).board.draggingNode.value===E.node,onPlaceBuilding:He},null,8,["node","size","canAccept","placing"])):o.value===u(de).ContainmentRing?(_(),z(Bc,{key:10,node:E.node,size:h.value},null,8,["node","size"])):T("",!0),b("text",{fill:M.value,class:"node-title"},U(l.value),9,Uc)],32),L(ht,{name:"fade",appear:""},{default:B(()=>{var Me;return[c.value?(_(),C("g",Zc,[b("text",{fill:(Me=c.value.color)!=null?Me:M.value,class:re(["node-title",{pulsing:c.value.pulsing}]),y:-h.value-10},U(c.value.text),11,Wc)])):T("",!0)]}),_:1}),L(ht,{name:"fade",appear:""},{default:B(()=>{var Me;return[E.isSelected&&E.selectedAction?(_(),C("text",{key:0,fill:(Me=p.value.color)!=null?Me:M.value,class:re(["node-title",{pulsing:p.value.pulsing}]),y:h.value+30},U(p.value.text),11,Gc)):T("",!0)]}),_:1})],10,qc)}}});var Yc=G(Hc,[["__scopeId","data-v-717e4984"]]);const Jc={class:"stage",width:"100%",height:"100%"},Kc={class:"g1"},Xc={style:{opacity:"0.4"}},Qc=["transform"],ed=["d"],td=["x1","y1","x2","y2"],$e=10,nd=A({__name:"Board",props:{nodes:{},types:{},state:{},visibility:{},width:{},height:{},style:{},classes:{},links:{},selectedAction:{},selectedNode:{},draggingNode:{},receivingNode:{},mousePosition:{},setReceivingNode:{type:Function},setDraggingNode:{type:Function}},setup(e){const n=xe(e),r=q({x:0,y:0}),i=q({x:0,y:0}),a=q(!1),s=q(null),o=w(()=>{const v=n.nodes.value.slice();if(n.selectedNode.value){const S=v.splice(v.indexOf(n.selectedNode.value),1)[0];v.push(S)}return n.draggingNode.value&&v.push(n.draggingNode.value),v});At(()=>{const v=n.draggingNode.value;if(v==null)return null;const S={x:v.position.x,y:v.position.y};let M=Number.MAX_VALUE;n.setReceivingNode.value(n.nodes.value.reduce((y,R)=>{if(R.id===v.id)return y;const O=n.types.value[R.type];if(!P(O.canAccept,R,v))return y;const Q=Math.pow(S.x-R.position.x,2)+Math.pow(S.y-R.position.y,2);let xt=P(O.size,R);return Q>M||Q>xt*xt?y:(M=Q,R)},null))});function l(v){v.setTransformOrigin(null),v.moveTo(s.value.$el.clientWidth/2,s.value.$el.clientHeight/2),v.on("panstart",S=>{c&&(S.pause(),S.resume(),setTimeout(()=>c=!1,50))}),v.on("pan",S=>{c&&(S.pause(),S.resume())})}let c=!1;function p(){c=!0}function h(v,S=null){if(n.draggingNode.value==null){v.preventDefault(),v.stopPropagation();let M,y;if("touches"in v)if(v.touches.length===1)M=v.touches[0].clientX,y=v.touches[0].clientY;else return;else M=v.clientX,y=v.clientY;r.value={x:M,y},i.value={x:0,y:0},a.value=!1}S!=null&&(n.state.value.selectedNode=null,n.state.value.selectedAction=null)}function f(v){const{x:S,y:M,scale:y}=s.value.panZoomInstance.getTransform();let R,O;if("touches"in v)if(v.touches.length===1)R=v.touches[0].clientX,O=v.touches[0].clientY;else{d(n.draggingNode.value),n.mousePosition.value=null;return}else R=v.clientX,O=v.clientY;n.mousePosition.value={x:(R-S)/y,y:(O-M)/y},i.value={x:i.value.x+(R-r.value.x)/y,y:i.value.y+(O-r.value.y)/y},r.value={x:R,y:O},(Math.abs(i.value.x)>10||Math.abs(i.value.y)>10)&&(a.value=!0),n.draggingNode.value!=null&&(v.preventDefault(),v.stopPropagation(),n.draggingNode.value.position={x:Math.round((n.mousePosition.value.x-300/y)/$e)*$e,y:Math.round((n.mousePosition.value.y-50/y)/$e)*$e})}function d(v){var S,M;if(n.draggingNode.value!=null&&n.draggingNode.value===v){n.receivingNode.value==null&&(n.draggingNode.value.position.x+=Math.round(i.value.x/$e)*$e,n.draggingNode.value.position.y+=Math.round(i.value.y/$e)*$e);const y=n.nodes.value;y.push(y.splice(y.indexOf(n.draggingNode.value),1)[0]),n.receivingNode.value&&((M=(S=n.types.value[n.receivingNode.value.type]).onDrop)==null||M.call(S,n.receivingNode.value,n.draggingNode.value)),n.setDraggingNode.value(null)}else a.value||(n.state.value.selectedNode=null,n.state.value.selectedAction=null)}function g(v,S){n.state.value.selectedAction===S?u(n.selectedAction).onClick(u(n.selectedNode)):n.state.value={...n.state.value,selectedAction:S}}return(v,S)=>{const M=Jt("panZoom");return u(Bt)(v.visibility)?(_(),z(M,{key:0,style:ie([{width:v.width,height:v.height},v.style]),class:re(v.classes),selector:".g1",options:{initialZoom:1.5,minZoom:.1,maxZoom:5,zoomDoubleClickSpeed:1},ref_key:"stage",ref:s,onInit:l,onMousemove:f,onTouchmovePassive:f,onMousedown:S[0]||(S[0]=y=>h(y)),onTouchstartPassive:S[1]||(S[1]=y=>h(y)),onMouseup:S[2]||(S[2]=()=>d(u(v.draggingNode))),onTouchendPassive:S[3]||(S[3]=()=>d(u(v.draggingNode)))},{default:B(()=>[(_(),C("svg",Jc,[b("g",Kc,[b("g",Xc,[L(Wt,{name:"transfer",duration:500,appear:""},{default:B(()=>[(_(!0),C(X,null,be(o.value,y=>(_(),C("g",{key:y.id,style:{"transition-duration":"0s"}},[v.types[y.type].building!==void 0?(_(),C(X,{key:0},[u(P)(v.types[y.type].building,y).transferDistance!==void 0&&y.distance!==-1&&Object.values(y.buildMaterials).every(R=>R===0)?(_(),C("g",{key:0,transform:`translate(${y.position.x} ${y.position.y})`},[b("path",{d:`M ${u(P)(v.types[y.type].building,y).transferDistance+$e/2} 0
                                            L 0 ${u(P)(v.types[y.type].building,y).transferDistance+$e/2}
                                            L -${u(P)(v.types[y.type].building,y).transferDistance+$e/2} 0
                                            L 0 -${u(P)(v.types[y.type].building,y).transferDistance+$e/2}
                                            Z
                                        `,fill:"var(--accent1)"},null,8,ed)],8,Qc)):T("",!0)],64)):T("",!0)]))),128))]),_:1})]),L(Wt,{name:"link",appear:""},{default:B(()=>[(_(!0),C(X,null,be(u(v.links)||[],y=>(_(),C("g",{key:y.stroke==="var(--accent1)"?`${y.startNode.id}-${y.endNode.id}`:`${y.startNode.id}-${y.endNode.id}-transfer`},[y.startNode.distance>=0&&y.endNode.distance>=0?(_(),z(Zl,{key:0,link:y,dragging:u(v.draggingNode),dragged:y.startNode===u(v.draggingNode)||y.endNode===u(v.draggingNode)?i.value:void 0},null,8,["link","dragging","dragged"])):T("",!0)]))),128)),(_(!0),C(X,null,be(o.value.filter(y=>y.type===u(D).Bore),y=>(_(),C("g",{key:y.id},[y.storage[0].amount>0&&y.position.x**2+y.position.y**2>=(u(ut)-100)**2&&y.state!==void 0?(_(),C("line",{key:0,x1:y.position.x,y1:y.position.y,x2:y.position.x*Math.sqrt(u(ut)**2/(y.position.x**2+y.position.y**2)),y2:y.position.y*Math.sqrt(u(ut)**2/(y.position.x**2+y.position.y**2)),stroke:"var(--foreground)","stroke-width":"1",style:{"transition-duration":"0s"}},null,8,td)):T("",!0)]))),128))]),_:1}),L(Wt,{name:"grow",duration:500,appear:""},{default:B(()=>[(_(!0),C(X,null,be(o.value,y=>(_(),C("g",{key:y.id,style:{"transition-duration":"0s"}},[L(Yc,{node:y,nodeType:v.types[y.type],dragging:u(v.draggingNode),dragged:u(v.draggingNode)===y?i.value:void 0,hasDragged:u(v.draggingNode)==null?!1:a.value,receivingNode:u(v.receivingNode)===y,isSelected:u(v.selectedNode)===y,selectedAction:u(v.selectedNode)===y?u(v.selectedAction):null,onMouseDown:h,onEndDragging:d,onClickAction:R=>g(y,R),onPlaceBuilding:p},null,8,["node","nodeType","dragging","dragged","hasDragged","receivingNode","isSelected","selectedAction","onClickAction"])]))),128))]),_:1})])]))]),_:1},8,["style","class"])):T("",!0)}}});Ne.on("setupVue",e=>xr.install(e));const cr=Symbol("Board");var dn=(e=>(e.Outline="Outline",e.Fill="Fill",e))(dn||{}),de=(e=>(e.Circle="Circle",e.Diamond="Triangle",e.Core="Core",e.Router="Router",e.Extractor="Extractor",e.Foundry="Foundry",e.Analyzer="Analyzer",e.Researcher="Researcher",e.Bore="Bore",e.Scrap="Scrap",e.ContainmentRing="ContainmentRing",e))(de||{});function rd(e){const t=kt({nodes:[],selectedNode:null,selectedAction:null},!1);return Ie(n=>{const r=e.call(n,n);r.id=Dn("board-"),r.type=cr,r[jt]=nd,r.state?(Ao(t),W(r,"state")):(t[Nt]={nodes:r.startNodes().map((o,l)=>(o.id=l,o)),selectedNode:null,selectedAction:null},r.state=t),r.nodes=w(()=>u(s.state).nodes),r.selectedNode=w({get(){return s.nodes.value.find(o=>o.id===u(s.state).selectedNode)||null},set(o){var l,c;Te(s.state)?s.state.value={...s.state.value,selectedNode:(l=o==null?void 0:o.id)!=null?l:null}:s.state.selectedNode=(c=o==null?void 0:o.id)!=null?c:null}}),r.selectedAction=w({get(){const o=s.selectedNode.value;if(o==null)return null;const l=s.types[o.type];return l.actions==null?null:l.actions.find(c=>c.id===u(s.state).selectedAction)||null},set(o){var l,c;Te(s.state)?s.state.value={...s.state.value,selectedAction:(l=o==null?void 0:o.id)!=null?l:null}:s.state.selectedAction=(c=o==null?void 0:o.id)!=null?c:null}}),r.mousePosition=q(null),r.links?W(r,"links"):r.links=w(()=>s.selectedAction.value==null?null:s.selectedAction.value.links&&s.selectedNode.value?P(s.selectedAction.value.links,s.selectedNode.value):null),r.draggingNode=q(null),r.receivingNode=q(null),W(r,"visibility"),pe(r,"visibility",Tt.Visible),W(r,"width"),pe(r,"width","100%"),W(r,"height"),pe(r,"height","100%"),W(r,"classes"),W(r,"style");for(const o in r.types){const l=r.types[o];if(W(l,"title"),W(l,"label"),W(l,"size"),pe(l,"size",50),W(l,"style"),W(l,"classes"),W(l,"draggable"),pe(l,"draggable",!1),W(l,"shape"),pe(l,"shape","Circle"),W(l,"canAccept"),pe(l,"canAccept",!1),W(l,"progress"),W(l,"progressDisplay"),pe(l,"progressDisplay","Fill"),W(l,"progressColor"),pe(l,"progressColor","none"),W(l,"fillColor"),W(l,"outlineColor"),W(l,"titleColor"),W(l,"actionDistance"),pe(l,"actionDistance",Math.PI/6),l.nodes=w(()=>u(s.state).nodes.filter(c=>c.type===o)),pe(l,"onClick",function(c){u(s.state).selectedNode=c.id}),l.actions)for(const c of l.actions)W(c,"visibility"),pe(c,"visibility",Tt.Visible),W(c,"icon"),W(c,"fillColor"),W(c,"tooltip"),W(c,"confirmationLabel"),pe(c,"confirmationLabel",{text:"Click again to confirm"}),W(c,"links")}function i(o){r.draggingNode.value=o}function a(o){r.receivingNode.value=o}r.placeInAvailableSpace=function(o,l=100,c=H.Right){const p=s.nodes.value.slice().filter(h=>h===o||(c===H.Down||c===H.Up)&&Math.abs(h.position.x-o.position.x)>l||(c===H.Left||c===H.Right)&&Math.abs(h.position.y-o.position.y)>l?!1:!(c===H.Right&&h.position.x<o.position.x-l||c===H.Left&&h.position.x>o.position.x+l||c===H.Up&&h.position.y>o.position.y+l||c===H.Down&&h.position.y<o.position.y-l)).sort(c===H.Right?(h,f)=>h.position.x-f.position.x:c===H.Left?(h,f)=>f.position.x-h.position.x:c===H.Up?(h,f)=>f.position.y-h.position.y:(h,f)=>h.position.y-f.position.y);for(let h=0;h<p.length;h++){const f=p[h],d=c===H.Right||c===H.Left?Math.abs(o.position.x-f.position.x):Math.abs(o.position.y-f.position.y);if(d<l)c===H.Right?o.position.x=f.position.x+l:c===H.Left?o.position.x=f.position.x-l:c===H.Up?o.position.y=f.position.y-l:c===H.Down&&(o.position.y=f.position.y+l);else if(h>0&&d>l)break}},r[Vt]=function(){const{nodes:o,types:l,state:c,visibility:p,width:h,height:f,style:d,classes:g,links:v,selectedAction:S,selectedNode:M,mousePosition:y,draggingNode:R,receivingNode:O}=this;return{nodes:o,types:l,state:c,visibility:p,width:h,height:f,style:u(d),classes:g,links:v,selectedAction:S,selectedNode:M,mousePosition:y,draggingNode:R,receivingNode:O,setDraggingNode:i,setReceivingNode:a}};const s=r;return s})}function P(e,t,...n){return Pt(e)?e(t,...n):u(e)}function id(e){return Math.max(0,...e.nodes.value.map(t=>t.id))+1}const vt={};Ne.on("addLayer",e=>{const t=nn(e,cr);vt[e.id]=e.on("postUpdate",n=>{t.forEach(r=>{Object.values(r.types).forEach(i=>i.nodes.value.forEach(a=>{var s;return(s=i.update)==null?void 0:s.call(i,a,n)}))})})});Ne.on("removeLayer",e=>{var t;(t=vt[e.id])==null||t.call(vt),vt[e.id]=void 0});const dr=e=>(Re("data-v-5e2d38ce"),e=e(),Le(),e),sd=dr(()=>b("div",{class:"key"},"Ctrl",-1)),od=dr(()=>b("div",{class:"key"},"Shift",-1)),ad={class:"key"},ld=A({__name:"Hotkey",props:{hotkey:{}},setup(e){const t=e;let n="",r=!1,i=!1,a=!1;return At(()=>{n=t.hotkey.key,r=n.startsWith("ctrl+"),r&&(n=n.slice(5)),i=n.startsWith("shift+"),i&&(n=n.slice(6)),a=n.length==1&&n.toLowerCase()!=n.toUpperCase(),a&&(n=n.toUpperCase())}),(s,o)=>(_(),C(X,null,[u(r)?(_(),C(X,{key:0},[sd,Y("+")],64)):T("",!0),u(i)?(_(),C(X,{key:1},[od,Y("+")],64)):T("",!0),b("div",ad,U(u(n)),1)],64))}});var ud=G(ld,[["__scopeId","data-v-5e2d38ce"]]);const Ut=Dt({}),fn=Symbol("Hotkey"),xn=[")","!","@","#","$","%","^","&","*","("];function cd(e){return Ie(t=>{const n=e.call(t,t);return n.type=fn,W(n,"enabled"),pe(n,"enabled",!0),W(n,"description"),n})}Ne.on("addLayer",e=>{nn(e,fn).forEach(t=>{Ut[t.key]=t})});Ne.on("removeLayer",e=>{nn(e,fn).forEach(t=>{Ut[t.key]=void 0})});document.onkeydown=function(e){var r;if(((r=e.target)==null?void 0:r.tagName)==="INPUT"||gn.value&&!K.keepGoing)return;let t=e.key;xn.includes(t)?t="shift+"+xn.indexOf(t):e.shiftKey&&(t="shift+"+t),e.ctrlKey&&(t="ctrl+"+t);const n=Ut[t];n&&u(n.enabled)&&(e.preventDefault(),n.onPress())};Gi(Se(()=>{const e=Object.values(Ut).filter(t=>u(t==null?void 0:t.enabled));return e.length===0?"":L("div",null,[L("br",null,null),L("h4",null,[Y("Hotkeys")]),L("div",{style:"column-count: 2"},[e.map(t=>L("div",null,[L(ud,{hotkey:t},null),Y(" "),t==null?void 0:t.description]))])])}));const fr=A({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(_(),C("div",{style:ie({width:t.width,height:t.height})},null,4))}});const dd={class:"build-element-row"},fd={class:"build-element-column"},gd={class:"build-element-cost"},pd=A({__name:"BuildTabElement",props:{component:{type:[Object,Function]},type:{},building:{},selected:{}},emits:["select-building"],setup(e,{emit:t}){const n=e,r=w(()=>{var o,l;return ye((l=(o=n.building.display)==null?void 0:o.name)!=null?l:"","h3")}),i=w(()=>{var o,l;return ye((l=(o=n.building.display)==null?void 0:o.description)!=null?l:"","div")}),a=w(()=>{let o=[];for(const l in ve)l in n.building.cost&&n.building.cost[l]>0&&o.push([l,ye(ve[l].symbol),n.building.cost[l]]);return o});function s(){t("select-building",n.type)}return(o,l)=>(_(),C("div",dd,[(_(),C("svg",{width:"100px",height:"100px",viewBox:"-30 -30 60 60",class:re({selected:o.selected===o.type})},[(_(),z(oe(o.component),{onSelectBuilding:s},null,32))],2)),b("div",fd,[(_(),z(oe(r.value))),(_(),z(oe(i.value))),b("div",gd,[(_(!0),C(X,null,be(a.value,([c,p,h])=>(_(),C("div",{class:"cost-element",style:ie({color:u(cn)[c]>=h?"var(--feature-foreground)":void 0})},[(_(),z(oe(p))),b("span",null,U(u(ee)(h)),1)],4))),256))])])]))}});var ot=G(pd,[["__scopeId","data-v-30e387df"]]);const vd=e=>(Re("data-v-32f49cfb"),e=e(),Le(),e),md={class:"build-tab"},hd=vd(()=>b("h3",null,"Buildings",-1)),bd={class:"scroll"},yd={class:"build-column"},_d=A({__name:"BuildTab",setup(e){const t=w(()=>{var r;return(r=I.board.draggingNode.value)==null?void 0:r.type});function n(r){const i=I.board.draggingNode,a=i.value;a===null||a.type!==r?i.value=It({position:{x:0,y:0},type:r}):i.value=null}return(r,i)=>(_(),C("div",md,[hd,L(fr),b("div",bd,[b("div",yd,[L(ot,{type:u(D).Extractor,building:u(_e).extractor,component:sr,selected:t.value,onSelectBuilding:n},null,8,["type","building","selected"]),L(ot,{type:u(D).Router,building:u(_e).router,component:rr,selected:t.value,onSelectBuilding:n},null,8,["type","building","selected"]),L(ot,{type:u(D).Foundry,building:u(_e).foundry,component:or,selected:t.value,onSelectBuilding:n},null,8,["type","building","selected"]),L(ot,{type:u(D).Analyzer,building:u(_e).analyzer,component:ar,selected:t.value,onSelectBuilding:n},null,8,["type","building","selected"]),L(ot,{type:u(D).Researcher,building:u(_e).researcher,component:lr,selected:t.value,onSelectBuilding:n},null,8,["type","building","selected"]),u(I).research.bore.researched.value?(_(),z(ot,{key:0,type:u(D).Bore,building:u(_e).bore,component:ur,selected:t.value,onSelectBuilding:n},null,8,["type","building","selected"])):T("",!0)])])]))}});var Nd=G(_d,[["__scopeId","data-v-32f49cfb"]]);const kd=e=>(Re("data-v-f70b8e7e"),e=e(),Le(),e),wd={id:"research-tab"},Sd=kd(()=>b("h3",null,"Materials",-1)),Cd=A({__name:"ResourceTab",setup(e){return(t,n)=>(_(),C("div",wd,[Sd,(_(!0),C(X,null,be(u(ve),(r,i)=>{var a,s;return _(),C(X,{key:i},[u(Bt)((a=r.visibility)!=null?a:!0)?(_(),C("div",{key:0,style:ie({color:(s=r.color)!=null?s:"var(--feature-foreground)"})},[b("div",null,[(_(),z(oe(u(ye)(r.symbol))))]),b("div",null,[(_(),z(oe(u(ye)(r.name)))),Y(":")]),b("div",null,U(u(ee)(u(cn)[i])),1)],4)):T("",!0)],64)}),128))]))}});var xd=G(Cd,[["__scopeId","data-v-f70b8e7e"]]);const Md=A({__name:"VerticalRule",props:{height:{}},setup(e){return(t,n)=>(_(),C("div",{class:"vr",style:ie({height:t.height})},null,4))}});var $d=G(Md,[["__scopeId","data-v-5e0a978a"]]);const gr=e=>(Re("data-v-1f3e0f02"),e=e(),Le(),e),Id={class:"research-tab"},Rd=gr(()=>b("h3",null,"Research",-1)),Ld={class:"research-row"},Fd={class:"current-project"},Pd={key:1,class:"current"},Td=gr(()=>b("h3",null,"Select a Research Project",-1)),Od=[Td],Ed={class:"scroll"},zd={class:"research-block"},Dd=A({__name:"ResearchTab",setup(e){const t=w(()=>Object.values(I.research).filter(a=>Bt(a.visibility))),n=w(()=>t.value.find(a=>a.id===I.activeResearch.value)),r=w(()=>t.value.filter(a=>!u(a.researched)).filter(a=>a.id!==I.activeResearch.value)),i=w(()=>t.value.filter(a=>u(a.researched)));return(a,s)=>(_(),C("div",Id,[Rd,L(fr),b("div",Ld,[b("div",Fd,[Y(" Current Project "),n.value!==void 0?(_(),z(oe(u(et)(n.value)),{key:0,class:"current"})):(_(),C("div",Pd,Od))]),L($d),b("div",Ed,[b("div",zd,[(_(!0),C(X,null,be(r.value,o=>(_(),z(oe(u(et)(o))))),256)),(_(!0),C(X,null,be(i.value,o=>(_(),z(oe(u(et)(o))))),256))])])])]))}});var Ad=G(Dd,[["__scopeId","data-v-1f3e0f02"]]);const jd={class:"map-tab"},Vd={class:"map-column"},Bd=A({__name:"MapTab",setup(e){return(t,n)=>(_(),C("div",jd,[L(Nd),b("div",Vd,[ze(t.$slots,"default",{},void 0,!0),L(Ad)]),L(xd)]))}});var qd=G(Bd,[["__scopeId","data-v-3b6a086b"]]);const Ud=A({__name:"Node",props:{id:{}},setup(e){const n=xe(e),r=vn(sn,()=>{}),i=vn(on,()=>{}),a=St(null),s=w(()=>a.value&&a.value.parentElement);return Ve([s,n.id],([o,l],[c,p])=>{c&&i(u(p)),o&&r(l,o)}),_r(()=>i(u(n.id))),(o,l)=>(_(),C("div",{class:"node",ref_key:"node",ref:a},null,512))}});var Zd=G(Ud,[["__scopeId","data-v-a48cb382"]]);const Wd={class:"resource-list"},Gd=A({__name:"Research",props:{visibility:{},display:{},id:{},resources:{},progress:{},progressPercentage:{},isResearching:{},researched:{}},setup(e){const t=e,n=w(()=>{let i=[];for(const a in ve)a in t.resources&&t.resources[a]>0&&i.push([a,ye(ve[a].symbol),u(t.progress)[a],t.resources[a]]);return i});function r(){u(t.researched)||u(t.isResearching)||(console.log("Setting active research value to",t.id),I.activeResearch.value=t.id)}return(i,a)=>(_(),C("button",{onClick:r,class:re({researching:u(i.isResearching)}),style:ie({background:`linear-gradient(to right, var(--accent1) ${u(i.progressPercentage)*100}%, var(--locked) ${u(i.progressPercentage)*100}%)`})},[b("span",null,[(_(),z(oe(u(ye)(u(i.display).title,"h3"))))]),b("span",null,[(_(),z(oe(u(ye)(u(i.display).description))))]),b("div",Wd,[(_(!0),C(X,null,be(n.value,([s,o,l,c])=>{var p;return _(),C("div",{class:"resource-cost",style:ie({color:((p=u(cn)[s])!=null?p:0)>=l?"var(--feature-foreground)":void 0})},[(_(),z(oe(o),{style:{"user-select":"none"}})),b("span",null,U(u(ee)(c-l))+"/"+U(u(ee)(c)),1)],4)}),256))]),L(Zd,{id:i.id},null,8,["id"])],6))}});var Hd=G(Gd,[["__scopeId","data-v-3edae5dd"]]);const Yd=Symbol("Research");function se(e){const t=kt({});return Ie(n=>{const r=e.call(n,n);r.id=Dn("research-"),r.type=Yd,r[jt]=Hd;for(const[i,a]of Object.entries(r.resources))t.value[i]=a;return r.progress=t,W(r,"visibility"),pe(r,"visibility",Tt.Visible),W(r,"display"),r.progressPercentage=w(()=>1-Object.values(r.progress.value).reduce((i,a)=>i+a,0)/Object.values(r.resources).reduce((i,a)=>i+a,0)),r.isResearching=w(()=>I.activeResearch.value===r.id),r.researched=w(()=>Object.values(r.progress.value).every(i=>i===0)),r[Vt]=function(){const{visibility:i,display:a,id:s,resources:o,progress:l,progressPercentage:c,isResearching:p,researched:h}=this;return{visibility:i,display:a,id:s,resources:o,progress:l,progressPercentage:c,isResearching:p,researched:h}},r})}function Jd(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Nr(e)}const I=Wn("main",function(){const e=rd(s=>({startNodes:du,types:V,links(){const o=[];for(const l of s.nodes.value)for(const c of l.connectedNodes.map(p=>n.value[p]).filter(p=>p!==void 0))(l.distance<c.distance||l.distance===c.distance&&l.id<c.id)&&(o.unshift({startNode:l,endNode:c,stroke:"var(--accent1)",strokeWidth:5}),l.id in Yt.value&&c.id in Yt.value[l.id]&&o.push({startNode:l,endNode:c,stroke:"var(--foreground)",strokeWidth:Yt.value[l.id][c.id]}));return o},style:{height:"100%",overflow:"hidden"}})),t=kt(!0),n=w(()=>{const s={};for(const o of e.nodes.value)s[o.id]=o;return s});this.on("preUpdate",s=>{for(const l of e.nodes.value)hu(l,s);const o=Object.values(I.research).find(l=>l.id===I.activeResearch.value);if(o!==void 0){for(const l of e.nodes.value)ku(o,l,s);o.researched.value&&(a.value="none",$n().info(L("div",null,[L("h3",null,[Y("Research Complete!")]),L("div",null,[L("div",{style:"color: var(--feature-foreground)"},[ye(u(o.display).title)])])])))}}),this.on("update",s=>{for(const o of e.nodes.value)bu(o,s);for(const o of e.nodes.value)yu(o,s);for(const o of e.nodes.value)_u(o,s)}),this.on("postUpdate",()=>{t.value&&(gu(e.nodes.value,e.nodes.value[0]),t.value=!1),wu()});const r=cd(()=>({enabled:e.draggingNode,key:"Escape",description:"Deselect Building",onPress(){e.draggingNode.value=null}})),i={bore:se(()=>({resources:{[$.ConsumptionResearch]:50,[$.LogisticalResearch]:15},display:{title:"Nanite Bore",description:"Unlock a more permanent form of scrap generation"}})),naniteSmelting:se(()=>({resources:{[$.ConsumptionResearch]:100,[$.LogisticalResearch]:25},display:{title:"Nanite Forge",description:"Allow Foundries to turn Scrap into Nanites"}})),circuits:se(()=>({resources:{[$.ConsumptionResearch]:50,[$.LogisticalResearch]:100,[$.BalisticsResearch]:15},display:{title:"Dedicated Circuitry",description:"The first step towards more powerful and performant nodes"}})),transferSpeed:se(()=>({resources:{[$.ConsumptionResearch]:25,[$.LogisticalResearch]:50},display:{title:"Improved Logistics I",description:"Increase the transfer rate of resources to 2/s"}})),transferSpeed2:se(()=>({resources:{[$.ConsumptionResearch]:25*3,[$.LogisticalResearch]:50*3},display:{title:"Improved Logistics II",description:"Increase the transfer rate of resources to 3/s"},visibility:i.transferSpeed.researched})),transferSpeed3:se(()=>({resources:{[$.ConsumptionResearch]:25*3**2,[$.LogisticalResearch]:50*3**2},display:{title:"Improved Logistics III",description:"Increase the transfer rate of resources to 5/s"},visibility:i.transferSpeed2.researched})),transferSpeed4:se(()=>({resources:{[$.ConsumptionResearch]:25*3**3,[$.LogisticalResearch]:50*3**3},display:{title:"Improved Logistics IV",description:"Increase the transfer rate of resources to 8/s"},visibility:i.transferSpeed3.researched})),transferSpeed5:se(()=>({resources:{[$.ConsumptionResearch]:25*3**4,[$.LogisticalResearch]:50*3**4},display:{title:"Improved Logistics V",description:"Increase the transfer rate of resources to 13/s"},visibility:i.transferSpeed4.researched})),transferSpeed6:se(()=>({resources:{[$.ConsumptionResearch]:25*3**5,[$.LogisticalResearch]:50*3**5},display:{title:"Improved Logistics VI",description:"Increase the transfer rate of resources to 21/s"},visibility:i.transferSpeed5.researched})),transferSpeed7:se(()=>({resources:{[$.ConsumptionResearch]:25*3**6,[$.LogisticalResearch]:50*3**6},display:{title:"Improved Logistics VII",description:"Increase the transfer rate of resources to 34/s"},visibility:i.transferSpeed6.researched})),transferSpeed8:se(()=>({resources:{[$.ConsumptionResearch]:25*3**7,[$.LogisticalResearch]:50*3**7},display:{title:"Improved Logistics VIII",description:"Increase the transfer rate of resources to 55/s"},visibility:i.transferSpeed7.researched})),transferSpeed9:se(()=>({resources:{[$.ConsumptionResearch]:25*3**8,[$.LogisticalResearch]:50*3**8},display:{title:"Improved Logistics IX",description:"Increase the transfer rate of resources to 89/s"},visibility:i.transferSpeed8.researched})),transferSpeed10:se(()=>({resources:{[$.ConsumptionResearch]:25*3**9,[$.LogisticalResearch]:50*3**9},display:{title:"Improved Logistics X",description:"Increase the transfer rate of resources to 144/s"},visibility:i.transferSpeed9.researched})),buildSpeed:se(()=>({resources:{[$.ConsumptionResearch]:50,[$.LogisticalResearch]:25},display:{title:"Improved Construction I",description:"Increase the construction rate of structures to 2/s"}})),buildSpeed2:se(()=>({resources:{[$.ConsumptionResearch]:50*3,[$.LogisticalResearch]:25*3},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 3/s"},visibility:i.buildSpeed.researched})),buildSpeed3:se(()=>({resources:{[$.ConsumptionResearch]:50*3**2,[$.LogisticalResearch]:25*3**2},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 5/s"},visibility:i.buildSpeed2.researched})),buildSpeed4:se(()=>({resources:{[$.ConsumptionResearch]:50*3**3,[$.LogisticalResearch]:25*3**3},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 8/s"},visibility:i.buildSpeed3.researched})),buildSpeed5:se(()=>({resources:{[$.ConsumptionResearch]:50*3**4,[$.LogisticalResearch]:25*3**4},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 13/s"},visibility:i.buildSpeed4.researched})),buildSpeed6:se(()=>({resources:{[$.ConsumptionResearch]:50*3**5,[$.LogisticalResearch]:25*3**5},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 21/s"},visibility:i.buildSpeed5.researched})),buildSpeed7:se(()=>({resources:{[$.ConsumptionResearch]:50*3**6,[$.LogisticalResearch]:25*3**6},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 34/s"},visibility:i.buildSpeed6.researched})),buildSpeed8:se(()=>({resources:{[$.ConsumptionResearch]:50*3**7,[$.LogisticalResearch]:25*3**7},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 55/s"},visibility:i.buildSpeed7.researched})),buildSpeed9:se(()=>({resources:{[$.ConsumptionResearch]:50*3**8,[$.LogisticalResearch]:25*3**8},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 89/s"},visibility:i.buildSpeed8.researched})),buildSpeed10:se(()=>({resources:{[$.ConsumptionResearch]:50*3**9,[$.LogisticalResearch]:25*3**9},display:{title:"Improved Construction II",description:"Increase the construction rate of structures to 144/s"},visibility:i.buildSpeed9.researched}))},a=kt("none",!1);return{board:e,idToNodeMap:n,dirty:t,research:i,activeResearch:a,dropBuilding:r,display:Se(()=>{let s;return L(qd,null,Jd(s=et(e))?s:{default:()=>[s]})}),minimizable:!1}}),Kd=e=>[I],gn=w(()=>!1);function Xd(e,t){}var Qd=Object.freeze(Object.defineProperty({__proto__:null,root:I,getInitialLayers:Kd,hasWon:gn,fixOldSave:Xd},Symbol.toStringTag,{value:"Module"}));const Ct=e=>(Re("data-v-4a50ce42"),e=e(),Le(),e),ef={class:"game-over-modal-header"},tf=["src","alt"],nf={class:"game-over-modal-title"},rf=Ct(()=>b("h2",null,"Congratulations!",-1)),sf={key:0},of=Ct(()=>b("br",null,null,-1)),af=Ct(()=>b("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),lf=Ct(()=>b("br",null,null,-1)),uf=["href"],cf=Ct(()=>b("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),df=A({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:r,discordLink:i,versionNumber:a,versionTitle:s}=te,o=w(()=>tn(K.timePlayed)),l=w(()=>gn.value&&!K.keepGoing),c=Ge(K,"autosave");function p(){K.keepGoing=!0}function h(){Ke(at())}return(f,d)=>(_(),z(rt,{"model-value":l.value},{header:B(()=>[b("div",ef,[u(n)?(_(),C("img",{key:0,class:"game-over-modal-logo",src:u(n),alt:u(t)},null,8,tf)):T("",!0),b("div",nf,[rf,b("h4",null,"You've beaten "+U(u(t))+" v"+U(u(a))+": "+U(u(s)),1)])])]),body:B(({shown:g})=>[g?(_(),C("div",sf,[b("div",null,"It took you "+U(o.value)+" to beat the game.",1),of,af,lf,b("div",null,[b("a",{href:u(i),class:"game-over-modal-discord-link"},[cf,Y(" "+U(u(r)),1)],8,uf)]),L(Ue,{title:"Autosave",modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=v=>c.value=v)},null,8,["modelValue"])])):T("",!0)]),footer:B(()=>[b("div",{class:"game-over-footer"},[b("button",{onClick:p,class:"button"},"Keep Going"),b("button",{onClick:h,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var ff=G(df,[["__scopeId","data-v-4a50ce42"]]);const Zt=e=>(Re("data-v-3038a9de"),e=e(),Le(),e),gf=Zt(()=>b("div",{class:"nan-modal-header"},[b("h2",null,"NaN value detected!")],-1)),pf={key:0},vf=Zt(()=>b("br",null,null,-1)),mf=["href"],hf=Zt(()=>b("span",{class:"material-icons nan-modal-discord"},"discord",-1)),bf=Zt(()=>b("br",null,null,-1)),yf={class:"nan-footer"},_f=A({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=te,r=q(!0),i=q(!0),a=Ge(le,"hasNaN"),s=q(null);Ve(a,f=>{f?(r.value=K.autosave,i.value=K.devSpeed===0):(K.autosave=r.value,K.devSpeed=i.value?0:null)});const o=w(()=>{var f;return(f=le.NaNPath)==null?void 0:f.join(".")}),l=w(()=>le.NaNPersistent!=null?le.NaNPersistent.value:null);function c(){le.NaNPersistent!=null&&(le.NaNPersistent.value=0,le.hasNaN=!1)}function p(){le.NaNPersistent&&(le.NaNPersistent.value=1,le.hasNaN=!1)}function h(){le.NaNPersistent&&(le.NaNPersistent.value=NaN,le.hasNaN=!1)}return(f,d)=>(_(),C(X,null,[L(rt,We({modelValue:a.value,"onUpdate:modelValue":d[4]||(d[4]=g=>a.value=g)},f.$attrs),{header:B(()=>[gf]),body:B(()=>[b("div",null,[Y(' Attempted to assign "'+U(o.value)+'" to NaN',1),l.value?(_(),C("span",pf,U(" ")+"(previously "+U(u(En)(l.value))+")",1)):T("",!0),Y(". Auto-saving has been "+U(r.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),vf,b("div",null,[b("a",{href:u(n)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[hf,Y(" "+U(u(t)||"The Paper Pilot Community"),1)],8,mf)]),bf,L(Ue,{title:"Autosave",modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=g=>r.value=g)},null,8,["modelValue"]),u(te).enablePausing?(_(),z(Ue,{key:0,title:"Pause game",modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=g=>i.value=g)},null,8,["modelValue"])):T("",!0)]),footer:B(()=>[b("div",yf,[b("button",{onClick:d[2]||(d[2]=g=>{var v;return(v=s.value)==null?void 0:v.open()}),class:"button"},"Open Saves Manager"),b("button",{onClick:c,class:"button"},"Set to 0"),b("button",{onClick:p,class:"button"},"Set to 1"),l.value&&u(N).neq(l.value,0)&&u(N).neq(l.value,1)?(_(),C("button",{key:0,onClick:d[3]||(d[3]=g=>a.value=!1),class:"button"}," Set to previous ")):T("",!0),b("button",{onClick:h,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),L(Qn,{ref_key:"savesManager",ref:s},null,512)],64))}});var Nf=G(_f,[["__scopeId","data-v-3038a9de"]]);const kf={key:0,class:"tpsDisplay"},wf=A({__name:"TPS",setup(e){const t=w(()=>N.div(le.lastTenTicks.length,le.lastTenTicks.reduce((n,r)=>n+r,0)));return(n,r)=>t.value.isNan()?T("",!0):(_(),C("div",kf,"TPS: "+U(u(zn)(t.value)),1))}});var Sf=G(wf,[["__scopeId","data-v-89b89152"]]);var Cf=A({__name:"App",setup(e){const t=te.useHeader,n=w(()=>Oe[ne.theme].variables),r=Ge(ne,"showTPS"),i=Ge(le,"errors"),a=w(()=>ye(Se(()=>L(X,null,[Hi.map(et)]))));return(s,o)=>i.value.length>0?(_(),C("div",{key:0,class:"error-container",style:ie(n.value)},[L(Ln,{errors:i.value},null,8,["errors"])],4)):(_(),C(X,{key:1},[b("div",{id:"modal-root",style:ie(n.value)},null,4),b("div",{class:re(["app",{useHeader:u(t)}]),style:ie(n.value)},[u(t)?(_(),z(er,{key:0})):T("",!0),L(Vl),u(r.value)?(_(),z(Sf,{key:1})):T("",!0),L(ff),L(Nf),(_(),z(oe(a.value)))],6)],64))}});var xf=G(Cf,[["__scopeId","data-v-6248aa87"]]);Ne.on("setupVue",e=>e.use(Mr));function Mf(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=e;let o,l,c,p;const h=async(d=!0)=>{await c,d&&(o==null||o.addEventListener("controlling",g=>{g.isUpdate&&window.location.reload()})),await(p==null?void 0:p())};async function f(){if("serviceWorker"in navigator){const{Workbox:d,messageSW:g}=await bt(()=>import("./workbox-window.4a8794bb.js"),[]);p=async()=>{l&&l.waiting&&await g(l.waiting,{type:"SKIP_WAITING"})},o=new d("./sw.js",{scope:"./",type:"classic"}),o.addEventListener("activated",v=>{v.isUpdate||r==null||r()});{const v=()=>{n==null||n()};o.addEventListener("waiting",v),o.addEventListener("externalwaiting",v)}o.register({immediate:t}).then(v=>{l=v,a?a("./sw.js",v):i==null||i(v)}).catch(v=>{s==null||s(v)})}}return c=f(),h}function $f(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=e,o=q(!1),l=q(!1);return{updateServiceWorker:Mf({immediate:t,onNeedRefresh(){o.value=!0,n==null||n()},onOfflineReady(){l.value=!0,r==null||r()},onRegistered:i,onRegisteredSW:a,onRegisterError:s}),offlineReady:l,needRefresh:o}}const If=console.error;console.error=function(...e){If(...e)};window.onerror=function(e,t,n,r,i){return le.errors.push(i instanceof Error?i:new Error(JSON.stringify(i))),!0};window.onunhandledrejection=function(e){le.errors.push(e.reason instanceof Error?e.reason:new Error(JSON.stringify(e.reason)))};document.title=te.title;window.projInfo=te;te.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Bi();const{globalBus:e}=await bt(()=>Promise.resolve().then(function(){return Vi}),void 0),{startGameLoop:t}=await bt(()=>import("./gameLoop.13f8e03f.js"),["assets/gameLoop.13f8e03f.js","assets/@fontsource.f583a260.css","assets/vue.17dc9343.js","assets/amator.662264f3.js","assets/bezier-easing.a990b400.js","assets/@vue.f39bd477.js","assets/nanoevents.1080beb7.js","assets/lz-string.dccec454.js","assets/vue-next-select.3f210d97.js","assets/vue-next-select.9e6f4164.css","assets/vuedraggable.3138c559.js","assets/sortablejs.d2aaca1a.js","assets/vue-textarea-autosize.35804eaf.js","assets/vue-panzoom.db51701d.js","assets/panzoom.f5ccc6c8.js","assets/wheel.c9cad283.js","assets/ngraph.events.083734c6.js","assets/vue-toastification.277609fd.js","assets/vue-toastification.4b5f8ac8.css"]),n=window.vue=kr(xf);n.config.errorHandler=function(r,i,a){console.error(r,a,i)},e.emit("setupVue",n),n.mount("#app"),mt(()=>{const r=$n(),{updateServiceWorker:i}=$f({onNeedRefresh(){r.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){i()}})},onOfflineReady(){r.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(a){a&&setInterval(()=>a.update(),60*60*1e3)}})}),t()});export{N as D,bt as _,le as a,te as b,Qd as c,Ne as g,qi as l,K as p,ne as s};

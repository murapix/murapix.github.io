/* empty css                    */import"./vue.98022121.js";import{q as Un,C as t,ab as oe,t as le,aF as k,a1 as x,aL as Kt,bv as ni,G as Ie,as as un,_ as v,az as ci,a2 as _,J as Z,O as g,aK as Pe,a0 as j,I as Re,a8 as u,a9 as a,b7 as ae,aI as lt,aG as ut,u as xi,b2 as gt,l as He,j as br,bw as on,aH as vi,A as ot,$ as se,b9 as Zi,bt as hr,ar as Rt,bc as Fs,T as vr,aD as Es,w as yt,b3 as qt,ap as Os,aO as $e,z as cn,bs as yr,ay as _r,aM as jt,bo as wr,am as Ii,H as kr,a7 as Sr,bf as Cr}from"./@vue.6f8187b0.js";import{L as kn}from"./lz-string.bfbf8ec3.js";import{c as Rs}from"./nanoevents.1080beb7.js";import{i as Nr}from"./unofficial-galaxy-sdk.0a7ae67e.js";import{p as $r}from"./vue-textarea-autosize.35804eaf.js";import{Y as Ir}from"./vue-next-select.a07b6867.js";import{D as qr}from"./vuedraggable.7e35b681.js";import{s as Mr,u as Ds}from"./vue-toastification.73283838.js";import"./sortablejs.93acc2fb.js";const xr=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}};xr();const Tr="modulepreload",qs={},Pr="./",ii=function(n,i){return!i||i.length===0?n():Promise.all(i.map(s=>{if(s=`${Pr}${s}`,s in qs)return;qs[s]=!0;const r=s.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${l}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":Tr,r||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),r)return new Promise((d,m)=>{c.addEventListener("load",d),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>n())},Ar="./projInfo-schema.json",Br="Universal Reconstruction",Fr="An expanded reversal of Distance Incremental",Er="universal_reconstruction",Or="Escapee",Rr="The Paper Pilot Community",Dr="https://discord.gg/WzejVAx",Lr="1.0",Vr="Revitalization",jr=!0,Ur=!1,Gr=2,zr=!0,Hr=null,Wr="",Yr=["root"],Kr=3600,Qr=!0,Xr="base64";var _e={$schema:Ar,title:Br,description:Fr,id:Er,author:Or,discordName:Rr,discordLink:Dr,versionNumber:Lr,versionTitle:Vr,allowGoBack:jr,defaultShowSmall:Ur,defaultDigitsShown:Gr,useHeader:zr,banner:Hr,logo:Wr,initialTabs:Yr,maxTickLength:Kr,enablePausing:Qr,exportEncoding:Xr};const Zr=Un({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var ve=window.player=Zr;function On(e){return JSON.stringify(e,(n,i)=>{var s;return(s=t(i))!=null?s:null})}var ge=(e,n)=>{const i=e.__vccOpts||e;for(const[s,r]of n)i[s]=r;return i};const Jr=["onClick"],eo=oe({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:n}){const i=le(!1),s=le(null);function r(){n("click"),s.value&&clearTimeout(s.value),i.value=!1,un(()=>{i.value=!0,s.value=setTimeout(()=>i.value=!1,500)})}return(l,c)=>(k(),x("button",{onClick:ni(r,["stop"]),class:Ie(["feedback",{activated:i.value,left:e.left}])},[Kt(l.$slots,"default",{},void 0,!0)],10,Jr))}});var Ti=ge(eo,[["__scopeId","data-v-01a1b95c"]]);const Pi=e=>(lt("data-v-ac351c02"),e=e(),ut(),e),to={class:"error"},no={class:"error-title"},io={class:"error-details",style:{"margin-top":"-10px"}},so={key:0},ro={class:"instructions"},oo=["href"],ao=Pi(()=>_("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1)),lo=Pi(()=>_("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)),uo=Pi(()=>_("br",null,null,-1)),co={key:0,style:{"margin-top":"20px"}},mo=Pi(()=>_("h3",null,"Other errors",-1)),po=[mo],fo={class:"error-details"},go={key:0,style:{"margin-top":"10px"}},bo={key:1,style:{"margin-top":"10px"}},ho=oe({__name:"Error",props:{errors:null},setup(e){const n=e,i=v(()=>n.errors[0]),s=v(()=>n.errors.map(c=>c.stack==null?[]:c.stack.split(`
`))),r=v(()=>n.errors.map(c=>c.cause==null?[]:(typeof c.cause=="string"?c.cause:JSON.stringify(c.cause)).split(`
`)));function l(){let c=On(ve);switch(_e.exportEncoding){default:console.warn(`Unknown save encoding: ${_e.exportEncoding}. Defaulting to lz`);case"lz":c=kn.compressToUTF16(c);break;case"base64":c=btoa(unescape(encodeURIComponent(c)));break;case"plain":break}console.log(c);const d=document.createElement("textarea");d.value=c,document.body.appendChild(d),d.select(),d.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(d)}return ci(()=>{ve.autosave=!1,ve.devSpeed=0}),(c,d)=>(k(),x("div",to,[_("h1",no,Z(t(i).name)+": "+Z(t(i).message),1),_("div",io,[t(i).cause?(k(),x("div",so,[(k(!0),x(g,null,Pe(t(r)[0],m=>(k(),x("div",{key:m},Z(m),1))),128))])):j("",!0),t(i).stack?(k(),x("div",{key:1,style:Re(t(i).cause?"margin-top: 10px":"")},[(k(!0),x(g,null,Pe(t(s)[0],m=>(k(),x("div",{key:m},Z(m),1))),128))],4)):j("",!0)]),_("div",ro,[u(" Check the console for more details, and consider sharing it with the developers on "),_("a",{href:t(_e).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,oo),u("! "),a(Ti,{onClick:l,class:"button",style:{display:"inline-flex"}},{default:ae(()=>[ao,lo]),_:1}),uo,e.errors.length>1?(k(),x("div",co,po)):j("",!0),(k(!0),x(g,null,Pe(e.errors.slice(1),(m,p)=>(k(),x("div",{key:p,style:{"margin-top":"20px"}},[_("details",fo,[_("summary",null,Z(m.name)+": "+Z(m.message),1),m.cause?(k(),x("div",go,[(k(!0),x(g,null,Pe(t(r)[p+1],b=>(k(),x("div",{key:b},Z(b),1))),128))])):j("",!0),m.stack?(k(),x("div",bo,[(k(!0),x(g,null,Pe(t(s)[p+1],b=>(k(),x("div",{key:b},Z(b),1))),128))])):j("",!0)])]))),128))])]))}});var Ls=ge(ho,[["__scopeId","data-v-ac351c02"]]);class vo{constructor(n){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=n}get size(){return this.map.size}get(n){const i=this.map.get(n);if(i!==void 0)return i!==this.first&&(i===this.last?(this.last=i.prev,this.last.next=void 0):(i.prev.next=i.next,i.next.prev=i.prev),i.next=this.first,this.first.prev=i,this.first=i),i.value}set(n,i){if(this.maxSize<1)return;if(this.map.has(n))throw new Error("Cannot update existing keys in the cache");const s=new yo(n,i);for(this.first===void 0?(this.first=s,this.last=s):(s.next=this.first,this.first.prev=s,this.first=s),this.map.set(n,s);this.map.size>this.maxSize;){const r=this.last;this.map.delete(r.key),this.last=r.prev,this.last.next=void 0}}}class yo{constructor(n,i){this.next=void 0,this.prev=void 0,this.key=n,this.value=i}}const Oi=17,_o=9e15,wo=Math.log10(9e15),ko=1/9e15,So=308,Co=-324,Ms=5,No=(1<<10)-1,$o=function(){const e=[];for(let i=Co+1;i<=So;i++)e.push(Number("1e"+i));const n=323;return function(i){return e[i+n]}}(),In=[2,Math.E,3,4,5,6,7,8,9,10],Io=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],qo=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let L=function(n){return o.fromValue_noAlloc(n)},ke=function(e,n,i){return o.fromComponents(e,n,i)},qe=function(n,i,s){return o.fromComponents_noNormalize(n,i,s)};const fn=function(n,i){const s=i+1,r=Math.ceil(Math.log10(Math.abs(n))),l=Math.round(n*Math.pow(10,s-r))*Math.pow(10,r-s);return parseFloat(l.toFixed(Math.max(s-r,0)))},Ri=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},Mo=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let n=1;for(;e<10;)n=n*e,++e;e-=1;let i=.9189385332046727;i=i+(e+.5)*Math.log(e),i=i-e;const s=e*e;let r=e;return i=i+1/(12*r),r=r*s,i=i+1/(360*r),r=r*s,i=i+1/(1260*r),r=r*s,i=i+1/(1680*r),r=r*s,i=i+1/(1188*r),r=r*s,i=i+691/(360360*r),r=r*s,i=i+7/(1092*r),r=r*s,i=i+3617/(122400*r),Math.exp(i)/n},Vs=.5671432904097838,xs=function(e,n=1e-10){let i,s;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Vs;e<10?i=0:i=Math.log(e)-Math.log(Math.log(e));for(let r=0;r<100;++r){if(s=(e*Math.exp(-i)+i*i)/(i+1),Math.abs(s-i)<n*Math.abs(s))return s;i=s}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Ts(e,n=1e-10){let i,s,r,l;if(!Number.isFinite(e.mag)||e.eq(o.dZero))return e;if(e.eq(o.dOne))return o.fromNumber(Vs);i=o.ln(e);for(let c=0;c<100;++c){if(s=i.neg().exp(),r=i.sub(e.mul(s)),l=i.sub(r.div(i.add(1).sub(i.add(2).mul(r).div(o.mul(2,i).add(2))))),o.abs(l.sub(i)).lt(o.abs(l).mul(n)))return l;i=l}throw Error(`Iteration failed to converge: ${e.toString()}`)}const O=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof O?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let n;return this.mag===5e-324?n=5:n=this.mag/$o(e),this.sign*n}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,n,i){return new O().fromComponents(e,n,i)}static fromComponents_noNormalize(e,n,i){return new O().fromComponents_noNormalize(e,n,i)}static fromMantissaExponent(e,n){return new O().fromMantissaExponent(e,n)}static fromMantissaExponent_noNormalize(e,n){return new O().fromMantissaExponent_noNormalize(e,n)}static fromDecimal(e){return new O().fromDecimal(e)}static fromNumber(e){return new O().fromNumber(e)}static fromString(e){return new O().fromString(e)}static fromValue(e){return new O().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof O)return e;if(typeof e=="string"){const n=O.fromStringCache.get(e);return n!==void 0?n:O.fromString(e)}else return typeof e=="number"?O.fromNumber(e):O.dZero}static abs(e){return L(e).abs()}static neg(e){return L(e).neg()}static negate(e){return L(e).neg()}static negated(e){return L(e).neg()}static sign(e){return L(e).sign}static sgn(e){return L(e).sign}static round(e){return L(e).round()}static floor(e){return L(e).floor()}static ceil(e){return L(e).ceil()}static trunc(e){return L(e).trunc()}static add(e,n){return L(e).add(n)}static plus(e,n){return L(e).add(n)}static sub(e,n){return L(e).sub(n)}static subtract(e,n){return L(e).sub(n)}static minus(e,n){return L(e).sub(n)}static mul(e,n){return L(e).mul(n)}static multiply(e,n){return L(e).mul(n)}static times(e,n){return L(e).mul(n)}static div(e,n){return L(e).div(n)}static divide(e,n){return L(e).div(n)}static recip(e){return L(e).recip()}static reciprocal(e){return L(e).recip()}static reciprocate(e){return L(e).reciprocate()}static cmp(e,n){return L(e).cmp(n)}static cmpabs(e,n){return L(e).cmpabs(n)}static compare(e,n){return L(e).cmp(n)}static isNaN(e){return e=L(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=L(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,n){return L(e).eq(n)}static equals(e,n){return L(e).eq(n)}static neq(e,n){return L(e).neq(n)}static notEquals(e,n){return L(e).notEquals(n)}static lt(e,n){return L(e).lt(n)}static lte(e,n){return L(e).lte(n)}static gt(e,n){return L(e).gt(n)}static gte(e,n){return L(e).gte(n)}static max(e,n){return L(e).max(n)}static min(e,n){return L(e).min(n)}static minabs(e,n){return L(e).minabs(n)}static maxabs(e,n){return L(e).maxabs(n)}static clamp(e,n,i){return L(e).clamp(n,i)}static clampMin(e,n){return L(e).clampMin(n)}static clampMax(e,n){return L(e).clampMax(n)}static cmp_tolerance(e,n,i){return L(e).cmp_tolerance(n,i)}static compare_tolerance(e,n,i){return L(e).cmp_tolerance(n,i)}static eq_tolerance(e,n,i){return L(e).eq_tolerance(n,i)}static equals_tolerance(e,n,i){return L(e).eq_tolerance(n,i)}static neq_tolerance(e,n,i){return L(e).neq_tolerance(n,i)}static notEquals_tolerance(e,n,i){return L(e).notEquals_tolerance(n,i)}static lt_tolerance(e,n,i){return L(e).lt_tolerance(n,i)}static lte_tolerance(e,n,i){return L(e).lte_tolerance(n,i)}static gt_tolerance(e,n,i){return L(e).gt_tolerance(n,i)}static gte_tolerance(e,n,i){return L(e).gte_tolerance(n,i)}static pLog10(e){return L(e).pLog10()}static absLog10(e){return L(e).absLog10()}static log10(e){return L(e).log10()}static log(e,n){return L(e).log(n)}static log2(e){return L(e).log2()}static ln(e){return L(e).ln()}static logarithm(e,n){return L(e).logarithm(n)}static pow(e,n){return L(e).pow(n)}static pow10(e){return L(e).pow10()}static pow_base(e,n){return L(e).pow_base(n)}static root(e,n){return L(e).root(n)}static factorial(e,n){return L(e).factorial()}static gamma(e,n){return L(e).gamma()}static lngamma(e,n){return L(e).lngamma()}static exp(e){return L(e).exp()}static sqr(e){return L(e).sqr()}static sqrt(e){return L(e).sqrt()}static cube(e){return L(e).cube()}static cbrt(e){return L(e).cbrt()}static tetrate(e,n=2,i=qe(1,0,1)){return L(e).tetrate(n,i)}static iteratedexp(e,n=2,i=qe(1,0,1)){return L(e).iteratedexp(n,i)}static iteratedlog(e,n=10,i=1){return L(e).iteratedlog(n,i)}static layeradd10(e,n){return L(e).layeradd10(n)}static layeradd(e,n,i=10){return L(e).layeradd(n,i)}static slog(e,n=10){return L(e).slog(n)}static lambertw(e){return L(e).lambertw()}static ssqrt(e){return L(e).ssqrt()}static pentate(e,n=2,i=qe(1,0,1)){return L(e).pentate(n,i)}static sin(e){return L(e).sin()}static cos(e){return L(e).cos()}static tan(e){return L(e).tan()}static asin(e){return L(e).asin()}static acos(e){return L(e).acos()}static atan(e){return L(e).atan()}static sinh(e){return L(e).sinh()}static cosh(e){return L(e).cosh()}static tanh(e){return L(e).tanh()}static asinh(e){return L(e).asinh()}static acosh(e){return L(e).acosh()}static atanh(e){return L(e).atanh()}static affordGeometricSeries(e,n,i,s){return this.affordGeometricSeries_core(L(e),L(n),L(i),s)}static sumGeometricSeries(e,n,i,s){return this.sumGeometricSeries_core(e,L(n),L(i),s)}static affordArithmeticSeries(e,n,i,s){return this.affordArithmeticSeries_core(L(e),L(n),L(i),L(s))}static sumArithmeticSeries(e,n,i,s){return this.sumArithmeticSeries_core(L(e),L(n),L(i),L(s))}static efficiencyOfPurchase(e,n,i){return this.efficiencyOfPurchase_core(L(e),L(n),L(i))}static randomDecimalForTesting(e){if(Math.random()*20<1)return qe(0,0,0);const n=Math.random()>.5?1:-1;if(Math.random()*20<1)return qe(n,0,1);const i=Math.floor(Math.random()*(e+1));let s=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(s=Math.trunc(s));let r=Math.pow(10,s);return Math.random()>.9&&(r=Math.trunc(r)),ke(n,i,r)}static affordGeometricSeries_core(e,n,i,s){const r=n.mul(i.pow(s));return O.floor(e.div(r).mul(i.sub(1)).add(1).log10().div(i.log10()))}static sumGeometricSeries_core(e,n,i,s){return n.mul(i.pow(s)).mul(O.sub(1,i.pow(e))).div(O.sub(1,i))}static affordArithmeticSeries_core(e,n,i,s){const l=n.add(s.mul(i)).sub(i.div(2)),c=l.pow(2);return l.neg().add(c.add(i.mul(e).mul(2)).sqrt()).div(i).floor()}static sumArithmeticSeries_core(e,n,i,s){const r=n.add(s.mul(i));return e.div(2).mul(r.mul(2).plus(e.sub(1).mul(i)))}static efficiencyOfPurchase_core(e,n,i){return e.div(n).add(e.div(i))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<ko)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),n=Math.sign(this.mag);if(e>=_o)return this.layer+=1,this.mag=n*Math.log10(e),this;for(;e<wo&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=n*Math.pow(10,e),e=Math.abs(this.mag),n=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,n,i){return this.sign=e,this.layer=n,this.mag=i,this.normalize(),this}fromComponents_noNormalize(e,n,i){return this.sign=e,this.layer=n,this.mag=i,this}fromMantissaExponent(e,n){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=n+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,n){return this.fromMantissaExponent(e,n),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const n=e,i=O.fromStringCache.get(n);if(i!==void 0)return this.fromDecimal(i);e=e.replace(",","");const s=e.split("^^^");if(s.length===2){const y=parseFloat(s[0]),q=parseFloat(s[1]),T=s[1].split(";");let M=1;if(T.length===2&&(M=parseFloat(T[1]),isFinite(M)||(M=1)),isFinite(y)&&isFinite(q)){const P=O.pentate(y,q,M);return this.sign=P.sign,this.layer=P.layer,this.mag=P.mag,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}}const r=e.split("^^");if(r.length===2){const y=parseFloat(r[0]),q=parseFloat(r[1]),T=r[1].split(";");let M=1;if(T.length===2&&(M=parseFloat(T[1]),isFinite(M)||(M=1)),isFinite(y)&&isFinite(q)){const P=O.tetrate(y,q,M);return this.sign=P.sign,this.layer=P.layer,this.mag=P.mag,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}}const l=e.split("^");if(l.length===2){const y=parseFloat(l[0]),q=parseFloat(l[1]);if(isFinite(y)&&isFinite(q)){const T=O.pow(y,q);return this.sign=T.sign,this.layer=T.layer,this.mag=T.mag,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}}e=e.trim().toLowerCase();let c,d,m=e.split("pt");if(m.length===2){c=10,d=parseFloat(m[0]),m[1]=m[1].replace("(",""),m[1]=m[1].replace(")","");let y=parseFloat(m[1]);if(isFinite(y)||(y=1),isFinite(c)&&isFinite(d)){const q=O.tetrate(c,d,y);return this.sign=q.sign,this.layer=q.layer,this.mag=q.mag,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}}if(m=e.split("p"),m.length===2){c=10,d=parseFloat(m[0]),m[1]=m[1].replace("(",""),m[1]=m[1].replace(")","");let y=parseFloat(m[1]);if(isFinite(y)||(y=1),isFinite(c)&&isFinite(d)){const q=O.tetrate(c,d,y);return this.sign=q.sign,this.layer=q.layer,this.mag=q.mag,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}}const p=e.split("e"),b=p.length-1;if(b===0){const y=parseFloat(e);if(isFinite(y))return this.fromNumber(y),O.fromStringCache.size>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}else if(b===1){const y=parseFloat(e);if(isFinite(y)&&y!==0)return this.fromNumber(y),O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}const f=e.split("e^");if(f.length===2){this.sign=1,f[0].charAt(0)=="-"&&(this.sign=-1);let y="";for(let q=0;q<f[1].length;++q){const T=f[1].charCodeAt(q);if(T>=43&&T<=57||T===101)y+=f[1].charAt(q);else return this.layer=parseFloat(y),this.mag=parseFloat(f[1].substr(q+1)),this.normalize(),O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}}if(b<1)return this.sign=0,this.layer=0,this.mag=0,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this;const h=parseFloat(p[0]);if(h===0)return this.sign=0,this.layer=0,this.mag=0,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this;let N=parseFloat(p[p.length-1]);if(b>=2){const y=parseFloat(p[p.length-2]);isFinite(y)&&(N*=Math.sign(y),N+=Ri(y))}if(!isFinite(h))this.sign=p[0]==="-"?-1:1,this.layer=b,this.mag=N;else if(b===1)this.sign=Math.sign(h),this.layer=1,this.mag=N+Math.log10(Math.abs(h));else if(this.sign=Math.sign(h),this.layer=b,b===2){const y=O.mul(ke(1,2,N),L(h));return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}else this.mag=N;return this.normalize(),O.fromStringCache.maxSize>=1&&O.fromStringCache.set(n,O.fromDecimal(this)),this}fromValue(e){return e instanceof O?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:fn(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:fn(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Ms?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):fn(this.m,e)+"e"+fn(this.e,e):this.layer===1?fn(this.m,e)+"e"+fn(this.e,e):this.layer<=Ms?(this.sign===-1?"-":"")+"e".repeat(this.layer)+fn(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+fn(this.mag,e)}abs(){return qe(this.sign===0?0:1,this.layer,this.mag)}neg(){return qe(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?O.dZero:this.layer===0?ke(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?O.dZero:this.layer===0?ke(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?O.dZero:this.layer===0?ke(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?O.dZero:this.layer===0?ke(this.sign,0,Math.trunc(this.mag)):this}add(e){const n=L(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(n.layer)||this.sign===0)return n;if(n.sign===0)return this;if(this.sign===-n.sign&&this.layer===n.layer&&this.mag===n.mag)return qe(0,0,0);let i,s;if(this.layer>=2||n.layer>=2)return this.maxabs(n);if(O.cmpabs(this,n)>0?(i=this,s=n):(i=n,s=this),i.layer===0&&s.layer===0)return O.fromNumber(i.sign*i.mag+s.sign*s.mag);const r=i.layer*Math.sign(i.mag),l=s.layer*Math.sign(s.mag);if(r-l>=2)return i;if(r===0&&l===-1){if(Math.abs(s.mag-Math.log10(i.mag))>Oi)return i;{const c=Math.pow(10,Math.log10(i.mag)-s.mag),d=s.sign+i.sign*c;return ke(Math.sign(d),1,s.mag+Math.log10(Math.abs(d)))}}if(r===1&&l===0){if(Math.abs(i.mag-Math.log10(s.mag))>Oi)return i;{const c=Math.pow(10,i.mag-Math.log10(s.mag)),d=s.sign+i.sign*c;return ke(Math.sign(d),1,Math.log10(s.mag)+Math.log10(Math.abs(d)))}}if(Math.abs(i.mag-s.mag)>Oi)return i;{const c=Math.pow(10,i.mag-s.mag),d=s.sign+i.sign*c;return ke(Math.sign(d),1,s.mag+Math.log10(Math.abs(d)))}}plus(e){return this.add(e)}sub(e){return this.add(L(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const n=L(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(n.layer))return n;if(this.sign===0||n.sign===0)return qe(0,0,0);if(this.layer===n.layer&&this.mag===-n.mag)return qe(this.sign*n.sign,0,1);let i,s;if(this.layer>n.layer||this.layer==n.layer&&Math.abs(this.mag)>Math.abs(n.mag)?(i=this,s=n):(i=n,s=this),i.layer===0&&s.layer===0)return O.fromNumber(i.sign*s.sign*i.mag*s.mag);if(i.layer>=3||i.layer-s.layer>=2)return ke(i.sign*s.sign,i.layer,i.mag);if(i.layer===1&&s.layer===0)return ke(i.sign*s.sign,1,i.mag+Math.log10(s.mag));if(i.layer===1&&s.layer===1)return ke(i.sign*s.sign,1,i.mag+s.mag);if(i.layer===2&&s.layer===1){const r=ke(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(ke(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)));return ke(i.sign*s.sign,r.layer+1,r.sign*r.mag)}if(i.layer===2&&s.layer===2){const r=ke(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(ke(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)));return ke(i.sign*s.sign,r.layer+1,r.sign*r.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const n=L(e);return this.mul(n.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?O.dNaN:this.layer===0?ke(this.sign,0,1/this.mag):ke(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const n=L(e);return this.sign>n.sign?1:this.sign<n.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const n=L(e),i=this.mag>0?this.layer:-this.layer,s=n.mag>0?n.layer:-n.layer;return i>s?1:i<s?-1:this.mag>n.mag?1:this.mag<n.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const n=L(e);return this.sign===n.sign&&this.layer===n.layer&&this.mag===n.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const n=L(e);return this.lt(n)?n:this}min(e){const n=L(e);return this.gt(n)?n:this}maxabs(e){const n=L(e);return this.cmpabs(n)<0?n:this}minabs(e){const n=L(e);return this.cmpabs(n)>0?n:this}clamp(e,n){return this.max(e).min(n)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,n){const i=L(e);return this.eq_tolerance(i,n)?0:this.cmp(i)}compare_tolerance(e,n){return this.cmp_tolerance(e,n)}eq_tolerance(e,n){const i=L(e);if(n==null&&(n=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;let s=this.mag,r=i.mag;return this.layer>i.layer&&(r=Ri(r)),this.layer<i.layer&&(s=Ri(s)),Math.abs(s-r)<=n*Math.max(Math.abs(s),Math.abs(r))}equals_tolerance(e,n){return this.eq_tolerance(e,n)}neq_tolerance(e,n){return!this.eq_tolerance(e,n)}notEquals_tolerance(e,n){return this.neq_tolerance(e,n)}lt_tolerance(e,n){const i=L(e);return!this.eq_tolerance(i,n)&&this.lt(i)}lte_tolerance(e,n){const i=L(e);return this.eq_tolerance(i,n)||this.lt(i)}gt_tolerance(e,n){const i=L(e);return!this.eq_tolerance(i,n)&&this.gt(i)}gte_tolerance(e,n){const i=L(e);return this.eq_tolerance(i,n)||this.gt(i)}pLog10(){return this.lt(O.dZero)?O.dZero:this.log10()}absLog10(){return this.sign===0?O.dNaN:this.layer>0?ke(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):ke(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?O.dNaN:this.layer>0?ke(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):ke(this.sign,0,Math.log10(this.mag))}log(e){return e=L(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?O.dNaN:this.layer===0&&e.layer===0?ke(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):O.div(this.log10(),e.log10())}log2(){return this.sign<=0?O.dNaN:this.layer===0?ke(this.sign,0,Math.log2(this.mag)):this.layer===1?ke(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?ke(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):ke(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?O.dNaN:this.layer===0?ke(this.sign,0,Math.log(this.mag)):this.layer===1?ke(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?ke(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):ke(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const n=L(e),i=this,s=n;if(i.sign===0)return s.eq(0)?qe(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(s.sign===0)return qe(1,0,1);if(s.sign===1&&s.layer===0&&s.mag===1)return i;const r=i.absLog10().mul(s).pow10();return this.sign===-1?Math.abs(s.toNumber()%2)%2===1?r.neg():Math.abs(s.toNumber()%2)%2===0?r:O.dNaN:r}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return O.dNaN;let e=this;if(e.layer===0){const n=Math.pow(10,e.sign*e.mag);if(Number.isFinite(n)&&Math.abs(n)>=.1)return ke(1,0,n);if(e.sign===0)return O.dOne;e=qe(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?ke(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?ke(-e.sign,e.layer+1,-e.mag):O.dOne}pow_base(e){return L(e).pow(this)}root(e){const n=L(e);return this.pow(n.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?O.exp(O.mul(this,O.ln(this).sub(1))):O.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(qe(1,0,24)))return O.fromNumber(Mo(this.sign*this.mag));const e=this.mag-1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const i=e*e;let s=e,r=12*s,l=1/r,c=n+l;if(c===n||(n=c,s=s*i,r=360*s,l=1/r,c=n-l,c===n))return O.exp(n);n=c,s=s*i,r=1260*s;let d=1/r;return n=n+d,s=s*i,r=1680*s,d=1/r,n=n-d,O.exp(n)}else return this.layer===1?O.exp(O.mul(this,O.ln(this).sub(1))):O.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?O.dOne:this.layer===0&&this.mag<=709.7?O.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?ke(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?ke(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):ke(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return O.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return ke(1,2,Math.log10(this.mag)-.3010299956639812);{const e=O.div(qe(this.sign,this.layer-1,this.mag),qe(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,n=qe(1,0,1)){if(e===1)return O.pow(this,n);if(e===0)return new O(n);if(this.eq(O.dOne))return O.dOne;if(this.eq(-1))return O.pow(this,n);if(e===Number.POSITIVE_INFINITY){const r=this.toNumber();if(r<=1.444667861009766&&r>=.06598803584531254){if(r>1.444667861009099)return O.fromNumber(Math.E);const l=O.ln(this).neg();return l.lambertw().div(l)}else return r>1.444667861009766?O.fromNumber(Number.POSITIVE_INFINITY):O.dNaN}if(this.eq(O.dZero)){let r=Math.abs((e+1)%2);return r>1&&(r=2-r),O.fromNumber(r)}if(e<0)return O.iteratedlog(n,this,-e);n=L(n);const i=e;e=Math.trunc(e);const s=i-e;if(this.gt(O.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let r=0;r<e;++r){const l=n;if(n=this.pow(n),l.eq(n))return n}if(s!=0){const r=this.pow(n);return n.mul(1-s).add(r.mul(s))}return n}s!==0&&(n.eq(O.dOne)?this.gt(10)?n=this.pow(s):(n=O.fromNumber(O.tetrate_critical(this.toNumber(),s)),this.lt(2)&&(n=n.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?n=n.layeradd10(s):n=n.layeradd(s,this));for(let r=0;r<e;++r){if(n=this.pow(n),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(n.layer-this.layer>3)return qe(n.sign,n.layer+(e-r-1),n.mag);if(r>1e4)return n}return n}iteratedexp(e=2,n=qe(1,0,1)){return this.tetrate(e,n)}iteratedlog(e=10,n=1){if(n<0)return O.tetrate(e,-n,this);e=L(e);let i=O.fromDecimal(this);const s=n;n=Math.trunc(n);const r=s-n;if(i.layer-e.layer>3){const l=Math.min(n,i.layer-e.layer-3);n-=l,i.layer-=l}for(let l=0;l<n;++l){if(i=i.log(e),!isFinite(i.layer)||!isFinite(i.mag))return i.normalize();if(l>1e4)return i}return r>0&&r<1&&(e.eq(10)?i=i.layeradd10(-r):i=i.layeradd(-r,e)),i}slog(e=10,n=100){let i=.001,s=!1,r=!1,l=this.slog_internal(e).toNumber();for(let c=1;c<n;++c){const m=new O(e).tetrate(l).gt(this);if(c>1&&r!=m&&(s=!0),r=m,s?i/=2:i*=2,i=Math.abs(i)*(m?-1:1),l+=i,i===0)break}return O.fromNumber(l)}slog_internal(e=10){if(e=L(e),e.lte(O.dZero)||e.eq(O.dOne))return O.dNaN;if(e.lt(O.dOne))return this.eq(O.dOne)?O.dZero:this.eq(O.dZero)?O.dNegOne:O.dNaN;if(this.mag<0||this.eq(O.dZero))return O.dNegOne;let n=0,i=O.fromDecimal(this);if(i.layer-e.layer>3){const s=i.layer-e.layer-3;n+=s,i.layer-=s}for(let s=0;s<100;++s)if(i.lt(O.dZero))i=O.pow(e,i),n-=1;else{if(i.lte(O.dOne))return O.fromNumber(n+O.slog_critical(e.toNumber(),i.toNumber()));n+=1,i=O.log(i,e)}return O.fromNumber(n)}static slog_critical(e,n){return e>10?n-1:O.critical_section(e,n,qo)}static tetrate_critical(e,n){return O.critical_section(e,n,Io)}static critical_section(e,n,i){n*=10,n<0&&(n=0),n>10&&(n=10),e<2&&(e=2),e>10&&(e=10);let s=0,r=0;for(let c=0;c<In.length;++c)if(In[c]==e){s=i[c][Math.floor(n)],r=i[c][Math.ceil(n)];break}else if(In[c]<e&&In[c+1]>e){const d=(e-In[c])/(In[c+1]-In[c]);s=i[c][Math.floor(n)]*(1-d)+i[c+1][Math.floor(n)]*d,r=i[c][Math.ceil(n)]*(1-d)+i[c+1][Math.ceil(n)]*d;break}const l=n-Math.floor(n);return s<=0||r<=0?s*(1-l)+r*l:Math.pow(e,Math.log(s)/Math.log(e)*(1-l)+Math.log(r)/Math.log(e)*l)}layeradd10(e){e=O.fromValue_noAlloc(e).toNumber();const n=O.fromDecimal(this);if(e>=1){n.mag<0&&n.layer>0?(n.sign=0,n.mag=0,n.layer=0):n.sign===-1&&n.layer==0&&(n.sign=1,n.mag=-n.mag);const i=Math.trunc(e);e-=i,n.layer+=i}if(e<=-1){const i=Math.trunc(e);if(e-=i,n.layer+=i,n.layer<0)for(let s=0;s<100;++s){if(n.layer++,n.mag=Math.log10(n.mag),!isFinite(n.mag))return n.sign===0&&(n.sign=1),n.layer<0&&(n.layer=0),n.normalize();if(n.layer>=0)break}}for(;n.layer<0;)n.layer++,n.mag=Math.log10(n.mag);return n.sign===0&&(n.sign=1,n.mag===0&&n.layer>=1&&(n.layer-=1,n.mag=1)),n.normalize(),e!==0?n.layeradd(e,10):n}layeradd(e,n){const s=this.slog(n).toNumber()+e;return s>=0?O.tetrate(n,s):Number.isFinite(s)?s>=-1?O.log(O.tetrate(n,s+1),n):O.log(O.log(O.tetrate(n,s+2),n),n):O.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return O.fromNumber(xs(this.toNumber()));if(this.layer===0)return O.fromNumber(xs(this.sign*this.mag));if(this.layer===1)return Ts(this);if(this.layer===2)return Ts(this);if(this.layer>=3)return qe(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return qe(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,n=qe(1,0,1)){n=L(n);const i=e;e=Math.trunc(e);const s=i-e;s!==0&&(n.eq(O.dOne)?(++e,n=O.fromNumber(s)):this.eq(10)?n=n.layeradd10(s):n=n.layeradd(s,this));for(let r=0;r<e;++r){if(n=this.tetrate(n.toNumber()),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(r>10)return n}return n}sin(){return this.mag<0?this:this.layer===0?O.fromNumber(Math.sin(this.sign*this.mag)):qe(0,0,0)}cos(){return this.mag<0?O.dOne:this.layer===0?O.fromNumber(Math.cos(this.sign*this.mag)):qe(0,0,0)}tan(){return this.mag<0?this:this.layer===0?O.fromNumber(Math.tan(this.sign*this.mag)):qe(0,0,0)}asin(){return this.mag<0?this:this.layer===0?O.fromNumber(Math.asin(this.sign*this.mag)):qe(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?O.fromNumber(Math.acos(this.toNumber())):this.layer===0?O.fromNumber(Math.acos(this.sign*this.mag)):qe(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?O.fromNumber(Math.atan(this.sign*this.mag)):O.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return O.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return O.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?qe(Number.NaN,Number.NaN,Number.NaN):O.ln(this.add(1).div(O.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(O.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let o=O;o.fromStringCache=new vo(No);o.dZero=qe(0,0,0);o.dOne=qe(1,0,1);o.dNegOne=qe(-1,0,1);o.dTwo=qe(1,0,2);o.dTen=qe(1,0,10);o.dNaN=qe(Number.NaN,Number.NaN,Number.NaN);o.dInf=qe(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);o.dNegInf=qe(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);o.dNumberMax=ke(1,0,Number.MAX_VALUE);o.dNumberMin=ke(1,0,Number.MIN_VALUE);L=o.fromValue_noAlloc;ke=o.fromComponents;qe=o.fromComponents_noNormalize;o.fromMantissaExponent;o.fromMantissaExponent_noNormalize;const $t=Rs();"fonts"in document&&(document.fonts.onloadingdone=()=>$t.emit("fontsLoaded"));var xo=Object.freeze(Object.defineProperty({__proto__:null,globalBus:$t},Symbol.toStringTag,{value:"Module"})),We=(e=>(e.standard="standard",e.thousands="thousands",e.engineering="engineering",e.scientific="scientific",e))(We||{});function an(e={}){return Object.assign({id:`${_e.id}-0`,name:"Default Save",tabs:_e.initialTabs.slice(),time:Date.now(),autosave:!0,timePlayed:0,keepGoing:!1,modID:_e.id,modVersion:_e.versionNumber,layers:{}},e)}const To=le(!1);function ht(e){var i;if(t(To))return(i=localStorage.getItem((e!=null?e:ve).id))!=null?i:"";const n=kn.compressToUTF16(On(e!=null?e:ve));return localStorage.setItem((e!=null?e:ve).id,n),n}async function Po(){Eo();try{let e=localStorage.getItem(we.active);if(e==null){await ln(Fn());return}if(e=yn(e),e==null)throw"Unable to determine save encoding";const n=JSON.parse(e);if(n.modID!==_e.id){await ln(Fn());return}n.id=we.active,await ln(n)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await ln(Fn())}}function yn(e){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=kn.decompressFromUTF16(e);else return console.warn("Unable to determine preset encoding",e),null;return e}function Fn(){const e=ei(),n=an({id:e});return ht(n),we.saves.push(e),n}function ei(){let e,n=0;do e=`${_e.id}-${n++}`;while(localStorage.getItem(e)!=null);return e}const Ji=le(!1);async function ln(e){console.info("Loading save",e),Ji.value=!0;const{layers:n,removeLayer:i,addLayer:s}=await ii(()=>Promise.resolve().then(function(){return Rl}),void 0),{fixOldSave:r,getInitialLayers:l}=await ii(()=>Promise.resolve().then(function(){return ab}),void 0);for(const c in n){const d=n[c];d&&i(d)}l(e).forEach(c=>s(c,e)),e=an(e),e.time=Date.now(),e.modVersion!==_e.versionNumber&&(r(e.modVersion,e),e.modVersion=_e.versionNumber),Object.assign(ve,e),we.active=ve.id,$t.emit("onLoad")}const Ht=xi({});function Ao(e){if(Ht[e]==null){let n=localStorage.getItem(e);if(n==null)Ht[e]={error:"Save doesn't exist in localStorage",id:e};else if(n==="dW5kZWZpbmVk")Ht[e]={error:"Save is undefined",id:e};else try{if(n=yn(n),n==null)return console.warn("Unable to determine preset encoding",n),Ht[e]={error:"Unable to determine preset encoding",id:e},Ht[e];Ht[e]={...JSON.parse(n),id:e}}catch(i){Ht[e]={error:i,id:e},console.warn(`Failed to load info about save with id ${e}:
${i}
${n}`)}}return Ht[e]}function Bo(){Object.keys(Ht).forEach(e=>delete Ht[e])}function yi(e){Ht[e]=void 0}setInterval(()=>{ve.autosave&&ht()},1e3);window.onbeforeunload=()=>{ve.autosave&&ht()};window.save=ht;const Fo=window.hardReset=async()=>{await ln(Fn())};window.deleteLowerSaves=()=>{const e=Object.values(we.saves).indexOf(ve.id)+1;Object.values(we.saves).slice(e).forEach(n=>localStorage.removeItem(n)),we.saves=we.saves.slice(0,e)};const si=Un({active:"",saves:[],showTPS:!0,unthrottled:!1,alignUnits:!1,numberFormat:We.scientific,backupNumberFormat:We.scientific,showNextValues:!0});gt(si,e=>{const n=kn.compressToUTF16(JSON.stringify(e));localStorage.setItem(_e.id,n)},{deep:!0});var we=window.settings=si;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,alignUnits:!1,numberFormat:We.scientific,backupNumberFormat:We.scientific,showNextValues:!0};$t.emit("loadSettings",e),Object.assign(si,e),Fo()};function Eo(){try{let e=localStorage.getItem(_e.id);if(e!=null&&e!==""){if(e=yn(e),e==null){console.warn("Unable to determine settings encoding",e);return}const n=JSON.parse(e);typeof n=="object"&&Object.assign(si,n)}$t.emit("loadSettings",si)}catch{}}const Oo=Un([]),js=Un([]);function Ro(e){js.push(e)}const Do=Un([]),Lo=o.pow10(1e3),es=new o(.001),_i=o.pow10(1e4),Vo=new o("eeee1000");var ts=(e=>(e.decimal="decimal",e.total="total",e))(ts||{});function D(e,n=_e.defaultDigitsShown,i=_e.defaultShowSmall,s=we.numberFormat){if(e=new o(e),o.isNaN(e))return"NaN";if(e.sign<0)return`-${D(e.negate(),n,i,s)}`;if(!o.isFinite(e))return"Infinity";if(e.gte(Vo))return Us(e);if(e.eq(o.dZero))return 0 .toFixed(n);if(e.lt(es)&&i)return e=Ys(e),e.gte(Lo)?`${D(e,n)}\u207B\xB9`:ri(e,n).replace(/([^(?:e|F)]*)$/,"-$1");if(e.gte(1e9))switch(s){case We.standard:return Gs(e,we.backupNumberFormat,n+1,"total",e.gte(_i));case We.thousands:return is(e,n+1,"total",e.gte(_i));case We.engineering:return ss(e,n+1,"total",e.gte(_i));case We.scientific:return ri(e,n,"decimal",e.gte(_i))}if(e.gte(1e3))switch(s){case We.standard:case We.thousands:case We.engineering:return xn(e,n,"total");case We.scientific:return xn(e,n,"decimal")}return Sn(e,n)}function te(e,n=_e.defaultShowSmall,i=we.numberFormat){if(e=new o(e),e.gte(1e9)||e.lte(.98)&&e.neq(0)&&n)return D(e,void 0,n,i);switch(i){case We.standard:case We.thousands:return e.gte(1e4)?D(e,void 0,n,i):D(e,0,n,We.scientific);default:return D(e,0,n,i)}}function Us(e){e=new o(e);const n=e.slog();if(n.gte(1e6))return`F${D(n.floor())}`;const i=n.sub(n.floor()).pow10(),s=n.floor();return`${i.toStringWithDecimalPlaces(3)}F${xn(s,0)}`}function Gs(e,n=we.backupNumberFormat,i=_e.defaultDigitsShown+1,s="total",r=!1){i<3&&(i=3);const[l,c]=jo(e,i);if(typeof c=="string"){if(r)return`1 ${c}`;switch(s){case"decimal":return`${Sn(l,i)} ${c}`;case"total":return`${l.toPrecision(i)} ${c}`}}if(c.eq(0))switch(s){case"decimal":return Sn(l,i);case"total":return l.toPrecision(i)}switch(n){case We.thousands:return is(e,i,void 0,r);case We.engineering:return ss(e,i,void 0,r);case We.scientific:return ri(e,i-1,void 0,r)}}function jo(e,n=_e.defaultDigitsShown+1){let[s,r]=zs(e,n);if(r.gt(1e3))return[s,r];if(r.eq(0))return[s,r];if(r.eq(1))return[s,"K"];if(r.eq(2))return[s,"M"];if(r.eq(3))return[s,"B"];const l=r.minus(1).toNumber(),c=l%10,d=Math.trunc(l%100/10),m=Math.trunc(l%1e3/100);return[s,[ns(c),Uo(d,c),Go(m)].join("")]}function ns(e){switch(e){default:return"";case 1:return"U";case 2:return"D";case 3:return"T";case 4:return"Qa";case 5:return"Qi";case 6:return"Sx";case 7:return"Sp";case 8:return"Oc";case 9:return"No"}}function Uo(e,n){return e===0?"":e===1?n===0?"Dc":"D":e===2?"Vg":`${ns(e)}g`}function Go(e){return e===0?"":e===1?"C":`${ns(e)}C`}function is(e,n=_e.defaultDigitsShown+1,i="total",s=!1){n<3&&(n=3);const[r,l]=zs(e,n,i);if(l.eq(0))switch(i){case"decimal":return Sn(r);case"total":return r.toPrecision(n)}const c=l.gte(1e9)?D(l,Math.max(n,3,_e.defaultDigitsShown)):l.gte(1e4)?xn(l,0):l.toStringWithDecimalPlaces(0);if(s)return`t${c}`;switch(i){case"decimal":return`${Sn(r)}t${c}`;case"total":return`${r.toPrecision(n)}t${c}`}}function zs(e,n=_e.defaultDigitsShown+1,i="total"){let[s,r]=Hs(e,n,i);return[s,r.div(3)]}function ss(e,n=_e.defaultDigitsShown+1,i="total",s=!1){n<3&&(n=3);const[r,l]=Hs(e,n,i);if(l.eq(0))switch(i){case"decimal":return Sn(r);case"total":return r.toPrecision(n)}const c=l.gte(1e9)?D(l,Math.max(n,3,_e.defaultDigitsShown)):l.gte(1e4)?xn(l,0):l.toStringWithDecimalPlaces(0);if(s)return`e${c}`;switch(i){case"decimal":return`${r.toStringWithDecimalPlaces(n)}e${c}`;case"total":return`${r.toPrecision(n)}e${c}`}}function Hs(e,n=_e.defaultDigitsShown+1,i="total"){let[s,r]=Ws(e,n,i);if(r.gte(Number.MAX_SAFE_INTEGER))return[s,r];const l=r.toNumber()%3;return[o.pow10(l).times(s),r.minus(l)]}const zo=ri;function ri(e,n=_e.defaultDigitsShown,i="decimal",s=!1){let[r,l]=Ws(e,n,i);const c=l.gte(1e9)?D(l,Math.max(n,3,_e.defaultDigitsShown)):l.gte(1e4)?xn(l,0):l.toStringWithDecimalPlaces(0);return s?`e${c}`:`${(()=>{switch(i){case"decimal":return Sn(r);case"total":return r.toPrecision(n)}})()}e${c}`}function Ws(e,n=_e.defaultDigitsShown,i="decimal"){let s=o.log10(e).floor(),r=o.div(e,s.pow10());return(()=>{switch(i){case"decimal":return r.toStringWithDecimalPlaces(n);case"total":return r.toPrecision(n)}})()==="10"&&(r=o.dOne,s=s.plus(1)),[r,s]}function xn(e,n=_e.defaultDigitsShown,i="decimal"){if(e=new o(e),e.lt(es))return 0 .toFixed(n);const r=(()=>{switch(i){case"decimal":return e.toStringWithDecimalPlaces(n);case"total":return e.toStringWithDecimalPlaces(Math.max(n-e.log10().floor().toNumber(),0))}})().split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.join(".")}function Sn(e,n=_e.defaultDigitsShown){return e=new o(e),e.lt(es)?0 .toFixed(n):(e.lt(.1)&&n>0&&(n=Math.max(n,e.log10().negate().ceil().toNumber(),_e.defaultDigitsShown)),e.toStringWithDecimalPlaces(n))}const zi=60,Ho=60,Wo=24,Yo=365,Hi=zi*Ho,Wi=Hi*Wo,Di=Wi*Yo;function rs(e){if(e=new o(e),e.lt(0))return`-${rs(e.negate())}`;if(e.gt(Number.MAX_SAFE_INTEGER))return`${D(e.div(Di))}y`;e=e.toNumber();const n=Math.floor(e/Di);e-=n*Di;const i=Math.floor(e/Wi);e-=i*Wi;const s=Math.floor(e/Hi);e-=s*Hi;const r=Math.floor(e/zi);e-=r*zi;const l=e.toPrecision(2),c=String(i).padStart(3),d=String(s).padStart(2),m=String(r).padStart(2),p=l.padStart(2);return n>0?`${n}y ${c}d ${d}h`:i>0?`${c}d ${d}h ${m}m`:s>0?`${d}h ${m}m ${p}s`:r>0?`${m}m ${p}s`:`${p}s`}function Ko(e,n,i){e=new o(e);let s=e.toStringWithDecimalPlaces(n);return o.gte(s,i)&&(s=o.minus(i,Math.pow(.1,n)).toStringWithDecimalPlaces(n)),s}function mt(e,n=_e.defaultDigitsShown,i=we.numberFormat){return D(e,n,!0,i)}function Ys(e){const n=o.log10(e).ceil(),i=o.divide(e,n.pow10());return n.negate().pow10().times(i)}var Qo=Object.freeze(Object.defineProperty({__proto__:null,default:o,PrecisionType:ts,format:D,formatWhole:te,slogFormat:Us,standardNotation:Gs,thousandsNotation:is,engineeringNotation:ss,exponentialFormat:zo,scientificNotation:ri,commaFormat:xn,regularFormat:Sn,formatTime:rs,toPlaces:Ko,formatSmall:mt,invertOOM:Ys},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Xo,commaFormat:Zo,regularFormat:Jo,format:Rn,formatWhole:Tn,formatTime:os,toPlaces:ea,formatSmall:Dn,invertOOM:ta}=Qo;window.Decimal=o;window.exponentialFormat=(e,n,i)=>Xo(e,n,ts.decimal,!i);window.commaFormat=Zo;window.regularFormat=Jo;window.format=Rn;window.formatWhole=Tn;window.formatTime=os;window.toPlaces=ea;window.formatSmall=Dn;window.invertOOM=ta;function na(e){return(e[0]+e.slice(1).replace(/[A-Z]/g,n=>`-${n}`)).toLowerCase()}function oi(e){return typeof e=="function"}var Ae=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(Ae||{});const ai=Symbol("DoNotCache");function Q(e,n){const i=e[n];oi(i)&&i.length===0&&!i[ai]?e[n]=v(i.bind(e)):oi(i)&&(e[n]=i.bind(e),e[n][ai]=!0)}function Ke(e){return oi(e)&&!e[ai]&&(e=v(e)),e}const pt=Symbol("Component"),ft=Symbol("GatherProps");let ia=0;function Gt(e="feature-"){return e+ia++}var De=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(De||{});function ye(e){const n=t(e);return n!==2&&n!==!1}function Ut(e){return t(e)===1}function $(e){return e[ai]=!0,e}function Ge(e,n,i){e[n]==null&&i!=null&&(e[n]=i)}function Ks(e,...n){const i=[],s=r=>{Object.keys(r).forEach(l=>{const c=r[l];c!=null&&typeof c=="object"&&(n.includes(c.type)?i.push(c):!(c instanceof o)&&!He(c)&&s(c))})};return s(e),i}var tt=window.state=xi({lastTenTicks:[],hasNaN:!1,NaNPath:[],errors:Un([])});const Qs=o.ln(10);function Ci(e){return e}function Qn(e,...n){const i=n.find(s=>J(s));return i==null?(console.error("Could not invert due to no input being a variable"),0):i.invert(e)}function sa(e,n){return J(n)?n.invert(o.neg(e)):(console.error("Could not invert due to no input being a variable"),0)}function ra(e,n){return J(n)?n.isIntegrable()?w.neg(n.getIntegralFormula(e)):(console.error("Could not integrate due to variable not being integrable"),w.constant(0)):(console.error("Could not integrate due to no input being a variable"),w.constant(0))}function oa(e){return w.neg(e)}function aa(e,n,i){return J(n)?n.invert(o.sub(e,it(i))):J(i)?i.invert(o.sub(e,it(n))):(console.error("Could not invert due to no input being a variable"),0)}function la(e,n,i){var s,r;if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const l=n.getIntegralFormula(e);return w.times(i,(s=n.innermostVariable)!=null?s:0).add(l)}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const l=i.getIntegralFormula(e);return w.times(n,(r=i.innermostVariable)!=null?r:0).add(l)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function ua(e,n,i){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=n.getIntegralFormula(e);return w.add(s,i)}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=i.getIntegralFormula(e);return w.add(s,n)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function ca(e,n,i){return J(n)?n.invert(o.add(e,it(i))):J(i)?i.invert(o.sub(it(n),e)):(console.error("Could not invert due to no input being a variable"),0)}function da(e,n,i){var s,r;if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const l=n.getIntegralFormula(e);return w.sub(l,w.times(i,(s=n.innermostVariable)!=null?s:0))}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const l=i.getIntegralFormula(e);return w.times(n,(r=i.innermostVariable)!=null?r:0).sub(l)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function ma(e,n,i){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=n.getIntegralFormula(e);return w.sub(s,i)}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=i.getIntegralFormula(e);return w.sub(s,n)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function pa(e,n,i){return J(n)?n.invert(o.div(e,it(i))):J(i)?i.invert(o.div(e,it(n))):(console.error("Could not invert due to no input being a variable"),0)}function fa(e,n,i){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=n.getIntegralFormula(e);return w.times(s,i)}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=i.getIntegralFormula(e);return w.times(s,n)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function ga(e,n,i){return J(n)?w.div(e,i):J(i)?w.div(e,n):(console.error("Could not apply substitution due to no input being a variable"),w.constant(0))}function ba(e,n,i){return J(n)?n.invert(o.mul(e,it(i))):J(i)?i.invert(o.div(it(n),e)):(console.error("Could not invert due to no input being a variable"),0)}function ha(e,n,i){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=n.getIntegralFormula(e);return w.div(s,i)}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=i.getIntegralFormula(e);return w.div(n,s)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function va(e,n,i){return J(n)?w.mul(e,i):J(i)?w.mul(e,n):(console.error("Could not apply substitution due to no input being a variable"),w.constant(0))}function ya(e,n){return J(n)?n.invert(o.recip(e)):(console.error("Could not invert due to no input being a variable"),0)}function _a(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.ln(i)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function wa(e,n){return J(n)?n.invert(o.pow10(e)):(console.error("Could not invert due to no input being a variable"),0)}function ka(e){return o.ln(e).sub(1).times(e).div(Qs)}function Sa(e,n){if(J(n)){const i=Qs.times(e);return n.invert(i.div(i.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ca(e,n){return J(n)?n.isIntegrable()?new w({inputs:[n.getIntegralFormula(e)],evaluate:ka,invert:Sa}):(console.error("Could not integrate due to variable not being integrable"),w.constant(0)):(console.error("Could not integrate due to no input being a variable"),w.constant(0))}function Na(e,n,i){return J(n)?n.invert(o.pow(it(i),e)):J(i)?i.invert(o.root(it(n),e)):(console.error("Could not invert due to no input being a variable"),0)}function $a(e,n){return o.ln(e).sub(1).times(e).div(o.ln(n))}function Ia(e,n,i){if(J(n)){const s=o.ln(it(i)).times(e);return n.invert(s.div(s.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function qa(e,n,i){return J(n)?n.isIntegrable()?new w({inputs:[n.getIntegralFormula(e),i],evaluate:$a,invert:Ia}):(console.error("Could not integrate due to variable not being integrable"),w.constant(0)):(console.error("Could not integrate due to no input being a variable"),w.constant(0))}function Ma(e,n){return J(n)?n.invert(o.pow(2,e)):(console.error("Could not invert due to no input being a variable"),0)}function xa(e){return o.ln(e).sub(1).times(e).div(o.ln(2))}function Ta(e,n){if(J(n)){const i=o.ln(2).times(e);return n.invert(i.div(i.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Pa(e,n){return J(n)?n.isIntegrable()?new w({inputs:[n.getIntegralFormula(e)],evaluate:xa,invert:Ta}):(console.error("Could not integrate due to variable not being integrable"),w.constant(0)):(console.error("Could not integrate due to no input being a variable"),w.constant(0))}function Aa(e,n){return J(n)?n.invert(o.exp(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ba(e){return o.ln(e).sub(1).times(e)}function Fa(e,n){return J(n)?n.invert(o.div(e,o.div(e,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Ea(e,n){return J(n)?n.isIntegrable()?new w({inputs:[n.getIntegralFormula(e)],evaluate:Ba,invert:Fa}):(console.error("Could not integrate due to variable not being integrable"),w.constant(0)):(console.error("Could not integrate due to no input being a variable"),w.constant(0))}function Oa(e,n,i){return J(n)?n.invert(o.root(e,it(i))):J(i)?i.invert(o.ln(e).div(o.ln(it(n)))):(console.error("Could not invert due to no input being a variable"),0)}function Ra(e,n,i){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=n.getIntegralFormula(e),r=w.add(i,1);return w.pow(s,r).div(r)}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=i.getIntegralFormula(e);return w.pow(n,s).div(w.ln(n))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Da(e,n){return J(n)?n.invert(o.root(e,10)):(console.error("Could not invert due to no input being a variable"),0)}function La(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.pow10(i).div(w.ln(10))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Va(e,n,i){return J(n)?n.invert(o.ln(e).div(o.ln(it(i)))):J(i)?i.invert(o.root(it(n),e)):(console.error("Could not invert due to no input being a variable"),0)}function ja(e,n,i){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=n.getIntegralFormula(e);return w.pow(i,s).div(w.ln(i))}else if(J(i)){if(!i.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=i.getIntegralFormula(e),r=w.add(n,1);return w.pow(s,r).div(r)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Ua(e,n,i){return J(n)?n.invert(o.root(e,o.recip(it(i)))):J(i)?i.invert(o.ln(it(n)).div(o.ln(e))):(console.error("Could not invert due to no input being a variable"),0)}function Ga(e,n,i){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const s=n.getIntegralFormula(e);return w.pow(s,w.recip(i).add(1)).times(i).div(w.add(i,1))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function za(e,n){return J(n)?n.invert(o.ln(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ha(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.exp(i)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Wa(e,n=2,i=o.fromComponents_noNormalize(1,0,1)){const s=o.minabs(n,1e308).toNumber();return o.tetrate(e,s,i)}function Ya(e,n,i,s){return J(n)?n.invert(o.ssqrt(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ka(e,n=2,i=o.fromComponents_noNormalize(1,0,1)){const s=o.minabs(n,1e308).toNumber();return o.iteratedexp(e,s,new o(i))}function Qa(e,n,i,s){return J(n)?n.invert(o.iteratedlog(e,Math.E,o.minabs(1e308,it(i)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Xa(e,n=10,i=2){const s=o.minabs(i,1e308).toNumber();return o.iteratedlog(e,n,s)}function Za(e,n=10){const i=o.minabs(n,1e308).toNumber();return o.slog(e,i)}function Ja(e,n,i){return J(n)?n.invert(o.tetrate(e,o.minabs(1e308,it(i)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function el(e,n,i){const s=o.minabs(n,1e308).toNumber();return o.layeradd(e,s,i)}function tl(e,n,i,s){return J(n)?n.invert(o.layeradd(e,o.minabs(1e308,it(i)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function nl(e,n){return J(n)?n.invert(o.pow(Math.E,e).times(e)):(console.error("Could not invert due to no input being a variable"),0)}function il(e,n){return J(n)?n.invert(o.tetrate(e,2)):(console.error("Could not invert due to no input being a variable"),0)}function sl(e,n,i){const s=o.minabs(n,1e308).toNumber();return o.pentate(e,s,i)}function rl(e,n){return J(n)?n.invert(o.asin(e)):(console.error("Could not invert due to no input being a variable"),0)}function ol(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.cos(i).neg()}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function al(e,n){return J(n)?n.invert(o.acos(e)):(console.error("Could not invert due to no input being a variable"),0)}function ll(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.sin(i)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function ul(e,n){return J(n)?n.invert(o.atan(e)):(console.error("Could not invert due to no input being a variable"),0)}function cl(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.cos(i).ln().neg()}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function dl(e,n){return J(n)?n.invert(o.sin(e)):(console.error("Could not invert due to no input being a variable"),0)}function ml(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.asin(i).times(i).add(w.sqrt(w.sub(1,w.pow(i,2))))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function pl(e,n){return J(n)?n.invert(o.cos(e)):(console.error("Could not invert due to no input being a variable"),0)}function fl(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.acos(i).times(i).sub(w.sqrt(w.sub(1,w.pow(i,2))))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function gl(e,n){return J(n)?n.invert(o.tan(e)):(console.error("Could not invert due to no input being a variable"),0)}function bl(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.atan(i).times(i).sub(w.ln(w.pow(i,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function hl(e,n){return J(n)?n.invert(o.asinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function vl(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.cosh(i)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function yl(e,n){return J(n)?n.invert(o.acosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function _l(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.sinh(i)}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function wl(e,n){return J(n)?n.invert(o.atanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function kl(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.cosh(i).ln()}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Sl(e,n){return J(n)?n.invert(o.sinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Cl(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.asinh(i).times(i).sub(w.pow(i,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Nl(e,n){return J(n)?n.invert(o.cosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function $l(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.acosh(i).times(i).sub(w.add(i,1).sqrt().times(w.sub(i,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Il(e,n){return J(n)?n.invert(o.tanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function ql(e,n){if(J(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),w.constant(0);const i=n.getIntegralFormula(e);return w.atanh(i).times(i).add(w.sub(1,w.pow(i,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),w.constant(0)}function Gn(e){return(n,i)=>new w({inputs:[n,i],evaluate:e,invert:Ci})}function J(e){return e instanceof et&&e.hasVariable()}function it(e,n){return e instanceof et?e.evaluate(n):t(e)}function Ml(){return w.pow(this,2).div(2)}function xl(){return this}const nt=class{constructor(e){this.negate=this.neg,this.negated=this.neg,this.sgn=this.sign,this.plus=this.add,this.subtract=this.sub,this.minus=this.sub,this.multiply=this.mul,this.times=this.mul,this.divide=this.div,this.divideBy=this.div,this.dividedBy=this.div,this.reciprocal=this.recip,this.reciprocate=this.recip,this.logarithm=this.log;let n;"inputs"in e&&(e.inputs=e.inputs.map(i=>typeof i=="object"&&nn in i?i[nn]:i)),"variable"in e?(typeof e.variable=="object"&&nn in e.variable&&(e.variable=e.variable[nn]),n=this.setupVariable(e)):"evaluate"in e?n=this.setupFormula(e):n=this.setupConstant(e),this.inputs=n.inputs,this.internalVariables=n.internalVariables,this.innermostVariable=n.innermostVariable,this.internalEvaluate=n.internalEvaluate,this.internalInvert=n.internalInvert,this.internalIntegrate=n.internalIntegrate,this.internalIntegrateInner=n.internalIntegrateInner,this.applySubstitution=n.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Ml,internalIntegrateInner:xl,applySubstitution:Ci}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){var h,N;const{inputs:n,evaluate:i,invert:s,integrate:r,integrateInner:l,applySubstitution:c}=e,d=n.reduce((y,q)=>y+(q instanceof nt?q.internalVariables:0),0),m=n.find(y=>y instanceof nt&&y.hasVariable()),p=d===1?m==null?void 0:m.innermostVariable:void 0,b=(h=m==null?void 0:m.isInvertible())!=null?h:!1,f=(N=m==null?void 0:m.isIntegrable())!=null?N:!1;return{inputs:n,internalEvaluate:i,internalInvert:b?s:void 0,internalIntegrate:f?r:void 0,internalIntegrateInner:l,applySubstitution:c,innermostVariable:p,internalVariables:d}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var n,i,s;return(s=(i=(n=this.internalEvaluate)==null?void 0:n.call(this,...this.inputs.map(r=>it(r,e))))!=null?i:this.hasVariable()?e:null)!=null?s:it(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((n,i)=>n instanceof nt&&e.inputs[i]instanceof nt?n.equals(e.inputs[i]):!(n instanceof nt)&&!(e.inputs[i]instanceof nt)&&o.eq(t(n),t(e.inputs[i])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new w({inputs:[e]})}static variable(e){return new w({variable:e})}static stringify(e){var n;return e instanceof nt?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":Rn((n=e.inputs[0])!=null?n:0):`${e.internalEvaluate.name}(${e.inputs.map(w.stringify).join(", ")})`:Rn(t(e))}static step(e,n,i){const s=i(w.variable(0)),r=Ke(n);function l(d){return o.lt(d,t(r))?d:o.add(s.evaluate(o.sub(d,t(r))),t(r))}function c(d,m){return J(m)&&s.isInvertible()?(o.gt(d,t(r))&&(d=o.add(s.invert(o.sub(d,t(r))),t(r))),m.invert(d)):(console.error("Could not invert due to no input being a variable"),0)}return new w({inputs:[e],evaluate:l,invert:s.isInvertible()&&s.hasVariable()?c:void 0,description:"indeterminate"})}static if(e,n,i,s){const r=le(0),l=w.variable(r),c=i(l),d=s==null?void 0:s(l),m=Ke(n);function p(f){return t(m)?(r.value=f,c.evaluate()):d?(r.value=f,d.evaluate()):f}function b(f,h){return!J(h)||!c.isInvertible()||d!=null&&!d.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):t(m)?h.invert(c.invert(f)):d?h.invert(d.invert(f)):h.invert(f)}return new w({inputs:[e],evaluate:p,invert:c.isInvertible()&&c.hasVariable()?b:void 0,description:"indeterminate"})}static conditional(e,n,i,s){return w.if(e,n,i,s)}static abs(e){return new w({inputs:[e],evaluate:o.abs})}static neg(e){return new w({inputs:[e],evaluate:o.neg,invert:sa,applySubstitution:oa,integrate:ra})}static sign(e){return new w({inputs:[e],evaluate:o.sign})}static round(e){return new w({inputs:[e],evaluate:o.round,invert:Qn})}static floor(e){return new w({inputs:[e],evaluate:o.floor,invert:Qn})}static ceil(e){return new w({inputs:[e],evaluate:o.ceil,invert:Qn})}static trunc(e){return new w({inputs:[e],evaluate:o.trunc,invert:Qn})}static add(e,n){return new w({inputs:[e,n],evaluate:o.add,invert:aa,integrate:la,integrateInner:ua,applySubstitution:Ci})}static sub(e,n){return new w({inputs:[e,n],evaluate:o.sub,invert:ca,integrate:da,integrateInner:ma,applySubstitution:Ci})}static mul(e,n){return new w({inputs:[e,n],evaluate:o.mul,invert:pa,integrate:fa,applySubstitution:ga})}static div(e,n){return new w({inputs:[e,n],evaluate:o.div,invert:ba,integrate:ha,applySubstitution:va})}static recip(e){return new w({inputs:[e],evaluate:o.recip,invert:ya,integrate:_a})}static clamp(e,n,i){return new w({inputs:[e,n,i],evaluate:o.clamp,invert:Qn})}static pLog10(e){return new w({inputs:[e],evaluate:o.pLog10})}static absLog10(e){return new w({inputs:[e],evaluate:o.absLog10})}static log10(e){return new w({inputs:[e],evaluate:o.log10,invert:wa,integrate:Ca})}static log(e,n){return new w({inputs:[e,n],evaluate:o.log,invert:Na,integrate:qa})}static log2(e){return new w({inputs:[e],evaluate:o.log2,invert:Ma,integrate:Pa})}static ln(e){return new w({inputs:[e],evaluate:o.ln,invert:Aa,integrate:Ea})}static pow(e,n){return new w({inputs:[e,n],evaluate:o.pow,invert:Oa,integrate:Ra})}static pow10(e){return new w({inputs:[e],evaluate:o.pow10,invert:Da,integrate:La})}static pow_base(e,n){return new w({inputs:[e,n],evaluate:o.pow_base,invert:Va,integrate:ja})}static root(e,n){return new w({inputs:[e,n],evaluate:o.root,invert:Ua,integrate:Ga})}static factorial(e){return new w({inputs:[e],evaluate:o.factorial})}static gamma(e){return new w({inputs:[e],evaluate:o.gamma})}static lngamma(e){return new w({inputs:[e],evaluate:o.lngamma})}static exp(e){return new w({inputs:[e],evaluate:o.exp,invert:za,integrate:Ha})}static sqr(e){return w.pow(e,2)}static sqrt(e){return w.root(e,2)}static cube(e){return w.pow(e,3)}static cbrt(e){return w.root(e,3)}static tetrate(e,n=2,i=o.fromComponents_noNormalize(1,0,1)){return new w({inputs:[e,n,i],evaluate:Wa,invert:Ya})}static iteratedexp(e,n=2,i=o.fromComponents_noNormalize(1,0,1)){return new w({inputs:[e,n,i],evaluate:Ka,invert:Qa})}static iteratedlog(e,n=10,i=1){return new w({inputs:[e,n,i],evaluate:Xa})}static slog(e,n=10){return new w({inputs:[e,n],evaluate:Za,invert:Ja})}static layeradd10(e,n){return new w({inputs:[e,n],evaluate:o.layeradd10})}static layeradd(e,n,i=10){return new w({inputs:[e,n,i],evaluate:el,invert:tl})}static lambertw(e){return new w({inputs:[e],evaluate:o.lambertw,invert:nl})}static ssqrt(e){return new w({inputs:[e],evaluate:o.ssqrt,invert:il})}static pentate(e,n=2,i=o.fromComponents_noNormalize(1,0,1)){return new w({inputs:[e,n,i],evaluate:sl})}static sin(e){return new w({inputs:[e],evaluate:o.sin,invert:dl,integrate:ol})}static cos(e){return new w({inputs:[e],evaluate:o.cos,invert:pl,integrate:ll})}static tan(e){return new w({inputs:[e],evaluate:o.tan,invert:gl,integrate:cl})}static asin(e){return new w({inputs:[e],evaluate:o.asin,invert:rl,integrate:ml})}static acos(e){return new w({inputs:[e],evaluate:o.acos,invert:al,integrate:fl})}static atan(e){return new w({inputs:[e],evaluate:o.atan,invert:ul,integrate:bl})}static sinh(e){return new w({inputs:[e],evaluate:o.sinh,invert:Sl,integrate:vl})}static cosh(e){return new w({inputs:[e],evaluate:o.cosh,invert:Nl,integrate:_l})}static tanh(e){return new w({inputs:[e],evaluate:o.tanh,invert:Il,integrate:kl})}static asinh(e){return new w({inputs:[e],evaluate:o.asinh,invert:hl,integrate:Cl})}static acosh(e){return new w({inputs:[e],evaluate:o.acosh,invert:yl,integrate:$l})}static atanh(e){return new w({inputs:[e],evaluate:o.atanh,invert:wl,integrate:ql})}stringify(){return w.stringify(this)}step(e,n){return w.step(this,e,n)}if(e,n,i){return w.if(this,e,n,i)}conditional(e,n,i){return w.if(this,e,n,i)}abs(){return w.abs(this)}neg(){return w.neg(this)}sign(){return w.sign(this)}round(){return w.round(this)}floor(){return w.floor(this)}ceil(){return w.ceil(this)}trunc(){return w.trunc(this)}add(e){return w.add(this,e)}sub(e){return w.sub(this,e)}mul(e){return w.mul(this,e)}div(e){return w.div(this,e)}recip(){return w.recip(this)}max(e){return w.max(this,e)}min(e){return w.min(this,e)}maxabs(e){return w.maxabs(this,e)}minabs(e){return w.minabs(this,e)}clamp(e,n){return w.clamp(this,e,n)}clampMin(e){return w.clampMin(this,e)}clampMax(e){return w.clampMax(this,e)}pLog10(){return w.pLog10(this)}absLog10(){return w.absLog10(this)}log10(){return w.log10(this)}log(e){return w.log(this,e)}log2(){return w.log2(this)}ln(){return w.ln(this)}pow(e){return w.pow(this,e)}pow10(){return w.pow10(this)}pow_base(e){return w.pow_base(this,e)}root(e){return w.root(this,e)}factorial(){return w.factorial(this)}gamma(){return w.gamma(this)}lngamma(){return w.lngamma(this)}exp(){return w.exp(this)}sqr(){return w.pow(this,2)}sqrt(){return w.root(this,2)}cube(){return w.pow(this,3)}cbrt(){return w.root(this,3)}tetrate(e=2,n=o.fromComponents_noNormalize(1,0,1)){return w.tetrate(this,e,n)}iteratedexp(e=2,n=o.fromComponents_noNormalize(1,0,1)){return w.iteratedexp(this,e,n)}iteratedlog(e=10,n=1){return w.iteratedlog(this,e,n)}slog(e=10){return w.slog(this,e)}layeradd10(e){return w.layeradd10(this,e)}layeradd(e,n){return w.layeradd(this,e,n)}lambertw(){return w.lambertw(this)}ssqrt(){return w.ssqrt(this)}pentate(e=2,n=o.fromComponents_noNormalize(1,0,1)){return w.pentate(this,e,n)}sin(){return w.sin(this)}cos(){return w.cos(this)}tan(){return w.tan(this)}asin(){return w.asin(this)}acos(){return w.acos(this)}atan(){return w.atan(this)}sinh(){return w.sinh(this)}cosh(){return w.cosh(this)}tanh(){return w.tanh(this)}asinh(){return w.asinh(this)}acosh(){return w.acosh(this)}atanh(){return w.atanh(this)}};let et=nt;et.negate=nt.neg;et.negated=nt.neg;et.sgn=nt.sign;et.plus=nt.add;et.subtract=nt.sub;et.minus=nt.sub;et.multiply=nt.mul;et.times=nt.mul;et.divide=nt.div;et.divideBy=nt.div;et.dividedBy=nt.div;et.reciprocal=nt.recip;et.reciprocate=nt.recip;et.max=Gn(o.max);et.min=Gn(o.min);et.minabs=Gn(o.minabs);et.maxabs=Gn(o.maxabs);et.clampMin=Gn(o.clampMin);et.clampMax=Gn(o.clampMax);et.logarithm=nt.log;class w extends et{invert(n){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,n,...this.inputs):this.inputs.length===1&&this.hasVariable()?n:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(n){return this.isIntegrable()?this.getIntegralFormula().evaluate(n):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(n){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(n)}calculateConstantOfIntegration(){const n=this.getIntegralFormula().evaluate(1),i=o.add(this.evaluate(0),this.evaluate(1)).div(2);return o.sub(i,n)}getIntegralFormula(n){if(this.integralFormula!=null&&n==null)return this.integralFormula;if(n==null){if(this.applySubstitution==null){if(n=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),w.constant(0);let i=this.internalIntegrate.call(this,n,...this.inputs);n.forEach(s=>i=s(i)),this.integralFormula=i}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),w.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),w.constant(0)):(n.push(i=>this.applySubstitution.call(this,i,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,n,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,n,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),w.constant(0)))}}function Tl(e,n,i=!0,s,r=o.dInf){const l=Ke(i),c=Ke(s),d=Ke(r);return v(()=>{var h,N,y,q;const m=t(d);if(o.eq(m,1))return o.gte(n.value,e.evaluate())?o.dOne:o.dZero;const p=t(l),b=(h=t(c))!=null?h:p?10:0;let f=0;if(o.gt(m,b)){if(!e.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(p){if(!e.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;f=o.floor(e.invertIntegral(o.add(n.value,e.evaluateIntegral()))).sub((N=t(e.innermostVariable))!=null?N:0)}else f=o.floor(e.invert(n.value))}if(f=o.clampMax(f,m),b>0){f=o.sub(f,b).clampMin(0);let T;for(p?T=sn(e,f,!0,0):T=e.evaluate(o.add((y=t(e.innermostVariable))!=null?y:0,f));o.lt(f,m)&&o.lt(f,Number.MAX_SAFE_INTEGER);){const M=e.evaluate(f.add((q=t(e.innermostVariable))!=null?q:0));if(o.add(T,M).lte(n.value))f=f.add(1),T=o.add(T,M);else break}}return f})}function sn(e,n,i=!0,s){var m;if(o.eq(n,1))return e.evaluate();const r=(m=t(e.innermostVariable))!=null?m:0;let l=o.add(n,r);const c=l;s!=null||(s=i?10:0),l=l.sub(s).clampMin(r);let d=0;if(o.gt(n,s)){if(!e.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(i){if(!e.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(d=o.sub(e.evaluateIntegral(l),e.evaluateIntegral()),c.gt(1e308))return o.add(d,o.sub(c,l).times(e.evaluate(l)))}else if(d=e.evaluate(l),l=l.add(1),c.gt(1e308))return o.sub(c,l).add(1).times(d)}for(let p=l.toNumber();p<c.toNumber();p++)d=o.add(d,e.evaluate(p));return d}const _n=Symbol("PersistentState"),Xt=Symbol("DefaultValue"),qi=Symbol("StackTrace"),Mi=Symbol("Deleted"),nn=Symbol("NonPersistent"),qn=Symbol("SaveDataPath"),Yt=Symbol("SkipPersistence");function Pl(){var e,n;return(n=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(i=>i.trim()).join(`
`))!=null?n:""}function Ps(e,n){var i;o.isNaN(n)&&(tt.hasNaN||(ve.autosave=!1,tt.hasNaN=!0,tt.NaNPath=e[qn],tt.NaNPersistent=e),console.error(`Attempted to save NaN value to ${(i=e[qn])==null?void 0:i.join(".")}`)),e[_n].value=n}function Me(e,n=!0){const i=He(e)?e:le(e);He(e)&&(e=e.value);const s=v({get(){return i.value},set(l){n?Ps(r,l):r[_n].value=l}});s[Xt]=e;const r={get value(){return i.value},set value(l){n?Ps(r,l):r[_n].value=l},__v_isRef:!0,[_n]:i,[Xt]:e,[qi]:Pl(),[Mi]:!1,[nn]:s,[qn]:void 0};return Pt.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",r,`
Created at:
`+r[qi]):Mn[Pt[Pt.length-1]].add(r),r}function Al(e){return e!=null&&typeof e=="object"&&_n in e}function B(e){return!(hn in e)&&nn in e?e[nn]:new Proxy(e,{get(n,i){if(i!==_n)return i===Yt?!0:n[i]},set(n,i,s){return n[i]=s,!0},has(n,i){return i===_n?!1:i===Yt?!0:Reflect.has(n,i)}})}function Bl(e){Pt.length===0?console.warn("Deleting a persistent ref outside of a layer. Ignoring...",e):Mn[Pt[Pt.length-1]].delete(e),e[Mi]=!0}$t.on("addLayer",(e,n)=>{const i=[],s=(r,l=[])=>{let c=!1;return Object.keys(r).forEach(d=>{let m=r[d];if(m!=null&&typeof m=="object"){if(m[Yt]===!0)return;if(hn in m&&(m=m[hn]),Al(m)){if(c=!0,m[Mi]){console.warn("Deleted persistent ref present in returned object. Ignoring...",m,`
Created at:
`+m[qi]);return}Mn[e.id].delete(m);const p=[e.id,...l,d];m[qn]!=null&&JSON.stringify(p)!==JSON.stringify(m[qn])&&console.error(`Persistent ref is being saved to \`${p.join(".")}\` when it's already present at \`${m[qn].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),m[qn]=p;const b=l.reduce((h,N)=>(N in h||(h[N]={}),h[N]),n),f=b[d];b[d]=m[_n],br(b)?f!=null?b[d]=f:b[d]=m[Xt]:f!=null?b[d].value=f:b[d].value=m[Xt]}else!(m instanceof o)&&!(m instanceof w)&&!He(m)&&!i.includes(m)&&(typeof m.type=="symbol"&&i.push(m),s(m,[...l,d])&&(on(m)&&!on(r)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",hn in r?r[hn]:r,d):c=!0))}}),c};s(e[hn]),Mn[e.id].forEach(r=>{r[Mi]||console.error(`Created persistent ref in ${e.id} without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+r[qi])}),Mn[e.id].clear()});const hn=Symbol("ProxyState");function Xe(e,n={}){const i=n;let s=!1,r=!1;function l(){return s||(r&&console.error("Cyclical dependency detected. Cannot evaluate lazy proxy."),r=!0,Object.assign(i,e.call(i,i)),s=!0),i}return new Proxy(i,{get(c,d){if(d===hn)return l();const m=l()[d];return m!=null&&typeof m=="object"&&nn in m?m[nn]:m},set(c,d,m){return l()[d]=m,!0},has(c,d){return d===hn?!0:Reflect.has(l(),d)},ownKeys(){return Reflect.ownKeys(l())},getOwnPropertyDescriptor(c,d){return s||(Object.assign(i,e.call(i,i)),s=!0),Object.getOwnPropertyDescriptor(c,d)}})}const as=Symbol("RegisterNode"),ls=Symbol("UnregisterNode"),us=Symbol("Nodes"),cs=Symbol("Bounds"),Ct=xi({});window.layers=Ct;const Mn={},Pt=[];function st(e,n){return Xe(()=>{const i={},s=i.emitter=Rs();if(i.on=s.on.bind(s),i.emit=s.emit.bind(s),i.nodes=le({}),i.id=e,Pt.push(e),Mn[e]=new Set,Object.assign(i,n.call(i,i)),Pt[Pt.length-1]==null||Pt[Pt.length-1]!==e)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${Pt}
Trying to pop ${i.id}`);Pt.pop(),Q(i,"theme"),Q(i,"display"),Q(i,"classes"),Q(i,"style"),Q(i,"name"),Ge(i,"name",i.id),Q(i,"minWidth"),Ge(i,"minWidth",600);const r=i.style;return i.style=v(()=>{var c;let l=t(i.minWidth);return(typeof l=="number"||!Number.isNaN(parseInt(l)))&&(l=l+"px"),[(c=t(r))!=null?c:"",{flexGrow:"",flexShrink:"",width:"",minWidth:l,flexBasis:l,margin:""}]}),i})}function Xs(e,n){if(console.info("Adding layer",e.id),Ct[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,Ct[e.id]);return}Ge(n,"layers",{}),n.layers[e.id]==null&&(n.layers[e.id]={}),Ct[e.id]=e,$t.emit("addLayer",e,n.layers[e.id])}function Fl(e){return Ct[e]}function Zs(e){console.info("Removing layer",e.id),$t.emit("removeLayer",e),Ct[e.id]=void 0}function El(e){Zs(e),Xs(e,ve)}function Ol(e){const n=le(!1);return{openModal:()=>n.value=!0,modal:$(()=>a(Zt,{modelValue:n.value,"onUpdate:modelValue":i=>n.value=i},{header:()=>a("h2",null,[t(e.name)]),body:t(e.display)}))}}$t.on("update",function(n){Object.values(Ct).forEach(i=>{i==null||i.emit("preUpdate",n)}),Object.values(Ct).forEach(i=>{i==null||i.emit("update",n)}),Object.values(Ct).forEach(i=>{i==null||i.emit("postUpdate",n)})});var Rl=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:as,UnregisterNodeInjectionKey:ls,NodesInjectionKey:us,BoundsInjectionKey:cs,layers:Ct,persistentRefs:Mn,addingLayers:Pt,createLayer:st,addLayer:Xs,getLayer:Fl,removeLayer:Zs,reloadLayer:El,setupLayerModal:Ol},Symbol.toStringTag,{value:"Module"}));const Dl=oe({__name:"Context",emits:["updateNodes"],setup(e,{emit:n}){var b;const i=le({}),s=new ResizeObserver(d),r=le(null);ci(()=>{const f=r.value;f!=null&&s.observe(f)});let l=!0,c=le((b=r.value)==null?void 0:b.getBoundingClientRect());function d(){l&&(l=!1,un(()=>{var f;c.value=(f=r.value)==null?void 0:f.getBoundingClientRect(),Object.values(i.value).filter(h=>h).forEach(h=>h.rect=h.element.getBoundingClientRect()),n("updateNodes",i.value),l=!0}))}$t.on("fontsLoaded",d);const m={attributes:!1,childList:!0,subtree:!1};vi(as,(f,h)=>{const N=new MutationObserver(()=>p(f));N.observe(h,m),i.value[f]={element:h,observer:N,rect:h.getBoundingClientRect()},d()}),vi(ls,f=>{var h;(h=i.value[f])==null||h.observer.disconnect(),i.value[f]=void 0,d()}),vi(us,i),vi(cs,c);function p(f){const h=i.value[f];h!=null&&(h.rect=h.element.getBoundingClientRect(),n("updateNodes",i.value))}return(f,h)=>(k(),x(g,null,[Kt(f.$slots,"default",{},void 0,!0),_("div",{ref_key:"resizeListener",ref:r,class:"resize-listener"},null,512)],64))}});var Js=ge(Dl,[["__scopeId","data-v-2b1dc1bc"]]);const Ll=["onPointerdown"],Vl={class:"modal-wrapper"},jl=["width"],Ul={class:"modal-header"},Gl={class:"modal-body"},zl={class:"modal-footer"},Hl=_("div",{class:"modal-default-flex-grow"},null,-1),Zt=oe({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:null},emits:["update:modelValue"],setup(e,{expose:n,emit:i}){const r=ot(e),l=v(()=>t(r.modelValue)||d.value);function c(){t(r.preventClosing)!==!0&&i("update:modelValue",!1)}const d=le(!1),m=le(null),p=v(()=>{var b,f;return(f=(b=m.value)==null?void 0:b.nodes)!=null?f:null});return n({isOpen:l,nodes:p}),(b,f)=>(k(),se(vr,{to:"#modal-root"},[a(Fs,{name:"modal",onBeforeEnter:f[0]||(f[0]=h=>d.value=!0),onAfterLeave:f[1]||(f[1]=h=>d.value=!1),appear:""},{default:ae(()=>[Zi(_("div",Rt({class:"modal-mask",onPointerdown:ni(c,["self"])},b.$attrs),[_("div",Vl,[_("div",{class:"modal-container",width:e.width},[_("div",Ul,[Kt(b.$slots,"header",{shown:t(l)},()=>[u(" default header ")])]),_("div",Gl,[a(Js,{ref_key:"contextRef",ref:m},{default:ae(()=>[Kt(b.$slots,"body",{shown:t(l)},()=>[u(" default body ")])]),_:3},512)]),_("div",zl,[Kt(b.$slots,"footer",{shown:t(l)},()=>[_("div",{class:"modal-default-footer"},[Hl,_("button",{class:"button modal-default-button",onClick:c}," Close ")])])])],8,jl)])],16,Ll),[[hr,e.modelValue]])]),_:3})]))}}),Ot=le(),tn=le([]),zn=le([]);function Wl(){var e;((e=Ot.value)==null?void 0:e.loggedIn)===!0&&(tn.value.length>0||Ot.value.getSaveList().then(er).then(n=>{zn.value=n.map(i=>i.content.id)}).catch(console.error))}Nr({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:As}).then(e=>{Ot.value=e,As(e)}).catch(console.error);function As(e){e.loggedIn===!0&&(tn.value.length>0||(e.getSaveList().then(n=>{const i=er(n);if(zn.value=i.map(s=>s.content.id),ve.timePlayed<120*1e3&&i.length>0){const s=i.reduce((r,l)=>r.content.time<l.content.time?l:r);ln(s.content)}}).catch(console.error),setInterval(Wl,60*1e3)))}function er(e){const n=new Set(we.saves.slice()),i=new Set(new Array(11).fill(0).map((r,l)=>l)),s=Object.keys(e).map(r=>{var d;const{label:l,content:c}=e[r];try{return{slot:parseInt(r),label:l,content:JSON.parse((d=yn(c))!=null?d:"")}}catch{return null}}).filter(r=>r!=null&&typeof r.content.id=="string"&&typeof r.content.time=="number"&&typeof r.content.timePlayed=="number").filter(r=>{var c,d,m,p,b,f;r.label!=null&&(r.content.name=r.label),i.delete(r.slot);const l=we.saves.find(h=>h===r.content.id);if(l==null)we.saves.push(r.content.id),ht(an(r.content));else{n.delete(l);try{const h=JSON.parse((d=yn((c=localStorage.getItem(l))!=null?c:""))!=null?d:"");if(h==null)return!1;h.id=l,h.time=(m=h.time)!=null?m:0,h.timePlayed=(p=h.timePlayed)!=null?p:0;const N=Math.abs(h.timePlayed-r.content.timePlayed),y=Math.abs(h.time-r.content.time);N<120*1e3&&y<120*1e3?h.time<r.content.time?(ht(an(r.content)),we.active===l&&ln(r.content)):((f=Ot.value)==null||f.save(r.slot,kn.compressToUTF16(On(an(h))),(b=h.name)!=null?b:r.label).catch(console.error),r.content=h):tn.value.push({id:l,cloud:r.content,local:h,slot:r.slot})}catch{return!1}}return!0});return n.forEach(r=>{var l,c,d;try{if(i.size>0){const m=(l=localStorage.getItem(r))!=null?l:"",p=JSON.parse((c=yn(m))!=null?c:""),b=i.values().next().value;(d=Ot.value)==null||d.save(b,m,p.name).then(()=>zn.value.push(p.id)).catch(console.error),i.delete(b)}}catch{}}),s}const Yl={class:"table"},dn=oe({__name:"Column",props:{mergeAdjacent:{type:Boolean}},setup(e){return(n,i)=>(k(),x("div",Yl,[_("div",{class:Ie(["col",{mergeAdjacent:e.mergeAdjacent}])},[Kt(n.$slots,"default")],2)]))}}),Kl={class:"table"},Qt=oe({__name:"Row",props:{mergeAdjacent:{type:Boolean}},setup(e){return(n,i)=>(k(),x("div",Kl,[_("div",{class:Ie(["row",{mergeAdjacent:e.mergeAdjacent}])},[Kt(n.$slots,"default")],2)]))}});function ds(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Os(e)}function pe(e,n="span"){return typeof e=="function"?oe({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${n}>${e}</${n}>`),oe({template:e})):oe({render:()=>({})}):e}function ie(e){if(Nt(e))return typeof e=="function"?e():pe(e);const n=e[pt];return a(n,e[ft](),null)}function wn(...e){let n;return a(Qt,null,ds(n=e.map(ie))?n:{default:()=>[n]})}function Li(...e){let n;return a(dn,null,ds(n=e.map(ie))?n:{default:()=>[n]})}function Bt(e){if(Nt(e))return typeof e=="function"?e():typeof e=="string"?a(g,null,[e]):a(e,null,null);const n=e[pt];return a(n,e[ft](),null)}function Ql(...e){let n;return a(Qt,null,ds(n=e.map(Bt))?n:{default:()=>[n]})}function Yi(e,n){return e.reduce((i,s)=>a(g,null,[i,n,s]))}function Nt(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[ai]===!0}function tr(e,n){const i=le(null),s=le(void 0);function r(d){i.value||(i.value=setInterval(c,250)),s.value=d}function l(){i.value&&(clearInterval(i.value),i.value=null)}function c(){n&&n.value?n.value():e&&e.value&&e.value(s.value)}return Es(l),{start:r,stop:l,handleHolding:c}}function ms(e,n="div"){const i=yt();return qt(()=>{i.value=pe(Te(e),n)}),i}function di(e,n="div"){const i=yt(null);return qt(()=>{const s=Te(e);i.value=s===""||s==null?null:pe(s,n)}),i}function Te(e){return t(t(e))}function re(...e){return e.includes(Object)||e.push(Object),e}function Ni(e){const n=le(!1),i=e[ft].bind(e);return e[ft]=()=>({...i(),onPointerenter:()=>n.value=!0,onPointerleave:()=>n.value=!1}),n}function Xl(e){return Object.keys(e).reduce((n,i)=>(n[na(i)]=e[i],n),{})}var Zl=oe({props:{element:Object,display:{type:re(Object,String,Function),required:!0},style:re(Object,String,Array),classes:re(Object),direction:re(String),xoffset:re(String),yoffset:re(String),pinned:Object},setup(e){const{element:n,display:i,pinned:s}=ot(e),r=le(!1),l=v(()=>(Te(s)||r.value)&&c.value),c=di(i),d=yt(pe($(()=>{const p=Te(n);return p==null?"":Bt(p)})));function m(p){const b=s;p.shiftKey&&b&&(b.value=!b.value,p.stopPropagation(),p.preventDefault())}return{Direction:Ae,isHovered:r,isShown:l,comp:c,elementComp:d,unref:t,togglePinned:m}}});const Jl={key:0,class:"material-icons pinned"};function eu(e,n,i,s,r,l){return k(),x("div",{class:Ie(["tooltip-container",{shown:e.isShown}]),onMouseenter:n[0]||(n[0]=c=>e.isHovered=!0),onMouseleave:n[1]||(n[1]=c=>e.isHovered=!1),onClickCapture:n[2]||(n[2]=(...c)=>e.togglePinned&&e.togglePinned(...c))},[Kt(e.$slots,"default",{},void 0,!0),e.elementComp?(k(),se($e(e.elementComp),{key:0})):j("",!0),a(Fs,{name:"fade"},{default:ae(()=>{var c;return[e.isShown?(k(),x("div",{key:0,class:Ie(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:Re([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(c=e.unref(e.style))!=null?c:{}])},[e.pinned?(k(),x("span",Jl,"push_pin")):j("",!0),e.comp?(k(),se($e(e.comp),{key:1})):j("",!0)],6)):j("",!0)]}),_:1})],34)}var je=ge(Zl,[["render",eu],["__scopeId","data-v-c9511810"]]);const tu={key:0},nu=["onClick","disabled"],iu={key:0},su=["onClick"],ru=oe({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:n}){const s=ot(e),r=le(!1);gt(r,d=>{n("confirmingChanged",d)});function l(){if(t(s.skipConfirm)){n("click");return}r.value&&n("click"),r.value=!r.value}function c(){r.value=!1}return(d,m)=>(k(),x("span",{class:Ie(["container",{confirming:r.value}])},[r.value?(k(),x("span",tu,"Are you sure?")):j("",!0),_("button",{onClick:ni(l,["stop"]),class:"button danger",disabled:e.disabled},[r.value?(k(),x("span",iu,"Yes")):Kt(d.$slots,"default",{key:1},void 0,!0)],8,nu),r.value?(k(),x("button",{key:1,class:"button",onClick:ni(c,["stop"])},"No",8,su)):j("",!0)],2))}});var nr=ge(ru,[["__scopeId","data-v-2f8ef34c"]]);const ou=["onSubmit"],au={class:"field"},lu={key:0,class:"field-title"},uu=["placeholder"],cu=oe({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean},autofocus:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:n}){var m;const i=e,s=di(cn(i,"title"),"span"),r=yt(null);((m=i.autofocus)==null||m)&&ci(()=>{var p;(p=r.value)==null||p.focus()});const l=v({get(){var p;return(p=t(i.modelValue))!=null?p:""},set(p){n("update:modelValue",p)}});function c(){n("submit")}function d(){i.submitOnBlur!==!1?n("submit"):n("cancel")}return(p,b)=>(k(),x("form",{onSubmit:ni(c,["prevent"])},[_("div",au,[t(s)?(k(),x("span",lu,[(k(),se($e(t(s))))])):j("",!0),e.textArea?(k(),se(t($r),{key:1,modelValue:t(l),"onUpdate:modelValue":b[0]||(b[0]=f=>He(l)?l.value=f:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:d,ref_key:"field",ref:r},null,8,["modelValue","placeholder","maxHeight"])):Zi((k(),x("input",{key:2,type:"text","onUpdate:modelValue":b[1]||(b[1]=f=>He(l)?l.value=f:null),placeholder:e.placeholder,class:Ie({fullWidth:!e.title}),onBlur:d,ref_key:"field",ref:r},null,42,uu)),[[yr,t(l)]])])],40,ou))}});var mi=ge(cu,[["__scopeId","data-v-7e1eaf88"]]);const mn=e=>(lt("data-v-2fbabe5d"),e=e(),ut(),e),du={key:0,class:"handle material-icons"},mu={key:1,class:"actions"},pu=mn(()=>_("span",{class:"material-icons"},"content_paste",-1)),fu=mn(()=>_("span",{class:"material-icons"},"content_copy",-1)),gu=mn(()=>_("span",{class:"material-icons"},"edit",-1)),bu=mn(()=>_("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),hu={key:2,class:"actions"},vu=mn(()=>_("span",{class:"material-icons"},"check",-1)),yu=mn(()=>_("span",{class:"material-icons"},"close",-1)),_u={key:3,class:"details"},wu=mn(()=>_("span",{class:"material-icons synced"},"cloud",-1)),ku=["disabled"],Su={class:"save-version"},Cu=mn(()=>_("br",null,null,-1)),Nu={key:1,class:"time"},$u={key:4,class:"details"},Iu={key:5,class:"details error"},qu=mn(()=>_("br",null,null,-1)),Mu=oe({__name:"Save",props:{save:null,readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:n}){const i=e,{save:s,readonly:r}=ot(i),l=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),c=le(!1),d=le(!1),m=le("");gt(c,()=>{var N;return m.value=(N=s.value.name)!=null?N:""});const p=v(()=>s.value!=null&&s.value.id===ve.id&&!t(r)),b=v(()=>{var N;return p.value?ve.time:(N=s.value!=null&&s.value.time)!=null?N:0}),f=v(()=>{var N;return!t(r)&&((N=Ot.value)==null?void 0:N.loggedIn)===!0&&zn.value.includes(s.value.id)});function h(){n("editName",m.value),c.value=!1}return(N,y)=>(k(),x("div",{class:Ie(["save",{active:t(p),readonly:t(r)}])},[t(r)!==!0?(k(),x("div",du,"drag_handle")):j("",!0),!c.value&&t(r)!==!0?(k(),x("div",mu,[t(s).error==null&&!d.value?(k(),se(Ti,{key:0,onClick:y[0]||(y[0]=q=>n("export")),class:"button",left:""},{default:ae(()=>[a(je,{display:"Export",direction:t(Ae).Left,class:"info"},{default:ae(()=>[pu]),_:1},8,["direction"])]),_:1})):j("",!0),t(s).error==null&&!d.value?(k(),x("button",{key:1,onClick:y[1]||(y[1]=q=>n("duplicate")),class:"button"},[a(je,{display:"Duplicate",direction:t(Ae).Left,class:"info"},{default:ae(()=>[fu]),_:1},8,["direction"])])):j("",!0),t(s).error==null&&!d.value?(k(),x("button",{key:2,onClick:y[2]||(y[2]=q=>c.value=!c.value),class:"button"},[a(je,{display:"Edit Name",direction:t(Ae).Left,class:"info"},{default:ae(()=>[gu]),_:1},8,["direction"])])):j("",!0),a(nr,{disabled:t(p),onClick:y[3]||(y[3]=q=>n("delete")),onConfirmingChanged:y[4]||(y[4]=q=>d.value=q)},{default:ae(()=>[a(je,{display:"Delete",direction:t(Ae).Left,class:"info"},{default:ae(()=>[bu]),_:1},8,["direction"])]),_:1},8,["disabled"])])):t(r)!==!0?(k(),x("div",hu,[_("button",{onClick:h,class:"button"},[a(je,{display:"Save",direction:t(Ae).Left,class:"info"},{default:ae(()=>[vu]),_:1},8,["direction"])]),_("button",{onClick:y[5]||(y[5]=q=>c.value=!c.value),class:"button"},[a(je,{display:"Cancel",direction:t(Ae).Left,class:"info"},{default:ae(()=>[yu]),_:1},8,["direction"])])])):j("",!0),t(s).error==null&&!c.value?(k(),x("div",_u,[t(f)?(k(),se(je,{key:0,display:"Synced!",direction:t(Ae).Right},{default:ae(()=>[wu]),_:1},8,["direction"])):j("",!0),_("button",{class:"button open",onClick:y[6]||(y[6]=q=>n("open")),disabled:t(r)},[_("h3",null,Z(t(s).name),1)],8,ku),_("span",Su,"v"+Z(t(s).modVersion),1),Cu,t(b)?(k(),x("div",Nu," Last played "+Z(t(l).format(t(b))),1)):j("",!0)])):t(s).error==null&&c.value?(k(),x("div",$u,[a(mi,{modelValue:m.value,"onUpdate:modelValue":y[7]||(y[7]=q=>m.value=q),class:"editname",onSubmit:h},null,8,["modelValue"])])):(k(),x("div",Iu,[u(" Error: Failed to load save with id "+Z(t(s).id),1),qu,u(Z(t(s).error),1)]))],2))}});var Ki=ge(Mu,[["__scopeId","data-v-2fbabe5d"]]);const ps=e=>(lt("data-v-a123f6ba"),e=e(),ut(),e),xu={class:"cloud-saves-modal-header"},Tu=ps(()=>_("br",null,null,-1)),Pu=["onClick"],Au={key:0,class:"note"},Bu={key:1,class:"note"},Fu=["onClick"],Eu={key:0,class:"note"},Ou={key:1,class:"note"},Ru=["onClick"],Du=ps(()=>_("h2",null,"Both",-1)),Lu=ps(()=>_("div",{class:"save"},"Keep Both",-1)),Vu=[Du,Lu],ju=oe({__name:"CloudSaveResolver",setup(e){const n=le(!1),i=le([]),s=v(()=>tn.value.length>1?"saves":"save"),r=le(null);gt(()=>tn.value.length>0,p=>{p&&(i.value=tn.value.map(({local:b,cloud:f})=>{var h,N;return((h=b.time)!=null?h:0)<((N=f.time)!=null?N:0)?"cloud":"local"}),n.value=!0)},{immediate:!0}),gt(()=>{var p;return(p=r.value)==null?void 0:p.isOpen},p=>{p===!1&&(tn.value=[])});function l(p){i.value[p]="local"}function c(p){i.value[p]="cloud"}function d(p){i.value[p]="both"}function m(){var p,b;for(let f=0;f<i.value.length;f++){const{slot:h,local:N,cloud:y}=tn.value[f];switch(i.value[f]){case"local":(p=Ot.value)==null||p.save(h,kn.compressToUTF16(On(an(N))),y.name).catch(console.error);break;case"cloud":ht(an(y));break;case"both":const q=ei();ht({...an(y),id:q}),we.saves.push(q),(b=Ot.value)==null||b.save(h,kn.compressToUTF16(On(an(N))),y.name).catch(console.error);break}}n.value=!1}return(p,b)=>(k(),se(Zt,{modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=f=>n.value=f),width:"960px",ref_key:"modal",ref:r,"prevent-closing":!0},{header:ae(()=>[_("div",xu,[_("h2",null,"Cloud "+Z(t(s))+" loaded!",1)])]),body:ae(()=>[_("div",null," Upon loading, your cloud "+Z(t(s))+" "+Z(t(tn).length>1?"appear":"appears")+" to be out of sync with your local "+Z(t(s))+". Which "+Z(t(s))+" do you want to keep? ",1),Tu,(k(!0),x(g,null,Pe(t(t(tn)),(f,h)=>{var N,y,q,T,M,P,A,W;return k(),x("div",{key:f.id,class:"conflict-container"},[_("div",{onClick:de=>c(h),class:Ie({selected:i.value[h]==="cloud"})},[_("h2",null,[u(" Cloud "),((N=f.cloud.time)!=null?N:0)>((y=f.local.time)!=null?y:0)?(k(),x("span",Au,"(more recent)")):j("",!0),((q=f.cloud.timePlayed)!=null?q:0)>((T=f.local.timePlayed)!=null?T:0)?(k(),x("span",Bu,"(more playtime)")):j("",!0)]),a(Ki,{save:f.cloud,readonly:!0},null,8,["save"])],10,Pu),_("div",{onClick:de=>l(h),class:Ie({selected:i.value[h]==="local"})},[_("h2",null,[u(" Local "),((M=f.cloud.time)!=null?M:0)<=((P=f.local.time)!=null?P:0)?(k(),x("span",Eu,"(more recent)")):j("",!0),((A=f.cloud.timePlayed)!=null?A:0)<=((W=f.local.timePlayed)!=null?W:0)?(k(),x("span",Ou,"(more playtime)")):j("",!0)]),a(Ki,{save:f.local,readonly:!0},null,8,["save"])],10,Fu),_("div",{onClick:de=>d(h),class:Ie({selected:i.value[h]==="both"}),style:{"flex-basis":"30%"}},Vu,10,Ru)])}),128))]),footer:ae(()=>[_("div",{class:"cloud-saves-footer"},[_("button",{onClick:m,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}});var Uu=ge(ju,[["__scopeId","data-v-a123f6ba"]]);const Gu=oe({components:{Context:Js,ErrorVue:Ls},props:{index:{type:Number,required:!0},display:{type:re(Object,String,Function),required:!0},name:{type:re(String),required:!0},theme:re(Object),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:n,index:i}=ot(e),s=ms(n),r=v(()=>_e.allowGoBack&&i.value>0);function l(){ve.tabs.splice(t(e.index),1/0)}function c(m){e.nodes.value=m}const d=le([]);return _r((m,p,b)=>(console.warn(`Error caught in "${e.name}" layer`,m,p,b),d.value.push(m instanceof Error?m:new Error(JSON.stringify(m))),!1)),{component:s,showGoBack:r,updateNodes:c,unref:t,goBack:l,errors:d}}});function zu(e,n,i,s,r,l){const c=jt("ErrorVue"),d=jt("Context");return e.errors.length>0?(k(),se(c,{key:0,errors:e.errors},null,8,["errors"])):(k(),x("div",Rt({key:1,class:"layer-container",style:e.theme},e.$attrs),[e.showGoBack?(k(),x("button",{key:0,class:"goBack",onClick:n[0]||(n[0]=(...m)=>e.goBack&&e.goBack(...m))},"\u274C")):(k(),x("div",{key:1,class:Ie(["layer-tab",{showGoBack:e.showGoBack}])},[a(d,{onUpdateNodes:e.updateNodes},{default:ae(()=>[(k(),se($e(e.component)))]),_:1},8,["onUpdateNodes"])],2))],16))}var Hu=ge(Gu,[["render",zu],["__scopeId","data-v-4fc3b5f1"]]);const ir=e=>(lt("data-v-635f9971"),e=e(),ut(),e),Wu=ir(()=>_("h2",null,"Changelog",-1)),Yu=ir(()=>_("details",{open:""},[_("summary",null,[u("v1.0 Revitalization - "),_("time",null,"2021-09-04")]),u(" Moved everything over to Profectus "),_("ul",null,[_("li",{class:"feature"},"Did everything"),_("li",{class:"fix"},"Had some fun"),_("li",{class:"breaking"},"Removed everything"),_("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),Ku=oe({__name:"Changelog",setup(e,{expose:n}){const i=le(!1);return n({open(){i.value=!0}}),(s,r)=>(k(),se(Zt,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=l=>i.value=l)},{header:ae(()=>[Wu]),body:ae(()=>[Yu]),_:1},8,["modelValue"]))}});var Qu=ge(Ku,[["__scopeId","data-v-635f9971"]]);const Pn=e=>(lt("data-v-10effbe8"),e=e(),ut(),e),Xu={class:"info-modal-header"},Zu=["src","alt"],Ju={class:"info-modal-title"},ec={key:0},tc={key:0},nc={key:0},ic=Pn(()=>_("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),sc=Pn(()=>_("br",null,null,-1)),rc=Pn(()=>_("br",null,null,-1)),oc=["href"],ac=Pn(()=>_("span",{class:"material-icons info-modal-discord"},"discord",-1)),lc=Pn(()=>_("div",null,[_("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[_("span",{class:"material-icons info-modal-discord"},"discord"),u(" Profectus & Friends ")])],-1)),uc=Pn(()=>_("div",null,[_("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[_("span",{class:"material-icons info-modal-discord"},"discord"),u(" The Modding Tree ")])],-1)),cc=Pn(()=>_("br",null,null,-1));var dc=oe({__name:"Info",props:{changelog:null},setup(e,{expose:n}){const i=e,{title:s,logo:r,author:l,discordName:c,discordLink:d,versionNumber:m,versionTitle:p}=_e,b=ot(i),f=le(!1),h=v(()=>os(ve.timePlayed)),N=v(()=>pe($(()=>a(g,null,[js.map(ie)]))));n({open(){f.value=!0}});function y(){var q;(q=t(b.changelog))==null||q.open()}return(q,T)=>(k(),se(Zt,{modelValue:f.value,"onUpdate:modelValue":T[0]||(T[0]=M=>f.value=M)},{header:ae(()=>[_("div",Xu,[t(r)?(k(),x("img",{key:0,class:"info-modal-logo",src:t(r),alt:t(s)},null,8,Zu)):j("",!0),_("div",Ju,[_("h2",null,Z(t(s)),1),_("h4",null,[u(" v"+Z(t(m)),1),t(p)?(k(),x("span",ec,": "+Z(t(p)),1)):j("",!0)])])])]),body:ae(({shown:M})=>[M?(k(),x("div",tc,[t(l)?(k(),x("div",nc,"By "+Z(t(l)),1)):j("",!0),ic,sc,_("div",{class:"link",onClick:y},"Changelog"),rc,_("div",null,[t(d)?(k(),x("a",{key:0,href:t(d),class:"info-modal-discord-link",target:"_blank"},[ac,u(" "+Z(t(c)),1)],8,oc)):j("",!0)]),lc,uc,cc,_("div",null,"Time Played: "+Z(t(h)),1),(k(),se($e(t(N))))])):j("",!0)]),_:1},8,["modelValue"]))}});var mc=ge(dc,[["__scopeId","data-v-10effbe8"]]);const pc={class:"field"},fc={key:0,class:"field-title"},Qi=oe({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:n}){var c;const i=e,s=di(cn(i,"title"),"span"),r=le((c=i.options.find(d=>d.value===i.modelValue))!=null?c:null);gt(cn(i,"modelValue"),d=>{var m;Te(r)!==d&&(r.value=(m=i.options.find(p=>p.value===d))!=null?m:null)});function l(d){n("update:modelValue",d.value)}return(d,m)=>(k(),x("div",pc,[t(s)?(k(),x("span",fc,[(k(),se($e(t(s))))])):j("",!0),a(t(Ir),{options:e.options,modelValue:r.value,"onUpdate:modelValue":[m[0]||(m[0]=p=>r.value=p),l],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const gc={class:"field"},bc=oe({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:n}){const i=e,s=v(()=>{var l;return pe((l=t(i.title))!=null?l:"<span></span>","span")}),r=v({get(){return!!i.modelValue},set(l){n("update:modelValue",l)}});return(l,c)=>(k(),x("label",gc,[Zi(_("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":c[0]||(c[0]=d=>He(r)?r.value=d:null)},null,512),[[wr,t(r)]]),(k(),se($e(t(s))))]))}});var Wt=ge(bc,[["__scopeId","data-v-11046116"]]);const hc={class:"header"},vc=_("h2",null,"Settings",-1),yc={class:"option-tabs"},_c={key:0},wc={key:1};var kc=oe({__name:"Options",setup(e,{expose:n}){const i=le(!1),s=le("behaviour");function r(E){return E==s.value}function l(E){s.value=E}n({isTab:r,setTab:l,save:ht,open(){i.value=!0}});const c=[{label:"Standard",value:We.standard},{label:"Thousands",value:We.thousands},{label:"Engineering",value:We.engineering},{label:"Scientific",value:We.scientific}],d=c.filter(E=>E.value!==We.standard),m=v(()=>pe($(()=>a(g,null,[Oo.map(ie)])))),{showTPS:p,unthrottled:b,alignUnits:f,numberFormat:h,backupNumberFormat:N,showNextValues:y}=ot(we),{autosave:q}=ot(ve),T=v({get(){return ve.devSpeed===0},set(E){ve.devSpeed=E?0:null}}),M=$(()=>a("span",{class:"option-title"},[u("Unthrottled"),a("desc",null,[u("Allow the game to run as fast as possible. Not battery friendly.")])])),P=$(()=>a("span",{class:"option-title"},[u("Autosave"),a(je,{display:"Save-specific",direction:Ae.Right},{default:()=>[u("*")]}),a("desc",null,[u("Automatically save the game every second or when the game is closed.")])])),A=$(()=>a("span",{class:"option-title"},[u("Pause game"),a(je,{display:"Save-specific",direction:Ae.Right},{default:()=>[u("*")]}),a("desc",null,[u("Stop everything from moving.")])])),W=$(()=>a("span",{class:"option-title"},[u("Show TPS"),a("desc",null,[u("Show TPS meter at the bottom-left corner of the page.")])])),de=$(()=>a("span",{class:"option-title"},[u("Align modifier units"),a("desc",null,[u("Align numbers to the beginning of the unit in modifier view.")])])),X=$(()=>a("span",{class:"option-title"},[u("Number Notation"),a("desc",null,[u("Change how numbers are formatted for display.")])])),U=$(()=>a("span",{class:"option-title"},[u("Backup Number Notation"),a("desc",null,[u("Change how numbers are formatted beyond the limit of Standard Notation")])])),Be=$(()=>a("span",{class:"option-title"},[u("Show Next Values"),a("desc",null,[u("Display both the current and next values of the hovered feature, where possible.")])]));return(E,G)=>(k(),se(Zt,{modelValue:i.value,"onUpdate:modelValue":G[11]||(G[11]=ee=>i.value=ee)},{header:ae(()=>[_("div",hc,[vc,_("div",yc,[_("button",{class:Ie({selected:r("behaviour")}),onClick:G[0]||(G[0]=ee=>l("behaviour"))},"Behaviour",2),_("button",{class:Ie({selected:r("appearance")}),onClick:G[1]||(G[1]=ee=>l("appearance"))},"Appearance",2)])])]),body:ae(()=>[r("behaviour")?(k(),x("div",_c,[a(Wt,{title:t(M),modelValue:t(b),"onUpdate:modelValue":G[2]||(G[2]=ee=>He(b)?b.value=ee:null)},null,8,["title","modelValue"]),t(_e).enablePausing?(k(),se(Wt,{key:0,title:t(A),modelValue:t(T),"onUpdate:modelValue":G[3]||(G[3]=ee=>He(T)?T.value=ee:null)},null,8,["title","modelValue"])):j("",!0),a(Wt,{title:t(P),modelValue:t(q),"onUpdate:modelValue":G[4]||(G[4]=ee=>He(q)?q.value=ee:null)},null,8,["title","modelValue"]),t(q)?j("",!0):(k(),se(Ti,{key:1,class:"button save-button",onClick:G[5]||(G[5]=ee=>t(ht)())},{default:ae(()=>[u("Manually save")]),_:1}))])):j("",!0),r("appearance")?(k(),x("div",wc,[a(Qi,{title:t(X),options:c,modelValue:t(h),"onUpdate:modelValue":G[6]||(G[6]=ee=>He(h)?h.value=ee:null)},null,8,["title","modelValue"]),t(h)===t(We).standard?(k(),se(Qi,{key:0,title:t(U),options:t(d),modelValue:t(N),"onUpdate:modelValue":G[7]||(G[7]=ee=>He(N)?N.value=ee:null)},null,8,["title","options","modelValue"])):j("",!0),(k(),se($e(t(m)))),a(Wt,{title:t(Be),modelValue:t(y),"onUpdate:modelValue":G[8]||(G[8]=ee=>He(y)?y.value=ee:null)},null,8,["title","modelValue"]),a(Wt,{title:t(W),modelValue:t(p),"onUpdate:modelValue":G[9]||(G[9]=ee=>He(p)?p.value=ee:null)},null,8,["title","modelValue"]),a(Wt,{title:t(de),modelValue:t(f),"onUpdate:modelValue":G[10]||(G[10]=ee=>He(f)?f.value=ee:null)},null,8,["title","modelValue"])])):j("",!0)]),_:1},8,["modelValue"]))}});const fs=e=>(lt("data-v-b84e3a02"),e=e(),ut(),e),Sc=fs(()=>_("h2",null,"Saves Manager",-1)),Cc={key:0,style:{color:"var(--danger)"}},Nc={class:"modal-footer"},$c={class:"field"},Ic=fs(()=>_("span",{class:"field-title"},"Create Save",-1)),qc={class:"field-buttons"},Mc={class:"footer"},xc=fs(()=>_("div",{style:{"flex-grow":"1"}},null,-1)),Tc=oe({__name:"SavesManager",setup(e,{expose:n}){const i=le(!1),s=le(null);n({open(){i.value=!0}});const r=le(!1),l=le(""),c=le(null);gt(l,M=>{M?un(()=>{var P;try{if(M=(P=yn(M))!=null?P:"",M===""){console.warn("Unable to determine preset encoding",M),r.value=!0;return}const A=JSON.parse(M);if(typeof A!="object"){r.value=!0;return}const W=ei();A.id=W,ht(A),l.value="",r.value=!1,we.saves.push(W)}catch{r.value=!0}}):r.value=!1});let d={},m=le(Object.keys(d).reduce((M,P)=>(M.push({label:P.split("/").slice(-1)[0].slice(0,-4),value:d[P]}),M),[]));gt(i,M=>{M&&Bo()});const p=v(()=>we.saves.reduce((M,P)=>(M[P]=Ao(P),M),{})),b=v(()=>{var M;return((M=Ot.value)==null?void 0:M.loggedIn)===!0&&we.saves.length<zn.value.length});function f(M){let P;switch(ve.id===M?P=On(ve):P=JSON.stringify(p.value[M]),_e.exportEncoding){default:console.warn(`Unknown save encoding: ${_e.exportEncoding}. Defaulting to lz`);case"lz":P=kn.compressToUTF16(P);break;case"base64":P=btoa(unescape(encodeURIComponent(P)));break;case"plain":break}const A=document.createElement("textarea");A.value=P,document.body.appendChild(A),A.select(),A.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(A)}function h(M){ve.id===M&&ht();const P={...p.value[M],id:ei()};ht(P),we.saves.push(P.id)}function N(M){var P;((P=Ot.value)==null?void 0:P.loggedIn)===!0&&Ot.value.getSaveList().then(A=>{var de;const W=Object.keys(A).find(X=>{const U=A[X].content;try{if(JSON.parse(U).id===M)return!0}catch{return!1}});W!=null&&((de=Ot.value)==null||de.save(parseInt(W),"","").catch(console.error))}),we.saves=we.saves.filter(A=>A!==M),localStorage.removeItem(M),yi(M)}function y(M){p.value[ve.id].time=ve.time,ht(),yi(ve.id),ln(p.value[M]),yi(M)}function q(M){var A;if(c.value=M,un(()=>{c.value=null}),M=(A=yn(M))!=null?A:"",M===""){console.warn("Unable to determine preset encoding",M);return}const P=JSON.parse(M);P.id=ei(),ht(P),we.saves.push(P.id),y(P.id)}function T(M,P){const A=p.value[M];A!=null&&(A.name=P,ve.id===M?(ve.name=P,ht()):(ht(A),yi(M)))}return(M,P)=>(k(),se(Zt,{modelValue:i.value,"onUpdate:modelValue":P[4]||(P[4]=A=>i.value=A),ref_key:"modal",ref:s},{header:ae(()=>[Sc]),body:ae(({shown:A})=>[t(b)?(k(),x("div",Cc," Not all saves are synced! You may need to delete stale saves. ")):j("",!0),A?(k(),se(t(qr),{key:1,list:t(we).saves,handle:".handle",itemKey:W=>W},{item:ae(({element:W})=>[a(Ki,{save:t(p)[W],onOpen:de=>y(W),onExport:de=>f(W),onEditName:de=>T(W,de),onDuplicate:de=>h(W),onDelete:de=>N(W)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):j("",!0)]),footer:ae(()=>[_("div",Nc,[a(mi,{modelValue:l.value,"onUpdate:modelValue":P[0]||(P[0]=A=>l.value=A),title:"Import Save",placeholder:"Paste your save here!",class:Ie({importingFailed:r.value})},null,8,["modelValue","class"]),_("div",$c,[Ic,_("div",qc,[_("button",{class:"button",onClick:P[1]||(P[1]=A=>y(t(Fn)().id))},"New Game"),Object.keys(t(m)).length>0?(k(),se(Qi,{key:0,options:t(m),modelValue:c.value,"onUpdate:modelValue":P[2]||(P[2]=A=>q(A)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):j("",!0)])]),_("div",Mc,[xc,_("button",{class:"button modal-default-button",onClick:P[3]||(P[3]=A=>i.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var sr=ge(Tc,[["__scopeId","data-v-b84e3a02"]]);const Jt=e=>(lt("data-v-c1ba90a0"),e=e(),ut(),e),Pc=["src","alt"],Ac={key:1,class:"title"},Bc={key:2,class:"devspeed"},Fc={key:3,class:"devspeed"},Ec=Jt(()=>_("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Oc={class:"discord"},Rc={class:"discord-links"},Dc={key:0},Lc=["href"],Vc=Jt(()=>_("li",null,[_("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),jc=Jt(()=>_("li",null,[_("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Uc={href:"https://forums.moddingtree.com/",target:"_blank"},Gc=Jt(()=>_("span",{class:"material-icons"},"forum",-1)),zc=Jt(()=>_("span",{class:"material-icons"},"info",-1)),Hc=Jt(()=>_("span",{class:"material-icons"},"settings",-1)),Wc=Jt(()=>_("span",{class:"material-icons"},"settings",-1)),Yc=Jt(()=>_("span",{class:"material-icons"},"info",-1)),Kc={href:"https://forums.moddingtree.com/",target:"_blank"},Qc=Jt(()=>_("span",{class:"material-icons"},"forum",-1)),Xc={class:"discord"},Zc={class:"discord-links"},Jc={key:0},ed=["href"],td=Jt(()=>_("li",null,[_("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),nd=Jt(()=>_("li",null,[_("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),id=oe({__name:"Nav",setup(e){const n=le(null),i=le(null),s=le(null),r=le(null),{useHeader:l,banner:c,title:d,discordName:m,discordLink:p,versionNumber:b}=_e;function f(){window.open(p,"mywindow")}const h=v(()=>{var N;return((N=Ot.value)==null?void 0:N.loggedIn)===!0&&!zn.value.includes(we.active)});return(N,y)=>(k(),x(g,null,[t(l)?(k(),x("div",Rt({key:0,class:"nav"},N.$attrs),[t(c)?(k(),x("img",{key:0,src:t(c),class:"banner",alt:t(d)},null,8,Pc)):(k(),x("div",Ac,Z(t(d)),1)),_("div",{onClick:y[0]||(y[0]=q=>{var T;return(T=r.value)==null?void 0:T.open()}),class:"version-container"},[a(je,{display:"Changelog",direction:t(Ae).Down,class:"version"},{default:ae(()=>[_("span",null,"v"+Z(t(b)),1)]),_:1},8,["direction"])]),t(ve).devSpeed===0?(k(),x("div",Bc,"Game Paused")):t(ve).devSpeed&&t(ve).devSpeed!==1?(k(),x("div",Fc,"Dev Speed: "+Z(t(D)(t(ve).devSpeed))+"x",1)):j("",!0),Ec,_("div",Oc,[_("span",{onClick:f,class:"material-icons"},"discord"),_("ul",Rc,[t(p)?(k(),x("li",Dc,[_("a",{href:t(p),target:"_blank"},Z(t(m)),9,Lc)])):j("",!0),Vc,jc])]),_("div",null,[_("a",Uc,[a(je,{display:"Forums",direction:t(Ae).Down,yoffset:"5px"},{default:ae(()=>[Gc]),_:1},8,["direction"])])]),_("div",{onClick:y[1]||(y[1]=q=>{var T;return(T=n.value)==null?void 0:T.open()})},[a(je,{display:"Info",direction:t(Ae).Down,class:"info"},{default:ae(()=>[zc]),_:1},8,["direction"])]),_("div",{onClick:y[2]||(y[2]=q=>{var T;return(T=i.value)==null?void 0:T.open()})},[a(je,{display:"Saves",direction:t(Ae).Down,xoffset:"-20px"},{default:ae(()=>[_("span",{class:Ie(["material-icons",{needsSync:t(h)}])},"library_books",2)]),_:1},8,["direction"])]),_("div",{onClick:y[3]||(y[3]=q=>{var T;return(T=s.value)==null?void 0:T.open()})},[a(je,{display:"Settings",direction:t(Ae).Down,xoffset:"-66px"},{default:ae(()=>[Hc]),_:1},8,["direction"])])],16)):(k(),x("div",Rt({key:1,class:"overlay-nav"},N.$attrs),[_("div",{onClick:y[4]||(y[4]=q=>{var T;return(T=r.value)==null?void 0:T.open()}),class:"version-container"},[a(je,{display:"Changelog",direction:t(Ae).Right,xoffset:"25%",class:"version"},{default:ae(()=>[_("span",null,"v"+Z(t(b)),1)]),_:1},8,["direction"])]),_("div",{onClick:y[5]||(y[5]=q=>{var T;return(T=i.value)==null?void 0:T.open()})},[a(je,{display:"Saves",direction:t(Ae).Right},{default:ae(()=>[_("span",{class:Ie(["material-icons",{needsSync:t(h)}])},"library_books",2)]),_:1},8,["direction"])]),_("div",{onClick:y[6]||(y[6]=q=>{var T;return(T=s.value)==null?void 0:T.open()})},[a(je,{display:"Settings",direction:t(Ae).Right},{default:ae(()=>[Wc]),_:1},8,["direction"])]),_("div",{onClick:y[7]||(y[7]=q=>{var T;return(T=n.value)==null?void 0:T.open()})},[a(je,{display:"Info",direction:t(Ae).Right},{default:ae(()=>[Yc]),_:1},8,["direction"])]),_("div",null,[_("a",Kc,[a(je,{display:"Forums",direction:t(Ae).Right,xoffset:"7px"},{default:ae(()=>[Qc]),_:1},8,["direction"])])]),_("div",Xc,[_("span",{onClick:f,class:"material-icons"},"discord"),_("ul",Zc,[t(p)?(k(),x("li",Jc,[_("a",{href:t(p),target:"_blank"},Z(t(m)),9,ed)])):j("",!0),td,nd])])],16)),a(mc,{ref_key:"info",ref:n,changelog:r.value},null,8,["changelog"]),a(sr,{ref_key:"savesManager",ref:i},null,512),a(kc,{ref_key:"options",ref:s},null,512),a(Qu,{ref_key:"changelog",ref:r},null,512)],64))}});var rr=ge(id,[["__scopeId","data-v-c1ba90a0"]]);const sd=["id"],rd={class:"inner-tab"},od=oe({__name:"Game",setup(e){const n=cn(ve,"tabs"),i=v(()=>Object.keys(Ct)),s=_e.useHeader;function r(l){const{display:c,name:d,theme:m,nodes:p}=l;return{display:c,name:d,theme:m,nodes:p}}return(l,c)=>(k(),x("div",{class:Ie(["tabs-container",{useHeader:t(s)}])},[(k(!0),x(g,null,Pe(t(n),(d,m)=>{var p,b;return k(),x("div",{key:m,id:d,class:Ie(["tab",t((p=t(Ct)[d])==null?void 0:p.classes)]),style:Re(t((b=t(Ct)[d])==null?void 0:b.style))},[m===0&&!t(s)?(k(),se(rr,{key:0})):j("",!0),_("div",rd,[t(i).includes(d)?(k(),se(Hu,Rt({key:0},r(t(Ct)[d]),{index:m}),null,16,["index"])):(k(),se($e(d),{key:1,index:m},null,8,["index"]))])],14,sd)}),128))],2))}});var ad=ge(od,[["__scopeId","data-v-a75d3130"]]);const ld=oe({__name:"Tab",props:{display:null},setup(e){const n=e,{display:i}=ot(n),s=ms(i);return(r,l)=>(k(),se($e(t(s))))}}),ud=Symbol("Tab");function rn(e){return Xe(n=>{const i=e.call(n,n);return i.id=Gt("tab-"),i.type=ud,i[pt]=ld,i[ft]=function(){const{display:s}=this;return{display:s}},i})}$t.on("setupVue",e=>e.use(Mr));function gs(e="white",n="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${n} ${e}`,zIndex:1}}function cd(){return gs("red","20px")}const dd=oe({props:{visibility:{type:re(Number,Boolean),required:!0},display:{type:re(Object,String,Function),required:!0},style:re(String,Object,Array),classes:re(Object),glowColor:re(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:n}){const{display:i,glowColor:s,floating:r}=ot(e),l=ms(i),c=v(()=>{const m=Te(s);return m==null||m===""?{}:t(r)?gs(m):{boxShadow:`0px 9px 5px -6px ${m}`}});function d(){n("selectTab")}return{selectTab:d,component:l,glowColorStyle:c,unref:t,Visibility:De,isVisible:ye,isHidden:Ut}}});function md(e,n,i,s,r,l){var c;return e.isVisible(e.visibility)?(k(),x("button",{key:0,onClick:n[0]||(n[0]=(...d)=>e.selectTab&&e.selectTab(...d)),class:Ie(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:Re([{visibility:e.isHidden(e.visibility)?"hidden":void 0},e.glowColorStyle,(c=e.unref(e.style))!=null?c:{}])},[(k(),se($e(e.component)))],6)):j("",!0)}var or=ge(dd,[["render",md],["__scopeId","data-v-1db9253b"]]);const pd=oe({__name:"Sticky",props:{style:null},setup(e){const n=le("0"),i=new ResizeObserver(r),s=yt(null);function r(){let l=s.value;if(l==null)return;let c=0;for(;l.previousSibling;){const d=l.previousSibling;d.dataset&&"vSticky"in d.dataset&&(c+=d.offsetHeight),l=d}n.value=c+"px"}return un(r),document.fonts.ready.then(r),ci(()=>{var c;const l=(c=s.value)==null?void 0:c.parentElement;l&&i.observe(l)}),(l,c)=>{var d;return k(),x("div",{class:"sticky",style:Re([(d=e.style)!=null?d:{},{top:n.value}]),ref_key:"element",ref:s,"data-v-sticky":""},[Kt(l.$slots,"default",{},void 0,!0)],4)}}});var ar=ge(pd,[["__scopeId","data-v-4627c2ee"]]);const fd=oe({props:{visibility:{type:re(Number,Boolean),required:!0},activeTab:{type:re(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:re(Object),required:!0},style:re(String,Object,Array),classes:re(Object),buttonContainerStyle:re(String,Object,Array),buttonContainerClasses:re(Object)},components:{Sticky:ar,TabButton:or},setup(e){const{activeTab:n,buttonContainerClasses:i}=ot(e),s=v(()=>{var m;return(m=Te(i))==null?void 0:m.floating}),r=yt("");qt(()=>{const m=Te(n);if(m==null){r.value="";return}if(Nt(m)){r.value=pe(m);return}r.value=pe(t(m.display))});const l=v(()=>{const m=Te(n);return Nt(m)||!m?void 0:t(m.classes)}),c=v(()=>{const m=Te(n);return Nt(m)||!m?void 0:t(m.style)});function d(m){const{display:p,style:b,classes:f,glowColor:h,visibility:N}=m;return{display:p,style:t(b),classes:f,glowColor:h,visibility:N}}return{floating:s,tabClasses:l,tabStyle:c,Visibility:De,component:r,gatherButtonProps:d,unref:t,isVisible:ye,isHidden:Ut}}});function gd(e,n,i,s,r,l){var m,p;const c=jt("TabButton"),d=jt("Sticky");return e.isVisible(e.visibility)?(k(),x("div",{key:0,class:Ie(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:Re([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(m=e.unref(e.style))!=null?m:[],(p=e.tabStyle)!=null?p:[]])},[a(d,{class:Ie(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:Re(e.unref(e.buttonContainerStyle))},{default:ae(()=>[_("div",{class:Ie(["tab-buttons",{floating:e.floating}])},[(k(!0),x(g,null,Pe(e.unref(e.tabs),(b,f)=>(k(),se(c,Rt({onSelectTab:h=>e.selected.value=f,floating:e.floating,key:f,active:e.unref(b.tab)===e.unref(e.activeTab)},e.gatherButtonProps(b)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(k(),se($e(e.unref(e.component)),{key:0})):j("",!0)],6)):j("",!0)}var bd=ge(fd,[["render",gd],["__scopeId","data-v-47dac459"]]);const hd=Symbol("TabButton"),vd=Symbol("TabFamily");function pi(e,n){Object.keys(e).length===0&&console.error("Cannot create tab family with 0 tabs");const i=Me(Object.keys(e)[0],!1);return Xe(s=>{var c;const r=(c=n==null?void 0:n.call(s,s))!=null?c:{};r.id=Gt("tabFamily-"),r.type=vd,r[pt]=bd,r.tabs=Object.keys(e).reduce((d,m)=>{const p=e[m]();return p.type=hd,p[pt]=or,Q(p,"visibility"),Ge(p,"visibility",De.Visible),Q(p,"tab"),Q(p,"display"),Q(p,"classes"),Q(p,"style"),Q(p,"glowColor"),d[m]=p,d},{}),r.selected=i,r.activeTab=v(()=>{const d=t(l.tabs);if(i.value in d&&ye(d[i.value].visibility))return t(d[i.value].tab);const m=Object.values(d).find(p=>ye(p.visibility));return m?t(m.tab):null}),Q(r,"visibility"),Ge(r,"visibility",De.Visible),Q(r,"classes"),Q(r,"style"),Q(r,"buttonContainerClasses"),Q(r,"buttonContainerStyle"),r[ft]=function(){const{visibility:d,activeTab:m,selected:p,tabs:b,style:f,classes:h,buttonContainerClasses:N,buttonContainerStyle:y}=this;return{visibility:d,activeTab:m,selected:p,tabs:b,style:t(f),classes:h,buttonContainerClasses:N,buttonContainerStyle:y}};const l=r;return l})}const Ne=oe({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(n,i)=>(k(),x("div",{style:Re({width:e.width,height:e.height})},null,4))}});const lr=e=>(lt("data-v-3da2d5ce"),e=e(),ut(),e),yd=lr(()=>_("div",{class:"key"},"Ctrl",-1)),_d=lr(()=>_("div",{class:"key"},"Shift",-1)),wd={class:"key"},kd=oe({__name:"Hotkey",props:{hotkey:null},setup(e){const n=e;let i="",s=!1,r=!1,l=!1;return qt(()=>{i=n.hotkey.key,s=i.startsWith("ctrl+"),s&&(i=i.slice(5)),r=i.startsWith("shift+"),r&&(i=i.slice(6)),l=i.length==1&&i.toLowerCase()!=i.toUpperCase(),l&&(i=i.toUpperCase())}),(c,d)=>(k(),x(g,null,[t(s)?(k(),x(g,{key:0},[yd,u("+")],64)):j("",!0),t(r)?(k(),x(g,{key:1},[_d,u("+")],64)):j("",!0),_("div",wd,Z(t(i)),1)],64))}});var Sd=ge(kd,[["__scopeId","data-v-3da2d5ce"]]);const li=xi({}),bs=Symbol("Hotkey"),Xn=[")","!","@","#","$","%","^","&","*","("];function St(e){return Xe(n=>{const i=e.call(n,n);return i.type=bs,Q(i,"enabled"),Ge(i,"enabled",!0),Q(i,"description"),i})}$t.on("addLayer",e=>{Ks(e,bs).forEach(n=>{li[n.key]=n})});$t.on("removeLayer",e=>{Ks(e,bs).forEach(n=>{li[n.key]=void 0})});document.onkeydown=function(e){var s,r;if(((s=e.target)==null?void 0:s.tagName)==="INPUT"||$s.value&&!ve.keepGoing)return;const n=[e.key];e.shiftKey&&e.ctrlKey?(n.splice(0,1),n.push("ctrl+shift+"+e.key.toUpperCase()),n.push("shift+ctrl+"+e.key.toUpperCase()),Xn.includes(e.key)?(n.push("ctrl+shift+"+Xn.indexOf(e.key)),n.push("shift+ctrl+"+Xn.indexOf(e.key))):(n.push("ctrl+shift+"+e.key.toLowerCase()),n.push("shift+ctrl+"+e.key.toLowerCase()))):Xn.includes(e.key)?(n.push("shift+"+e.key),n.push("shift+"+Xn.indexOf(e.key))):e.shiftKey?(n.push("shift+"+e.key.toUpperCase()),n.push("shift+"+e.key.toLowerCase())):e.ctrlKey&&(n.splice(0,1),n.push("ctrl+"+e.key));const i=li[(r=n.find(l=>l in li))!=null?r:""];i&&t(i.enabled)&&(e.preventDefault(),i.onPress())};Ro($(()=>{const e=Object.values(li).filter(n=>t(n==null?void 0:n.enabled));return e.length===0?"":a("div",null,[a("br",null,null),a("h4",null,[u("Hotkeys")]),a("div",{style:"column-count: 2"},[e.filter(n=>{var i;return(i=n==null?void 0:n.description)!=null?i:!1}).map(n=>a("div",null,[a(Sd,{hotkey:n},null),u(" "),n==null?void 0:n.description]))])])}));const Cd={key:0},Nd={key:0,class:"mark star"},$d=["src"],Id=oe({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(n,i)=>e.mark?(k(),x("div",Cd,[e.mark===!0?(k(),x("div",Nd)):(k(),x("img",{key:1,class:"mark",src:e.mark},null,8,$d))])):j("",!0)}});var fi=ge(Id,[["__scopeId","data-v-782ef5ff"]]);const qd=oe({__name:"Node",props:{id:null},setup(e){const i=ot(e),s=Ii(as,()=>{}),r=Ii(ls,()=>{}),l=yt(null),c=v(()=>l.value&&l.value.parentElement);return gt([c,i.id],([d,m],[p,b])=>{p&&r(t(b)),d&&s(m,d)}),Es(()=>r(t(i.id))),(d,m)=>(k(),x("div",{class:"node",ref_key:"node",ref:l},null,512))}});var Cn=ge(qd,[["__scopeId","data-v-a48cb382"]]),Md=oe({props:{display:{type:re(Object,String,Function),required:!0},visibility:{type:re(Number,Boolean),required:!0},style:re(Object,String,Array),classes:re(Object),onClick:Function,onHold:Function,canClick:{type:re(Boolean),required:!0},small:Boolean,mark:re(Boolean,String),id:{type:String,required:!0}},components:{Node:Cn,MarkNode:fi},setup(e){const{display:n,onClick:i,onHold:s}=ot(e),r=yt("");qt(()=>{var b;const d=Te(n);if(d==null){r.value="";return}if(Nt(d)){r.value=pe(d);return}const m=pe((b=d.title)!=null?b:"","h3"),p=pe(d.description,"div");r.value=pe($(()=>a("span",null,[d.title!=null?a("div",null,[a(m,null,null)]):null,a(p,null,null)])))});const{start:l,stop:c}=tr(i,s);return{start:l,stop:c,comp:r,Visibility:De,isVisible:ye,isHidden:Ut,unref:t}}});function xd(e,n,i,s,r,l){var m;const c=jt("MarkNode"),d=jt("Node");return e.isVisible(e.visibility)?(k(),x("button",{key:0,style:Re([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(m=e.unref(e.style))!=null?m:[]]),onClick:n[0]||(n[0]=(...p)=>e.onClick&&e.onClick(...p)),onMousedown:n[1]||(n[1]=(...p)=>e.start&&e.start(...p)),onMouseleave:n[2]||(n[2]=(...p)=>e.stop&&e.stop(...p)),onMouseup:n[3]||(n[3]=(...p)=>e.stop&&e.stop(...p)),onTouchstartPassive:n[4]||(n[4]=(...p)=>e.start&&e.start(...p)),onTouchendPassive:n[5]||(n[5]=(...p)=>e.stop&&e.stop(...p)),onTouchcancelPassive:n[6]||(n[6]=(...p)=>e.stop&&e.stop(...p)),class:Ie({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(k(),se($e(e.unref(e.comp)),{key:0})):j("",!0),a(c,{mark:e.unref(e.mark)},null,8,["mark"]),a(d,{id:e.id},null,8,["id"])],38)):j("",!0)}var ur=ge(Md,[["render",xd],["__scopeId","data-v-211328c0"]]);function at(e,{displayName:n="points",singularName:i=n,precision:s=0,small:r=void 0}={}){const l=He(e)?e:Me(e);if(l.displayName=n,l.singularName=i,l.precision=s,l.small=r,!He(e)){const c=l[nn];c.displayName=n,c.precision=s,c.small=r}return l}function hs(e){const n=Me(e.value);return gt(e,i=>{Ji.value||o.gt(i,n.value)&&(n.value=i)}),n}function Td(e){const n=Me(e.value);return gt(e,(i,s)=>{Ji.value||o.gt(i,s)&&(n.value=o.add(n.value,o.sub(i,s)))}),n}new o("10^^8");new o("1e100");function Ln(e,n){const i=n!=null?n:e.value;return e.small&&o.lt(i,.98)?Rn(i,void 0,e.small):o.eq(e.precision,0)?Tn(e.small?i:o.floor(i)):Rn(i,e.precision,e.small)}function K(e){return Xe(n=>{var s;const i=e.call(n,n);return i.partialDisplay=r=>a("span",{style:t(i.requirementMet)?"":"color: var(--danger)"},[Ln(i.resource,i.cost instanceof w?sn(i.cost,r!=null?r:1,t(i.cumulativeCost),t(i.directSum)):t(i.cost))," ",i.resource.displayName]),i.display=r=>a("div",null,[t(i.requiresPay)?"Costs: ":"Requires: ",Ln(i.resource,i.cost instanceof w?sn(i.cost,r!=null?r:1,t(i.cumulativeCost),t(i.directSum)):t(i.cost))," ",i.resource.displayName]),Q(i,"visibility"),Ge(i,"visibility",De.Visible),Q(i,"cost"),Q(i,"requiresPay"),Ge(i,"requiresPay",!0),Q(i,"cumulativeCost"),Ge(i,"cumulativeCost",!0),Q(i,"maxBulkAmount"),Ge(i,"maxBulkAmount",1),Q(i,"directSum"),Ge(i,"pay",function(r){const l=i.cost instanceof w?sn(i.cost,r!=null?r:1,t(i.cumulativeCost),t(i.directSum)):t(i.cost);i.resource.value=o.sub(i.resource.value,l).max(0)}),i.canMaximize=v(()=>{var d;if(!(i.cost instanceof w))return!1;const r=t(i.maxBulkAmount);if(o.lte(r,1))return!1;const l=t(i.cumulativeCost),c=(d=t(i.directSum))!=null?d:l?10:0;return o.lte(r,c)?!0:!(!i.cost.isInvertible()||l===!0&&!i.cost.isIntegrable())}),i.cost instanceof w?i.requirementMet=Tl(i.cost,i.resource,(s=i.cumulativeCost)!=null?s:!0,i.directSum,i.maxBulkAmount):i.requirementMet=v(()=>o.gte(i.resource.value,t(i.cost))?1:0),i})}function vs(e){return Xe(()=>({requirementMet:v(()=>ye(e.visibility)),visibility:De.None,requiresPay:!1}))}function At(e,n){return Xe(()=>({requirementMet:Ke(e),partialDisplay:n==null?void 0:$(()=>Bt(n)),display:n==null?void 0:$(()=>a(g,null,[u("Req: "),Bt(n)])),visibility:n==null?De.None:De.Visible,requiresPay:!1}))}function Vt(e){if(on(e))return e.every(Vt);const n=t(e.requirementMet);return typeof n=="boolean"?n:o.gt(n,0)}function ui(e){if(on(e))return e.map(ui).reduce(o.min);const n=t(e.requirementMet);return typeof n=="boolean"?n?o.dInf:0:o.gt(n,1)&&t(e.canMaximize)!==!0?1:n}function Je(e,n=1){var i,s;if(on(e)&&(e=e.filter(r=>ye(r.visibility)),e.length===1&&(e=e[0])),on(e)){e=e.filter(c=>"partialDisplay"in c);const r=e.filter(c=>t(c.requiresPay)),l=e.filter(c=>!t(c.requiresPay));return a(g,null,[r.length>0?a("div",null,[u("Costs:")," ",Yi(r.map(c=>c.partialDisplay(n)),a(g,null,[u(", ")]))]):null,l.length>0?a("div",null,[u("Requires:")," ",Yi(l.map(c=>c.partialDisplay(n)),a(g,null,[u(", ")]))]):null])}return(s=(i=e.display)==null?void 0:i.call(e))!=null?s:a(g,null,null)}function ti(e,n=1){var i;on(e)?e.filter(s=>t(s.requiresPay)).forEach(s=>{var r;return(r=s.pay)==null?void 0:r.call(s,n)}):t(e.requiresPay)&&((i=e.pay)==null||i.call(e,n))}const Pd=Symbol("Repeatable");function Qe(e,...n){const i=Me(0),s=n.reduce((r,l)=>{var c;return Object.assign(r,(c=l.getPersistentData)==null?void 0:c.call(l))},{});return Xe(r=>{var h,N,y;const l=e.call(r,r);l.id=Gt("repeatable-"),l.type=Pd,l[pt]=ur;for(const q of n)(h=q.preConstruct)==null||h.call(q,l);l.amount=i,l.amount[Xt]=(N=l.initialAmount)!=null?N:0,Object.assign(l,s);const c={requirementMet:v(()=>o.sub(t(l.limit),l.amount.value)),requiresPay:!1,visibility:De.None,canMaximize:!0},d=vs(l);on(l.requirements)?(l.requirements.unshift(d),l.requirements.push(c)):l.requirements=[d,l.requirements,c],l.maxed=v(()=>o.gte(l.amount.value,t(l.limit))),Q(l,"classes");const m=l.classes;l.classes=v(()=>{const q=t(m)||{};return l.maxed.value&&(q.bought=!0),q}),l.amountToIncrease=v(()=>o.clampMin(ui(l.requirements),1)),l.canClick=v(()=>Vt(l.requirements));const p=l.onClick;l.onClick=function(q){var P;const T=l;if(!t(T.canClick))return;const M=(P=t(l.amountToIncrease))!=null?P:1;ti(l.requirements,M),T.amount.value=o.add(T.amount.value,M),p==null||p(q)},Q(l,"display");const b=l.display;l.display=$(()=>{var T,M,P;const q=t(b);if(Nt(q)){const A=pe(q);return a(A,null,null)}if(q!=null){const A=l,W=pe((T=q.title)!=null?T:"","h3"),de=pe((M=q.description)!=null?M:""),X=pe((P=q.effect)!=null?P:"");return a("span",null,[q.title==null?null:a("div",null,[a(W,null,null)]),q.description==null?null:a(de,null,null),q.showAmount===!1?null:a("div",null,[a("br",null,null),a(g,null,[u("Amount: "),Tn(A.amount.value)]),o.isFinite(t(A.limit))?a(g,null,[u(" / "),Tn(t(A.limit))]):void 0]),q.effect==null?null:a("div",null,[a("br",null,null),u("Currently: "),a(X,null,null)]),A.maxed.value?null:a("div",null,[a("br",null,null),Je(A.requirements,t(l.amountToIncrease))])])}return""}),Q(l,"visibility"),Ge(l,"visibility",De.Visible),Q(l,"limit"),Ge(l,"limit",o.dInf),Q(l,"style"),Q(l,"mark"),Q(l,"small");for(const q of n)(y=q.postConstruct)==null||y.call(q,l);const f=n.reduce((q,T)=>{var M;return Object.assign(q,(M=T.getGatheredProps)==null?void 0:M.call(T,l))},{});return l[ft]=function(){const{display:q,visibility:T,style:M,classes:P,onClick:A,canClick:W,small:de,mark:X,id:U}=this;return{display:q,visibility:T,style:t(M),classes:P,onClick:A,canClick:W,small:de,mark:X,id:U,...f}},l})}var Et=oe({__name:"NamedResource",props:{resource:null,override:null,amountTag:null,nameTag:null},setup(e){const n=e,i=v(()=>Ln(n.resource,n.override)),s=v(()=>{var l;const r=t((l=n.override)!=null?l:n.resource);return o.gt(r,1.5)||o.lt(r,.5)?n.resource.displayName:o.eq(t(i),1)?n.resource.singularName:n.resource.displayName});return(r,l)=>{var c,d;return k(),x(g,null,[(k(),se($e((c=e.amountTag)!=null?c:"span"),null,{default:ae(()=>[u(Z(t(i)),1)]),_:1})),u(),(k(),se($e((d=e.nameTag)!=null?d:"span"),null,{default:ae(()=>[u(Z(t(s)),1)]),_:1}))],64)}}});const Vn=oe({__name:"Resource",props:{resource:null,color:null,tag:null,override:null,includeName:{type:Boolean}},setup(e){const n=e,i=v(()=>Ln(n.resource,n.override)),s=v(()=>{var l;const r=t((l=n.override)!=null?l:n.resource);return o.gt(r,1.5)||o.lt(r,.5)?n.resource.displayName:o.eq(t(i),1)?n.resource.singularName:n.resource.displayName});return(r,l)=>{var c;return k(),x(g,null,[(k(),se($e((c=e.tag)!=null?c:"h2"),{style:Re({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},{default:ae(()=>[u(Z(t(i)),1)]),_:1},8,["style"])),e.includeName?(k(),x(g,{key:0},[u(Z(" "+t(s)),1)],64)):j("",!0)],64)}}});function Hn(e,n){return Q(n,"display"),Q(n,"classes"),Q(n,"style"),Q(n,"direction"),Ge(n,"direction",Ae.Up),Q(n,"xoffset"),Q(n,"yoffset"),n.pinnable&&(n.pinned=Me(!1,!1)),un(()=>{const i=e[pt];e[pt]=je;const s=e[ft].bind(e);e[ft]=function(){const{display:l,classes:c,style:d,direction:m,xoffset:p,yoffset:b,pinned:f}=this;return{element:{[pt]:i,[ft]:s},display:l,classes:c,style:t(d),direction:m,xoffset:p,yoffset:b,pinned:f}}.bind(n)}),n}function Ad(e){return Xe(n=>{const{addend:i,description:s,enabled:r,smallerIsBetter:l}=e.call(n,n),c=Ke(i),d=Ke(s),m=r==null?void 0:Ke(r);return{apply:p=>o.add(p,t(c)),invert:p=>o.sub(p,t(c)),getFormula:p=>w.add(p,c),enabled:m,description:s==null?void 0:$(()=>a("div",{class:"modifier-container"},[t(d)!=null?a("span",{class:"modifier-description"},[Bt(t(d))]):null,a("span",{class:"modifier-amount",style:(l===!0?o.gt(t(c),0):o.lt(t(c),0))?"color: var(--danger)":""},[o.gte(t(c),0)?"+":"",Dn(t(c))])]))}})}function H(e){return Xe(n=>{const{multiplier:i,description:s,enabled:r,smallerIsBetter:l}=e.call(n,n),c=Ke(i),d=Ke(s),m=r==null?void 0:Ke(r);return{apply:p=>o.times(p,t(c)),invert:p=>o.div(p,t(c)),getFormula:p=>w.times(p,c),enabled:m,description:s==null?void 0:$(()=>a("div",{class:"modifier-container"},[t(d)!=null?a("span",{class:"modifier-description"},[Bt(t(d))]):null,a("span",{class:"modifier-amount",style:(l===!0?o.gt(t(c),1):o.lt(t(c),1))?"color: var(--danger)":""},[u("\xD7"),Dn(t(c))])]))}})}function Wn(e){return Xe(n=>{const{exponent:i,description:s,enabled:r,supportLowNumbers:l,smallerIsBetter:c}=e.call(n,n),d=Ke(i),m=Ke(s),p=r==null?void 0:Ke(r);return{apply:b=>{let f=b;return l&&(f=o.add(f,1)),f=o.pow(f,t(d)),l&&(f=o.sub(f,1)),f},invert:b=>{let f=b;return l&&(f=o.add(f,1)),f=o.root(f,t(d)),l&&(f=o.sub(f,1)),f},getFormula:b=>l?w.add(b,1).pow(d).sub(1):w.pow(b,d),enabled:p,description:s==null?void 0:$(()=>a("div",{class:"modifier-container"},[t(m)!=null?a("span",{class:"modifier-description"},[Bt(t(m)),l?" (+1 effective)":null]):null,a("span",{class:"modifier-amount",style:(c===!0?o.gt(t(d),1):o.lt(t(d),1))?"color: var(--danger)":""},[u("^"),Dn(t(d))])]))}})}function dt(e){return Xe(()=>{const n=e();return{apply:i=>n.filter(s=>t(s.enabled)!==!1).reduce((s,r)=>r.apply(s),i),invert:n.every(i=>i.invert!=null)?i=>n.filter(s=>t(s.enabled)!==!1).reduceRight((s,r)=>r.invert(s),i):void 0,getFormula:n.every(i=>i.getFormula!=null)?i=>n.reduce((s,r)=>r.enabled==null||r.enabled===!0?r.getFormula(s):w.if(s,r.enabled,l=>r.getFormula(l)),i):void 0,enabled:n.some(i=>i.enabled!=null)?v(()=>n.filter(i=>t(i.enabled)!==!1).length>0):void 0,description:n.some(i=>i.description!=null)?$(()=>a(g,null,[n.filter(i=>t(i.enabled)!==!1).map(i=>t(i.description)).filter(i=>i).map(Bt)])):void 0}})}const Bd=Symbol("Clickable");function ct(e,...n){const i=n.reduce((s,r)=>{var l;return Object.assign(s,(l=r.getPersistentData)==null?void 0:l.call(r))},{});return Xe(s=>{var c,d,m;const r=(c=e==null?void 0:e.call(s,s))!=null?c:{};r.id=Gt("clickable-"),r.type=Bd,r[pt]=ur;for(const p of n)(d=p.preConstruct)==null||d.call(p,r);if(Object.assign(r,i),Q(r,"visibility"),Ge(r,"visibility",De.Visible),Q(r,"canClick"),Ge(r,"canClick",!0),Q(r,"classes"),Q(r,"style"),Q(r,"mark"),Q(r,"display"),r.onClick){const p=r.onClick.bind(r);r.onClick=function(b){t(r.canClick)!==!1&&p(b)}}if(r.onHold){const p=r.onHold.bind(r);r.onHold=function(){t(r.canClick)!==!1&&p()}}for(const p of n)(m=p.postConstruct)==null||m.call(p,r);const l=n.reduce((p,b)=>{var f;return Object.assign(p,(f=b.getGatheredProps)==null?void 0:f.call(b,r))},{});return r[ft]=function(){const{display:p,visibility:b,style:f,classes:h,onClick:N,onHold:y,canClick:q,small:T,mark:M,id:P}=this;return{display:p,visibility:b,style:t(f),classes:h,onClick:N,onHold:y,canClick:q,small:T,mark:M,id:P,...l}},r})}const Fd=["x1","y1","x2","y2"],Ed=oe({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=e,i=ot(n),s=v(()=>{const c=i.startNode.value.rect,d=i.boundingRect.value,m=d?{x:c.x+c.width/2-d.x,y:c.y+c.height/2-d.y}:{x:0,y:0};return i.link.value.offsetStart&&(m.x+=i.link.value.offsetStart.x,m.y+=i.link.value.offsetStart.y),m}),r=v(()=>{const c=i.endNode.value.rect,d=i.boundingRect.value,m=d?{x:c.x+c.width/2-d.x,y:c.y+c.height/2-d.y}:{x:0,y:0};return i.link.value.offsetEnd&&(m.x+=i.link.value.offsetEnd.x,m.y+=i.link.value.offsetEnd.y),m}),l=v(()=>Xl(n.link));return(c,d)=>(k(),x("line",Rt({"stroke-width":"15px",stroke:"white"},t(l),{x1:t(s).x,y1:t(s).y,x2:t(r).x,y2:t(r).y}),null,16,Fd))}});const Od=oe({__name:"Links",props:{links:null},setup(e){var m;const i=cn(e,"links"),s=le(null),r=Ii(us,le({})),l=Ii(cs,le(void 0)),c=le((m=s.value)==null?void 0:m.getBoundingClientRect());gt(l,()=>{var p;return c.value=(p=s.value)==null?void 0:p.getBoundingClientRect()}),ci(()=>{var p;return c.value=(p=s.value)==null?void 0:p.getBoundingClientRect()});const d=v(()=>{var b,f;const p=r.value;return(f=(b=i.value)==null?void 0:b.filter(h=>{var N,y;return((N=p[h.startNode.id])==null?void 0:N.rect)&&((y=p[h.startNode.id])==null?void 0:y.rect)}))!=null?f:[]});return(p,b)=>(k(),x(g,null,[t(d)?(k(),x("svg",kr(Rt({key:0},p.$attrs)),[(k(!0),x(g,null,Pe(t(d),(f,h)=>(k(),se(Ed,{key:h,link:f,boundingRect:c.value,startNode:t(r)[f.startNode.id],endNode:t(r)[f.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):j("",!0),_("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});var cr=ge(Od,[["__scopeId","data-v-063f6d6b"]]);oe({props:{nodes:{type:re(Array),required:!0},leftSideNodes:re(Array),rightSideNodes:re(Array),branches:re(Array)},components:{Links:cr},setup(e){const{nodes:n,leftSideNodes:i,rightSideNodes:s}=ot(e),r=yt();qt(()=>{const d=Te(n);r.value=pe($(()=>a(g,null,[d.map(m=>a("span",{class:"row tree-row",style:"margin: 50px auto;"},[m.map(Bt)]))])))});const l=yt();qt(()=>{const d=Te(i);l.value=d?pe($(()=>a("span",{class:"left-side-nodes small"},[d.map(Bt)]))):""});const c=yt();return qt(()=>{const d=Te(s);c.value=d?pe($(()=>a("span",{class:"side-nodes small"},[d.map(Bt)]))):""}),{unref:t,nodesComp:r,leftNodesComp:l,rightNodesComp:c}}});oe({props:{display:re(Object,String,Function),visibility:{type:re(Number,Boolean),required:!0},style:re(String,Object,Array),classes:re(Object),onClick:Function,onHold:Function,color:re(String),glowColor:re(String),canClick:{type:re(Boolean),required:!0},mark:re(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:fi,Node:Cn},setup(e){const{onClick:n,onHold:i,display:s}=ot(e),r=di(s),{start:l,stop:c}=tr(n,i);return{start:l,stop:c,comp:r,unref:t,Visibility:De,isCoercableComponent:Nt,isVisible:ye,isHidden:Ut}}});function Rd(e){return ct(n=>{const i=e.call(n,n);Q(i,"showNextAt"),Ge(i,"showNextAt",!0),Ge(i,"minimumGain",1),i.resetDescription==null?i.resetDescription=v(()=>o.lt(i.conversion.gainResource.value,1e3)?"Reset for ":""):Q(i,"resetDescription"),i.display==null&&(i.display=$(()=>a("span",null,[t(i.resetDescription),a(Et,{resource:i.conversion.gainResource,override:o.max(t(i.conversion.actualGain),t(i.minimumGain)),amountTag:"b"},null),t(i.showNextAt)!=null?a("div",null,[a("br",null,null),t(i.conversion.buyMax)?"Next:":"Req:"," ",a(Et,{resource:i.conversion.baseResource,override:!t(i.conversion.buyMax)&&o.gte(t(i.conversion.actualGain),1)?t(i.conversion.currentAt):t(i.conversion.nextAt)},null)]):null]))),i.canClick==null&&(i.canClick=v(()=>o.gte(t(i.conversion.actualGain),t(i.minimumGain))));const s=i.onClick;return i.onClick=function(r){t(i.canClick)!==!1&&(i.conversion.convert(),i.resetTime&&(i.resetTime.value=i.resetTime[Xt]),s==null||s(r))},i})}function Dd(e){const n=[],i={};let s=!1;function r(){return s||(n.push(...e()),i.base=n.map(d=>Ke(d.base)),i.baseText=n.map(d=>Ke(d.baseText)),i.visible=n.map(d=>Ke(d.visible)),i.title=n.map(d=>Ke(d.title)),i.subtitle=n.map(d=>Ke(d.subtitle)),s=!0),n}const l=Me({},!1);return[$(()=>{const d=r();let m=!0;const p=d.map((b,f)=>{var M,P,A;if(t(i.visible[f])===!1)return null;const h=a("h3",{onClick:()=>l.value[f]=!l.value[f],style:"cursor: pointer"},[a("span",{class:"modifier-toggle"+(t(l.value[f])?" collapsed":"")},[u("\u25BC")]),t(i.title[f]),t(i.subtitle[f])!=null?a("span",{class:"subtitle"},[u(" ("),t(i.subtitle[f]),u(")")]):null]),N=t(l.value[f])?null:a(g,null,[a("div",{class:"modifier-container"},[a("span",{class:"modifier-description"},[Bt((M=t(i.baseText[f]))!=null?M:"Base")]),a("span",{class:"modifier-amount"},[Dn((P=t(i.base[f]))!=null?P:1),b.unit])]),b.modifier.description==null?null:Bt(t(b.modifier.description))]),y=!m;m=!1;const q=(A=t(i.base[f]))!=null?A:1,T=b.modifier.apply(q);return a(g,null,[y?a("br",null,null):null,a("div",{style:{"--unit":we.alignUnits&&b.unit!=null?"'"+b.unit+"'":""}},[h,a("br",null,null),N,a("hr",null,null),a("div",{class:"modifier-container"},[a("span",{class:"modifier-description"},[u("Total")]),a("span",{class:"modifier-amount",style:(b.smallerIsBetter===!0?o.gt(T,q!=null?q:1):o.lt(T,q!=null?q:1))?"color: var(--danger)":""},[Dn(T),b.unit])])])])});return a(g,null,[p])}),l]}function _t(e){if(e==null||typeof e!="object"||e instanceof o||e instanceof w||Yt in e&&e[Yt]===!0)return;if(Xt in e)return Me(e[Xt]);if(He(e))return;const n={};for(const[i,s]of Object.entries(e)){if(["requirements","tabs","prerequisites"].includes(i))continue;let r=_t(s);r!==void 0&&(n[i]=r)}if(Object.keys(n).length!==0)return n}function Xi(e,n){if(!(e==null||n==null)&&!(typeof e!="object"||typeof n!="object")&&!(e instanceof o||n instanceof o)&&!(e instanceof w||n instanceof w)&&!(Yt in e&&e[Yt]===!0)&&!(Yt in n&&n[Yt]===!0)){if(Xt in n){const i=e,s=n,r=i.value;i.value=s.value,s.value=r;return}if(!He(e)&&!He(n))for(const i in n)Xi(e[i],n[i])}}function Tt(e,n,i){const[s,r]=Dd(n);Bl(r);const l=le(!1);return $(()=>a(g,null,[a("button",{class:"button",style:{display:"inline-block",fontSize:i!=null?i:"20px"},onClick:()=>l.value=!0},[u("\u{1F6C8}")]),a(Zt,{modelValue:l.value,"onUpdate:modelValue":c=>l.value=c},{header:()=>a("h2",null,[e]),body:s})]))}var Ld=oe({props:{visibility:{type:re(Number,Boolean),required:!0},display:re(Object,String,Function),earned:{type:re(Boolean),required:!0},requirements:re(Object,Array),image:re(String),style:re(String,Object,Array),classes:re(Object),mark:re(Boolean,String),small:re(Boolean),id:{type:String,required:!0}},components:{Node:Cn,MarkNode:fi},setup(e){const{display:n,requirements:i,earned:s}=ot(e),r=yt("");return qt(()=>{const l=Te(n);if(l==null){r.value="";return}if(Nt(l)){r.value=pe(l);return}const c=pe(l.requirement?l.requirement:$(()=>{var p;return Je((p=Te(i))!=null?p:[])}),"h3"),d=pe(l.effect||"","b"),m=Te(s)?pe(l.optionsDisplay||"","span"):"";r.value=pe($(()=>a("span",null,[a(c,null,null),l.effect!=null?a("div",null,[a(d,null,null)]):null,l.optionsDisplay!=null?a("div",{class:"equal-spaced"},[a(m,null,null)]):null])))}),{comp:r,unref:t,Visibility:De,isVisible:ye,isHidden:Ut}}});function Vd(e,n,i,s,r,l){var m;const c=jt("MarkNode"),d=jt("Node");return e.isVisible(e.visibility)?(k(),x("div",{key:0,style:Re([{visibility:e.isHidden(e.visibility)?"hidden":void 0,backgroundImage:e.earned&&e.image&&`url(${e.image})`||""},(m=e.unref(e.style))!=null?m:[]]),class:Ie({feature:!0,achievement:!0,locked:!e.unref(e.earned),done:e.unref(e.earned),small:e.unref(e.small),...e.unref(e.classes)})},[e.comp?(k(),se($e(e.comp),{key:0})):j("",!0),a(c,{mark:e.unref(e.mark)},null,8,["mark"]),a(d,{id:e.id},null,8,["id"])],6)):j("",!0)}var jd=ge(Ld,[["render",Vd],["__scopeId","data-v-78143a58"]]);const Ud=Ds(),Gd=Symbol("Achievement");function kt(e,...n){const i=Me(!1,!1),s=n.reduce((r,l)=>{var c;return Object.assign(r,(c=l.getPersistentData)==null?void 0:c.call(l))},{});return Xe(r=>{var d,m,p;const l=(d=e==null?void 0:e.call(r,r))!=null?d:{};l.id=Gt("achievement-"),l.type=Gd,l[pt]=jd;for(const b of n)(m=b.preConstruct)==null||m.call(b,l);l.earned=i,l.complete=function(){var f,h;if(i.value)return;i.value=!0;const b=l;if((f=b.onComplete)==null||f.call(b),b.display!=null&&t(b.showPopups)===!0){const N=t(b.display);let y;Nt(N)?y=pe(N):N.requirement!=null?y=pe(N.requirement):y=Je((h=b.requirements)!=null?h:[]),Ud.info(a("div",null,[a("h3",null,[u("Achievement earned!")]),a("div",null,[a(y,null,null)])]))}},Object.assign(l,s),Q(l,"visibility"),Ge(l,"visibility",De.Visible),Q(l,"display"),Q(l,"mark"),Q(l,"small"),Q(l,"image"),Q(l,"style"),Q(l,"classes"),Q(l,"showPopups"),Ge(l,"showPopups",!0);for(const b of n)(p=b.postConstruct)==null||p.call(b,l);const c=n.reduce((b,f)=>{var h;return Object.assign(b,(h=f.getGatheredProps)==null?void 0:h.call(f,l))},{});if(l[ft]=function(){const{visibility:b,display:f,requirements:h,earned:N,image:y,style:q,classes:T,mark:M,small:P,id:A}=this;return{visibility:b,display:f,requirements:h,earned:N,image:y,style:t(q),classes:T,mark:M,small:P,id:A,...c}},l.requirements){const b=l,f=[vs(b),At(()=>!b.earned.value),...on(l.requirements)?l.requirements:[l.requirements]];qt(()=>{we.active===ve.id&&Vt(f)&&b.complete()})}return l})}function zd(e,...n){return Xe(i=>{var r,l;const s=e.call(i,i);for(const c of n)(r=c.preConstruct)==null||r.call(c,s);s.formula=s.formula(w.variable(s.baseResource)),s.currentGain==null&&(s.currentGain=v(()=>{let c=o.floor(s.formula.evaluate(s.baseResource.value)).max(0);return t(s.buyMax)===!1&&(c=c.min(1)),c})),s.actualGain==null&&(s.actualGain=s.currentGain),s.currentAt==null&&(s.currentAt=v(()=>s.formula.invert(o.floor(t(s.currentGain))))),s.nextAt==null&&(s.nextAt=v(()=>s.formula.invert(o.floor(t(s.currentGain)).add(1)))),s.convert==null&&(s.convert=function(){var d;const c=t(s.currentGain);s.gainResource.value=o.add(s.gainResource.value,c),s.spend(c),(d=s.onConvert)==null||d.call(s,c)}),s.spend==null&&(s.spend=function(){s.baseResource.value=0}),Q(s,"currentGain"),Q(s,"actualGain"),Q(s,"currentAt"),Q(s,"nextAt"),Q(s,"buyMax"),Ge(s,"buyMax",!0);for(const c of n)(l=c.postConstruct)==null||l.call(c,s);return s})}function Hd(e){return zd(e)}const Ce={postConstruct(e){Q(e,"effect"),Q(e,"nextEffect")}},Wd=Symbol("Reset");function ys(e){return Xe(n=>{const i=e.call(n,n);return i.id=Gt("reset-"),i.type=Wd,i.reset=function(){var r;const s=l=>{if(l!=null&&typeof l=="object"&&!(l instanceof o)&&!(l instanceof w)){if(Yt in l&&l[Yt]===!0)return;if(Xt in l){const c=l;c.value=c[Xt]}else!(l instanceof o)&&!He(l)&&Object.values(l).forEach(c=>s(c))}};t(i.thingsToReset).forEach(s),$t.emit("reset",i),(r=i.onReset)==null||r.call(i)},Q(i,"thingsToReset"),i})}const wi={};$t.on("removeLayer",e=>{var n;(n=wi[e.id])==null||n.call(wi),wi[e.id]=void 0});const Yd={class:"main-display"},Kd={key:0},Qd={key:1},Ai=oe({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,stickyStyle:null,effect:null,modal:null},setup(e){const i=ot(e),s=le(null),r=di(i.effect),l=v(()=>o.lt(i.resource.value,"1e1000"));return(c,d)=>(k(),se(ar,{style:Re(e.stickyStyle)},{default:ae(()=>{var m,p,b,f;return[_("div",{class:Ie(["main-display-container",(m=e.classes)!=null?m:{}]),style:Re([{height:`${((b=(p=s.value)==null?void 0:p.$el.clientHeight)!=null?b:0)+50}px`},(f=e.style)!=null?f:{}])},[_("div",Yd,[t(l)?(k(),x("span",Kd,"You have ")):j("",!0),a(Vn,{resource:e.resource,color:e.color||"var(--feature-background)","include-name":!0},null,8,["resource","color"]),t(r)?(k(),x("span",Qd,[u(", "),(k(),se($e(t(r)),{ref_key:"effectRef",ref:s},null,512))])):j("",!0),e.modal?(k(),se($e(t(ie)(e.modal)),{key:2})):j("",!0)])],6)]}),_:1},8,["style"]))}});var Xd=oe({props:{display:{type:re(String,Object,Function),required:!0},visibility:{type:re(Number,Boolean),required:!0},style:re(String,Object,Array),classes:re(Object),requirements:{type:Object,required:!0},canPurchase:{type:re(Boolean),required:!0},bought:{type:re(Boolean),required:!0},mark:re(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Cn,MarkNode:fi},setup(e){const{display:n,requirements:i,bought:s}=ot(e),r=yt("");return qt(()=>{const l=Te(n);if(l==null){r.value="";return}if(Nt(l)){r.value=pe(l);return}const c=pe(l.title||"","h3"),d=pe(l.description,"div"),m=pe(l.effect||"");r.value=pe($(()=>a("span",null,[l.title!=null?a("div",null,[a(c,null,null)]):null,a(d,null,null),l.effect!=null?a("div",null,[u("Currently: "),a(m,null,null)]):null,s.value?null:a(g,null,[a("br",null,null),Je(i.value)])])))}),{component:r,unref:t,Visibility:De,isVisible:ye,isHidden:Ut}}});const Zd=["disabled"];function Jd(e,n,i,s,r,l){var m;const c=jt("MarkNode"),d=jt("Node");return e.isVisible(e.visibility)?(k(),x("button",{key:0,style:Re([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(m=e.unref(e.style))!=null?m:{}]),onClick:n[0]||(n[0]=(...p)=>e.purchase&&e.purchase(...p)),class:Ie({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(k(),se($e(e.unref(e.component)),{key:0})):j("",!0),a(c,{mark:e.unref(e.mark)},null,8,["mark"]),a(d,{id:e.id},null,8,["id"])],14,Zd)):j("",!0)}var em=ge(Xd,[["render",Jd],["__scopeId","data-v-67ed4380"]]);const tm=Symbol("Upgrade");function be(e,...n){const i=Me(!1,!1),s=n.reduce((r,l)=>{var c;return Object.assign(r,(c=l.getPersistentData)==null?void 0:c.call(l))},{});return Xe(r=>{var m,p;const l=e.call(r,r);l.id=Gt("upgrade-"),l.type=tm,l[pt]=em;for(const b of n)(m=b.preConstruct)==null||m.call(b,l);l.bought=i,Object.assign(l,s),l.canPurchase=v(()=>!i.value&&Vt(l.requirements)),l.purchase=function(){var f;const b=l;!t(b.canPurchase)||(ti(l.requirements),i.value=!0,(f=b.onPurchase)==null||f.call(b))};const c=vs(l);on(l.requirements)?l.requirements.unshift(c):l.requirements=[c,l.requirements],Q(l,"visibility"),Ge(l,"visibility",De.Visible),Q(l,"classes"),Q(l,"style"),Q(l,"display"),Q(l,"mark");for(const b of n)(p=b.postConstruct)==null||p.call(b,l);const d=n.reduce((b,f)=>{var h;return Object.assign(b,(h=f.getGatheredProps)==null?void 0:h.call(f,l))},{});return l[ft]=function(){const{display:b,visibility:f,style:h,classes:N,requirements:y,canPurchase:q,bought:T,mark:M,id:P,purchase:A}=this;return{display:b,visibility:f,style:t(h),classes:N,requirements:y,canPurchase:q,bought:T,mark:M,id:P,purchase:A,...d}},l})}function Oe(e,n=1,i=!1){if(!("effect"in e))throw new TypeError(`Upgrade ${e.id} does not have an effect`);return i||t(e.bought)?t(e.effect):n}const nm=oe({props:{radius:{type:re(Number),required:!0},width:{type:re(Number),required:!0},distance:{type:re(Number),required:!0},top:{type:re(Number),required:!0},right:{type:re(Array),required:!0},bottom:{type:re(Number),required:!0},left:{type:re(Array),required:!0}},setup(e){const{radius:n,width:i,distance:s,top:r,right:l,bottom:c,left:d}=ot(e),m={global:{margin:5,border:2},upgrade:{width:250,height:125},line:{x:8,y:32,radius:v(()=>t(y)+Te(i))}},p={left:v(()=>Te(d).filter(X=>ye(X.visibility)).length),right:v(()=>Te(l).filter(X=>ye(X.visibility)).length)},b={top:v(()=>Te(r)),right:v(()=>Te(l).length),bottom:v(()=>Te(c)),left:v(()=>Te(d).length)},f=v(()=>Object.values(b).map(X=>t(X)).reduce((X,U)=>X+U)),h=v(()=>2*Math.PI/t(f)),N=v(()=>Te(n)),y=v(()=>Te(n)+Te(i)),q=v(()=>t(N)*t(h)-(m.global.margin+m.global.border)),T=v(()=>t(y)*t(h)-(m.global.margin+m.global.border)),M=v(()=>t(q)/t(N)),P=v(()=>t(T)/t(y)),A={left:Te(d).map((X,U,Be)=>({base:{index:(()=>U===0?v(()=>0):v(()=>t(A.left[U-1].base.index)+(ye(Be[U-1].visibility)?1:0)))(),angle:v(()=>Math.PI-t(h)*(t(A.left[U].base.index)-t(p.left)/2+.5))},ring:{points:v(()=>{let E=t(A.left[U].base.angle),G=[E-t(M)/2,t(N)],ee=[E+t(M)/2,t(N)],I=[E-t(P)/2,t(y)],R=[E+t(P)/2,t(y)];return[G,ee,R,I].map(([rt,It])=>[Math.cos(rt)*It,Math.sin(rt)*It])}),bounds:v(()=>{let E=t(A.left[U].ring.points),G={minX:Math.min(...E.map(ee=>ee[0])),maxX:Math.max(...E.map(ee=>ee[0])),minY:Math.min(...E.map(ee=>ee[1])),maxY:Math.max(...E.map(ee=>ee[1]))};return Math.sign(G.minY)!==Math.sign(G.maxY)&&(G.minX=Math.min(-t(y),G.minX)),G}),size:v(()=>{let E=t(A.left[U].ring.bounds);return{width:E.maxX-E.minX+m.global.border,height:E.maxY-E.minY+m.global.border}}),position:v(()=>{let E=t(A.left[U].ring.bounds);return{top:`${E.minY-m.global.border/2}px`,left:`${E.minX-m.global.border/2}px`}}),path:v(()=>{let E=t(N),G=t(y),ee=t(A.left[U].ring.points),I=t(A.left[U].ring.bounds),R=ee.map(rt=>[rt[0]-I.minX+m.global.border/2,rt[1]-I.minY+m.global.border/2]);return[`M ${R[0][0]} ${R[0][1]}`,`A ${E} ${E} 0 0 1 ${R[1][0]} ${R[1][1]}`,`L ${R[2][0]} ${R[2][1]}`,`A ${G} ${G} 0 0 0 ${R[3][0]} ${R[3][1]}`,"Z"].join(" ")})},upgrade:{upgrade:X,render:ie(X),id:X.id,color:v(()=>t(X.bought)?"var(--bought)":t(X.canPurchase)?"var(--feature-background)":"var(--locked)"),distance:v(()=>{let E=t(A.left[U].base.angle);if(E===0)return t(y);let G=(Math.PI-E)/t(h);return(m.upgrade.height+m.global.margin)*G/Math.sin(E)}),offset:v(()=>{let E=t(A.left[U].base.angle),G=t(A.left[U].upgrade.distance),ee=Math.cos(E)*G,I=Math.cos(E)*t(y);return{x:Math.min(ee-I,-Te(s))+I-m.upgrade.width/2,y:Math.sin(E)*G}}),position:v(()=>{let E=t(A.left[U].upgrade.offset);return{top:`${E.y-m.upgrade.height/2}px`,left:`${E.x-m.upgrade.width/2}px`}})},line:{height:v(()=>{let E=t(A.left[U].base.angle),G=(Math.PI-E)/t(h);return(m.upgrade.height+m.global.margin)*G+m.line.y-m.upgrade.height/2}),angle:v(()=>{let E=t(m.line.radius),G=t(A.left[U].line.height),ee=Math.PI-Math.asin(G/E);return Math.min(t(A.left[U].base.angle)+t(P)/2,ee)}),radius:v(()=>{let E=t(A.left[U].line.height),G=t(A.left[U].line.angle);return E/Math.sin(G)}),points:v(()=>{let E=t(A.left[U].line.angle),G=t(A.left[U].line.height),ee=t(A.left[U].line.radius);return[[t(A.left[U].upgrade.offset).x-m.upgrade.width/2+m.line.x,G],[Math.cos(E)*ee,G],[Math.cos(E)*t(y),Math.sin(E)*t(y)]]}),bounds:v(()=>{let E=t(A.left[U].line.points);return{minX:Math.min(...E.map(G=>G[0])),maxX:Math.max(...E.map(G=>G[0])),minY:Math.min(...E.map(G=>G[1])),maxY:Math.max(...E.map(G=>G[1]))}}),size:v(()=>{let E=t(A.left[U].line.bounds);return{width:E.maxX-E.minX+m.global.border,height:E.maxY-E.minY+m.global.border}}),position:v(()=>{let E=t(A.left[U].line.bounds);return{top:`${E.minY-m.global.border/2}px`,left:`${E.minX-m.global.border/2}px`}}),path:v(()=>{let E=t(A.left[U].line.points),G=t(A.left[U].line.bounds),ee=E.map(I=>[I[0]-G.minX+m.global.border/2,I[1]-G.minY+m.global.border/2]);return[`M ${ee[0][0]} ${ee[0][1]}`,`L ${ee[1][0]} ${ee[1][1]}`,`L ${ee[2][0]} ${ee[2][1]}`].join(" ")})}})),right:Te(l).map((X,U,Be)=>({base:{index:(()=>U===0?v(()=>0):v(()=>t(A.right[U-1].base.index)+(ye(Be[U-1].visibility)?1:0)))(),angle:v(()=>t(h)*(t(A.right[U].base.index)-t(p.right)/2+.5))},ring:{points:v(()=>{let E=t(A.right[U].base.angle),G=[E-t(M)/2,t(N)],ee=[E+t(M)/2,t(N)],I=[E-t(P)/2,t(y)],R=[E+t(P)/2,t(y)];return[G,ee,R,I].map(([rt,It])=>[Math.cos(rt)*It,Math.sin(rt)*It])}),bounds:v(()=>{let E=t(A.right[U].ring.points),G={minX:Math.min(...E.map(ee=>ee[0])),maxX:Math.max(...E.map(ee=>ee[0])),minY:Math.min(...E.map(ee=>ee[1])),maxY:Math.max(...E.map(ee=>ee[1]))};return Math.sign(G.minY)!==Math.sign(G.maxY)&&(G.maxX=Math.max(t(y),G.maxX)),G}),size:v(()=>{let E=t(A.right[U].ring.bounds);return{width:E.maxX-E.minX+m.global.border,height:E.maxY-E.minY+m.global.border}}),position:v(()=>{let E=t(A.right[U].ring.bounds);return{top:`${E.minY-m.global.border/2}px`,left:`${E.minX-m.global.border/2}px`}}),path:v(()=>{let E=t(N),G=t(y),ee=t(A.right[U].ring.points),I=t(A.right[U].ring.bounds),R=ee.map(rt=>[rt[0]-I.minX+m.global.border/2,rt[1]-I.minY+m.global.border/2]);return[`M ${R[0][0]} ${R[0][1]}`,`A ${E} ${E} 0 0 1 ${R[1][0]} ${R[1][1]}`,`L ${R[2][0]} ${R[2][1]}`,`A ${G} ${G} 0 0 0 ${R[3][0]} ${R[3][1]}`,"Z"].join(" ")})},upgrade:{upgrade:X,render:ie(X),id:X.id,color:v(()=>t(X.bought)?"var(--bought)":t(X.canPurchase)?"var(--feature-background)":"var(--locked)"),distance:v(()=>{let E=t(A.right[U].base.angle);if(E===0)return t(y);let G=E/t(h);return(m.upgrade.height+m.global.margin)*G/Math.sin(E)}),offset:v(()=>{let E=t(A.right[U].base.angle),G=t(A.right[U].upgrade.distance),ee=Math.cos(E)*G,I=Math.cos(E)*t(y);return{x:Math.max(ee-I,Te(s))+I+m.upgrade.width/2,y:Math.sin(E)*G}}),position:v(()=>{let E=t(A.right[U].upgrade.offset);return{top:`${E.y-m.upgrade.height/2}px`,left:`${E.x-m.upgrade.width/2}px`}})},line:{height:v(()=>{let G=t(A.right[U].base.angle)/t(h);return(m.upgrade.height+m.global.margin)*G+m.line.y-m.upgrade.height/2}),angle:v(()=>{let E=t(m.line.radius),G=t(A.right[U].line.height),ee=Math.asin(G/E);return Math.max(t(A.right[U].base.angle)-t(P)/2,ee)}),radius:v(()=>{let E=t(A.right[U].line.height),G=t(A.right[U].line.angle);return E/Math.sin(G)}),points:v(()=>{let E=t(A.right[U].line.angle),G=t(A.right[U].line.height),ee=t(A.right[U].line.radius);return[[t(A.right[U].upgrade.offset).x+m.upgrade.width/2-m.line.x,G],[Math.cos(E)*ee,G],[Math.cos(E)*t(y),Math.sin(E)*t(y)]]}),bounds:v(()=>{let E=t(A.right[U].line.points);return{minX:Math.min(...E.map(G=>G[0])),maxX:Math.max(...E.map(G=>G[0])),minY:Math.min(...E.map(G=>G[1])),maxY:Math.max(...E.map(G=>G[1]))}}),size:v(()=>{let E=t(A.right[U].line.bounds);return{width:E.maxX-E.minX+m.global.border,height:E.maxY-E.minY+m.global.border}}),position:v(()=>{let E=t(A.right[U].line.bounds);return{top:`${E.minY-m.global.border/2}px`,left:`${E.minX-m.global.border/2}px`}}),path:v(()=>{let E=t(A.right[U].line.points),G=t(A.right[U].line.bounds),ee=E.map(I=>[I[0]-G.minX+m.global.border/2,I[1]-G.minY+m.global.border/2]);return[`M ${ee[0][0]} ${ee[0][1]}`,`L ${ee[1][0]} ${ee[1][1]}`,`L ${ee[2][0]} ${ee[2][1]}`].join(" ")})}}))};function W(X){var U,Be;((U=document.getElementById(`${X}-ring`))==null?void 0:U.children[1].children[1].children[0]).beginElement(),(Be=document.getElementById(`${X}-upgrade`))==null||Be.children[0].classList.add("hover")}function de(X){var U,Be;((U=document.getElementById(`${X}-ring`))==null?void 0:U.children[1].children[1].children[1]).beginElement(),(Be=document.getElementById(`${X}-upgrade`))==null||Be.children[0].classList.remove("hover")}return{render:ie,unref:t,isVisible:ye,onMouseEnter:W,onMouseLeave:de,upgradeData:A,values:m}}}),dr=e=>(lt("data-v-a3c06600"),e=e(),ut(),e),im=["width","height","id","onMouseenter","onMouseleave","onClick"],sm=["d","stroke","stroke-width"],rm=["id"],om=Sr('<feOffset dx="0" dy="0" data-v-a3c06600></feOffset><feGaussianBlur stdDeviation="0" result="offset-blur" data-v-a3c06600><animate attributeName="stdDeviation" restart="whenNotActive" fill="freeze" to="6" dur="0.5s" begin="indefinite" data-v-a3c06600></animate><animate attributeName="stdDeviation" restart="whenNotActive" fill="freeze" to="0" dur="0.5s" begin="indefinite" data-v-a3c06600></animate></feGaussianBlur><feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse" data-v-a3c06600></feComposite>',3),am=["flood-color"],lm=dr(()=>_("feComposite",{operator:"in",in:"color",in2:"inverse",result:"shadow"},null,-1)),um=dr(()=>_("feComposite",{operator:"over",in:"shadow",in2:"SourceGraphic"},null,-1)),cm=["width","height"],dm=["d","stroke","stroke-width"],mm=["id"];function pm(e,n,i,s,r,l){return k(),x("div",{class:"ring-container",style:Re({top:`${e.unref(e.radius)}px`})},[(k(!0),x(g,null,Pe(e.upgradeData,(c,d)=>(k(),x(g,null,[(k(!0),x(g,null,Pe(e.unref(c),m=>(k(),x(g,{key:m.upgrade.id},[e.isVisible(m.upgrade.upgrade.visibility)?(k(),x("svg",{key:0,width:e.unref(m.ring.size).width,height:e.unref(m.ring.size).height,style:Re({...e.unref(m.ring.position),"--shadow-id":`url(#${m.upgrade.id}-shadow)`}),class:"ring-segment",id:`${m.upgrade.id}-ring`,onMouseenter:p=>e.onMouseEnter(m.upgrade.id),onMouseleave:p=>e.onMouseLeave(m.upgrade.id),onClick:m.upgrade.upgrade.purchase},[_("path",{d:e.unref(m.ring.path),stroke:e.unref(m.upgrade.color),"stroke-width":`${e.values.global.border}px`,fill:"var(--background)",class:Ie({can:e.unref(m.upgrade.upgrade.canPurchase)})},null,10,sm),_("filter",{id:`${m.upgrade.id}-shadow`},[om,_("feFlood",{"flood-color":e.unref(m.upgrade.color),"flood-opacity":"1",result:"color"},null,8,am),lm,um],8,rm)],44,im)):j("",!0),e.isVisible(m.upgrade.upgrade.visibility)?(k(),x("svg",{key:1,width:e.unref(m.line.size).width,height:e.unref(m.line.size).height,style:Re(e.unref(m.line.position)),class:"ring-line"},[_("path",{d:e.unref(m.line.path),stroke:e.unref(m.upgrade.color),"stroke-width":`${e.values.global.border}px`,fill:"none"},null,8,dm)],12,cm)):j("",!0),_("div",{id:`${m.upgrade.id}-upgrade`},[(k(),se($e(m.upgrade.render),{style:Re({...e.unref(m.upgrade.position),width:e.values.upgrade.width,minHeight:e.values.upgrade.height}),class:Ie(["ring-upgrade",d]),onMouseenter:p=>e.onMouseEnter(m.upgrade.id),onMouseleave:p=>e.onMouseLeave(m.upgrade.id)},null,40,["style","class","onMouseenter","onMouseleave"]))],8,mm)],64))),128))],64))),256))],4)}var fm=ge(nm,[["render",pm],["__scopeId","data-v-a3c06600"]]);const gm={class:"timecube row"},bm=oe({__name:"TimecubeUpgrades",props:{upgrades:null},setup(e){const n=e,i=[];for(let b=0;b<t(n.upgrades).length;b+=5)i.push([]);let s=0;for(const b of t(n.upgrades))i[s].push(b),i[s].length>=5&&s++;const r=i.map(b=>b.map((f,h)=>h===0?!1:v(()=>ye(b[h-1].visibility)))),l=i.map(b=>b.map((f,h)=>h>=b.length-1?!1:v(()=>ye(b[h+1].visibility)))),c=i.map(b=>v(()=>b.filter(f=>ye(f.visibility)).length)),d=i.map((b,f)=>b.map(()=>v(()=>f===0?!1:t(c[f])<=t(c[f-1])))),m=i.map((b,f)=>b.map(()=>v(()=>f>=i.length-1?!1:t(c[f])<=t(c[f+1])))),p=i.map((b,f)=>b.map((h,N)=>v(()=>({upgrade:h,classes:{left:t(r[f][N]),right:t(l[f][N]),top:t(d[f][N]),bottom:t(m[f][N])}}))));return(b,f)=>(k(!0),x(g,null,Pe(t(p),h=>(k(),x("div",gm,[(k(!0),x(g,null,Pe(h,N=>(k(),se($e(t(ie)(t(N).upgrade)),{classes:t(N).classes},null,8,["classes"]))),256))]))),256))}});var hm=ge(bm,[["__scopeId","data-v-46085314"]]);const mr={postConstruct(e){e.amount===void 0&&console.error(`Decorated feature ${e.id} does not contain the required 'amount' property"`),Q(e,"bonusAmount"),e.totalAmount===void 0&&(e.totalAmount=v(()=>{var n;return o.add(t((n=e.amount)!=null?n:0),t(e.bonusAmount))}))}},vm=["disabled"],ym={key:0};var _m=oe({__name:"Research",props:{visibility:null,display:null,id:null,requirements:null,canResearch:null,isResearching:null,progress:null,progressPercentage:null,researched:null,research:null},setup(e){const n=e,i=yt("");qt(()=>{var p,b;const r=t(n.display);if(r==null){i.value="";return}if(Nt(r)){i.value=pe(r);return}const l=t(n.requirements),c=pe((p=r.title)!=null?p:"","h3"),d=pe(r.description),m=pe((b=r.effect)!=null?b:"");i.value=pe($(()=>a(g,null,[r.title?a("span",null,[a(c,null,null)]):null,a("span",null,[a(d,null,null)]),r.effect?a("span",null,[u("Currently: "),a(m,null,null)]):null,Je(l)])))});const s=v(()=>o.times(t(n.progressPercentage),1.1).minus(.05).times(100));return(r,l)=>(k(),x("button",{style:Re([{visibility:t(Ut)(e.visibility)?"hidden":void 0,"--fill-percent":`${t(D)(t(t(s)))}%`}]),onClick:l[0]||(l[0]=c=>e.research(!1)),class:Ie({research:!0,hidden:t(Ut)(e.visibility),locked:!t(e.canResearch),can:t(e.canResearch)&&!t(e.isResearching)&&!t(e.researched),queued:t(e.isResearching),done:t(e.researched)}),disabled:!t(e.canResearch)},[t(ye)(e.visibility)?t(t(i))?(k(),se($e(t(t(i))),{key:1})):j("",!0):(k(),x("div",ym,"???")),a(Cn,{id:e.id},null,8,["id"])],14,vm))}});var wm=ge(_m,[["__scopeId","data-v-63d4290c"]]);const km=Symbol("Research");function _s(e,...n){const i=Me(0),s=n.reduce((r,l)=>{var c;return Object.assign(r,(c=l.getPersistentData)==null?void 0:c.call(l))},{});return Xe(r=>{var p,b;const l=e.call(r,r);l.id=Gt("research-"),l.type=km,l[pt]=wm;for(const f of n)(p=f.preConstruct)==null||p.call(f,l);l.progress=i,Object.assign(l,s),Q(l,"canResearch");const c=l.canResearch;l.canResearch=v(()=>{var f,h;return c!=null&&!t(c)?!1:(h=(f=l.prerequisites)==null?void 0:f.every(N=>t(N.researched)))!=null?h:!0}),Q(l,"visibility");const d=l.visibility;l.visibility=v(()=>{var f,h,N;return t(l.researched)?De.Visible:(h=(f=l.prerequisites)==null?void 0:f.every(y=>t(y.researched)||t(y.canResearch)))==null||h?(N=t(d))!=null?N:De.Visible:De.None}),Q(l,"display"),Q(l,"isResearching"),l.progressPercentage=v(()=>{if(Array.isArray(l.requirements)){let f=o.dZero,h=o.dZero;for(const N of l.requirements){if(!("cost"in N&&"resource"in N))continue;const y=N.cost,q=N.resource;f=f.plus(y instanceof w?sn(y,1,!1,0):t(y)),h=h.plus(t(q))}return f.gte(0)?f.div(h):0}else{if(!("cost"in l.requirements&&"resource"in l.requirements))return 0;const f=l.requirements.cost,h=l.requirements.resource;return o.div(t(h),f instanceof w?sn(f,1,!1,0):t(f))}}),l.researched=v(()=>Vt(l.requirements));for(const f of n)(b=f.postConstruct)==null||b.call(f,l);const m=n.reduce((f,h)=>{var N;return Object.assign(f,(N=h.getGatheredProps)==null?void 0:N.call(h,l))},{});return l[ft]=function(){const{visibility:f,display:h,id:N,requirements:y,canResearch:q,research:T,isResearching:M,progress:P,progressPercentage:A,researched:W}=this;return{visibility:f,display:h,id:N,requirements:y,canResearch:q,research:T,isResearching:M,progress:P,progressPercentage:A,researched:W,...m}},l})}function vt(e,n){return t(e.researched)?t(e.effect):n}const Sm={class:"timesquare"},Cm={class:"timesquare-buy-buttons"};var Nm=oe({__name:"TimesquareComponent",props:{square:null,buy:null,buyNext:null,buyMax:null},setup(e){return(n,i)=>(k(),x("div",Sm,[(k(),se($e(t(ie)(e.square)))),_("div",Cm,[(k(),se($e(t(ie)(e.buy)))),(k(),se($e(t(ie)(e.buyNext)))),(k(),se($e(t(ie)(e.buyMax))))])]))}});var $m=ge(Nm,[["__scopeId","data-v-215cabd3"]]);const Im=Symbol("Timesquare");function An(e,n){return Xe(i=>{const{display:s,buyAmount:r,baseCost:l,resource:c,effect:d,nextEffect:m}=n.call(i,i),p=Ke(l),b=Ke(r),f=v(()=>o.dOne.plus(t(Y.upgrades.title.bought)?t(ze.scores[e]):0).reciprocate().times(t(p))),h=(()=>{const N={buyAmount:b},y={buyAmount:v(()=>{const T=t(i.square.amount),M=o.clampMin(T,1).log10().floor().pow10();return o.div(T,M).plus(1e-7).floor().plus(1).times(M).minus(T)})},q={buyAmount:v(()=>{const T=t(i.square.amount),M=o.add(T,1).times(T).div(2).times(t(f));return o.clampMin(t(c),1).plus(M).div(t(f)).times(8).plus(1).sqrt().minus(1).div(2).floor().minus(T)})};for(const T of[N,y,q])T.cost=K(()=>({cost(){const M=t(i.square.amount),P=o.add(M,t(T.buyAmount)),A=P.plus(1).times(P).div(2),W=o.add(M,1).times(M).div(2);return A.minus(W).times(t(f))},resource:c}));return{buy:N,buyNext:y,buyMax:q}})();return i.square=Qe(()=>({requirements:At(!1),display:s,effect:d,nextEffect:m}),Ce),i.buy=ct(()=>({canClick:()=>Vt(h.buy.cost),display:{title:"Buy",description:$(()=>a(g,null,[u("+"),D(t(h.buy.buyAmount)),u(": "),a(Et,{resource:c,override:t(h.buy.cost.cost)},null)]))},onClick(){const N=t(h.buy.buyAmount);ti(h.buy.cost),i.square.amount.value=o.add(t(i.square.amount),N)}})),i.buyNext=ct(()=>({canClick:()=>Vt(h.buyNext.cost),display:{title:"Buy Next",description:$(()=>a(g,null,[u("+"),D(t(h.buyNext.buyAmount)),u(": "),a(Et,{resource:c,override:t(h.buyNext.cost.cost)},null)]))},onClick(){const N=t(h.buyNext.buyAmount);ti(h.buyNext.cost),i.square.amount.value=o.add(t(i.square.amount),N)}})),i.buyMax=ct(()=>({canClick:()=>Vt(h.buyMax.cost),display:{title:"Buy Max",description:$(()=>a(g,null,[u("+"),D(t(h.buyMax.buyAmount)),u(": "),a(Et,{resource:c,override:t(h.buyMax.cost.cost)},null)]))},onClick(){const N=t(h.buyMax.buyAmount);ti(h.buyMax.cost),i.square.amount.value=o.add(t(i.square.amount),N)}})),i.hovering=(()=>{const N=Ni(i.buy),y=Ni(i.buyNext),q=Ni(i.buyMax);return{buy:N,buyNext:y,buyMax:q}})(),i.toBuy=v(()=>t(i.hovering.buyMax)?t(h.buyMax.buyAmount):t(i.hovering.buyNext)?t(h.buyNext.buyAmount):t(i.hovering.buy)?t(h.buy.buyAmount):0),i.type=Im,i[pt]=$m,i[ft]=function(){const{square:N,buy:y,buyNext:q,buyMax:T}=this;return{square:N,buy:y,buyNext:q,buyMax:T}},i})}const qm="timesquare",Zn=st(qm,function(){const e=Me(1),n=v(()=>o.clampMin(t(e),1).log10().floor().minus(1).pow10()),i=v(()=>o.gt(t(e),1)),s={minHeight:"30px",width:"50px"},r={timesTen:ct(()=>({display:"x10",onClick(){e.value=o.times(t(e),10)},style:s})),plusTen:ct(()=>({display:$(()=>a(g,null,[u("+"),te(t(n).times(10))])),onClick(){e.value=t(n).times(10).plus(t(e))},style:s})),plusOne:ct(()=>({canClick(){return o.gte(t(e),10)},display:$(()=>a(g,null,[u("+"),te(t(n))])),onClick(){e.value=t(n).plus(t(e))},style:s})),minusOne:ct(()=>({canClick:i,display:$(()=>a(g,null,[u("-"),te(t(n))])),onClick(){e.value=o.minus(t(e),t(n)).clampMin(1)},style:s})),minusTen:ct(()=>({canClick:i,display:$(()=>a(g,null,[u("-"),te(t(n).times(10))])),onClick(){e.value=o.minus(t(e),t(n).times(10)).clampMin(1)},style:s})),overTen:ct(()=>({canClick:i,display:"/10",onClick(){e.value=o.div(t(e),10).clampMin(1)},style:s}))},l={[z.FRONT]:An(z.FRONT,d=>({display:{title:$(()=>a(g,null,[u("Front")])),effect:$(()=>a(g,null,[u("+"),D(t(d.square.effect).minus(1).times(100)),u("%"),we.showNextValues&&o.gt(t(d.toBuy),0)?a(g,null,[u(" \u2192 +"),D(t(d.square.nextEffect).minus(1).times(100)),u("%")]):void 0,u(" "),Y.timecubes.displayName]))},effect(){return o.pow(t(d.square.amount),.45).times(Oe(Y.upgrades.turn)).plus(1)},nextEffect(){return o.plus(t(d.square.amount),t(d.toBuy)).pow(.45).times(Oe(Y.upgrades.turn)).plus(1)},resource:B(Y.timecubes),baseCost:1e6,buyAmount:e})),[z.RIGHT]:An(z.RIGHT,d=>({display:{title:$(()=>a(g,null,[u("Right")])),effect:$(()=>a(g,null,[u("+"),D(t(d.square.effect)),u("\xD7"),we.showNextValues&&o.gt(t(d.toBuy),0)?a(g,null,[u(" \u2192 +"),D(t(d.square.nextEffect))]):void 0,u(" Entropic Loop build speed")]))},effect(){return o.pow(t(d.square.amount),.7).plus(1)},nextEffect(){return o.plus(t(d.square.amount),t(d.toBuy)).pow(.7).plus(1)},resource:B(Y.timecubes),baseCost:1e6,buyAmount:e})),[z.TOP]:An(z.TOP,d=>({display:{title:$(()=>a(g,null,[u("Top")])),effect:$(()=>a(g,null,[u("+"),D(t(d.square.effect).minus(1).times(100)),u("%"),we.showNextValues&&o.gt(t(d.toBuy),0)?a(g,null,[u(" \u2192 +"),D(t(d.square.nextEffect).minus(1).times(100)),u("%")]):void 0,u(" increased Universe diameter")]))},effect(){return o.pow(t(d.square.amount),.15).dividedBy(15).plus(1)},nextEffect(){return o.plus(t(d.square.amount),t(d.toBuy)).pow(.15).dividedBy(15).plus(1)},resource:B(Y.timecubes),baseCost:1e6,buyAmount:e})),[z.BACK]:An(z.BACK,d=>({display:{title:$(()=>a(g,null,[u("Back")])),effect:$(()=>a(g,null,[u("+"),D(t(d.square.effect).minus(1).times(100)),u("%"),we.showNextValues&&o.gt(t(d.toBuy),0)?a(g,null,[u(" \u2192 +"),D(t(d.square.nextEffect).minus(1).times(100)),u("%")]):void 0,u(" "),V.accelerons.displayName,u(" effect")]))},effect(){return o.pow(t(d.square.amount),.2).dividedBy(5).plus(1)},nextEffect(){return o.plus(t(d.square.amount),t(d.toBuy)).pow(.2).dividedBy(5).plus(1)},resource:B(Y.timecubes),baseCost:1e6,buyAmount:e})),[z.LEFT]:An(z.LEFT,d=>({display:{title:$(()=>a(g,null,[u("Left")])),effect:$(()=>a(g,null,[u("1/"),D(t(d.square.effect)),u("\xD7"),we.showNextValues&&o.gt(t(d.toBuy),0)?a(g,null,[u(" \u2192 1/"),D(t(d.square.nextEffect)),u("\xD7")]):void 0,u(" Subspatial Construction cost")]))},effect(){return o.pow(t(d.square.amount),.5).plus(1)},nextEffect(){return o.plus(t(d.square.amount),t(d.toBuy)).pow(.5).plus(1)},resource:B(Y.timecubes),baseCost:1e6,buyAmount:e})),[z.BOTTOM]:An(z.BOTTOM,d=>({display:{title:$(()=>a(g,null,[u("Bottom")])),effect:$(()=>a(g,null,[u("+"),D(t(d.square.effect)),we.showNextValues&&o.gt(t(d.toBuy),0)?a(g,null,[u(" \u2192 +"),D(t(d.square.nextEffect))]):void 0,u(" effective Entropic Enhancements")]))},effect(){return o.plus(t(d.square.amount),1).log10().pow(.5).times(Oe(Y.upgrades.tall))},nextEffect(){return o.plus(t(d.square.amount),t(d.toBuy)).pow(.1).times(Oe(Y.upgrades.tall))},resource:B(Y.timecubes),baseCost:1e6,buyAmount:e}))},c=le("1");return gt(c,d=>{if(d===""){e.value=o.dOne;return}if(!o.isNaN(d)){if(o.lt(d,1)){e.value=o.dOne;return}e.value=o.floor(d)}}),{buyAmount:e,squares:l,display:$(()=>a(g,null,[a(Qt,null,{default:()=>[ie(r.overTen),ie(r.minusTen),ie(r.minusOne),a(mi,{style:{width:"fit-content"},"onUpdate:modelValue":d=>c.value=d,modelValue:c.value,autofocus:!1},null),ie(r.plusOne),ie(r.plusTen),ie(r.timesTen)]}),a(Ne,null,null),wn(l.front,l.right,l.top),wn(l.back,l.left,l.bottom)]))}});let z=function(e){return e.FRONT="front",e.RIGHT="right",e.TOP="top",e.BACK="back",e.LEFT="left",e.BOTTOM="bottom",e}({});const Mm=["disabled"],xm={key:0},Tm={key:1},Pm=oe({__name:"ResearchQueueSlot",props:{node:null,name:null,index:null},setup(e){const n=e,i=v(()=>n.node!==void 0),s=v(()=>{var l,c;return o.times((c=t((l=n.node)==null?void 0:l.progressPercentage))!=null?c:0,1.1).minus(.05).times(100)}),r=()=>t(i)?Km(n.node):{};return(l,c)=>{var d;return k(),x("button",{disabled:!t(i),class:Ie({queue:!0,can:t(i)}),style:Re([{"--fill-percent":`${t(D)(t(t(s)))}%`}]),onClick:r},[t(i)?(k(),x("span",xm,[(k(),se($e(t(pe)((d=t(e.name))!=null?d:""))))])):(k(),x("span",Tm,"Research Slot "+Z(t(e.index)+1),1))],14,Mm)}}});var Bs=ge(Pm,[["__scopeId","data-v-178829eb"]]);const Am={key:0},Bm=oe({__name:"ResearchQueue",props:{queue:null,parallel:{default:1}},setup(e){const n=e,i=[fe.research,fe.repeatables].flatMap(l=>Object.values(l)),s=v(()=>t(n.queue).map(l=>i.find(c=>c.id===l)));function r(l){const c=t(s)[l];if(c!==void 0)return Nt(c.display)||He(c.display)||oi(c.display)?c.id:c.display.title}return(l,c)=>(k(),se(dn,null,{default:ae(()=>[(k(!0),x(g,null,Pe(t(s),(d,m)=>(k(),x(g,{key:d?d.id:`empty-${m}`},[m===t(e.parallel)?(k(),x("h3",Am,"Next Up:")):j("",!0),d?(k(),se(Bs,{key:2,node:d,name:r(m),index:m},null,8,["node","name","index"])):(k(),se(Bs,{key:1,index:m},null,8,["index"]))],64))),128))]),_:1}))}});var Fm=ge(Bm,[["__scopeId","data-v-848e28a2"]]);const Em=e=>(lt("data-v-110208ba"),e=e(),ut(),e),Om={class:"container"},Rm={class:"row research-tree"},Dm={class:"col"},Lm=Em(()=>_("div",{class:"fade"},null,-1)),Vm=oe({__name:"ResearchTree",props:{research:null},setup(e){const n=e,i=v(()=>n.research.flatMap(s=>s).flatMap(s=>{var r,l;return(l=(r=s.prerequisites)==null?void 0:r.map(c=>({startNode:{id:s.id},endNode:{id:c.id},stroke:ye(s.visibility)?t(c.researched)?"var(--feature-background)":"white":"var(--locked)","stroke-width":"5px"})))!=null?l:[]}));return(s,r)=>(k(),x("div",Om,[_("div",Rm,[a(Ne,{width:"30px"}),_("div",Dm,[a(Ne,{height:"30px"}),(k(!0),x(g,null,Pe(e.research,l=>(k(),se(Qt,null,{default:ae(()=>[(k(!0),x(g,null,Pe(l,c=>(k(),x(g,null,[t(ye)(c.visibility)?(k(),se($e(t(ie)(c)),{key:0})):j("",!0)],64))),256))]),_:2},1024))),256)),a(Ne,{height:"30px"}),a(cr,{links:t(t(i))},null,8,["links"])]),a(Ne,{width:"30px"})]),Lm]))}});var jm=ge(Vm,[["__scopeId","data-v-110208ba"]]);const Um=["disabled"],Gm={key:0};var zm=oe({__name:"RepeatableResearch",props:{visibility:null,display:null,id:null,requirements:null,canResearch:null,isResearching:null,progress:null,progressPercentage:null,researched:null,amount:null,limit:null,maxed:null,research:null},setup(e){const n=e,i=yt("");qt(()=>{var p,b;const r=t(n.display);if(r==null){i.value="";return}if(Nt(r)){i.value=pe(r);return}const l=n.requirements,c=pe((p=r.title)!=null?p:"","h3"),d=pe(r.description),m=pe((b=r.effect)!=null?b:"");i.value=pe($(()=>a(g,null,[r.title?a(c,null,null):null,a("span",null,[a(d,null,null)]),r.effect?a("span",null,[u("Currently: "),a(m,null,null)]):null,Je(l)])))});const s=v(()=>o.times(t(n.progressPercentage),1.1).minus(.05).times(100));return(r,l)=>t(ye)(e.visibility)?(k(),x("button",{key:0,style:Re([{visibility:t(Ut)(e.visibility)?"hidden":void 0,"--fill-percent":`${t(D)(t(t(s)))}%`}]),onClick:l[0]||(l[0]=c=>e.research(!1)),class:Ie({research:!0,repeatable:!0,locked:!t(e.canResearch),maxed:t(e.maxed),can:t(e.canResearch)&&!t(e.isResearching),queued:t(e.isResearching)}),disabled:!t(e.canResearch)},[t(ye)(e.visibility)?t(t(i))?(k(),se($e(t(t(i))),{key:1})):j("",!0):(k(),x("div",Gm,"???")),a(Cn,{id:e.id},null,8,["id"])],14,Um)):j("",!0)}});var Hm=ge(zm,[["__scopeId","data-v-4cef0d6e"]]);const Wm={getPersistentData(){return{amount:Me(0)}},preConstruct(e){if(e[pt]=Hm,Nt(e.display)||He(e.display)||oi(e.display))return;const n=e.display.title;e.display.title=$(()=>{var s;const i=pe(n!=null?n:"");return a("h3",null,[u("Repeatable: "),a(i,null,null),u(" "),ws(o.add(t((s=e.amount)!=null?s:0),1))])})},postConstruct(e){Q(e,"limit"),Ge(e,"limit",3998),e.maxed=v(()=>o.gte(t(e.amount),t(e.limit)));const n=e.canResearch;e.canResearch=v(()=>{var s;return t(e.maxed)?!1:(s=t(n))!=null?s:!0}),e.researched=v(()=>o.gt(t(e.amount),0));const i=e.onResearch;e.onResearch=()=>{i==null||i(),e.amount.value=o.add(t(e.amount),1),e.progress.value=0}},getGatheredProps(e){const{amount:n,maxed:i}=e;return{amount:n,maxed:i}}};function ws(e){const n=[[1,"I"],[4,"IV"],[5,"V"],[9,"IX"],[10,"X"],[40,"XL"],[50,"L"],[90,"XC"],[100,"C"],[400,"CD"],[500,"D"],[900,"CM"],[1e3,"M"]];let i=new o(e).trunc().toNumber();if(i>=4e3)return D(e);if(i<1)return"Nulla";const s=[];for(let r=n.length-1;i>0;r--){for(let l=Math.floor(i/n[r][0]);l>0;l--)s.push(n[r][1]);i%=n[r][0]}return s.join("")}const Ym="coreResearch",fe=st(Ym,function(){const e=(()=>{const h=Ft(()=>({cost:75,display:{title:"Branon Induction Phases",description:"Quintuple the effect of M-field Condensers"},effect:5})),N=Dt(()=>({cost:500,display:{title:"Inflaton Containment Strategies",description:"Allow construction of Inflaton Containment Units"},prerequisites:[U]})),y=Ft(()=>({cost:1500,display:{title:"Enhanced Isolation Protocols",description:"Improve the Inflaton Containment Unit's storage capabilities"},effect:1,prerequisites:[A]})),q=Dt(()=>({cost:6e3,display:{title:"Inflationary Tolerances",description:"Allow stored Inflatons to inflate to fill your storage"},prerequisites:[A,y]})),T=Dt(()=>({cost:25e3,display:{title:"Secondary Isolation Standards",description:"M-field Condensers no longer reduce the effect of Stored Inflatons"},prerequisites:[M]})),M=Dt(()=>({cost:15e3,display:{title:"Active Restoration Protocols",description:"Allow the construction of Active Redistribution Centers"},prerequisites:[$n,y]})),P=Ft(()=>({cost:25e3,display:{title:"Macroscale Synergies",description:"Increase subspace building size tenfold, and their potency by twice as much"},effect:{size:10,effect:2},prerequisites:[rt,zt,M],onResearch(){for(const bt of Object.values(Ve.buildings))bt.amount.value=0}})),A=Dt(()=>({cost:750,display:{title:"Superstructural Stability Patterns",description:"Enable individual building respecs"},prerequisites:[N]})),W=Dt(()=>({cost:1e5,display:{title:"Mechanized Superscale Subsystems",description:"Automatically build subspace buildings, and building them no longer consumes Foam"},prerequisites:[T,pn]})),de=Ft(()=>({cost:100,display:{title:"Banach-Tarski Point Manipulation",description:"You can stabilize the universe at double the size"},effect:2,prerequisites:[h]})),X=Ft(()=>({cost:750,display:{title:"Von Neumann Transformation",description:"Double the size of the universe, again"},effect:2,prerequisites:[G]})),U=Dt(()=>({cost:100,display:{title:"Subspatial Binding Constants",description:"Reduce the cost scaling of Quantum Flux Analyzers"},prerequisites:[h]})),Be=v(()=>o.times(t(n.analysis.effect),1.8)),E=Ft(bt=>({cost:1500,display:{title:"Distributed Analysis Framework",description:$(()=>a("span",null,[u("Transform 10% of your Quantum Flux Analyzers into networking nodes, increasing Research Point gain by up to "),D(t(Be)),u("\xD7")])),effect:$(()=>a(g,null,[D(t(bt.effect))]))},effect(){return o.pow(1.1,t(Ve.buildings.lab.amount)).clampMax(t(Be))},prerequisites:[de,U]})),G=Ft(()=>({cost:500,display:{title:"Counter-Inflational Cycles",description:"Gain up to 1e6x more Foam, based on your current Stored Inflatons"},effect:1e6,prerequisites:[de]})),ee=Ft(()=>({cost:1500,display:{title:"Scatter-Field Repulsion",description:"Retain up to 1e12x more Foam, based on your current Stored Inflatons"},effect:1e12,prerequisites:[R,It]})),I=Ft(()=>({cost:9e3,display:{title:"Scalar Flux Reduction",description:"Retain up to 1e12x more Foam yet again, based on your current Stored Inflatons"},effect:1e12,prerequisites:[rt,zt]})),R=Ft(()=>({cost:750,display:{title:"Quantum Phasor Coherence",description:"Halve the effect of inflation on Quantum Foam"},effect:.5,prerequisites:[G]})),rt=Ft(()=>({cost:6e3,display:{title:"Aggressive Flow Diffusion",description:"Halve the effect of inflation on Quantum Foam, again"},effect:.5,prerequisites:[R,ee]})),It=Dt(()=>({cost:750,display:{title:"Quantum Inflationo-dynamics",description:"Unlock two more Inflaton upgrades"},prerequisites:[N]})),zt=Dt(()=>({cost:6e3,display:{title:"Infinite Expansion Theories",description:"Unlock two repeatable researches"},prerequisites:[X]})),Ze=Dt(()=>({cost:1e5,display:{title:"Sustainable Expansion Hypothesis",description:"Unlock three more repeatable research projects"},prerequisites:[I,P]})),$n=Ft(()=>({cost:1e4,display:{title:"Scheduled Itemization",description:"You can queue up to 2 additional researches"},effect:2,prerequisites:[E]})),Ee=Ft(()=>({cost:1e5,display:{title:"Static Proposal Induction",description:"Increase the research queue size by another 2 researches"},effect:2,prerequisites:[$n,zt]})),pn=Dt(()=>({cost:25e3,display:{title:"Instantaneous Limit Testing",description:"Beginning Inflation instantly expands the universe to the limit of your M-field Condensers' safe operation"},prerequisites:[M,q]})),Kn=Dt(()=>({cost:75e4,display:{title:"Spatial Mastery",description:$(()=>a("span",null,[u("Unlock "),ue.isFirstBranch(wt)||o.gt(t(ue.strings),0)?V.accelerons.displayName:ue.strings.displayName]))},prerequisites:[Ze,Ee,W]}));return{quintupleCondenser:h,doubleSize:de,cheaperLabs:U,fomeGain:G,researchBoost:E,storage:N,halfQuantum:R,quadrupleSize:X,upgrades:It,respecs:A,moreFomeGain:ee,queueTwo:$n,improvedStorage:y,quarterQuantum:rt,repeatableUnlock:zt,inflationResearch:M,autofillStorage:q,evenMoreFomeGain:I,biggerBuildings:P,isolatedStorage:T,instantInflation:pn,moreRepeatables:Ze,queueFour:Ee,autobuild:W,mastery:Kn}})(),n=(()=>{const h=Jn(M=>({visibility:v(()=>t(e.repeatableUnlock.researched)?De.Visible:De.Hidden),display:{title:"Eternal Inflation",description:"Double the size of your universe",effect:$(()=>a(g,null,[te(t(M.effect)),u("\xD7")]))},cost(){return o.pow(4,t(M.amount)).times(12e3).dividedBy(t(F.spinor.upgrades.nu.effect))},effect(){return o.pow(2,t(M.amount))}})),N=Jn(M=>({visibility:e.repeatableUnlock.researched,display:{title:"Perpetual Testing",description:"Increase Distributed Analysis Framework's maximum bonus by 80%",effect:$(()=>a(g,null,[te(t(M.effect)),u("\xD7")]))},cost(){return o.pow(8,t(M.amount)).times(15e3).dividedBy(t(F.spinor.upgrades.nu.effect))},effect(){return o.pow(1.8,t(M.amount))}})),y=Jn(M=>({visibility:e.moreRepeatables.researched,display:{title:"Subspatial Construction",description:"Increase Subspace building size tenfold, and their potency by twice as much",effect:$(()=>a(g,null,[te(t(M.effect).size),u("\xD7, "),te(o.times(t(M.effect).size,t(M.effect).effect)),u("\xD7")]))},cost(){return o.pow(200,t(M.amount)).times(15e4).dividedBy(t(F.spinor.upgrades.nu.effect)).div(t(Y.getTimesquareEffect(z.LEFT)))},effect(){return{size:o.pow(10,t(M.amount)),effect:o.pow(2,t(M.amount))}},canResearch(){const P=t(En);for(const A of Object.values(Ve.buildings))if(P.times(10).gt(t(A.amount)))return!1;return!0},onResearch(){for(const P of Object.values(Ve.buildings))P.amount.value=0}})),q=Jn(M=>({visibility:e.moreRepeatables.researched,display:{title:"Efficient Design",description:"Decrease Subspace building cost scaling by 1.5x",effect:$(()=>a(g,null,[u("/"),D(t(M.effect))]))},cost(){return o.pow(3,t(M.amount)).times(12e4).dividedBy(t(F.spinor.upgrades.nu.effect))},effect(){return o.pow(1.5,t(M.amount))}})),T=Jn(M=>({visibility:e.moreRepeatables.researched,display:{title:"Inflational Dynamics",description:"Retain up to 1e6x more Foam",effect:$(()=>a(g,null,[te(t(M.effect)),u("\xD7")]))},cost(){return o.pow(5,t(M.amount)).times(16e4).dividedBy(t(F.spinor.upgrades.nu.effect))},effect(){return o.pow(1e6,t(M.amount))}}));return{universeSize:h,analysis:N,buildingSize:y,buildingCost:q,fome:T}})(),i=v(()=>1+vt(e.queueTwo,0)+vt(e.queueFour,0)),s=v(()=>1),r=Me([]),l=dt(()=>[H(()=>({multiplier:n.analysis.effect,enabled:()=>o.gt(t(n.analysis.amount),0),description:$(()=>a(g,null,[u("["),ce.name,u("] Repeatable: Perpetual Testing "),ws(t(n.analysis.amount))]))}))]),c=dt(()=>[H(()=>({multiplier:.9,enabled:B(e.researchBoost.researched),description:$(()=>a(g,null,[u("["),ce.name,u("] Reserved for Networking Nodes")]))})),H(()=>({multiplier:e.researchBoost.effect,enabled:B(e.researchBoost.researched),description:$(()=>a(g,null,[u("["),ce.name,u("] Distributed Analysis Framework")]))})),H(()=>({multiplier:F.pion.upgrades.nu.effect,enabled:()=>o.gt(t(F.pion.upgrades.nu.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03BD ("),te(t(F.pion.upgrades.nu.totalAmount)),u(")")]))}))]),d=dt(()=>[c,Ad(()=>({addend:()=>o.negate(t(Ve.buildings.tuner.effect).cost),enabled:()=>o.gt(t(Ve.buildings.tuner.totalAmount),0),description:$(()=>a(g,null,[u("["),ce.name,u("] Active Redistribution Centers")]))}))]),m=v(()=>c.apply(t(Ve.buildings.lab.effect))),p=v(()=>o.clampMin(d.apply(t(Ve.buildings.lab.effect)),0)),b=Me(!1);ce.on("preUpdate",h=>{if(t(r).length<=0)return;const N=o.times(t(p),h);for(const y of t(r).slice(0,t(s))){const q=[e,n].flatMap(T=>Object.values(T)).find(T=>T.id===y);q!==void 0&&(q.progress.value=N.plus(q.progress.value))}}),ce.on("update",()=>{if(!!t(b)){if(t(r).length>=t(s)){if(!t(n.buildingSize.canResearch)||t(r).some(N=>N===n.buildingSize.id)||t(r).length>=t(i))return;const h=[n.buildingSize.id,...t(r)].map(N=>[e,n].flatMap(y=>Object.values(y)).find(y=>y.id===N)).filter(N=>N!==void 0).sort((N,y)=>o.compare(t(N.requirements.cost),t(y.requirements.cost))).map(N=>N.id);h.indexOf(n.buildingSize.id)<t(s)&&(r.value=h);return}Object.values(n).filter(h=>o.gte(t(h.amount),1)).filter(h=>!t(h.isResearching)).filter(h=>t(h.canResearch)).sort((h,N)=>o.compare(t(h.requirements.cost),t(N.requirements.cost))).slice(0,t(s)-t(r).length).forEach(h=>h.research(!0))}}),ce.on("postUpdate",()=>{r.value=t(r).filter(h=>{var y;const N=[e,n].flatMap(q=>Object.values(q)).find(q=>q.id===h);return N===void 0?!1:o.gte(t(N.progressPercentage),1)?((y=N.onResearch)==null||y.call(N),!1):!0})});const f=Tt("Research Modifiers",()=>[{title:"Maximum Distributed Analysis Framework Bonus",modifier:l,visible:B(e.researchBoost.researched),base:1.8,baseText:$(()=>a(g,null,[u("["),ce.name,u("] Distributed Analysis Framework")]))},{title:"Research Point Production",modifier:d,base:Ve.buildings.lab.effect,baseText:$(()=>a(g,null,[u("["),ce.name,u("] Quantum Flux Analyzers")]))}]);return{research:e,repeatables:n,queueLength:i,parallelResearchCount:s,researchQueue:r,researchGain:m,totalResearchGain:p,autoResearching:b,display:$(()=>a(g,null,[a("div",null,[u("Your buildings are producing "),te(t(p)),u(" Research Points"),ie(f)]),a("div",{class:"row",style:{flexFlow:"row-reverse nowrap",alignItems:"flex-start",justifyContent:"space-evenly"}},[a(dn,null,{default:()=>[a(Fm,{parallel:s,queue:v(()=>Array.from({...t(r),length:Math.max(t(r).length,t(i))}))},null),t(e.repeatableUnlock.researched)?a(g,null,[a("span",{style:{fontSize:"12px"}},[u("Enable Auto-Repeatable Research:")]),a(Wt,{modelValue:b.value,"onUpdate:modelValue":h=>b.value=h,style:{marginTop:0}},null),a(Ne,null,null)]):void 0]}),a(jm,{research:[[e.quintupleCondenser],[e.doubleSize,e.cheaperLabs],[e.fomeGain,e.researchBoost,e.storage],[e.halfQuantum,e.quadrupleSize,e.upgrades,e.respecs],[e.moreFomeGain,e.queueTwo,e.improvedStorage],[e.quarterQuantum,e.repeatableUnlock,e.inflationResearch,e.autofillStorage],[e.evenMoreFomeGain,e.biggerBuildings,e.isolatedStorage,e.instantInflation],[e.moreRepeatables,e.queueFour,e.autobuild],[e.mastery]]},null),a(dn,null,{default:()=>[...Object.values(n).map(ie).map(h=>a("div",{style:{margin:"var(--feature-margin) 0px"}},[h]))]})])]))}});function Km(e){fe.researchQueue.value=t(fe.researchQueue).filter(n=>n!==e.id)}const Qm=v(()=>[fe.research,fe.repeatables].flatMap(e=>Object.values(e)));function ks(e=!1){if(e||t(fe.researchQueue).length<t(fe.queueLength)){const n=t(Qm).find(i=>i.id===this.id);n&&t(fe.researchQueue).push(n.id)}}function Ss(){return t(fe.researchQueue).some(e=>e===this.id)}function Dt(e){return _s(n=>{const{visibility:i,prerequisites:s,cost:r,display:l,canResearch:c,onResearch:d}=e.call(n,n);return{visibility:i,prerequisites:s,requirements:K(()=>({resource:B(at(B(n.progress),{displayName:"Research Points"})),cost:r})),display:l,canResearch:c,onResearch:d,research:ks,isResearching:Ss}})}function Ft(e){return _s(n=>{const{visibility:i,prerequisites:s,cost:r,display:l,canResearch:c,onResearch:d,effect:m}=e.call(n,n);return{visibility:i,prerequisites:s,requirements:K(()=>({resource:B(at(B(n.progress),{displayName:"Research Points"})),cost:r})),display:l,canResearch:c,onResearch:d,research:ks,isResearching:Ss,effect:m}},Ce)}function Jn(e){return _s(n=>{const{visibility:i,prerequisites:s,cost:r,display:l,canResearch:c,onResearch:d,effect:m,limit:p}=e.call(n,n);return{visibility:i,prerequisites:s,requirements:K(()=>({resource:B(at(B(n.progress),{displayName:"Research Points"})),cost:r})),display:l,canResearch:c,onResearch:d,research:ks,isResearching:Ss,effect:m,limit:p}},Ce,Wm)}const Xm="buildings",Ve=st(Xm,function(){const e=(()=>{const p=ki(N=>({effect(y){return o.times(y,vt(fe.research.quintupleCondenser,1)).pow_base(.975)},cost:{resource:B(C[S.subspatial].amount),base:1.1,multiplier:v(()=>ue.isFirstBranch(wt)?1e30:1e82)},display:{visibility:B(ce.upgrades.subspaceBuildings.bought),title:"M-Field Condenser",description:"Slightly reduce the loss of resources to Inflation",effect:$(()=>a(g,null,[mt(t(N.effect))]))}})),b=ki(()=>({effect:N=>N,cost:{resource:B(C[S.subspatial].amount),base:v(()=>t(fe.research.cheaperLabs.researched)?1.5:15),multiplier:v(()=>ue.isFirstBranch(wt)?1e30:1e82)},display:{visibility:B(ce.upgrades.research.bought),title:"Quantum Flux Analyzer",description:"Study fluctuations in the quantum field",effect:$(()=>a(g,null,[u("+"),te(t(fe.researchGain)),u(" research points/s")]))}})),f=ki(N=>({effect(y){return o.times(y,vt(fe.research.improvedStorage,1/3)).pow_base(500)},cost:{resource:B(C[S.quantum].amount),base:1.2,multiplier:v(()=>ue.isFirstBranch(wt)?1e15:1e48)},display:{visibility:fe.research.storage.researched,title:"Inflaton Containment Unit",description:"Specialized storage facilities designed to keep Inflatons separated and inert",effect:$(()=>a(g,null,[u("Safely store up to "),te(t(N.effect)),u(" Inflatons")]))},size:3})),h=ki(N=>({effect(y){let q=o.times(y,.01).plus(1),T=new o(y),M=t(fe.researchGain);return T.gt(M)?{gain:q.times(M).dividedBy(T),cost:M}:{gain:q,cost:T}},cost:{resource:B(C[S.subspatial].amount),base:1.5,multiplier:v(()=>ue.isFirstBranch(wt)?1e40:1e92)},display:{visibility:fe.research.inflationResearch.researched,title:"Active Redistribution Center",description:"Tune your M-field Condensers with continuous analysis of inflation patterns",effect:$(()=>a(g,null,[D(t(N.effect).gain),u("\xD7"),a("br",null,null),a("b",null,[u("Consumes:")]),u(" "),D(t(N.effect).cost),u(" Research/s")]))}}));return{condenser:p,lab:b,storage:f,tuner:h}})(),n=at(v(()=>{if(o.lt(t(ce.inflatons),1))return o.dZero;let p=o.clampMin(t(ce.inflatons),2).log2().log2().times(vt(fe.research.doubleSize,1)).times(vt(fe.research.quadrupleSize,1)).times(vt(fe.repeatables.universeSize,1));const b=6187e7;return p.gt(b)&&(p=p.pow(.1).times(o.dOne.minus(.1).pow_base(b))),p.times(t(Y.getTimesquareEffect(z.TOP))).div(t(ze.nerfs[z.TOP])).times(t(ze.buffs[z.TOP]))})),i=hs(n),s=v(()=>Object.values(e).map(p=>{var b;return o.times(t(p.amount),(b=p.size)!=null?b:1)}).reduce((p,b)=>p.plus(b),o.dZero)),r={width:"125px",minHeight:"25px",borderRadius:0},l=Object.fromEntries(Object.entries(e).map(([p,b])=>[p,{one:ct(()=>({visibility:b.visibility,canClick(){return o.gt(t(b.amount),0)},display:{description:"Sell One"},onClick(){b.amount.value=o.minus(b.amount.value,t(En)).clampMin(0)},style:{...r,borderBottomLeftRadius:"var(--border-radius)"}})),all:ct(()=>({visibility:b.visibility,canClick(){return o.gt(t(b.amount),0)},display:{description:"Sell All"},onClick(){b.amount.value=o.dZero},style:{...r,borderBottomRightRadius:"var(--border-radius)"}}))}])),c=ct(()=>({canClick(){return Object.values(e).some(p=>o.gt(t(p.amount),0))},display:{description:"Sell All"},onClick(){for(const p of Object.values(e))p.amount.value=o.dZero},style:{...r,borderRadius:"var(--border-radius)"}})),d=Me(!1);ce.on("update",()=>{if(!!t(d))for(const p of Object.values(e))!ye(p.visibility)||!t(p.canClick)||p.onClick()});const m=Object.fromEntries(Object.entries(e).map(([p,b])=>[p,$(()=>ye(b.visibility)?a("div",{class:"col mergeAdjacent"},[ie(b),t(fe.research.respecs.researched)?a("div",{class:"row mergeAdjacent"},[ie(l[p].one),ie(l[p].all)]):void 0]):a("span",null,null))]));return{buildings:e,currentSize:n,maxSize:i,usedSize:s,autoBuilding:d,display:$(()=>a(g,null,[a("div",null,[u("Your buildings are taking up "),jn(t(s),0),u(" / "),jn(o.floor(t(i)),0)]),a(Ne,null,null),wn(...Object.values(m)),a(Ne,null,null),t(fe.research.autobuild.researched)?a(g,null,[a(dn,null,{default:()=>[a("span",{style:{fontSize:"12px"}},[u("Enable Auto-Building Construction")]),a(Wt,{modelValue:d.value,"onUpdate:modelValue":p=>d.value=p,style:{marginTop:0}},null)]})]):void 0,ie(c)]))}});function ki(e){return Qe(n=>{var c;const{effect:i,cost:s,display:r,size:l}=e.call(n,n);return(c=s.free)!=null||(s.free=fe.research.autobuild.researched),{bonusAmount(){return o.times(t(this.amount),t(F.spinor.upgrades.rho.effect))},visibility:r.visibility,requirements:[At(Jm(l!=null?l:1)),K(()=>({cost(){const d=t(s.multiplier),m=new o(t(s.base)),p=o.div(t(n.amount),vt(fe.repeatables.buildingCost,1)).div(t(F.pion.upgrades.rho.effect)),b=t(En);return t(fe.research.autobuild.researched)?m.pow(p).times(d):m.pow(b).minus(1).times(d).times(m.pow(p)).dividedBy(m.minus(1))},resource:B(s.resource),requiresPay:()=>!t(s.free),cumulativeCost:!1,maxBulkAmount:En}))],onClick(){n.amount.value=t(En).minus(1).plus(t(n.amount))},effect(){return i(ep(this))},display:$(()=>{var f,h;const d=pe(r.title,"h3"),m=pe(r.description),p=pe(r.effect),b=n;return a("span",null,[a("div",null,[a(d,null,null)]),a(m,null,null),a("div",null,[a("br",null,null),a("b",null,[u("Size:")]),u(" "),jn(o.times(t(b.amount),(f=b.size)!=null?f:1),0),o.gt(t(b.bonusAmount),0)?` + ${jn(o.times(t(b.bonusAmount),(h=b.size)!=null?h:1),0)}`:void 0]),a("div",null,[a("br",null,null),a("b",null,[u("Currently:")]),u(" "),a(p,null,null)]),a("div",null,[a("br",null,null),Je(b.requirements)])])}),style:Zm,size:l}},Ce,mr)}const Zm=v(()=>({width:"250px",minHeight:"150px",borderBottomLeftRadius:t(fe.research.respecs.researched)?0:"var(--border-radius)",borderBottomRightRadius:t(fe.research.respecs.researched)?0:"var(--border-radius)"})),En=v(()=>o.times(vt(fe.research.biggerBuildings,{size:1,effect:1}).size,vt(fe.repeatables.buildingSize,{size:1,effect:1}).size));function Jm(e){return v(()=>o.minus(t(Ve.maxSize),t(Ve.usedSize)).gte(t(En).times(e)))}function ep(e){var n;return o.times(t(e.totalAmount),(n=e.size)!=null?n:1).times(vt(fe.research.biggerBuildings,{size:1,effect:1}).effect).times(t(fe.repeatables.buildingSize.effect).effect)}function jn(e,n){return e=new o(e),e.lt(6187e7)?a(g,null,[D(e,n),u("\u2113"),a("sub",null,[u("P")])]):(e=e.dividedBy(6187e7),e.lt(1e3)?`${D(e,n)}ym`:e.lt(1e6)?`${D(e.dividedBy(1e3),n)}zm`:e.lt(1e9)?`${D(e.dividedBy(1e6),n)}am`:e.lt(1e12)?`${D(e.dividedBy(1e9),n)}fm`:e.lt(1e15)?`${D(e.dividedBy(1e12),n)}pm`:e.lt(1e18)?`${D(e.dividedBy(1e15),n)}nm`:e.lt(1e21)?`${D(e.dividedBy(1e18),n)}\u03BCm`:e.lt(1e24)?`${D(e.dividedBy(1e21),n)}mm`:e.lt(1e27)?`${D(e.dividedBy(1e24),n)}m`:e.lt(1e30)?`${D(e.dividedBy(1e27),n)}km`:e.lt(1e33)?`${D(e.dividedBy(1e30),n)}Mm`:e.lt(1e36)?`${D(e.dividedBy(1e33),n)}Gm`:e.lt(1e39)?`${D(e.dividedBy(1e36),n)}Tm`:e.lt(1e42)?`${D(e.dividedBy(1e39),n)}Pm`:e.lt(9461e39)?`${D(e.dividedBy(1e42),n)}ly`:e.lt(3086e40)?`${D(e.dividedBy(9461e39),n)}pc`:e.lt(3086e43)?`${D(e.dividedBy(3086e40),n)}kcp`:e.lt(3086e46)?`${D(e.dividedBy(3086e43),n)}Mpc`:`${D(e.dividedBy(3086e46),n)}Gpc`)}const wt="inflaton",ce=st(wt,function(){const e="Inflatons",n={"--feature-background":"#ff5e13","--bought":"#b14e24"},i=v(()=>t(ue.milestones[1].earned)||ue.isFirstBranch(wt)||t(V.upgrades.mastery.bought)?!0:!ue.isFirstBranch(bn)&&t(C[S.quantum].upgrades.condense.bought)),s=at(0,{displayName:e,singularName:"Inflaton"}),r=K(()=>({resource:B(C[S.quantum].amount),cost:()=>t(ue.branchOrder)===""||ue.isFirstBranch(wt)?1e9:1e50,requiresPay:!1})),l=ct(()=>({canClick:()=>Vt(r),display:$(()=>a(g,null,[u("1 "),s.singularName,a("br",null,null),a("br",null,null),Je(r)])),onClick(){s.value=o.dOne,!t(ue.milestones[1].earned)&&t(ue.branchOrder)===""&&(ue.branchOrder.value=wt)},style:{width:"fit-content",minHeight:"60px"},visibility:()=>o.eq(t(s),0)})),c=ct(()=>({display:$(()=>t(p)?a(g,null,[u("DISPERSE")]):a(g,null,[u("INFLATE")])),onClick(){t(p)?m():d()},style:{width:"150px",minHeight:"60px"},visibility:()=>o.gte(t(s),1)}));function d(){p.value=!0,s.value=t(fe.research.instantInflation.researched)?o.reciprocate(t(Ve.buildings.condenser.effect)).dividedBy(10).pow10():o.add(t(s),1)}function m(){p.value=!1,s.value=o.min(t(s),t(Ve.buildings.storage.effect))}const p=Me(!1),b=v(()=>{let X=o.clampMin(t(s),1).log10();return(t(p)||!t(fe.research.isolatedStorage.researched))&&(X=X.times(t(Ve.buildings.condenser.effect))),X.pow_base(2).clampMin(1)}),f=v(()=>t(b).dividedBy(vt(fe.research.fomeGain,1)).dividedBy(vt(fe.research.moreFomeGain,1)).dividedBy(vt(fe.research.evenMoreFomeGain,1)).dividedBy(vt(fe.repeatables.fome,1)).clampMin(1)),h=v(()=>t(Y.upgrades.tower.bought)?t(Y.timelines.inTimeline)?t(f):t(b):t(b)),N={pion:h,spinor:h,[S.protoversal]:f,[S.infinitesimal]:f,[S.subspatial]:f,[S.subplanck]:f,[S.quantum]:v(()=>o.times(t(f),vt(fe.research.halfQuantum,1)).times(vt(fe.research.quarterQuantum,1)).clampMin(1)),acceleron:b,timecube:b},y=v(()=>{let U=o.clampMin(t(s),1).log10().plus(1).dividedBy(10).pow_base(2).times(t(s));return U.layer>=3?o.fromComponents(U.sign,U.layer,U.mag*1.000000000000001):U}),q=dt(()=>[H(()=>({multiplier:fe.research.fomeGain.effect,enabled:fe.research.fomeGain.researched,description:$(()=>a(g,null,[u("["),e,u("] Counter-Inflational Cycles")]))})),H(()=>({multiplier:fe.research.moreFomeGain.effect,enabled:fe.research.moreFomeGain.researched,description:$(()=>a(g,null,[u("["),e,u("] Scatter-Field Repulsion")]))})),H(()=>({multiplier:fe.research.evenMoreFomeGain.effect,enabled:fe.research.evenMoreFomeGain.researched,description:$(()=>a(g,null,[u("["),e,u("] Scalar Flux Reduction")]))})),H(()=>({multiplier:fe.repeatables.fome.effect,enabled:()=>o.gt(t(fe.repeatables.fome.amount),0),description:$(()=>a(g,null,[u("["),e,u("] Repeatable: Inflational Dynamics "),ws(t(fe.repeatables.fome.amount))]))}))]),T=v(()=>t(p)?o.dOne:o.clampMax(q.apply(o.dOne),t(b))),M=(()=>{const X=be(()=>({display:{title:"Subspatial Field Stabilizers",description:"<br />Allow the creation of Subspatial Structures<br />"},requirements:K(()=>({cost:()=>ue.isFirstBranch(wt)?5e5:5e46,resource:C[S.quantum].amount})),visibility(){return t(this.bought)||t(ue.milestones[1].earned)||o.gte(t(Ve.maxSize),6)},style:{width:"250px"}})),U=be(()=>({display:{title:"Quantum Field Investigations",description:"<br />Stabilization isn't enough. Maybe the constant bubbling of the quantum field may hold the secret to sustaining inflation<br />"},requirements:K(()=>({cost:()=>ue.isFirstBranch(wt)?1e6:1e47,resource:C[S.quantum].amount})),visibility(){return t(this.bought)||t(ue.milestones[1].earned)||t(X.bought)&&o.gte(t(Ve.maxSize),7)},style:{width:"250px"}})),Be=be(()=>({display:{title:"Dynamic Inflational Formation",description:"<br />Generate more Foam based on the size of your universe<br />"},requirements:K(()=>({cost:()=>ue.isFirstBranch(wt)?1e25:1e58,resource:C[S.quantum].amount})),visibility(){return t(this.bought)||t(fe.research.upgrades.researched)},effect:Ve.maxSize,style:{width:"250px"}}),Ce),E=be(()=>({display:{title:"Micro-Inflational Subsystems",description:"<br />Gain a new Pion and Spinor Upgrade<br />"},requirements:K(()=>({cost:()=>ue.isFirstBranch(wt)?1e27:1e60,resource:C[S.quantum].amount})),visibility(){return t(this.bought)||t(fe.research.upgrades.researched)},style:{width:"250px"}}));return{subspaceBuildings:X,research:U,moreFome:Be,skyrmionUpgrades:E}})();this.on("preUpdate",()=>{if(!!t(p)){for(const[X,U]of[[F.pion.pions,N.pion],[F.spinor.spinors,N.spinor],[C[S.protoversal].amount,N[S.protoversal]],[C[S.infinitesimal].amount,N[S.infinitesimal]],[C[S.subspatial].amount,N[S.subspatial]],[C[S.subplanck].amount,N[S.subplanck]],[C[S.quantum].amount,N[S.quantum]],[V.accelerons,N.acceleron],[Y.timecubes,N.timecube]])X.value=o.divide(X.value,U.value);[F.pion.pions,F.spinor.spinors,...Object.values(S).map(X=>C[X].amount)].some(X=>o.lt(t(X),1))&&m()}}),this.on("postUpdate",X=>{let U=!1;t(p)&&(U=!0),t(fe.research.autofillStorage.researched)&&o.lt(t(s),t(Ve.buildings.storage.effect))&&(U=!0),U?s.value=t(y).times(X).plus(t(s)):o.gt(t(s),t(Ve.buildings.storage.effect))&&(s.value=t(Ve.buildings.storage.effect))});const P={switchTab:St(()=>({enabled:i,key:"ctrl+i",description:"Move to Inflatons",onPress(){Nn.tabs.selected.value=e}}))},A=Tt("Inflaton Resonance",()=>[{title:"Maximum Potential Foam Gain",modifier:q}],"12px"),W=$(()=>a(g,null,[a(Ai,{resource:s,stickyStyle:{background:"unset"}},null),a("div",{style:{marginTop:"-20px",fontSize:"12px"}},[t(p)?a(g,null,[u("Runaway inflation is dividing all other resources by "),a("span",{style:{color:"var(--feature-background)",textShadow:"var(--feature-background) 0px 0px 10px"}},[te(t(b))])]):a(g,null,[t(fe.research.fomeGain.researched)?a(g,null,[u("Inflaton resonance is increasing Foam generation by "),a("span",{style:{color:"var(--feature-background)",textShadow:"var(--feature-background) 0px 0px 10px"}},[te(t(T))])]):void 0]),t(fe.research.fomeGain.researched)?ie(A):void 0]),ie(c),ie(l),o.gt(t(s),0)&&o.gt(t(Ve.maxSize),0)?a("div",null,[u("You have managed to stabilize the universe at a diameter of "),jn(t(Ve.maxSize)),t(p)&&o.lt(t(Ve.currentSize),t(Ve.maxSize))?a(g,null,[u(" ("),jn(t(Ve.currentSize)),u(")")]):void 0]):void 0,a(Ne,null,null)])),de=pi({buildings:()=>({display:"Structures",tab:rn(()=>({display:$(()=>a(g,null,[ie(W),o.gt(t(s),0)?a(g,null,[t(M.subspaceBuildings.bought)?ie(Ve.display):void 0,a(Ne,null,null),wn(M.moreFome,M.subspaceBuildings,M.research,M.skyrmionUpgrades)]):void 0]))}))}),research:()=>({display:"Research",tab:rn(()=>({display:$(()=>a(g,null,[ie(W),ie(fe.display)]))}))})});return{id:wt,name:e,theme:n,unlocked:i,inflatons:s,inflating:p,fomeBonus:T,upgrades:M,hotkeys:P,tabs:de,display:$(()=>a(g,null,[t(M.research.bought)?ie(de):ie(t(de.tabs.buildings.tab))])),buildings:Ve,coreResearch:fe}}),Bi=e=>(lt("data-v-c2330cd8"),e=e(),ut(),e),tp={class:"totals"},np=Bi(()=>_("div",null,"Active Penalties",-1)),ip=Bi(()=>_("div",{class:"break"},null,-1)),sp=Bi(()=>_("td",null,"(",-1)),rp=Bi(()=>_("td",null,")",-1));var op=oe({__name:"TimelineBuffs",props:{scores:null,buffs:null},setup(e){const n=Object.fromEntries(Object.values(z).map(s=>[s,s[0].toUpperCase()+s.slice(1)])),i={[z.FRONT]:"Time Cube Gain",[z.RIGHT]:"Foam Gain",[z.TOP]:"Universe Size",[z.BACK]:"Time Speed",[z.LEFT]:"Entropic Loop Effects",[z.BOTTOM]:"Pion and Spinor Gain"};return(s,r)=>(k(),x("div",tp,[np,ip,_("table",null,[(k(!0),x(g,null,Pe(t(z),l=>(k(),x("tr",null,[_("td",null,Z(i[l]),1),_("td",null,"\xD7"+Z(t(D)(t(e.buffs[l]))),1),sp,_("td",null,Z(t(D)(t(e.scores[l]))),1),rp,_("td",null,Z(t(n)[l]),1)]))),256))])]))}});var ap=ge(op,[["__scopeId","data-v-c2330cd8"]]);const Cs=e=>(lt("data-v-be986c56"),e=e(),ut(),e),lp={class:"totals"},up=Cs(()=>_("div",null,"Active Penalties",-1)),cp=Cs(()=>_("div",{class:"break"},null,-1)),dp=Cs(()=>_("td",null,"\u2192",-1));var mp=oe({__name:"TimelineNerfs",props:{activeNerfs:null,nextNerfs:null},setup(e){const n=Object.fromEntries(Object.values(z).map(s=>[s,s[0].toUpperCase()+s.slice(1)])),i={[z.FRONT]:"Time Cube Gain",[z.RIGHT]:"Foam Gain",[z.TOP]:"Universe Size",[z.BACK]:"Time Speed",[z.LEFT]:"Entropic Loop Effects",[z.BOTTOM]:"Pion and Spinor Gain"};return(s,r)=>(k(),x("div",lp,[up,cp,_("table",null,[(k(!0),x(g,null,Pe(t(z),l=>(k(),x("tr",null,[_("td",null,Z(t(n)[l]),1),_("td",null,"/"+Z(t(te)(t(e.activeNerfs[l]))),1),dp,_("td",null,"/"+Z(t(te)(t(e.nextNerfs[l]))),1),_("td",null,Z(i[l]),1)]))),256))])]))}});var pp=ge(mp,[["__scopeId","data-v-be986c56"]]),fp=oe({__name:"TimelineComponent",props:{id:null,sides:null,active:null,next:null,score:null,onClick:null},setup(e){const n=e,i=n.sides.map(l=>l[0].toUpperCase()+l.slice(1)),s=v(()=>o.add(t(n.score),1).log10().dividedBy(10)),r={[n.sides[0]]:v(()=>t(s).times(ze.scoreMultipliers[n.sides[0]])),[n.sides[1]]:v(()=>t(s).times(ze.scoreMultipliers[n.sides[1]]))};return(l,c)=>(k(),x("button",{onClick:c[0]||(c[0]=(...d)=>e.onClick&&e.onClick(...d)),class:Ie({feature:!0,timeline:!0,active:t(e.active),next:t(e.next)})},[_("h2",null,Z(t(i)[0])+" "+Z(t(i)[1]),1),_("div",null,"Amount: "+Z(t(D)(t(e.score))),1),_("div",null,Z(t(i)[0])+": +"+Z(t(D)(t(r[e.sides[0]]).times(100)))+"%",1),_("div",null,Z(t(i)[1])+": +"+Z(t(D)(t(r[e.sides[1]]).times(100)))+"%",1)],2))}});var gp=ge(fp,[["__scopeId","data-v-50b813cb"]]);const bp=Symbol("Timeline");function Lt(e){const n=Me(!1),i=Me(!1),s=Me(0);return Xe(()=>{const r=e;return r.id=Gt("timeline-"),r.type=bp,r[pt]=gp,r.active=n,r.next=i,r.score=s,r.onClick=()=>{i.value=!i.value},r[ft]=function(){const{id:l,sides:c,active:d,next:m,score:p,onClick:b}=this;return{id:l,sides:c,active:d,next:m,score:p,onClick:b}},r})}const hp="timeline",ze=st(hp,function(){const e={topLeft:Lt({sides:[z.TOP,z.LEFT]}),topFront:Lt({sides:[z.TOP,z.FRONT]}),topBack:Lt({sides:[z.TOP,z.BACK]}),topRight:Lt({sides:[z.TOP,z.RIGHT]}),frontLeft:Lt({sides:[z.FRONT,z.LEFT]}),frontRight:Lt({sides:[z.FRONT,z.RIGHT]}),backLeft:Lt({sides:[z.BACK,z.LEFT]}),backRight:Lt({sides:[z.BACK,z.RIGHT]}),bottomLeft:Lt({sides:[z.BOTTOM,z.LEFT]}),bottomFront:Lt({sides:[z.BOTTOM,z.FRONT]}),bottomBack:Lt({sides:[z.BOTTOM,z.BACK]}),bottomRight:Lt({sides:[z.BOTTOM,z.RIGHT]})},n={[z.FRONT]:[e.topFront,e.frontLeft,e.frontRight,e.bottomFront],[z.RIGHT]:[e.topRight,e.frontRight,e.backRight,e.bottomRight],[z.TOP]:[e.topLeft,e.topFront,e.topBack,e.topRight],[z.BACK]:[e.topBack,e.backLeft,e.backRight,e.bottomBack],[z.LEFT]:[e.topLeft,e.frontLeft,e.backLeft,e.bottomLeft],[z.BOTTOM]:[e.bottomLeft,e.bottomFront,e.bottomBack,e.bottomRight]},i=Object.fromEntries(Object.entries(n).map(([P,A])=>[P,v(()=>A.filter(W=>t(W.active)).length)])),s=Object.fromEntries(Object.entries(n).map(([P,A])=>[P,v(()=>A.filter(W=>t(W.next)).length)])),r=v(()=>Object.values(i).some(P=>t(P)>0)),l={[z.FRONT]:100,[z.RIGHT]:.01,[z.TOP]:1,[z.BACK]:1,[z.LEFT]:1e3,[z.BOTTOM]:1},c=Object.fromEntries(Object.entries(n).map(([P,A])=>[P,v(()=>A.reduce((W,de)=>W.plus(t(de.score)),o.dZero))])),d=Object.fromEntries(Object.entries(c).map(([P,A])=>[P,v(()=>t(A).times(l[P]).plus(1))])),m={[z.FRONT]:[1,1e8,1e80,"1e800","1e8000"],[z.RIGHT]:[1,1e12,1e120,"1e1200","1e12000"],[z.TOP]:[1,1e3,1e30,1e300,"1e3000"],[z.BACK]:[1,1e6,1e60,"1e600","1e6000"],[z.LEFT]:[1,100,1e20,1e200,"1e2000"],[z.BOTTOM]:[1,1e5,1e50,"1e500","1e5000"]},p=Object.fromEntries(Object.entries(i).map(([P,A])=>[P,v(()=>t(m[P])[t(A)])])),b=Object.fromEntries(Object.entries(s).map(([P,A])=>[P,v(()=>t(m[P])[t(A)])])),f=dt(()=>[H(()=>({multiplier(){return[t(F.pion.pions),t(F.spinor.spinors)].map(P=>o.add(P,1).log10()).reduce((P,A)=>P.plus(A)).dividedBy(10)},description:$(()=>a(g,null,[u("1/10th of the magnitude of "),F.pion.pions.displayName,u(" and "),F.spinor.spinors.displayName]))})),H(()=>({multiplier(){return[S.protoversal,S.infinitesimal,S.subspatial,S.subplanck,S.quantum].map(P=>o.add(t(C[P].amount),1).log10()).reduce((P,A)=>P.plus(A),o.dZero).dividedBy(50)},description:$(()=>a(g,null,[u("1/50th of the magnitude of all types of Foam")]))})),H(()=>({multiplier(){return o.add(t(V.accelerons),1).log10()},description:$(()=>a(g,null,[u("The magnitude of "),V.accelerons.displayName]))})),H(()=>({multiplier(){return o.add(t(ce.buildings.buildings.storage.effect),10).log10().log10().times(5)},description:$(()=>a(g,null,[u("5x the magnitude"),a("sup",null,[u("2")]),u(" of Stored "),ce.inflatons.displayName]))})),H(()=>({multiplier(){return o.add(t(Y.timecubes),1).log10()},description:$(()=>a(g,null,[u("The magnitude of "),Y.timecubes.displayName]))})),Wn(()=>({exponent(){return Object.values(e).filter(P=>t(P.active)).length/2},description:$(()=>a(g,null,[u("Number of active Timelines")]))}))]),h=v(()=>f.apply(1e-4)),N=ct(()=>({display(){return Object.values(e).some(P=>t(P.next))?"Enter Timeline":Object.values(e).some(P=>t(P.active))?"Exit Timeline":"Enter Timeline"},canClick(){return Object.values(e).some(P=>t(P.next)||t(P.active))},onClick(){const P=new o(t(h));for(const A of Object.values(e))!t(A.active)||P.gt(t(A.score))&&(A.score.value=P);y.reset(),C.protoversal.upgrades.reform.amount.value=o.dOne,ce.inflatons.value=o.dOne;for(const A of Object.values(e))A.active.value=t(A.next)}})),y=ys(()=>({thingsToReset(){return[F.skyrmions,F.pion,F.spinor,C[S.protoversal],C[S.infinitesimal],C[S.subspatial],C[S.subplanck],C[S.quantum],V.accelerons,V.totalAccelerons,V.upgrades.acceleration,V.upgrades.fluctuation,V.upgrades.conversion,V.upgrades.translation,V.upgrades.alacrity,Y.timecubes,ce.inflatons,ce.buildings.buildings,ce.buildings.maxSize,ce.inflating,ce.upgrades.moreFome,ce.coreResearch.repeatables.buildingSize]}})),q=Tt("Timeline Score",()=>[{title:"Timeline Score",modifier:f,base:1e-4}]),T=le(!1),M=$(()=>a(g,null,[a("button",{class:"button",onClick:()=>T.value=!0},[u("What are Timelines?")]),a(Zt,{modelValue:T.value,"onUpdate:modelValue":P=>T.value=P},{header:()=>a("h2",null,[u("Timeline Information")]),body:()=>a(g,null,[a("span",{style:{fontWeight:"normal"}},[u("Timelines are extra difficulty modes on top of normal play, which will provide passive bonuses depending on how much progress you are able to make while in them."),a("br",null,null),a("br",null,null),u("The grid of selectors below allows you to choose the level of difficulty that the next timeline will bring, with more active selectors providing an exponentially harder challenge, in return for a higher score - assuming you can handle their strength."),a("br",null,null),a("br",null,null),u("Each selector increases the depth in two different directions, providing two different and stacking production penalties. The penalty grows massively the deeper in a direction you go, so it is highly suggested to "),a("b",null,[u("start with a single active selector, and increase only when you feel comfortable with your current progress")]),u("."),a("br",null,null),a("br",null,null),u("When you have decided on a desired difficulty, simply "),a("b",null,[u("Enter Timeline")]),u(". All resources aside from Entangled Strings will be reset, as well as any Acceleron and Inflaton upgrades to production - you will need to buy them again. Additionally, "),a("code",null,[u("Repeatable Research: Subspatial Construction")]),u(" will also be reset to its initial level.")])])})]));return{timelines:e,scores:c,buffs:d,nerfs:p,depths:i,scoreMultipliers:l,inTimeline:r,display:$(()=>a(g,null,[ie(N),ie(M),a("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto auto 1fr",width:"fit-content"}},[a(pp,{activeNerfs:p,nextNerfs:b},null),a(Ne,null,null),a(dn,null,{default:()=>[wn(e.topLeft,e.topFront,e.topBack,e.topRight),wn(e.frontLeft,e.frontRight,e.backLeft,e.backRight),wn(e.bottomLeft,e.bottomFront,e.bottomBack,e.bottomRight)]}),a(Ne,null,null),a(ap,{scores:c,buffs:d},null)]),a(Ne,null,null),u("Current Score: "),D(t(h)),ie(q)]))}}),vp="timecube",Y=st(vp,function(){const e="Time Cubes",n={"--feature-background":"#f037ea","--bought":"#6f3695"},i=v(()=>t(ue.milestones[1].earned)||t(V.loops.loops.timecube.built)),s=at(0,{displayName:e,singularName:"Time Cube"}),r=hs(s),l=dt(()=>[H(()=>({multiplier:V.upgrades.conversion.effect,enabled:B(V.upgrades.conversion.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Stability Conversion")]))})),H(()=>({multiplier:Se.enhancements.tesselation.effect,enabled:B(Se.enhancements.tesselation.bought),description:$(()=>a(g,null,[u("["),Se.name,u("] Entropic Tesselation")]))})),H(()=>({multiplier:d.tile.effect,enabled:B(d.tile.bought),description:$(()=>a(g,null,[u("["),e,u("] Tile")]))})),H(()=>({multiplier:Y.getTimesquareEffect(z.FRONT),enabled:()=>o.gt(t(Zn.squares[z.FRONT].square.amount),0),description:$(()=>a(g,null,[u("["),e,u("] Front Time Squares ("),te(t(Zn.squares[z.FRONT].square.amount)),u(")")]))})),H(()=>({multiplier:()=>o.reciprocate(t(ze.nerfs[z.FRONT])),enabled:()=>t(ze.depths[z.FRONT])>0,description:$(()=>a(g,null,[u("["),e,u("] Active Front Timeline Effect")]))})),H(()=>({multiplier:ze.buffs[z.FRONT],enabled:()=>t(ze.scores[z.FRONT]).gt(0),description:$(()=>a(g,null,[u("["),e,u("] Passive Front Timeline Effect")]))}))]),c=v(()=>l.apply(1)),d=(()=>{const h=be(bt=>({display:{title:"Tile",description:"log10(Accelerons) increases Time Cube gain",effect:$(()=>a(g,null,[D(t(bt.effect)),u("\xD7")]))},requirements:K(()=>({resource:B(s),cost:1})),effect(){return o.max(t(V.accelerons),0).plus(1).log10()}}),Ce),N=be(bt=>({visibility(){return t(this.bought)||t(h.bought)},display:{title:"Time",description:"log10(Best Time Cubes) increases Acceleron effect",effect:$(()=>a(g,null,[D(t(bt.effect)),u("\xD7")]))},requirements:K(()=>({resource:B(s),cost:2})),effect(){return o.max(t(r),0).plus(1).log10().plus(1)}}),Ce),y=be(bt=>({visibility(){return t(this.bought)||t(N.bought)},display:{title:"Tier",description:"Each upgrade in this row gives a free level of every Foam Boost",effect:$(()=>a(g,null,[u("+"),te(t(bt.effect)),u(" free levels")]))},requirements:K(()=>({resource:B(s),cost:3})),effect(){return[h,N,this,q,T].filter(Ei=>t(Ei.bought)).length}}),Ce),q=be(()=>({visibility(){return t(this.bought)||t(y.bought)},display:{title:"Tilt",description:"Entropic Expansion is 50% stronger"},requirements:K(()=>({resource:B(s),cost:10})),effect:1.5}),Ce),T=be(()=>({visibility(){return t(this.bought)||t(q.bought)},display:{title:"Tiny",description:"Unlock another Entropic Loop"},requirements:K(()=>({resource:B(s),cost:25}))})),M=be(()=>({visibility(){return t(this.bought)||t(T.bought)},display:()=>({title:"Twice",description:`${t(U.bought)?"Triple":"Double"} maximum entropy`}),requirements:K(()=>({resource:B(s),cost:2500})),effect(){return t(U.bought)?3:2}}),Ce),P=be(()=>({visibility(){return t(this.bought)||t(M.bought)},display:{title:"Twist",description:"You may select an additional first row Entropic Enhancement"},requirements:K(()=>({resource:B(s),cost:4e8}))})),A=be(()=>({visibility(){return t(this.bought)||t(P.bought)},display:{title:"Ten",description:"Increase Entropic Loop build speed by 10,000x"},requirements:K(()=>({resource:B(s),cost:5e8})),effect:1e4}),Ce),W=be(()=>({visibility(){return t(this.bought)||t(A.bought)},display:{title:"Twirl",description:"You may select an additional fourth row Entropic Enhancement"},requirements:K(()=>({resource:B(s),cost:125e7}))})),de=be(()=>({visibility(){return t(this.bought)||t(W.bought)},display:{title:"Tetrate",description:"Unlock the fourth column of Entropic Enhancements"},requirements:K(()=>({resource:B(s),cost:5e9}))})),X=be(()=>({visibility(){return t(this.bought)||t(ue.expansions.timecube.bought)},display:{title:"Tesselate",description:"Unlock Time Squares"},requirements:K(()=>({resource:B(s),cost:1e6}))})),U=be(()=>({visibility(){return t(this.bought)||t(X.bought)},display:{title:"Triple",description:"Change <b>Twice</b> from double to triple"},requirements:K(()=>({resource:B(s),cost:1e11}))})),Be=be(()=>({visibility(){return t(this.bought)||t(X.bought)},display:{title:"Turn",description:"Front squares are 50% stronger"},requirements:K(()=>({resource:B(s),cost:1e12})),effect:1.5}),Ce),E=be(()=>({visibility(){return t(this.bought)||t(U.bought)&&t(Be.bought)},display:{title:"Tall",description:"Bottom squares are 50% stronger"},requirements:K(()=>({resource:B(s),cost:2e12})),effect:1.5}),Ce),G=be(()=>({visibility(){return t(this.bought)||t(U.bought)&&t(Be.bought)},display:{title:"Tour",description:"Double the Acceleron effect"},requirements:K(()=>({resource:B(s),cost:5e12})),effect:2}),Ce),ee=be(()=>({visibility(){return t(this.bought)||t(G.bought)},display:{title:"Tactics",description:"Unlock Timelines"},requirements:K(()=>({resource:B(s),cost:1e13}))})),I=be(()=>({visibility(){return t(this.bought)||t(ee.bought)},display:{title:"Tower",description:"While in at least one Top timeline, Foam retainment applies to Pions and Spinors as well"},requirements:K(()=>({resource:B(s),cost:1e16}))})),R=be(()=>({visibility(){return t(this.bought)||t(ee.bought)},display:{title:"Title",description:"Best timeline scores also increase their corresponding Time Square gain"},requirements:K(()=>({resource:B(s),cost:1e17}))})),rt=be(()=>({visibility(){return t(this.bought)||t(R.bought)&&t(I.bought)},display:{title:"Tempo",description:"The first entropic loop always produces at least one Acceleron"},requirements:K(()=>({resource:B(s),cost:1e18}))})),It={[S.protoversal]:1e46,[S.infinitesimal]:3e38,[S.subspatial]:1e31,[S.subplanck]:3e23,[S.quantum]:1e16},zt=be(()=>({visibility(){return t(this.bought)||t(R.bought)&&t(I.bought)},display:{title:"Toil",description:"While in at least one Left timeline, Foam gain is massively increased based on how little of that Foam you have"},requirements:K(()=>({resource:B(s),cost:1e19})),effect(){return Object.fromEntries(Object.entries(It).map(([bt,Ei])=>[bt,o.minus(Math.E/Math.PI,o.div(t(C[bt].amount),Ei)).pow10().times(15).plus(1)]))}}),Ce),Ze=be(bt=>({visibility(){return!1},display:{description:"X"},requirements:K(()=>({resource:B(s),cost:o.dInf}))})),$n=be(bt=>({visibility(){return!1},display:{description:"X"},requirements:K(()=>({resource:B(s),cost:o.dInf}))})),Ee=be(bt=>({visibility(){return!1},display:{description:"X"},requirements:K(()=>({resource:B(s),cost:o.dInf}))})),pn=be(bt=>({visibility(){return!1},display:{description:"X"},requirements:K(()=>({resource:B(s),cost:o.dInf}))})),Kn=be(bt=>({visibility(){return!1},display:{description:"X"},requirements:K(()=>({resource:B(s),cost:o.dInf}))}));return{tile:h,time:N,tier:y,tilt:q,tiny:T,twice:M,twist:P,ten:A,twirl:W,tetrate:de,tesselate:X,triple:U,turn:Be,tall:E,tour:G,tactics:ee,tower:I,title:R,tempo:rt,toil:zt,a:Ze,b:$n,c:Ee,d:pn,e:Kn}})(),m={switchTab:St(()=>({enabled:i,key:"ctrl+c",description:"Move to Timecubes",onPress(){Nn.tabs.selected.value=e}}))},p=Tt("Time Cube Modifiers",()=>[{title:s.displayName,modifier:l,base:1,baseText:$(()=>a(g,null,[u("["),V.name,u("] Gain per Loop")]))}]),b=$(()=>a(Ai,{resource:s,modal:p},null)),f=pi({cubes:()=>({display:"Time Cubes",tab:rn(()=>({display:$(()=>a(g,null,[ie(b),a(hm,{upgrades:Object.values(d)},null)]))}))}),squares:()=>({display:"Time Squares",tab:rn(()=>({display:$(()=>a(g,null,[ie(b),ie(t(Zn.display))]))}))}),lines:()=>({display:"Timelines",unlocked:B(d.tactics.bought),tab:rn(()=>({display:$(()=>a(g,null,[ie(b),ie(t(ze.display))]))}))})});return{name:e,theme:n,unlocked:i,timecubes:s,bestTimecubes:r,production:c,upgrades:d,hotkeys:m,tabs:f,display:$(()=>a(g,null,[t(d.tesselate.bought)?ie(f):ie(t(f.tabs.cubes.tab))])),timesquares:Zn,timelines:ze,getTimesquareEffect(h){return Zn.squares[h].square.effect}}}),Fe=e=>(lt("data-v-66444a20"),e=e(),ut(),e),yp={class:"totals"},_p=Fe(()=>_("div",null,"Current Bonuses",-1)),wp=Fe(()=>_("div",{class:"break"},null,-1)),kp={key:0},Sp=Fe(()=>_("td",null,"1st Row Enhancements:",-1)),Cp={key:1},Np=Fe(()=>_("td",null,"2nd Row Enhancements:",-1)),$p={key:2},Ip=Fe(()=>_("td",null,"3rd Row Enhancements:",-1)),qp={key:3},Mp=Fe(()=>_("td",null,"4th Row Enhancements:",-1)),xp={key:4,class:"break"},Tp=Fe(()=>_("td",null,null,-1)),Pp=Fe(()=>_("td",null,null,-1)),Ap=[Tp,Pp],Bp={key:5},Fp=Fe(()=>_("td",null,"Time Speed",-1)),Ep={key:6,class:"break"},Op=Fe(()=>_("td",null,null,-1)),Rp=Fe(()=>_("td",null,null,-1)),Dp=[Op,Rp],Lp={key:7},Vp=Fe(()=>_("td",null,"Loop Build Speed",-1)),jp={key:8},Up=Fe(()=>_("td",null,"Loop Build Cost",-1)),Gp={key:9,class:"break"},zp=Fe(()=>_("td",null,null,-1)),Hp=Fe(()=>_("td",null,null,-1)),Wp=[zp,Hp],Yp={key:10},Kp=Fe(()=>_("td",null,"Skyrmion Cost",-1)),Qp={key:11,class:"break"},Xp=Fe(()=>_("td",null,null,-1)),Zp=Fe(()=>_("td",null,null,-1)),Jp=[Xp,Zp],ef={key:12},tf=Fe(()=>_("td",null,"2nd Loop's Effect",-1)),nf={key:13},sf=Fe(()=>_("td",null,"All Foam Gain",-1)),rf={key:14},of=Fe(()=>_("td",null,"Infinitesimal Foam Gain",-1)),af={key:15},lf=Fe(()=>_("td",null,"Subspatial Foam Gain",-1)),uf={key:16},cf=Fe(()=>_("td",null,"Subplanck Foam Gain",-1)),df={key:17},mf=Fe(()=>_("td",null,"Free Foam Boosts",-1)),pf={key:18,class:"break"},ff=Fe(()=>_("td",null,null,-1)),gf=Fe(()=>_("td",null,null,-1)),bf=[ff,gf],hf={key:19},vf=Fe(()=>_("td",null,"1st Loop's Effect",-1)),yf={key:20},_f=Fe(()=>_("td",null,"Acceleron Cost",-1)),wf={key:21,class:"break"},kf=Fe(()=>_("td",null,null,-1)),Sf=Fe(()=>_("td",null,null,-1)),Cf=[kf,Sf],Nf={key:22},$f=Fe(()=>_("td",null,"Timecube Gain",-1));var If=oe({__name:"EnhancementTotals",setup(e){const n=Se.enhancements,i={counts:{1:0,2:0,3:0,4:0},time:1,loops:{1:0,2:0,buildSpeed:1,buildCost:1},skyrmion:1,fome:{all:1,[S.infinitesimal]:1,[S.subspatial]:1,[S.subplanck]:1,boosts:0},acceleron:1,timecube:1},s={counts:{1:v(()=>0),2:v(()=>t(n.entrenchment.bought)?1:0),3:v(()=>0),4:v(()=>0)},time:v(()=>Oe(n.dilation)),loops:{1:v(()=>Oe(n.acceleration,0)),2:v(()=>Oe(n.expansion,0)),buildSpeed:v(()=>Oe(n.construction)),buildCost:v(()=>Oe(n.development))},skyrmion:v(()=>o.reciprocate(Oe(n.amplification))),fome:{all:v(()=>Oe(n.formation)),[S.infinitesimal]:v(()=>Oe(n.extension)),[S.subspatial]:v(()=>Oe(n.configuration)),[S.subplanck]:v(()=>Oe(n.invention)),boosts:v(()=>Oe(n.entitlement,0))},acceleron:v(()=>new o(Oe(n.contraction)).times(Oe(n.inversion)).times(Oe(n.rotation))),timecube:v(()=>Oe(n.tesselation))},r={counts:v(()=>[[s.counts[1],i.counts[1]],[s.counts[2],i.counts[2]],[s.counts[3],i.counts[3]],[s.counts[4],i.counts[4]]].map(([c,d])=>o.neq(c.value,d)).some(c=>c)),time:v(()=>o.neq(s.time.value,i.time)),loops:v(()=>[[s.loops.buildSpeed,i.loops.buildSpeed],[s.loops.buildCost,i.loops.buildCost]].map(([c,d])=>o.neq(c.value,d)).some(c=>c)),skyrmion:v(()=>o.neq(s.skyrmion.value,i.skyrmion)),fome:v(()=>[[s.loops[2],i.loops[2]],[s.fome.all,i.fome.all],[s.fome[S.infinitesimal],i.fome[S.infinitesimal]],[s.fome[S.subspatial],i.fome[S.subspatial]],[s.fome[S.subplanck],i.fome[S.subplanck]],[s.fome.boosts,i.fome.boosts]].map(([c,d])=>o.neq(c.value,d)).some(c=>c)),acceleron:v(()=>[[s.loops[1],i.loops[1]],[s.acceleron,i.acceleron]].map(([c,d])=>o.neq(c.value,d)).some(c=>c)),timecube:v(()=>o.neq(s.timecube.value,i.timecube))},l={counts:v(()=>r.counts.value&&["time","loops","skyrmion","fome","acceleron","timecube"].some(c=>r[c].value)),time:v(()=>r.time.value&&["loops","skyrmion","fome","acceleron","timecube"].some(c=>r[c].value)),loops:v(()=>r.loops.value&&["skyrmion","fome","acceleron","timecube"].some(c=>r[c].value)),skyrmion:v(()=>r.skyrmion.value&&["fome","acceleron","timecube"].some(c=>r[c].value)),fome:v(()=>r.fome.value&&["acceleron","timecube"].some(c=>r[c].value)),acceleron:v(()=>r.acceleron.value&&["timecube"].some(c=>r[c].value))};return(c,d)=>(k(),x("div",yp,[_p,wp,_("table",null,[t(o).neq(s.counts[1].value,i.counts[1])?(k(),x("tr",kp,[Sp,_("td",null,"+"+Z(t(te)(s.counts[1].value)),1)])):j("",!0),t(o).neq(s.counts[2].value,i.counts[2])?(k(),x("tr",Cp,[Np,_("td",null,"+"+Z(t(te)(s.counts[2].value)),1)])):j("",!0),t(o).neq(s.counts[3].value,i.counts[3])?(k(),x("tr",$p,[Ip,_("td",null,"+"+Z(t(te)(s.counts[3].value)),1)])):j("",!0),t(o).neq(s.counts[4].value,i.counts[4])?(k(),x("tr",qp,[Mp,_("td",null,"+"+Z(t(te)(s.counts[4].value)),1)])):j("",!0),l.counts.value?(k(),x("tr",xp,Ap)):j("",!0),t(o).neq(s.time.value,i.time)?(k(),x("tr",Bp,[Fp,_("td",null,"\xD7"+Z(t(D)(s.time.value)),1)])):j("",!0),l.time.value?(k(),x("tr",Ep,Dp)):j("",!0),t(o).neq(s.loops.buildSpeed.value,i.loops.buildSpeed)?(k(),x("tr",Lp,[Vp,_("td",null,"\xD7"+Z(t(D)(s.loops.buildSpeed.value)),1)])):j("",!0),t(o).neq(s.loops.buildCost.value,i.loops.buildCost)?(k(),x("tr",jp,[Up,_("td",null,"\xD7"+Z(t(mt)(s.loops.buildCost.value)),1)])):j("",!0),l.loops.value?(k(),x("tr",Gp,Wp)):j("",!0),t(o).neq(s.skyrmion.value,i.skyrmion)?(k(),x("tr",Yp,[Kp,_("td",null,"/"+Z(t(te)(s.skyrmion.value)),1)])):j("",!0),l.skyrmion.value?(k(),x("tr",Qp,Jp)):j("",!0),t(o).neq(s.loops[2].value,i.loops[2])?(k(),x("tr",ef,[tf,_("td",null,"+"+Z(t(D)(s.loops[2].value))+" minutes",1)])):j("",!0),t(o).neq(s.fome.all.value,i.fome.all)?(k(),x("tr",nf,[sf,_("td",null,"\xD7"+Z(t(D)(s.fome.all.value)),1)])):j("",!0),t(o).neq(s.fome[t(S).infinitesimal].value,i.fome[t(S).infinitesimal])?(k(),x("tr",rf,[of,_("td",null,"\xD7"+Z(t(D)(s.fome[t(S).infinitesimal].value)),1)])):j("",!0),t(o).neq(s.fome[t(S).subspatial].value,i.fome[t(S).subspatial])?(k(),x("tr",af,[lf,_("td",null,"\xD7"+Z(t(D)(s.fome[t(S).subspatial].value)),1)])):j("",!0),t(o).neq(s.fome[t(S).subplanck].value,i.fome[t(S).subplanck])?(k(),x("tr",uf,[cf,_("td",null,"\xD7"+Z(t(D)(s.fome[t(S).subplanck].value)),1)])):j("",!0),t(o).neq(s.fome.boosts.value,i.fome.boosts)?(k(),x("tr",df,[mf,_("td",null,"+"+Z(t(D)(s.fome.boosts.value,1)),1)])):j("",!0),l.fome.value?(k(),x("tr",pf,bf)):j("",!0),t(o).neq(s.loops[1].value,i.loops[1])?(k(),x("tr",hf,[vf,_("td",null,"+"+Z(t(D)(t(o).times(s.loops[1].value,100),1))+"%",1)])):j("",!0),t(o).neq(s.acceleron.value,i.acceleron)?(k(),x("tr",yf,[_f,_("td",null,"/"+Z(t(D)(s.acceleron.value)),1)])):j("",!0),l.acceleron.value?(k(),x("tr",wf,Cf)):j("",!0),t(o).neq(s.timecube.value,i.timecube)?(k(),x("tr",Nf,[$f,_("td",null,"\xD7"+Z(t(D)(s.timecube.value)),1)])):j("",!0)])]))}});var qf=ge(If,[["__scopeId","data-v-66444a20"]]);const Mf={class:"enhancementRow"},xf=oe({__name:"Enhancements",props:{rows:null},setup(e){const n=e,i=[1,2,3,4].map(s=>({limit:Se.enhancementLimits[s],count:Se.enhancementCounts[s],row:t(n.rows)[s]}));return(s,r)=>(k(!0),x(g,null,Pe(t(i),(l,c)=>(k(),x("div",Mf,[l.row.some(d=>t(ye)(d.visibility))?(k(),se(Qt,{key:0},{default:ae(()=>[_("div",{class:Ie({bought:t(l.count)>=t(l.limit)})},[_("span",null,"Row "+Z(c+1)+": "+Z(t(l.count))+"/"+Z(t(l.limit)),1)],2),(k(!0),x(g,null,Pe(l.row,d=>(k(),x(g,null,[t(ye)(d.visibility)?(k(),se($e(t(ie)(d)),{key:0})):j("",!0)],64))),256))]),_:2},1024)):j("",!0)]))),256))}});var Tf=ge(xf,[["__scopeId","data-v-fb8c8baa"]]);const Yn=e=>(lt("data-v-08c70d22"),e=e(),ut(),e),Pf=Yn(()=>_("span",{class:"material-icons"},"check",-1)),Af=Yn(()=>_("span",{class:"material-icons"},"close",-1)),Bf={key:1,class:"title"},Ff=Yn(()=>_("span",{class:"material-icons"},"content_paste",-1)),Ef=Yn(()=>_("span",{class:"material-icons"},"content_copy",-1)),Of=Yn(()=>_("span",{class:"material-icons"},"edit",-1)),Rf=Yn(()=>_("span",{class:"material-icons"},"delete",-1)),Df={class:"grid"},Lf={class:"row"};var Vf=oe({__name:"Preset",props:{rows:null,preset:null},emits:["export","load","delete","rename"],setup(e,{emit:n}){const i=e,s=Object.fromEntries(Object.entries(i.rows).map(([p,b])=>[p,b.map(f=>i.preset.purchased.includes(f.id))])),r=Object.values(s).map(p=>p.reduce((b,f,h)=>f&&h>b?h:b,0)).reduce(({maxWidth:p,maxHeight:b},f,h)=>({maxWidth:f>p?f:p,maxHeight:f>0?h:b}),{maxWidth:0,maxHeight:0}),l=le(!1),c=le(!1),d=le("");gt(l,()=>{var p;return d.value=(p=i.preset.name)!=null?p:""});function m(){t(d).length>0&&n("rename",t(d)),l.value=!1}return(p,b)=>(k(),se(Qt,{class:"preset",style:Re({"--num-rows":t(r).maxHeight})},{default:ae(()=>[a(dn,null,{default:ae(()=>[l.value?(k(),se(Qt,{key:0},{default:ae(()=>[a(mi,{class:"title",modelValue:d.value,"onUpdate:modelValue":b[0]||(b[0]=f=>d.value=f),onSubmit:m,style:{display:"contents"}},null,8,["modelValue"]),_("button",{onClick:m,class:"button"},[a(je,{display:"Save",direction:t(Ae).Up,class:"info"},{default:ae(()=>[Pf]),_:1},8,["direction"])]),_("button",{onClick:b[1]||(b[1]=f=>l.value=!l.value),class:"button"},[a(je,{display:"Cancel",direction:t(Ae).Up,class:"info"},{default:ae(()=>[Af]),_:1},8,["direction"])])]),_:1})):(k(),x("div",Bf,Z(e.preset.name),1)),a(Qt,null,{default:ae(()=>[c.value?j("",!0):(k(),se(Ti,{key:0,onClick:b[2]||(b[2]=f=>n("export")),class:"button",left:""},{default:ae(()=>[a(je,{display:"Export",direction:t(Ae).Up,class:"info"},{default:ae(()=>[Ff]),_:1},8,["direction"])]),_:1})),c.value?j("",!0):(k(),x("button",{key:1,onClick:b[3]||(b[3]=f=>n("load")),class:"button"},[a(je,{display:"Load",direction:t(Ae).Up,class:"info"},{default:ae(()=>[Ef]),_:1},8,["direction"])])),c.value?j("",!0):(k(),x("button",{key:2,class:"button",onClick:b[4]||(b[4]=f=>l.value=!l.value)},[a(je,{display:"Rename",direction:t(Ae).Up,class:"info"},{default:ae(()=>[Of]),_:1},8,["direction"])])),a(nr,{onClick:b[5]||(b[5]=f=>n("delete")),onConfirmingChanged:b[6]||(b[6]=f=>c.value=f)},{default:ae(()=>[a(je,{display:"Delete",direction:t(Ae).Up,class:"info"},{default:ae(()=>[Rf]),_:1},8,["direction"])]),_:1})]),_:1})]),_:1}),_("div",Df,[(k(!0),x(g,null,Pe(t(r).maxHeight+1,f=>(k(),x("div",Lf,[(k(!0),x(g,null,Pe(t(r).maxWidth+1,h=>(k(),x("div",{class:Ie(["template",{bought:t(s)[f][h-1]}])},null,2))),256))]))),256))])]),_:1},8,["style"]))}});var jf=ge(Vf,[["__scopeId","data-v-08c70d22"]]);const Uf=e=>(lt("data-v-7bb12d0b"),e=e(),ut(),e),Gf={class:"preset-tab"},zf={class:"preset-area"},Hf={class:"presets"},Wf=Uf(()=>_("div",{class:"fade"},null,-1));var Yf=oe({__name:"Presets",props:{enhancements:null,presets:null,nextID:null},setup(e){const n=e,i=le(""),s=le(!1);function r(){n.presets.push({id:t(n.nextID),name:i.value,purchased:Object.values(n.enhancements).flatMap(f=>f).filter(f=>t(f.bought)).map(f=>f.id)}),i.value="",s.value=!1}function l(f){const h=JSON.stringify({name:f.name,purchased:f.purchased}),N=btoa(unescape(encodeURIComponent(h))),y=document.createElement("textarea");y.value=N,document.body.appendChild(y),y.select(),y.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(y)}function c(f){try{const h=decodeURIComponent(escape(atob(f))),N=JSON.parse(h);if(typeof N!="object"||!("name"in N)||typeof N.name!="string"||!("purchased"in N)||typeof N.purchased!="object")return!1;for(const[y,q]of Object.entries(N.purchased))if(isNaN(y)||!isFinite(y)||y<0||typeof q!="string")return!1;return{name:N.name,purchased:N.purchased}}catch{return!1}}function d(){const f=t(s);f!==!1&&(n.presets.push({id:t(n.nextID),...f}),i.value="",s.value=!1)}function m(f){var N;const h=Object.values(n.enhancements).flatMap(y=>y);for(const y of h)y.bought.value=!1;Se.entropy.value=t(Se.maxEntropy);for(const y of f.purchased)(N=h.find(q=>q.id===y))==null||N.purchase()}function p(f){const h=n.presets.map(N=>N.id).indexOf(f.id);h>=0&&n.presets.splice(h,1)}function b(f,h){f.name=h}return(f,h)=>(k(),x("div",Gf,[u(" Enhancement Presets "),a(Qt,{class:"new-preset-area"},{default:ae(()=>[a(mi,{autofocus:!1,"model-value":i.value,"onUpdate:modelValue":h[0]||(h[0]=N=>{i.value=N,s.value=c(N)}),placeholder:"New Preset Name"},null,8,["model-value"]),_("button",{onClick:r,class:Ie(["button",{locked:i.value.length===0}])},"Save",2),_("button",{onClick:d,class:Ie(["button",{locked:s.value===!1}])},"Import",2)]),_:1}),a(Ne),_("div",zf,[_("div",Hf,[(k(!0),x(g,null,Pe(e.presets,N=>(k(),se(jf,{rows:e.enhancements,preset:N,onExport:y=>l(N),onLoad:y=>m(N),onDelete:y=>p(N),onRename:y=>b(N,y)},null,8,["rows","preset","onExport","onLoad","onDelete","onRename"]))),256))]),Wf])]))}});var Kf=ge(Yf,[["__scopeId","data-v-7bb12d0b"]]),Qf=oe({props:{active:{type:re(Boolean),required:!0},maxed:{type:re(Boolean),required:!0},canComplete:{type:re(Boolean),required:!0},display:re(String,Object,Function),requirements:re(Object,Array),visibility:{type:re(Number,Boolean),required:!0},style:re(String,Object,Array),classes:re(Object),completed:{type:re(Boolean),required:!0},canStart:{type:re(Boolean),required:!0},mark:re(Boolean,String),id:{type:String,required:!0},toggle:{type:Function,required:!0}},components:{MarkNode:fi,Node:Cn},setup(e){const{active:n,maxed:i,canComplete:s,display:r,requirements:l}=ot(e),c=v(()=>n.value?s.value?"Finish":"Exit Early":i.value?"Completed":"Start"),d=yt(""),m=v(()=>{const p=Te(n),b=Te(s);return p?b?cd():gs():{}});return qt(()=>{const p=Te(r);if(p==null){d.value="";return}if(Nt(p)){d.value=pe(p);return}const b=pe(p.title||"","h3"),f=pe(p.description,"div"),h=pe(p.goal!=null?p.goal:$(()=>{var q;return Je((q=Te(l))!=null?q:[])}),"h3"),N=pe(p.reward||""),y=pe(p.effect||"");d.value=pe($(()=>a("span",null,[p.title!=null?a("div",null,[a(b,null,null)]):null,a(f,null,null),a("div",null,[a("br",null,null),u("Goal: "),a(h,null,null)]),p.reward!=null?a("div",null,[a("br",null,null),u("Reward: "),a(N,null,null)]):null,p.effect!=null?a("div",null,[u("Currently: "),a(y,null,null)]):null])))}),{buttonText:c,notifyStyle:m,comp:d,Visibility:De,isVisible:ye,isHidden:Ut,unref:t}}});const Xf=["disabled"];function Zf(e,n,i,s,r,l){var m;const c=jt("MarkNode"),d=jt("Node");return e.isVisible(e.visibility)?(k(),x("div",{key:0,style:Re([{visibility:e.isHidden(e.visibility)?"hidden":void 0},e.notifyStyle,(m=e.unref(e.style))!=null?m:{}]),class:Ie({feature:!0,challenge:!0,done:e.unref(e.completed),canStart:e.unref(e.canStart)&&!e.unref(e.maxed),maxed:e.unref(e.maxed),...e.unref(e.classes)})},[_("button",{class:"toggleChallenge",onClick:n[0]||(n[0]=(...p)=>e.toggle&&e.toggle(...p)),disabled:!e.unref(e.canStart)||e.unref(e.maxed)},Z(e.buttonText),9,Xf),e.unref(e.comp)?(k(),se($e(e.unref(e.comp)),{key:0})):j("",!0),a(c,{mark:e.unref(e.mark)},null,8,["mark"]),a(d,{id:e.id},null,8,["id"])],6)):j("",!0)}var Jf=ge(Qf,[["render",Zf],["__scopeId","data-v-73fd263c"]]);const eg=Symbol("Challenge");function tg(e,...n){const i=Me(0),s=Me(!1,!1),r=n.reduce((l,c)=>{var d;return Object.assign(l,(d=c.getPersistentData)==null?void 0:d.call(c))},{});return Xe(l=>{var m,p;const c=e.call(l,l);c.id=Gt("challenge-"),c.type=eg,c[pt]=Jf;for(const b of n)(m=b.preConstruct)==null||m.call(b,c);c.completions=i,c.active=s,Object.assign(c,r),c.completed=v(()=>o.gt(c.completions.value,0)),c.maxed=v(()=>o.gte(c.completions.value,t(c.completionLimit))),c.toggle=function(){var f,h,N,y,q;const b=c;if(b.active.value){if(o.gt(t(b.canComplete),0)&&!b.maxed.value){const T=t(b.canComplete);b.completions.value=o.min(o.add(b.completions.value,T),t(b.completionLimit)),(f=b.onComplete)==null||f.call(b)}b.active.value=!1,(h=b.onExit)==null||h.call(b),(N=b.reset)==null||N.reset()}else t(b.canStart)&&ye(b.visibility)&&!b.maxed.value&&((y=b.reset)==null||y.reset(),b.active.value=!0,(q=b.onEnter)==null||q.call(b))},c.canComplete=v(()=>ui(c.requirements)),c.complete=function(b){var N,y,q;const f=c,h=t(f.canComplete);f.active.value&&o.gt(h,0)&&!f.maxed.value&&(f.completions.value=o.min(o.add(f.completions.value,h),t(f.completionLimit)),(N=f.onComplete)==null||N.call(f),b!==!0&&(f.active.value=!1,(y=f.onExit)==null||y.call(f),(q=f.reset)==null||q.reset()))},Q(c,"visibility"),Ge(c,"visibility",De.Visible),c.mark==null&&(c.mark=v(()=>o.gt(t(c.completionLimit),1)&&!!t(c.maxed))),Q(c,"canStart"),Ge(c,"canStart",!0),Q(c,"completionLimit"),Ge(c,"completionLimit",1),Q(c,"mark"),Q(c,"classes"),Q(c,"style"),Q(c,"display"),c.reset!=null&&$t.on("reset",b=>{b===c.reset&&c.active.value&&c.toggle()});for(const b of n)(p=b.postConstruct)==null||p.call(b,c);const d=n.reduce((b,f)=>{var h;return Object.assign(b,(h=f.getGatheredProps)==null?void 0:h.call(f,c))},{});return c[ft]=function(){const{active:b,maxed:f,canComplete:h,display:N,visibility:y,style:q,classes:T,completed:M,canStart:P,mark:A,id:W,toggle:de,requirements:X}=this;return{active:b,maxed:f,canComplete:h,display:N,visibility:y,style:t(q),classes:T,completed:M,canStart:P,mark:A,id:W,toggle:de,requirements:X,...d}},c})}const Ns=e=>(lt("data-v-35eded6b"),e=e(),ut(),e),ng=Ns(()=>_("span",null,"A dark mirror to reality, spawned deep within the endless void",-1)),ig=["disabled"],sg=Ns(()=>_("h2",null,"Knowledge of the Abyss",-1)),rg=Ns(()=>_("span",{style:{fontWeight:"normal"}},[u(" The Abyss is a twisted version of reality, featuring several unique differences. Entering this alternate reality will pause your progress outside, yet what you do here will remain - and some features may even be brought out, with some effort. "),_("br"),_("br"),u("Abyssal Pion and Spinor upgrades, unlike the versions you are used to, share a singular cost nerf, and are not affected by the automation provided by the Skyrmion upgrades. "),_("br"),_("br"),u("There do seem to be a few more Skyrmion, Pion, and Spinor upgrades available though, maybe those will be of use? ")],-1));var og=oe({__name:"AbyssChallenge",props:{challenge:null},setup(e){const n=e,i=le(!1),s=yt("");return qt(()=>{s.value=pe($(()=>{const r=n.challenge.requirements;return a("div",null,[u("Current Goal: "),a(Et,{resource:r.resource,override:t(r.cost)},null)])}))}),(r,l)=>{var c;return t(ye)(e.challenge.visibility)?(k(),x("div",{key:0,style:Re([{visibility:t(Ut)(e.challenge.visibility)?"hidden":void 0},(c=t(e.challenge.style))!=null?c:{}]),class:Ie(["feature challenge",{done:t(e.challenge.completed),canStart:t(e.challenge.canStart)&&!t(e.challenge.maxed),maxed:t(e.challenge.maxed),...t(e.challenge.classes)}])},[ng,_("button",{class:"toggleChallenge",onClick:l[0]||(l[0]=(...d)=>e.challenge.toggle&&e.challenge.toggle(...d)),disabled:!t(e.challenge.canStart)},Z(`${t(e.challenge.active)?"Exit":"Enter"} the Abyss`),9,ig),_("button",{class:"button",onClick:l[1]||(l[1]=()=>i.value=!0)},"What is the Abyss?"),a(Zt,{"model-value":i.value,"onUpdate:modelValue":l[2]||(l[2]=d=>i.value=d)},{header:ae(()=>[sg]),body:ae(()=>[rg]),_:1},8,["model-value"]),(k(),se($e(t(t(s))),{class:"goal"})),a(Cn,{id:e.challenge.id},null,8,["id"])],6)):j("",!0)}}});var ag=ge(og,[["__scopeId","data-v-35eded6b"]]);const lg=Symbol("Boost");function Ye(e){const n=Me(0);return Xe(i=>{const s=e.call(i,i);return s.id=Gt("boost-"),s.type=lg,s.amount=n,Q(s,"display"),Q(s,"effect"),s.bonus===void 0&&(s.bonus=0),Q(s,"bonus"),s.total=v(()=>o.add(t(s.amount),t(s.bonus))),s})}function he(e,n){return t(C[e].boosts[n].effect)}const ug={class:"pion-container"},cg={class:"pion-grid"},dg=oe({__name:"Pion",setup(e){const n=Le.upgrades,i={alpha:{row:1,col:7},beta:{row:2,col:5},gamma:{row:3,col:7},delta:{row:4,col:5},epsilon:{row:5,col:7},zeta:{row:3,col:3},eta:{row:5,col:3},theta:{row:6,col:5},iota:{row:7,col:7},kappa:{row:4,col:1},lambda:{row:6,col:1},mu:{row:7,col:3},nu:{row:8,col:5},xi:{row:8,col:1},pi:{row:9,col:3},rho:{row:10,col:1}};function s(r){return{"--row":i[r].row,"--col":i[r].col}}return(r,l)=>(k(),x("div",ug,[_("ul",cg,[(k(!0),x(g,null,Pe(t(n),(c,d)=>(k(),x(g,{key:d},[t(c.visibility)!==t(De).None?(k(),x("li",Rt({key:0,class:"pion-upgrade"},r.$attrs,{style:s(d)}),[(k(),se($e(t(ie)(c))))],16)):j("",!0)],64))),128))])]))}});var mg=ge(dg,[["__scopeId","data-v-74fe74b9"]]);function pr(e){e.effect===void 0&&(e.effect=s=>s),e.display.effect===void 0&&(e.display.effect=(s,r)=>`${mt(s)}\xD7${we.showNextValues&&r?` \u2192 ${mt(r)}\xD7`:""}`);let n=[];Array.isArray(e.visibility)?n.push(...e.visibility.map(s=>Ke(s))):e.visibility!=null?n.push(Ke(e.visibility)):n.push(!0);const i=Qe(s=>{var r;return{visibility:()=>{var l;return(l=t(n.filter(c=>ye(c))[0]))!=null?l:!1},requirements:e.requirements,display:e.display.name,effect:()=>e.effect(t(s.totalAmount)),nextEffect:()=>e.effect(o.add(t(s.totalAmount),1)),bonusAmount:(r=e.bonusAmount)!=null?r:0}},Ce,mr);return Hn(i,{direction:Ae.Down,yoffset:"var(--upgrade-width)",display:$(()=>{const s=t(i.bonusAmount);let r;o.gt(s,0)&&(r=a(g,null,[u("+"),te(t(i.bonusAmount))]));const l=e.display.effect(t(i.effect),t(i.nextEffect));return a(g,null,[e.display.description,a("br",null,null),u("Amount: "),te(t(i.amount)),r,a("br",null,null),u("Currently: "),l,a("br",null,null),Je(i.requirements)])})}),i.isHovered=Ni(i),i}const pg={class:"spinor-container"},fg={class:"spinor-grid"},gg=oe({__name:"Spinor",setup(e){const n=xe.upgrades,i={alpha:{row:1,col:1},beta:{row:2,col:3},gamma:{row:3,col:1},delta:{row:4,col:3},epsilon:{row:5,col:1},zeta:{row:3,col:5},eta:{row:5,col:5},theta:{row:6,col:3},iota:{row:7,col:1},kappa:{row:4,col:7},lambda:{row:6,col:7},mu:{row:7,col:5},nu:{row:8,col:3},xi:{row:8,col:7},pi:{row:9,col:5},rho:{row:10,col:7}};function s(r){return{"--row":i[r].row,"--col":i[r].col}}return(r,l)=>(k(),x("div",pg,[_("ul",fg,[(k(!0),x(g,null,Pe(t(n),(c,d)=>(k(),x(g,{key:d},[t(c.visibility)!==t(De).None?(k(),x("li",Rt({key:0,class:"spinor-upgrade"},r.$attrs,{style:s(d)}),[(k(),se($e(t(ie)(c))))],16)):j("",!0)],64))),128))])]))}});var bg=ge(gg,[["__scopeId","data-v-2a58ec3e"]]);const hg="spinor",xe=st(hg,function(){const e="Spinors",n=at(0,{displayName:e,singularName:"Spinor",small:!0}),i=dt(()=>[...F.production,H(()=>({multiplier:Le.upgrades.gamma.effect,enabled:()=>o.gt(t(Le.upgrades.gamma.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03B3 ("),D(t(Le.upgrades.gamma.totalAmount)),u(")")]))})),H(()=>({multiplier:Le.upgrades.mu.effect,enabled:()=>o.gt(t(Le.upgrades.mu.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03BC ("),D(t(Le.upgrades.mu.totalAmount)),u(")")]))}))]),s=v(()=>i.apply(t(F.totalSkyrmions).times(.01)));F.on("preUpdate",h=>{const N=t(V.timeMult).times(h);n.value=N.times(t(s)).plus(n.value)});const r=v(()=>Object.values(m).map(h=>t(h.amount)).reduce((h,N)=>h.plus(N),o.dZero)),l=v(()=>t(r).minus(he(S.subspatial,2))),c=v(()=>{const h=t(me.challenge.active)?t(me.upgradeCount):t(Le.upgradeCount),N=h.times(.2).times(t(Le.upgrades.beta.effect)).plus(1).clampMin(1),y=h.times(.25).times(he(S.quantum,2)).clampMin(0);return N.pow(y)}),d=v(()=>{const h=t(me.challenge.active)?t(me.nextUpgradeCount):t(Le.upgradeCount).plus(1),N=t(Le.upgrades.beta.isHovered)?t(Le.upgrades.beta.nextEffect):t(Le.upgrades.beta.effect),y=h.times(.2).times(N).plus(1).clampMin(1),q=h.times(.25).times(he(S.quantum,2)).clampMin(0);return y.pow(q)}),m=(()=>{const h=f({cost(I){let R=I.pow_base(1.2).times(.1);return I.gt(25)&&(R=I.pow_base(7.9).times(342e-25).times(R)),I.gt(90)&&(R=I.pow_base(19.75).times(208e-106).times(R)),R.times(he(S.infinitesimal,2))},shouldAutobuy:B(F.upgrades.alpha.bought),display:{name:"\u03B1",description:a(g,null,[u("Reduce the cost of "),F.skyrmions.displayName,u(" by 33%")]),effect:(I,R)=>`/${D(I)}${we.showNextValues&&R?` \u2192 /${D(R)}`:""}`},effect:I=>o.pow(1.5,I),bonusAmount:C[S.protoversal].boosts[2].effect}),N=f({cost(I){let R=I.pow_base(1.3).times(.1);return I.gt(15)&&(R=I.pow_base(7.7).times(6e-14).times(R)),I.gt(45)&&(R=I.pow_base(29.25).times(1e-39).times(R)),R.plus(.9)},shouldAutobuy:B(F.upgrades.beta.bought),display:{name:"\u03B2",description:a(g,null,[u("Reduce the nerf to Pion upgrade cost by 10%")]),effect:(I,R)=>`Pion upgrade cost nerf reduced to ${mt(o.times(I,100))}%${we.showNextValues&&R?` \u2192 ${mt(o.times(R,100))}%`:""}`},effect:I=>o.pow(.9,I),bonusAmount:C[S.protoversal].boosts[3].effect}),y=f({cost(I){let R=I.pow_base(1.7).times(.1);return I.gt(10)&&(R=I.pow_base(7.35).times(268e-11).times(R)),I.gt(60)&&(R=I.pow_base(29.4).times(89e-75).times(R)),R.plus(4.9).times(he(S.infinitesimal,5))},shouldAutobuy:B(F.upgrades.gamma.bought),display:{name:"\u03B3",description:a(g,null,[u("Gain 75% more Pions")])},effect:I=>o.pow(1.75,I),bonusAmount:C[S.protoversal].boosts[4].effect}),q=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.protoversal].boosts[1].total),0)],cost(I){let R=I.pow_base(6).times(30);return I.gt(60)&&(R=I.pow_base(37.5).times(27e-72).times(R)),R},shouldAutobuy:B(F.upgrades.delta.bought),display:{name:"\u03B4",description:a(g,null,[u("Gain 70% more Protoversal Boost 1 effect")])},effect:I=>o.pow(1.7,I),bonusAmount:C[S.subplanck].boosts[2].effect}),T=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.infinitesimal].upgrades.reform.amount),0)],cost(I){let R=I.pow_base(5).times(50);return I.gt(60)&&(R=I.pow_base(28.8).times(177e-67).times(R)),R},shouldAutobuy:B(F.upgrades.epsilon.bought),display:{name:"\u03B5",description:a(g,null,[u("Increase Infinitesimal Foam gain by 50% per order of magnitude of Protoversal Foam")])},effect:I=>o.max(t(C[S.protoversal].amount),0).plus(1).log10().times(I).times(.5).plus(1),bonusAmount:()=>o.add(he(S.subplanck,3),t(Le.upgrades.eta.effect))}),M=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.subspatial].upgrades.reform.amount),0)],cost(I){let R=I.pow_base(5.5).times(5e3);return I.gt(60)&&(R=I.pow_base(35.64).times(1e-68).times(R)),R},shouldAutobuy:B(F.upgrades.zeta.bought),display:{name:"\u03B6",description:a(g,null,[u("Increase Pion and Spinor gain by 30% per order of magnitude of Subspatial Foam")])},effect:I=>o.max(t(C[S.subspatial].amount),0).plus(1).log10().times(I).times(.3).plus(1),bonusAmount:C[S.subplanck].boosts[4].effect}),P=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.protoversal].upgrades.reform.amount),1)],cost(I){let R=I.pow_base(5).times(3e5);return I.gt(60)&&(R=I.pow_base(28.8).times(177e-66).times(R)),R},shouldAutobuy:B(F.upgrades.eta.bought),display:{name:"\u03B7",description:a(g,null,[u("Gain 120% increased Foam generation")])},effect:I=>o.times(I,1.2).plus(1),bonusAmount:C[S.subplanck].boosts[5].effect}),A=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.subplanck].upgrades.reform.amount),0)],cost(I){let R=I.pow_base(6.5).times(7e5);return I.gt(45)&&(R=I.pow_base(26).times(545e-36).times(R)),R},shouldAutobuy:B(F.upgrades.theta.bought),display:{name:"\u03B8",description:a(g,null,[u("Increase Subspatial Foam gain by 30% per order of magnitude of Protoversal and Infinitesimal Foam")])},effect:I=>o.add(o.max(t(C[S.protoversal].amount),0).plus(1).log10(),o.max(t(C[S.infinitesimal].amount),0).plus(1).log10()).times(I).times(.3).plus(1),bonusAmount:C[S.quantum].boosts[4].effect}),W=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.protoversal].upgrades.reform.amount),2)],cost(I){let R=I.pow_base(7.5).times(4e8);return I.gt(45)&&(R=I.pow_base(30).times(595e-50).times(R)),R},shouldAutobuy:B(F.upgrades.iota.bought),display:{name:"\u03B9",description:a(g,null,[u("Your Pions increase Infinitesimal Foam generation by 2% per order of magnitude")])},effect:I=>o.max(t(Le.pions),0).plus(1).log10().times(I).times(.02).plus(1),bonusAmount:C[S.quantum].boosts[4].effect}),de=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.infinitesimal].upgrades.reform.amount),1)],cost(I){let R=I.pow_base(7).times(5e9);return I.gt(45)&&(R=I.pow_base(26).times(145e-45).times(R)),R},shouldAutobuy:B(F.upgrades.kappa.bought),display:{name:"\u03BA",description:a(g,null,[u("Increase Subplanck Boost 1 effect by 40% per order of magnitude of Subplanck Foam")])},effect:I=>o.max(t(C[S.subplanck].amount),0).plus(1).log10().times(I).times(.4).plus(1),bonusAmount:C[S.quantum].boosts[4].effect}),X=f({visibility:[()=>t(me.challenge.active),()=>t(V.upgrades.skyrmion.bought)],cost(I){let R=I.pow_base(5).times(7e10);return I.gt(45)&&(R=I.pow_base(20).times(1e-35).times(R)),R},shouldAutobuy:B(F.upgrades.lambda.bought),display:{name:"\u03BB",description:a(g,null,[u("ln(Best Accelerons) increases Pion and Spinor gain")])},effect:I=>o.max(t(V.bestAccelerons),0).plus(1).ln().times(I).plus(1)}),U=f({visibility:[()=>t(me.challenge.active),()=>t(ce.upgrades.skyrmionUpgrades.bought)],cost(I){let R=I.pow_base(5).times(7e10);return I.gt(45)&&(R=I.pow_base(20).times(1e-35).times(R)),R},shouldAutobuy:B(F.upgrades.mu.bought),display:{name:"\u03BC",description:a(g,null,[u("Gain 2% more Pions per order of magnitude"),a("sup",null,[u("2")]),u(" of stored Inflatons")])},effect:I=>o.clamp(t(ce.inflatons),1,t(ce.buildings.buildings.storage.effect)).plus(9).log10().log10().times(.02).plus(1).pow(I)}),Be=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.nu.bought),cost(I){return I.pow_base(150).times(1e50)},shouldAutobuy:B(F.upgrades.nu.bought),display:{name:"\u03BD",description:a(g,null,[u("Add "),mt(25e-5),u(" to a repeatable research cost divider per order of magnitude of Spinors")])},effect:I=>o.clampMin(t(n),0).plus(1).log10().times(I).times(25e-5).plus(1)}),E=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.xi.bought),cost(I){return I.pow_base(135).times(1e50)},shouldAutobuy:B(F.upgrades.xi.bought),display:{name:"\u03BE",description:a(g,null,[u("Decrease the magnitude of the Entangled String Inflaton requirement by 5%")])},effect:I=>o.pow(.95,I)}),G=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.pi.bought),cost(I){return I.pow_base(160).times(1e50)},shouldAutobuy:B(F.upgrades.pi.bought),display:{name:"\u03C0",description:a(g,null,[u("Increase Pion and Spinor gain by 0.25% per total "),Se.entropy.displayName])},effect:I=>o.times(I,.0025).times(t(Se.maxEntropy)).plus(1)}),ee=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.rho.bought),cost(I){return I.pow_base(175).times(1e50)},shouldAutobuy:B(F.upgrades.rho.bought),display:{name:"\u03C1",description:a(g,null,[u("Increase effective Subspace building count by 0.1%")]),effect:(I,R)=>`${D(o.times(I,100),1)}%${R?` \u2192 ${D(o.times(R,100),1)}%`:""}`},effect:I=>o.times(I,.001)});return{alpha:h,beta:N,gamma:y,delta:q,epsilon:T,zeta:M,eta:P,theta:A,iota:W,kappa:de,lambda:X,mu:U,nu:Be,xi:E,pi:G,rho:ee}})(),p=Tt("Spinor Modifiers",()=>[{title:n.displayName,modifier:i,base:()=>t(F.totalSkyrmions).times(.01),baseText:$(()=>a(g,null,[u("["),F.name,u("] Total "),F.skyrmions.displayName]))}]),b=v(()=>we.showNextValues?Object.values(Le.upgrades).some(h=>t(h.isHovered))?!0:t(me.challenge.active)?Object.values(m).some(h=>t(h.isHovered)):!1:!1);return{name:e,spinors:n,upgradeCount:l,upgrades:m,display:$(()=>a("div",{class:"table",style:"width: 600px; align-items: flex-start"},[a("div",{class:"col",style:"align-items: flex-start"},[a("div",null,[u("You have "),a(Vn,{resource:n,color:"var(--feature-background)",tag:"h3",includeName:!0},null),u(" (+"),Ln(n,s.value),u("/s)"),ie(p)]),a("div",{style:"font-size: 12px"},[u("Your Pion upgrades are increasing Spinor upgrade costs by "),mt(t(c).minus(1).times(100)),u("%"),t(b)?a(g,null,[u(" \u2192 "),mt(t(d).minus(1).times(100)),u("%")]):void 0]),a(Ne,null,null),a(bg,null,null)])]))};function f(h){const{visibility:N,cost:y,shouldAutobuy:q,display:T,effect:M,bonusAmount:P}=h,A=pr({visibility:N,display:T,bonusAmount:P,effect:M,requirements:K(()=>({resource:B(n),cost:()=>y(o.sub(t(A.amount),he(S.subplanck,5))).times(t(c)),requiresPay:()=>!t(q),canMaximize:!1}))});return F.on("update",()=>{t(me.challenge.active)||t(q)&&Vt(A.requirements)&&A.onClick()}),A}}),vg="pion",Le=st(vg,function(){const e="Pions",n=at(0,{displayName:e,singularName:"Pion",small:!0}),i=dt(()=>[...F.production,H(()=>({multiplier:xe.upgrades.gamma.effect,enabled:()=>o.gt(t(xe.upgrades.gamma.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Spinor Upgrade \u03B3 ("),D(t(xe.upgrades.gamma.totalAmount)),u(")")]))})),H(()=>({multiplier:xe.upgrades.mu.effect,enabled:()=>o.gt(t(xe.upgrades.mu.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Spinor Upgrade \u03BC ("),D(t(xe.upgrades.mu.totalAmount)),u(")")]))}))]),s=v(()=>i.apply(t(F.totalSkyrmions).times(.01)));F.on("preUpdate",h=>{const N=t(V.timeMult).times(h);n.value=N.times(t(s)).plus(n.value)});const r=v(()=>Object.values(m).map(h=>t(h.amount)).reduce((h,N)=>h.plus(N),o.dZero)),l=v(()=>t(r).minus(he(S.subspatial,2))),c=v(()=>{const h=t(me.challenge.active)?t(me.upgradeCount):t(xe.upgradeCount),N=h.times(.2).times(t(xe.upgrades.beta.effect)).plus(1).clampMin(1),y=h.times(.25).times(he(S.quantum,2)).clampMin(0);return N.pow(y)}),d=v(()=>{const h=t(me.challenge.active)?t(me.nextUpgradeCount):t(xe.upgradeCount).plus(1),N=t(xe.upgrades.beta.isHovered)?t(xe.upgrades.beta.nextEffect):t(xe.upgrades.beta.effect),y=h.times(.2).times(N).plus(1).clampMin(1),q=h.times(.25).times(he(S.quantum,2)).clampMin(0);return y.pow(q)}),m=(()=>{const h=f({cost(I){let R=I.pow_base(1.2).times(.1);return I.gt(25)&&(R=I.pow_base(7.9).times(342e-25).times(R)),I.gt(90)&&(R=I.pow_base(19.75).times(208e-106).times(R)),R.times(he(S.infinitesimal,3))},shouldAutobuy:B(F.upgrades.alpha.bought),display:{name:"\u03B1",description:a(g,null,[u("Gain 50% more Pions and Spinors")])},effect:I=>o.pow(1.5,I),bonusAmount:C[S.protoversal].boosts[2].effect}),N=f({cost(I){let R=I.pow_base(1.3).times(.1);return I.gt(15)&&(R=I.pow_base(7.7).times(6e-14).times(R)),I.gt(45)&&(R=I.pow_base(29.25).times(1e-39).times(R)),R.plus(.9)},shouldAutobuy:B(F.upgrades.beta.bought),display:{name:"\u03B2",description:a(g,null,[u("Reduce the nerf to Spinor upgrade cost by 10%")]),effect:(I,R)=>`Spinor upgrade cost nerf reduced to ${mt(o.times(I,100))}%${we.showNextValues&&R?` \u2192 ${mt(o.times(R,100))}%`:""}`},effect:I=>o.pow(.9,I),bonusAmount:C[S.protoversal].boosts[3].effect}),y=f({cost(I){let R=I.pow_base(1.7).times(.1);return I.gt(10)&&(R=I.pow_base(7.35).times(268e-11).times(R)),I.gt(60)&&(R=I.pow_base(29.4).times(89e-75).times(R)),R.plus(4.9).times(he(S.infinitesimal,5))},shouldAutobuy:B(F.upgrades.gamma.bought),display:{name:"\u03B3",description:a(g,null,[u("Gain 75% more Spinors")])},effect:I=>o.pow(1.75,I),bonusAmount:C[S.protoversal].boosts[4].effect}),q=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.protoversal].boosts[1].total),0)],cost(I){let R=I.pow_base(6).times(30);return I.gt(60)&&(R=I.pow_base(37.5).times(27e-72).times(R)),R},shouldAutobuy:B(F.upgrades.delta.bought),display:{name:"\u03B4",description:a(g,null,[u("Gain 70% more Protoversal Foam from Skyrmions")])},effect:I=>o.pow(1.7,I),bonusAmount:C[S.subplanck].boosts[2].effect}),T=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.infinitesimal].upgrades.reform.amount),0)],cost(I){let R=I.pow_base(5).times(50);return I.gt(60)&&(R=I.pow_base(28.8).times(177e-67).times(R)),R},shouldAutobuy:B(F.upgrades.epsilon.bought),display:{name:"\u03B5",description:a(g,null,[u("Increase Protoversal Foam gain by 50% per order of magnitude of Infinitesimal Foam")])},effect:I=>o.max(t(C[S.infinitesimal].amount),0).plus(1).log10().times(I).times(.5).plus(1),bonusAmount:C[S.subplanck].boosts[3].effect}),M=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.subspatial].upgrades.reform.amount),0)],cost(I){let R=I.pow_base(5.5).times(5e3);return I.gt(60)&&(R=I.pow_base(35.64).times(1e-68).times(R)),R},shouldAutobuy:B(F.upgrades.zeta.bought),display:{name:"\u03B6",description:a(g,null,[u("Increase Subspatial Foam gain by 5% per Skyrmion")])},effect:I=>t(F.totalSkyrmions).times(I).times(.05).plus(1),bonusAmount:C[S.subplanck].boosts[4].effect}),P=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.protoversal].upgrades.reform.amount),1)],cost(I){let R=I.pow_base(5).times(3e5);return I.gt(60)&&(R=I.pow_base(28.8).times(177e-66).times(R)),R},shouldAutobuy:B(F.upgrades.eta.bought),display:{name:"\u03B7",description:a(g,null,[u("Gain a free level of "),a("b",null,[u("Spinor Upgrade \u03B5")])]),effect:(I,R)=>`${D(I)}${we.showNextValues&&R?` \u2192 ${D(R)}`:""} free levels`},effect:I=>I,bonusAmount:C[S.subplanck].boosts[5].effect}),A=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.subplanck].upgrades.reform.amount),0)],cost(I){let R=I.pow_base(6.5).times(7e5);return I.gt(45)&&(R=I.pow_base(26).times(545e-36).times(R)),R},shouldAutobuy:B(F.upgrades.theta.bought),display:{name:"\u03B8",description:a(g,null,[u("Increase Protoversal Foam gain by 100% per order of magnitude of Subspatial Foam")])},effect:I=>o.max(t(C[S.subspatial].amount),0).plus(1).log10().times(I).plus(1),bonusAmount:C[S.quantum].boosts[4].effect}),W=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.protoversal].upgrades.reform.amount),2)],cost(I){let R=I.pow_base(7.5).times(4e8);return I.gt(45)&&(R=I.pow_base(30).times(595e-50).times(R)),R},shouldAutobuy:B(F.upgrades.iota.bought),display:{name:"\u03B9",description:a(g,null,[u("Your Spinors increase Infinitesimal Foam generation by 2% per order of magnitude")])},effect:I=>o.max(t(xe.spinors),0).plus(1).log10().times(I).times(.02).plus(1),bonusAmount:C[S.quantum].boosts[4].effect}),de=f({visibility:[()=>t(me.challenge.active),()=>t(ue.branchOrder)!=="",()=>o.gt(t(C[S.infinitesimal].upgrades.reform.amount),1)],cost(I){let R=I.pow_base(7).times(5e9);return I.gt(45)&&(R=I.pow_base(26).times(145e-45).times(R)),R},shouldAutobuy:B(F.upgrades.kappa.bought),display:{name:"\u03BA",description:a(g,null,[u("Protoversal Boost 1 levels each increase other Foam Boost 1 effects by 30%")])},effect:I=>o.times(t(C[S.protoversal].boosts[1].total),I).times(.3).plus(1),bonusAmount:C[S.quantum].boosts[4].effect}),X=f({visibility:[()=>t(me.challenge.active),()=>t(V.upgrades.skyrmion.bought)],cost(I){let R=I.lt(0)?I.pow_base(5).times(700):I.pow(1.1).pow_base(5).times(700);return I.gt(45)&&(R=I.pow(1.1).pow_base(20).times(7e-17).times(R)),R},shouldAutobuy:B(F.upgrades.lambda.bought),display:{name:"\u03BB",description:a(g,null,[u("Double the Infinitesimal Foam Boost 1 effect")])},effect:I=>o.pow(2,I)}),U=f({visibility:[()=>t(me.challenge.active),()=>t(ce.upgrades.skyrmionUpgrades.bought)],cost(I){let R=I.pow_base(5).times(7e10);return I.gt(45)&&(R=I.pow_base(20).times(1e-35).times(R)),R},shouldAutobuy:B(F.upgrades.mu.bought),display:{name:"\u03BC",description:a(g,null,[u("Gain 2% more Spinors per order of magnitude"),a("sup",null,[u("2")]),u(" of stored Inflatons")])},effect:I=>o.clamp(t(ce.inflatons),1,t(ce.buildings.buildings.storage.effect)).plus(9).log10().log10().times(.02).plus(1).pow(I)}),Be=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.nu.bought),cost(I){return I.pow_base(150).times(1e50)},shouldAutobuy:B(F.upgrades.nu.bought),display:{name:"\u03BD",description:a(g,null,[u("Increase research speed by "),mt(25e-5),u("\xD7 per order of magnitude of Pions")])},effect:I=>o.clampMin(t(n),0).plus(1).log10().times(I).times(25e-5).plus(1)}),E=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.xi.bought),cost(I){return I.pow_base(135).times(1e50)},shouldAutobuy:B(F.upgrades.xi.bought),display:{name:"\u03BE",description:a(g,null,[u("Decrease the Entangled String Acceleron requirement by 5%")])},effect:I=>o.pow(.95,I)}),G=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.pi.bought),cost(I){return I.pow_base(160).times(1e50)},shouldAutobuy:B(F.upgrades.pi.bought),display:{name:"\u03C0",description:a(g,null,[u("Increase Entropic Loop construction speed by 5% per completed Entropic Loop")])},effect:I=>o.times(I,.05).times(t(V.loops.numBuiltLoops))}),ee=f({visibility:()=>t(me.challenge.active)||t(F.upgrades.rho.bought),cost(I){return I.pow_base(175).times(1e50)},shouldAutobuy:B(F.upgrades.rho.bought),display:{name:"\u03C1",description:a(g,null,[u("Decrease Subspace building cost scaling by 1.1x")])},effect:I=>o.pow(1.1,I)});return{alpha:h,beta:N,gamma:y,delta:q,epsilon:T,zeta:M,eta:P,theta:A,iota:W,kappa:de,lambda:X,mu:U,nu:Be,xi:E,pi:G,rho:ee}})(),p=Tt("Pion Modifiers",()=>[{title:n.displayName,modifier:i,base:()=>t(F.totalSkyrmions).times(.01),baseText:$(()=>a(g,null,[u("["),F.name,u("] Total "),F.skyrmions.displayName]))}]),b=v(()=>we.showNextValues?Object.values(xe.upgrades).some(h=>t(h.isHovered))?!0:t(me.challenge.active)?Object.values(m).some(h=>t(h.isHovered)):!1:!1);return{name:e,pions:n,upgradeCount:l,upgrades:m,display:$(()=>a("div",{class:"table",style:"width: 600px; align-items: flex-end"},[a("div",{class:"col",style:"align-items: flex-end"},[a("div",null,[u("You have "),a(Vn,{resource:n,color:"var(--feature-background)",tag:"h3",includeName:!0},null),u(" (+"),Ln(n,s.value),u("/s)"),ie(p)]),a("div",{style:"font-size: 12px"},[u("Your Spinor upgrades are increasing Pion upgrade costs by "),mt(t(c).minus(1).times(100)),u("%"),t(b)?a(g,null,[u(" \u2192 "),mt(t(d).minus(1).times(100)),u("%")]):void 0]),a(Ne,null,null),a(mg,null,null)])]))};function f(h){const{visibility:N,cost:y,shouldAutobuy:q,display:T,effect:M,bonusAmount:P}=h,A=pr({visibility:N,display:T,bonusAmount:P,effect:M,requirements:K(()=>({resource:B(n),cost:()=>y(o.sub(t(A.amount),he(S.subspatial,5))).times(t(c)),requiresPay:()=>!t(q),canMaximize:!1}))});return F.on("update",()=>{t(me.challenge.active)||t(q)&&Vt(A.requirements)&&A.onClick()}),A}}),yg="abyss",me=st(yg,function(){const e={"--feature-background":"#ff0000","--bought":"#971a20"},n=tg(c=>({requirements:K(()=>({cost:()=>o.add(t(c.completions),1),resource:r,requiresPay:!1})),completionLimit:4,onEnter(){Xi(Ct,l),o.lt(t(C.protoversal.upgrades.reform.amount),1)&&(C.protoversal.upgrades.reform.amount.value=1)},onExit(){Xi(Ct,l),o.lt(t(C.protoversal.upgrades.reform.amount),1)&&(C.protoversal.upgrades.reform.amount.value=1)}})),i=v(()=>o.add(t(Le.upgradeCount),t(xe.upgradeCount)).times(.75)),s=v(()=>o.add(t(Le.upgradeCount),t(xe.upgradeCount)).plus(1).times(.75)),r=at(v(()=>[F.upgrades.nu,F.upgrades.xi,F.upgrades.pi,F.upgrades.rho].filter(c=>t(c.bought)).length),{displayName:"Abyssal Skyrmion Upgrades",singularName:"Abyssal Skyrmion Upgrade"});gt(r,c=>n.completions.value=o.max(t(n.completions),c));const l=(()=>({skyrmion:{conversion:{amount:Me(1)},pion:_t(F.pion),spinor:_t(F.spinor)},fome:{protoversal:_t(C.protoversal),infinitesimal:_t(C.infinitesimal),subspatial:_t(C.subspatial),subplanck:_t(C.subplanck),quantum:_t(C.quantum)},acceleron:{accelerons:_t(V.accelerons),bestAccelerons:_t(V.bestAccelerons),totalAccelerons:_t(V.totalAccelerons),entropy:_t(V.entropy),loops:_t(V.loops),upgrades:_t(V.upgrades)},timecube:_t(Y),inflaton:_t(ce)}))();return{theme:e,challenge:n,upgradeCount:i,nextUpgradeCount:s,abyssUpgradeCount:r,swapData:l,display:$(()=>a(g,null,[a(ag,{challenge:n},null)]))}}),_g=e=>(lt("data-v-7a7d0f09"),e=e(),ut(),e),wg=_g(()=>_("div",null,"Hover for Current Effects",-1));var kg=oe({__name:"LoopDescriptions",props:{loops:null},setup(e){const n=e,i=v(()=>n.loops.filter(r=>t(r.built)).map(r=>Bt(t(r.display).description))),s=$(()=>Yi(t(i),a(g,null,[a("br",null,null)])));return(r,l)=>t(t(i)).length>0?(k(),se(je,{key:0,display:t(s),direction:t(Ae).Up},{default:ae(()=>[wg]),_:1},8,["display","direction"])):j("",!0)}});var Sg=ge(kg,[["__scopeId","data-v-7a7d0f09"]]);const Cg=["stroke-width","cx","cy","r"],Ng=["stroke","stroke-width","stroke-dasharray","cx","cy","r"],fr=oe({__name:"Loop",props:{color:null,width:null,radius:null,offset:null,angle:null},setup(e){const n=e,i=v(()=>n.radius*Math.PI*2),s=v(()=>t(i)*n.angle/360),r=v(()=>n.radius+n.width/2),l=v(()=>`${t(s)}, ${t(i)}`),c=v(()=>`rotate(${n.offset}deg)`);return(d,m)=>(k(),x(g,null,[_("circle",{stroke:"#242526","stroke-width":e.width/2,cx:t(r),cy:t(r),r:e.radius},null,8,Cg),e.angle>0?(k(),x("circle",{key:0,stroke:e.color,"stroke-width":e.width,"stroke-dasharray":t(l),cx:t(r),cy:t(r),r:e.radius,"stroke-linecap":"round",style:Re({transitionDuration:"0s",transform:t(c),transformOrigin:`${t(r)}px ${t(r)}px`})},null,12,Ng)):j("",!0)],64))}});const $g=["transform"],Ig=oe({__name:"Loops",props:{radius:null,loops:null,buildButton:null},setup(e){const n=e,i=n.radius*2,s=n.loops.map((p,b,f)=>b===f.length-1?v(()=>ye(p.visibility)?n.radius-t(p.display).width/2:n.radius):v(()=>ye(p.visibility)?t(s[b+1])-t(f[b+1].display).width/2-t(p.display).width/2:t(s[b+1]))),r=n.loops.map((p,b,f)=>b===f.length-1?v(()=>0):v(()=>{const h=f[b],N=f[b+1],y=t(r[b+1]),q=ye(N.visibility)?t(N.display).width/2:0,T=ye(h.visibility)?t(h.display).width/2:0;return y+q+T})),l=n.loops.map(p=>v(()=>t(p.built)?o.div(t(p.triggerProgress),t(p.triggerRequirement)):o.div(t(p.buildProgress),t(p.buildRequirement)))),c=n.loops.map(p=>v(()=>o.times(t(V.time),t(V.timeMult)).div(t(p.triggerRequirement)).toNumber()%360)),d=n.loops.map((p,b)=>v(()=>t(l[b]).times(360).toNumber()%360)),m=n.loops.map((p,b)=>({id:p.id,visibility:p.visibility,color:v(()=>t(t(p.display).color)),width:v(()=>t(p.display).width),radius:s[b],offset:c[b],angle:d[b],translation:v(()=>{const f=t(r[b]);return`translate(${f},${f})`})}));return(p,b)=>(k(),x("div",{class:"loop-container",style:Re({width:`${i}px`,height:`${i}px`})},[(k(),x("svg",{height:i,width:i},[(k(!0),x(g,null,Pe(t(m).filter(f=>t(ye)(f.visibility)).reverse(),f=>(k(),x("g",{key:f.id,fill:"none",transform:t(f.translation)},[t(ye)(f.visibility)&&!t(Ut)(f.visibility)?(k(),se(fr,{key:0,color:t(f.color),width:t(f.width),radius:t(f.radius),offset:t(f.offset),angle:t(f.angle)},null,8,["color","width","radius","offset","angle"])):j("",!0)],8,$g))),128))])),e.buildButton?(k(),se($e(t(ie)(t(e.buildButton))),{key:0})):j("",!0)],4))}}),qg=Symbol("Loop");function Bn(e,...n){const i=Me(0),s=Me(0),r=Me(!1),l=n.reduce((c,d)=>{var m;return Object.assign(c,(m=d.getPersistentData)==null?void 0:m.call(d))},{});return Xe(c=>{var p,b;const d=e.call(c,c);d.id=Gt("loop-"),d.type=qg,d[pt]=fr;for(const f of n)(p=f.preConstruct)==null||p.call(f,d);d.triggerProgress=i,d.buildProgress=s,d.built=r,Object.assign(d,l),gt(d.buildProgress,f=>{o.gte(f,t(d.buildRequirement))&&(r.value=!0)}),Q(d,"visibility"),Q(d,"buildRequirement"),Q(d,"triggerRequirement"),Q(d,"display"),Q(d,"effect");for(const f of n)(b=f.postConstruct)==null||b.call(f,d);const m=n.reduce((f,h)=>{var N;return Object.assign(f,(N=h.getGatheredProps)==null?void 0:N.call(h,d))},{});return d[ft]=function(){const{visibility:f,display:h,buildProgress:N,buildRequirement:y,built:q,triggerProgress:T,triggerRequirement:M}=this;return{visibility:f,display:h,buildProgress:N,buildRequirement:y,built:q,triggerProgress:T,triggerRequirement:M,...m}},d})}const Vi={getPersistentData(){return{value:Me(0)}},getGatheredProps(e){return{value:e.value}}},Mg="loops",Ue=st(Mg,function(){const e=Me(!1),n=ct(()=>({visibility:B(V.upgrades.superstructures.bought),canClick(){return t(b)!==void 0},onClick(){e.value=!t(e)},display:$(()=>a("h3",null,[t(e)?"Halt":"Begin",a("br",null,null),u("Construction")])),style(){return{borderRadius:"50%",borderColor:t(this.canClick)?"var(--feature-background)":"var(--locked)",backgroundColor:"var(--transparent)",color:t(this.canClick)?"var(--feature-background)":"var(--locked)"}}})),i=dt(()=>[H(()=>({multiplier:Se.enhancements.construction.effect,enabled:B(Se.enhancements.construction.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Entropic Construction")]))})),H(()=>({multiplier:Y.upgrades.ten.effect,enabled:B(Y.upgrades.ten.bought),description:$(()=>a(g,null,[u("["),Y.name,u("] Ten")]))})),H(()=>({multiplier:F.pion.upgrades.pi.effect,enabled:()=>o.gt(t(F.pion.upgrades.pi.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03C0 ("),D(t(F.pion.upgrades.pi.totalAmount)),u(")")]))})),H(()=>({multiplier:Y.getTimesquareEffect(z.RIGHT),enabled:()=>o.gt(t(Y.timesquares.squares[z.RIGHT].square.amount),0),description:$(()=>a(g,null,[u("["),Y.name,u("] Right Time Squares ("),te(t(Y.timesquares.squares[z.RIGHT].square.amount)),u(")")]))}))]),s=v(()=>i.apply(t(V.timeMult))),r=dt(()=>[H(()=>({multiplier:Se.enhancements.development.effect,enabled:B(Se.enhancements.development.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Entropic Development")])),smallerIsBetter:!0}))]),l=v(()=>r.apply(1)),c=v(()=>{const y=t(b);return y===void 0?o.dZero:o.minus(t(y.buildRequirement),t(y.buildProgress))}),d=v(()=>t(c).times(t(l)));V.on("update",y=>{if(!t(e))return;const q=t(b);if(q===void 0){e.value=!1;return}const T=t(c),M=o.div(t(V.accelerons),t(l)),P=o.times(t(s),y).clampMax(T).clampMax(M);q.buildProgress.value=P.plus(t(q.buildProgress)).clampMax(t(q.buildRequirement)),V.accelerons.value=o.subtract(t(V.accelerons),P.times(t(l))).clampMin(0),t(q.built)&&(e.value=!1)}),V.on("preUpdate",y=>{if(t(e))return;const q=t(V.timeMult).times(y);for(const T of Object.values(m).filter(M=>t(M.built))){T.triggerProgress.value=q.plus(t(T.triggerProgress));const M=o.divide(t(T.triggerProgress),t(T.triggerRequirement)).floor();M.gte(1)&&(T.triggerProgress.value=o.sub(t(T.triggerProgress),M.times(t(T.triggerRequirement))),T.trigger(M))}});const m=(()=>{const y=Bn(W=>({visibility:B(V.upgrades.superstructures.bought),buildRequirement:60,triggerRequirement:1,display:{color:v(()=>t(me.challenge.active)?"var(--feature-background)":V.theme["--feature-background"]),width:10,description:$(()=>a(g,null,[u("Every second, gain "),a("span",{style:{color:t(t(W.display).color)}},[mt(t(W.effect).times(100),1),u("%")]),u(" of your Acceleron gain. Currently: "),a("span",{style:{color:t(t(W.display).color)}},[D(o.times(t(V.conversion.currentGain),t(V.timeMult)).times(t(W.effect)).div(t(W.triggerRequirement)))]),u(" Accelerons/s")]))},effect(){return o.add(.001,Oe(Se.enhancements.acceleration,0)).div(t(ze.nerfs[z.RIGHT])).times(t(ze.buffs[z.RIGHT]))},trigger(de){let X=new o(t(V.conversion.currentGain));X=X.times(t(W.effect)),X=X.times(de),t(Y.upgrades.tempo.bought)&&(X=X.clampMin(1)),V.accelerons.value=o.add(t(V.accelerons),X)}})),q=Bn(W=>({visibility(){return t(W.built)||t(y.built)},buildRequirement:360,triggerRequirement:60,display:()=>({color:v(()=>t(me.challenge.active)?"var(--feature-background)":F.theme["--feature-background"]),width:10,description:$(()=>a(g,null,[u("Every minute, gain "),a("span",{style:{color:t(t(W.display).color)}},[mt(t(W.effect))]),u(" minutes of Foam and Skyrmion production. Currently: "),a("span",{style:{color:t(t(W.display).color)}},[D(o.times(t(W.effect),t(V.timeMult)).div(t(W.triggerRequirement)))]),u(" minutes/s")]))}),effect(){return o.plus(1,Oe(Se.enhancements.expansion,0)).div(t(ze.nerfs[z.RIGHT])).times(t(ze.buffs[z.RIGHT]))},trigger(de){const X=new o(t(this.triggerRequirement)).times(t(W.effect)).times(de);F.pion.pions.value=X.times(t(1)).plus(t(F.pion.pions)),F.spinor.spinors.value=X.times(t(1)).plus(t(F.spinor.spinors)),Object.values(S).forEach(U=>C[U].amount.value=X.times(t(C[U].production)).plus(t(C[U].amount)))}})),T=Bn(W=>({visibility(){return t(this.built)||t(q.built)},buildRequirement:600,triggerRequirement:60*60,display:{color:v(()=>t(me.challenge.active)?"var(--feature-background)":Y.theme["--feature-background"]),width:10,description:$(()=>a(g,null,[u("Every hour, gain "),a("span",{style:{color:t(t(W.display).color)}},[D(t(W.effect))]),u(" Time Cubes. Currently: "),a("span",{style:{color:t(t(W.display).color)}},[D(o.times(t(W.effect),t(V.timeMult)).div(t(W.triggerRequirement)))]),u(" Time Cubes/s")]))},effect(){return new o(t(Y.production)).div(t(ze.nerfs[z.RIGHT])).times(t(ze.buffs[z.RIGHT]))},trigger(de){Y.timecubes.value=t(W.effect).times(de).plus(t(Y.timecubes))}})),M=Bn(W=>({visibility(){return t(this.built)||t(V.upgrades.tetration.bought)||t(Y.upgrades.tiny.bought)},buildRequirement:25e4,triggerRequirement:60*60*24,display:{color:v(()=>t(me.challenge.active)?"var(--feature-background)":C.theme["--feature-background"]),width:10,description:$(()=>a(g,null,[u("Every day, gain a decaying boost to Foam production. Currently: "),a("span",{style:{color:t(t(W.display).color)}},[D(o.gte(t(V.timeMult),t(W.triggerRequirement))?t(h[W.id]):t(W.value))]),u("\xD7")]))},effect(){return new o(1e6)},trigger(de){this.value.value=t(W.effect).div(o.div(t(ze.nerfs[z.RIGHT]),t(ze.buffs[z.RIGHT]))).times(de)}}),Vi),P=Bn(W=>({visibility(){return t(this.built)||t(V.upgrades.tetration.bought)&&t(M.built)},buildRequirement:1e11,triggerRequirement:60*60*24*365,display:{color:v(()=>t(me.challenge.active)?"var(--feature-background)":V.theme["--feature-background"]),width:10,description:$(()=>a(g,null,[u("Every year, gain a decaying divider to Acceleron cost. Currently: "),a("span",{style:{color:t(t(W.display).color)}},[u("/"),D(o.gte(t(V.timeMult),t(W.triggerRequirement))?t(h[W.id]):t(W.value))]),u("\xD7")]))},effect(){return new o(1e15)},trigger(de){this.value.value=t(W.effect).div(o.div(t(ze.nerfs[z.RIGHT]),t(ze.buffs[z.RIGHT]))).times(de)}}),Vi),A=Bn(W=>({visibility(){return t(this.built)||t(V.upgrades.tetration.bought)&&t(Y.upgrades.tiny.bought)&&t(P.built)},buildRequirement:4e17,triggerRequirement:60*60*24*365*10,display:{color:v(()=>t(me.challenge.active)?"var(--feature-background)":F.theme["--feature-background"]),width:10,description:$(()=>a(g,null,[u("Every decade, gain a decaying boost to Pion and Spinor production. Currently: "),a("span",{style:{color:t(t(W.display).color)}},[D(o.gte(t(V.timeMult),t(W.triggerRequirement))?t(h[W.id]):t(W.value))]),u("\xD7")]))},effect(){return new o(1e9)},trigger(de){this.value.value=t(W.effect).div(o.div(t(ze.nerfs[z.RIGHT]),t(ze.buffs[z.RIGHT]))).times(de)}}),Vi);return{acceleron:y,instantProd:q,timecube:T,tempFome:M,tempAcceleron:P,tempSkyrmion:A}})(),p=v(()=>Object.values(m).filter(y=>t(y.built)).length),b=v(()=>Object.values(m).find(y=>ye(y.visibility)&&!t(y.built))),f={[m.tempFome.id]:le([]),[m.tempAcceleron.id]:le([]),[m.tempSkyrmion.id]:le([])},h=Object.fromEntries(Object.entries(f).map(([y,q])=>[y,v(()=>t(q).reduce((T,M)=>T.plus(M),o.dZero).dividedBy(t(q).length||1).plus(1))]));V.on("postUpdate",y=>{const q=t(V.timeMult),T=o.pow(.2,y);for(const M of[m.tempFome,m.tempAcceleron,m.tempSkyrmion])f[M.id].value=[...t(f[M.id]).slice(-9),M.value.value],!o.gte(q,t(M.triggerRequirement))&&(M.value.value=T.times(t(M.value)).clampMin(1))});const N=Tt("Entropic Loop Modifiers",()=>[{title:"Build Speed",modifier:i,base:V.timeMult,baseText:$(()=>a(g,null,[u("["),V.name,u("] Time Speed")]))},{title:"Build Cost",modifier:r,base:1,baseText:$(()=>a(g,null,[u("["),V.name,u("] "),V.accelerons.displayName,u("/sec")])),smallerIsBetter:!0}]);return{isBuilding:e,loops:m,averageLoopValues:h,numBuiltLoops:p,upperDisplay:$(()=>{var y,q,T,M;return a(g,null,[t(b)===void 0?a(Ne,{height:"50px"},null):a(g,null,[a(Ne,{height:"18px"},null),a("div",{style:{fontSize:"12px",color:"var(--link)"}},[u("Construction Progress: "),te(t((q=(y=t(b))==null?void 0:y.buildProgress)!=null?q:0)),u(" / "),te(t((M=(T=t(b))==null?void 0:T.buildRequirement)!=null?M:0)),ie(N),a("br",null,null),u("Construction will consume "),a(Et,{resource:V.accelerons,override:t(d)},null)])])])}),lowerDisplay:$(()=>a(g,null,[a(Ig,{radius:175,loops:Object.values(m),buildButton:n},null),a(Ne,null,null),a(Sg,{loops:Object.values(m)},null)])),display:"This page intentionally left blank"}}),xg="entropy",Se=st(xg,function(){const e="Entropy",n=at(0,{displayName:e}),i=dt(()=>[H(()=>({multiplier:2,enabled:B(Y.upgrades.twice.bought),description:$(()=>a(g,null,[u("["),Y.name,u("] Twice")]))})),H(()=>({multiplier:1.5,enabled:B(Y.upgrades.triple.bought),description:$(()=>a(g,null,[u("["),Y.name,u("] Triple")]))}))]),s=v(()=>i.apply(t(Ue.numBuiltLoops)));gt(s,M=>{const P=Object.values(f).filter(A=>t(A.bought));for(const A of P)A.bought.value=!1;n.value=M;for(const A of P)A.purchase()});const r={1:["expansion","construction","dilation","contraction"],2:["formation","development","acceleration","entrenchment"],3:["extension","configuration","invention","inversion"],4:["tesselation","amplification","rotation","entitlement"]},l={1:v(()=>1+(t(Y.upgrades.twist.bought)?1:0)),2:v(()=>1+(t(f.entrenchment.bought)?1:0)),3:v(()=>1),4:v(()=>1+(t(Y.upgrades.twirl.bought)?1:0))},c=Object.fromEntries(Object.entries(r).map(([M,P])=>[Number(M),v(()=>P.map(A=>f[A]).filter(A=>t(A.bought)).length)])),d=v(()=>Object.values(c).map(M=>t(M)).reduce((M,P)=>M+P)),m=v(()=>o.add(t(d),t(Y.getTimesquareEffect(z.BOTTOM)))),p=v(()=>Si(t(m))),b=v(()=>Si(t(d)).round()),f=(()=>{const M=T(()=>({row:1,visibility:Ue.loops.acceleron.built,display:{title:"Entropic Expansion",description:"Increase the second Entropic Loop effect based on purchased Entropic Enhancements",effect:Ze=>`+${D(Ze)} minutes`},effect:()=>t(p).pow(.9).times(Oe(Y.upgrades.tilt))})),P=T(()=>({row:1,visibility:Ue.loops.acceleron.built,display:{title:"Entropic Construction",description:"Entropic Loops build faster based on purchased Entropic Enhancements"},effect:()=>t(p).pow(.9).pow10()})),A=T(()=>({row:1,visibility:Ue.loops.acceleron.built,display:{title:"Entropic Dilation",description:"Increase time speed based on purchased Entropic Enhancements"},effect:()=>t(p).pow(.8).plus(1)})),W=T(()=>({row:1,visibility:B(Y.upgrades.tetrate.bought),display:{title:"Entropic Contraction",description:"Divide Acceleron cost based on number of purchased Entropic Enhancements",effect:Ze=>`/${D(Ze)}`},effect:()=>t(p).pow(.9)})),de=T(()=>({row:2,visibility:Ue.loops.instantProd.built,display:{title:"Entropic Formation",description:"Increase Foam gain based on best Accelerons"},effect:()=>Si(o.clampMin(t(V.bestAccelerons),0).plus(1).log10().floor()).pow(2.5).plus(1)})),X=T(()=>({row:2,visibility:Ue.loops.instantProd.built,display:{title:"Entropic Development",description:"Decrease Entropic Loop construction cost based on purchased Entropic Enhancements",effect:Ze=>`${mt(Ze)}\xD7`},effect:()=>t(p).pow_base(.7)})),U=T(()=>({row:2,visibility:Ue.loops.instantProd.built,display:{title:"Entropic Acceleration",description:"Increase the first Entropic Loop effect based on completed Entropic Loops",effect:Ze=>`+${D(o.times(Ze,100),1)}% of your Acceleron reset gain`},effect:()=>o.times(t(Ue.numBuiltLoops),.001)})),Be=T(()=>({row:2,visibility:B(Y.upgrades.tetrate.bought),display:{title:"Entropic Entrenchment",description:"You may select an additional second row Entropic Enhancement"},ignoreRowLimit:!0})),E=T(()=>({row:3,visibility:Ue.loops.timecube.built,display:{title:"Entropic Extension",description:"Increase Infinitesimal Foam gain based on purchased Entropic Enhancements"},effect:()=>t(p).pow(2).plus(1)})),G=T(()=>({row:3,visibility:Ue.loops.timecube.built,display:{title:"Entropic Configuration",description:"Increase Subspatial Foam gain based on purchased Entropic Enhancements"},effect:()=>t(p).pow(1.75).plus(1)})),ee=T(()=>({row:3,visibility:Ue.loops.timecube.built,display:{title:"Entropic Invention",description:"Increase Subplanck Foam gain based on purchased Entropic Enhancements"},effect:()=>t(p).pow(1.5).plus(1)})),I=T(()=>({row:3,visibility:B(Y.upgrades.tetrate.bought),display:{title:"Entropic Inversion",description:"Divide Acceleron cost based on Quantum Foam",effect:Ze=>`/${D(Ze)}`},effect:()=>o.max(t(C[S.quantum].amount),0).plus(1).log10().plus(1)})),R=T(()=>({row:4,visibility:Ue.loops.tempFome.built,display:{title:"Entropic Tesselation",description:"Increase Time Cube gain based on best Accelerons"},effect:()=>o.max(t(V.bestAccelerons),0).plus(1).log10().plus(1)})),rt=T(()=>({row:4,visibility:Ue.loops.tempFome.built,display:{title:"Entropic Amplification",description:"Skyrmions are cheaper based on best Time Cubes",effect:Ze=>`/${D(Ze.reciprocate())}`},effect:()=>Si(o.max(t(Y.bestTimecubes),0).plus(1).log10().floor()).pow_base(.9)})),It=T(()=>({row:4,visibility:Ue.loops.tempFome.built,display:{title:"Entropic Rotation",description:"Divide Acceleron cost based on best Time Cubes",effect:Ze=>`/${D(Ze)}`},effect:()=>o.max(t(Y.bestTimecubes),0).plus(1).log10().plus(1)})),zt=T(()=>({row:4,visibility:B(Y.upgrades.tetrate.bought),display:{title:"Entropic Entitlement",description:"Each purchased Entropic Enhancement gives 0.1 free levels to each Foam Boost",effect:Ze=>`${D(Ze,1)} free levels`},effect:()=>t(m).times(.1)}));return{expansion:M,construction:P,dilation:A,contraction:W,formation:de,development:X,acceleration:U,entrenchment:Be,extension:E,configuration:G,invention:ee,inversion:I,tesselation:R,amplification:rt,rotation:It,entitlement:zt}})(),h=v(()=>t(N).reduce((M,P)=>P.id>M?P.id:M,-1)+1),N=Me([]),y=ct(()=>({canClick(){return t(d)>0},onClick(){for(const M of Object.values(f))M.bought.value=!1;n.value=t(s)},display:{description:"Reset Enhancements"},style:{minHeight:"30px",width:"100px"}})),q=Tt("Entropy Modifiers",()=>[{title:"Maximum Entropy",modifier:i,base:Ue.numBuiltLoops,baseText:$(()=>a(g,null,[u("["),V.name,u("] Entropic Loops")]))}]);return{name:e,entropy:n,maxEntropy:s,enhancements:f,enhancementCounts:c,enhancementLimits:l,presets:N,display:$(()=>a(g,null,[a(Ne,null,null),u("Entropy: "),te(t(n)),u(" / "),te(t(s)),ie(q),a("br",null,null),u("Next Enhancement: "),te(t(b)),u(" "),n.displayName,a(Ne,null,null),ie(y),a(Ne,null,null),a(Qt,null,{default:()=>[a(Kf,{enhancements:Object.keys(r).reduce((M,P)=>(M[P]=r[P].map(A=>f[A]),M),{}),presets:t(N),nextID:h},null),a(Ne,{width:"17px"},null),a(dn,null,{default:()=>[a(Tf,{rows:Object.keys(r).reduce((M,P)=>(M[P]=r[P].map(A=>f[A]),M),{})},null)]}),a(Ne,{width:"17px"},null),a(qf,null,null)]})]))};function T(M){var de;const P=M.call({},{});Q(P,"visibility"),Q(P,"effect");const A=(de=P.display.effect)!=null?de:X=>`${D(X)}\xD7`,W=be(()=>({requirements:(()=>{const X=[K(()=>({cost:b,resource:B(n)}))];return P.ignoreRowLimit!==!0&&X.push(At(()=>t(c[P.row])<t(l[P.row]))),X})(),visibility(){var X;return t(this.bought)||t((X=P.visibility)!=null?X:!0)},display:P.display.title,effect:P.effect}),Ce);return Hn(W,{display:$(()=>{const X=pe(P.display.description,"div"),U=P.effect?pe($(()=>a(g,null,[A(t(W.effect))]))):void 0;return a(g,null,[a(X,null,null),U?a("div",null,[u("Currently: "),a(U,null,null)]):void 0])})}),W}}),gr=o.sqrt(5),Tg=gr.plus(1).div(2);function Si(e){const n=Tg.pow(e),i=o.times(e,Math.PI).cos();return n.minus(i.dividedBy(n)).dividedBy(gr)}const Pg={class:"fome-grid"},Ag={key:0},Bg=["innerHTML"],Fg=oe({__name:"Fome",setup(e){function n(i){return`You have ${D(t(C[i].amount))} ${C[i].amount.displayName}${o.gt(t(C[i].upgrades.reform.amount),1)?`<sup>${te(t(C[i].upgrades.reform.amount))}</sup>`:""}`}return(i,s)=>(k(),x("div",Pg,[(k(!0),x(g,null,Pe(Object.values(t(S)).slice().reverse(),r=>(k(),x(g,{key:r},[t(t(V).unlocked)||t(t(ce).unlocked)||t(t(ue).unlocked)||t(o).gt(t(t(C)[r].upgrades.reform.amount),0)?(k(),x("div",Ag,[_("div",{innerHTML:n(r),style:{"white-space":"nowrap"}},null,8,Bg),_("div",null,[u("+"+Z(t(D)(t(t(C)[r].production)))+"/s",1),(k(),se($e(t(ie)(t(C)[r].modifierModal))))])])):j("",!0),(k(!0),x(g,null,Pe(Object.keys(t(C)[r].upgrades),l=>(k(),se($e(t(ie)(t(C)[r].upgrades[l]))))),256))],64))),128))]))}});var Eg=ge(Fg,[["__scopeId","data-v-3cfba85c"]]);const gi=e=>(lt("data-v-49407d60"),e=e(),ut(),e),Og={style:{display:"grid",gridTemplateColumns:"repeat(7, auto)",width:"fit-content",margin:"auto","padding-left":"150px"}},Rg=gi(()=>_("div",null,"[",-1)),Dg=gi(()=>_("div",null,"+",-1)),Lg=gi(()=>_("div",null,null,-1)),Vg=gi(()=>_("div",null,null,-1)),jg=gi(()=>_("div",null,"]:",-1)),Ug=oe({__name:"FomeBoost",setup(e){const n=Object.fromEntries(Object.values(S).map(i=>[i,Object.fromEntries(Object.values([1,2,3,4,5]).map(s=>[s,t(C[i].boosts[s].display)]))]));return(i,s)=>(k(),x("div",Og,[(k(!0),x(g,null,Pe(t(n),(r,l)=>(k(),x(g,{key:l},[(k(),x(g,null,Pe(7,c=>a(Ne,{"num-labels":7,key:c})),64)),(k(!0),x(g,null,Pe(r,(c,d)=>{var m,p;return k(),x(g,{key:l+"-"+d},[t(o).gt(t(t(C)[l].boosts[d].total),0)?(k(),x(g,{key:0},[_("div",null,Z(t(C)[l].amount.displayName.split(" ")[0])+" Boost "+Z(d),1),Rg,_("div",null,Z(t(te)(t(t(C)[l].boosts[d].amount))),1),t(o).gt(t((m=t(C)[l].boosts[d].bonus)!=null?m:0),0)?(k(),x(g,{key:0},[Dg,_("div",null,Z(t(D)(t((p=t(C)[l].boosts[d].bonus)!=null?p:0))),1)],64)):(k(),x(g,{key:1},[Lg,Vg],64)),jg,_("div",null,Z(c),1)],64)):(k(),x(g,{key:1},Pe(7,b=>_("div",{"num-labels":7,key:b})),64))],64)}),128))],64))),128))]))}});var Gg=ge(Ug,[["__scopeId","data-v-49407d60"]]);function vn(e){return Xe(n=>{const i=e.call(n,n);return Q(i,"fomeType"),i.partialDisplay=s=>a("span",{style:t(i.requirementMet)?"":"color: var(--danger)"},[C[t(i.fomeType)].amount.displayName,a("sup",null,[Tn(o.floor(i.cost instanceof w?sn(i.cost,s!=null?s:1,!1):t(i.cost)))])]),i.display=s=>a("div",null,[u("Requires: "),C[t(i.fomeType)].amount.displayName,a("sup",null,[Tn(o.floor(i.cost instanceof w?sn(i.cost,s!=null?s:1,!1):t(i.cost)))])]),i.visibility=De.Visible,i.requiresPay=!1,Q(i,"cost"),i.requirementMet=v(()=>i.cost instanceof w?o.gte(C[t(i.fomeType)].upgrades.reform.amount.value,i.cost.evaluate()):o.gte(C[t(i.fomeType)].upgrades.reform.amount.value,t(i.cost))),i})}const zg="infinitesimal",ji=st(zg,function(){const e=at(0,{displayName:"Infinitesimal Foam"}),n=dt(()=>[...C.production,H(()=>({multiplier:r[ne.height].effect,enabled:()=>o.gt(t(r[ne.height].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Foam Height ("),te(t(r[ne.height].amount)),u(")")]))})),H(()=>({multiplier:r[ne.width].effect,enabled:()=>o.gt(t(r[ne.width].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Foam Width ("),te(t(r[ne.width].amount)),u(")")]))})),H(()=>({multiplier:r[ne.depth].effect,enabled:()=>o.gt(t(r[ne.depth].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Foam Depth ("),te(t(r[ne.depth].amount)),u(")")]))})),H(()=>({multiplier:c[1].effect,enabled:()=>o.gt(t(c[1].total),0),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Boost 1 ("),te(t(c[1].total)),u(")")]))})),H(()=>({multiplier:F.pion.upgrades.iota.effect,enabled:()=>o.gt(t(F.pion.upgrades.iota.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03B9 ("),te(t(F.pion.upgrades.iota.totalAmount)),u(")")]))})),H(()=>({multiplier:F.spinor.upgrades.epsilon.effect,enabled:()=>o.gt(t(F.spinor.upgrades.epsilon.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Spinor Upgrade \u03B5 ("),te(t(F.spinor.upgrades.epsilon.totalAmount)),u(")")]))})),H(()=>({multiplier:F.spinor.upgrades.iota.effect,enabled:()=>o.gt(t(F.spinor.upgrades.iota.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Spinor Upgrade \u03B9 ("),te(t(F.spinor.upgrades.iota.totalAmount)),u(")")]))})),H(()=>({multiplier:Se.enhancements.extension.effect,enabled:B(Se.enhancements.extension.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Entropic Extension")]))})),Wn(()=>({exponent:r.reform.effect,enabled:()=>o.gt(t(r.reform.amount),1),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),H(()=>({multiplier:0,enabled:()=>o.eq(t(r.reform.amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),...C.timelineProduction,H(()=>({multiplier:()=>t(Y.upgrades.toil.effect)[S.infinitesimal],enabled:()=>t(Y.upgrades.toil.bought)&&t(Y.timelines.inTimeline),description:$(()=>a(g,null,[u("["),Y.name,u("] Toil")]))}))]),i=v(()=>n.apply(t(F.totalSkyrmions).times(.01)));C.on("preUpdate",m=>{if(!t(C.unlocked)||o.eq(t(r.reform.amount),0))return;const p=t(V.timeMult).times(m);e.value=p.times(t(i)).plus(e.value)});const s=v(()=>t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||o.gt(t(r.reform.amount),0)),r={[ne.height]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(5).times(6),requiresPay:()=>!t(C.achievements[S.infinitesimal].earned)})),display:xt(S.infinitesimal,ne.height),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.infinitesimal].earned)}),onClick:()=>Mt(S.infinitesimal)}),Ce),[ne.width]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(7).times(10),requiresPay:()=>!t(C.achievements[S.infinitesimal].earned)})),display:xt(S.infinitesimal,ne.width),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.infinitesimal].earned)}),onClick:()=>Mt(S.infinitesimal)}),Ce),[ne.depth]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(9).times(25),requiresPay:()=>!t(C.achievements[S.infinitesimal].earned)})),display:xt(S.infinitesimal,ne.depth),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.infinitesimal].earned)}),onClick:()=>Mt(S.infinitesimal)}),Ce),condense:be(m=>({visibility:()=>!t(m.bought)&&(t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||t(C[S.protoversal].upgrades.condense.bought)),requirements:K(()=>({resource:B(e),cost:2e4})),display:{description:`Condense your ${e.displayName}`},onPurchase(){C.subspatial.upgrades.reform.amount.value=o.dOne},classes:()=>({auto:t(C.achievements.reform.earned)})})),reform:Qe(m=>({visibility:B(r.condense.bought),requirements:[K(()=>({resource:B(e),cost:()=>o.minus(t(m.amount),3).max(2).pow_base(t(m.amount)).plus(1).times(5).pow10().dividedBy(5),requiresPay:()=>!t(C.achievements.reform.earned)})),vn(()=>({fomeType:S.protoversal,cost:w.variable(m.amount).plus(2)}))],display:bi(S.infinitesimal),effect(){return o.cbrt(t(this.amount))},classes:()=>({auto:t(C.achievements.reform.earned)})}),Ce)};C.on("update",()=>{if(t(C.achievements.reform.earned)&&(!t(r.condense.bought)&&t(r.condense.canPurchase)&&r.condense.purchase(),t(r.reform.canClick)&&r.reform.onClick()),t(C.achievements[S.infinitesimal].earned))for(const m of Object.values(ne))t(r[m].canClick)&&r[m].onClick()});const l=v(()=>t(C.globalBoostBonus).plus(he(S.quantum,5)).plus(he(S.subspatial,3))),c={index:Me(1),1:Ye(m=>({display:()=>`Multiply the generation of Infinitesimal Foam by ${D(he(S.infinitesimal,1))}`,effect:()=>new o(t(m.total)).times(t(F.pion.upgrades.lambda.effect)).times(t(F.pion.upgrades.kappa.effect)).plus(1),bonus:l})),2:Ye(m=>({display:()=>`Increase Pion and Spinor gain by ${D(o.minus(he(S.infinitesimal,2),1).times(100))}%`,effect:()=>o.times(t(m.total),.5).plus(1),bonus:l})),3:Ye(m=>({display:()=>`Reduce Pion and Spinor Upgrade \u03B1 costs to 1/${D(o.times(he(S.infinitesimal,3),100).reciprocate())}%`,effect:()=>o.pow(.8,t(m.total)),bonus:l})),4:Ye(m=>({display:()=>`Reduce Skyrmion costs to 1/${D(he(S.infinitesimal,4))}\xD7`,effect:()=>o.times(t(m.total),.5).plus(1),bonus:l})),5:Ye(m=>({display:()=>`Reduce Pion and Spinor Upgrade \u03B3 costs to 1/${D(o.times(he(S.infinitesimal,5),100).reciprocate())}%`,effect:()=>o.pow(.8,t(m.total)),bonus:l}))},d=Tt(`${e.displayName} Modifiers`,()=>[{title:e.displayName,modifier:n,base:()=>t(F.totalSkyrmions).times(.01),baseText:$(()=>a(g,null,[u("["),F.name,u("] Total "),F.skyrmions.displayName]))}]);return{amount:e,upgrades:r,boosts:c,production:i,modifierModal:d,display:"This page intentionally left blank"}}),Hg="protoversal",gn=st(Hg,function(){const e=at(0,{displayName:"Protoversal Foam"}),n=dt(()=>[...C.production,H(()=>({multiplier:r[ne.height].effect,enabled:()=>o.gt(t(r[ne.height].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Protoversal Foam Height ("),te(t(r[ne.height].amount)),u(")")]))})),H(()=>({multiplier:r[ne.width].effect,enabled:()=>o.gt(t(r[ne.width].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Protoversal Foam Width ("),te(t(r[ne.width].amount)),u(")")]))})),H(()=>({multiplier:r[ne.depth].effect,enabled:()=>o.gt(t(r[ne.depth].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Protoversal Foam Depth ("),te(t(r[ne.depth].amount)),u(")")]))})),H(()=>({multiplier:d[1].effect,enabled:()=>o.gt(t(d[1].total),0),description:$(()=>a(g,null,[u("["),C.name,u("] Protoversal Boost 1 ("),te(t(d[1].total)),u(")")]))})),H(()=>({multiplier:F.pion.upgrades.delta.effect,enabled:()=>o.gt(t(F.pion.upgrades.delta.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03B4 ("),te(t(F.pion.upgrades.delta.totalAmount)),u(")")]))})),H(()=>({multiplier:F.pion.upgrades.epsilon.effect,enabled:()=>o.gt(t(F.pion.upgrades.epsilon.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03B5 ("),te(t(F.pion.upgrades.epsilon.totalAmount)),u(")")]))})),H(()=>({multiplier:F.pion.upgrades.theta.effect,enabled:()=>o.gt(t(F.pion.upgrades.theta.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03B8 ("),te(t(F.pion.upgrades.theta.totalAmount)),u(")")]))})),Wn(()=>({exponent:r.reform.effect,enabled:()=>o.gt(t(r.reform.amount),1),description:$(()=>a(g,null,[u("["),C.name,u("] Protoversal Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),H(()=>({multiplier:0,enabled:()=>o.eq(t(r.reform.amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Protoversal Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),...C.timelineProduction,H(()=>({multiplier:()=>t(Y.upgrades.toil.effect)[S.protoversal],enabled:()=>t(Y.upgrades.toil.bought)&&t(Y.timelines.inTimeline),description:$(()=>a(g,null,[u("["),Y.name,u("] Toil")]))}))]),i=v(()=>n.apply(t(F.totalSkyrmions).times(.01)));C.on("preUpdate",p=>{if(!t(C.unlocked)||o.eq(t(r.reform.amount),0))return;const b=t(V.timeMult).times(p);e.value=b.times(t(i)).plus(e.value)});const s=v(()=>t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||o.gt(t(r.reform.amount),0)),r={[ne.height]:Qe(p=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(p.amount),1.15).pow_base(4).times(2),requiresPay:()=>!t(C.achievements[S.protoversal].earned)})),display:xt(S.protoversal,ne.height),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.protoversal].earned)}),onClick:()=>Mt(S.protoversal)}),Ce),[ne.width]:Qe(p=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(p.amount),1.15).pow_base(6).times(5),requiresPay:()=>!t(C.achievements[S.protoversal].earned)})),display:xt(S.protoversal,ne.width),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.protoversal].earned)}),onClick:()=>Mt(S.protoversal)}),Ce),[ne.depth]:Qe(p=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(p.amount),1.15).pow_base(8).times(20),requiresPay:()=>!t(C.achievements[S.protoversal].earned)})),display:xt(S.protoversal,ne.depth),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.protoversal].earned)}),onClick:()=>Mt(S.protoversal)}),Ce),condense:be(p=>({visibility:()=>!t(p.bought),requirements:K(()=>({resource:B(e),cost:1e4})),display:{description:`Condense your ${e.displayName}`},onPurchase(){C.infinitesimal.upgrades.reform.amount.value=o.dOne},classes:()=>({auto:t(C.achievements.reform.earned)})})),reform:Qe(p=>({visibility:B(r.condense.bought),requirements:K(()=>({resource:B(e),cost:()=>o.minus(t(p.amount),3).max(2).pow_base(t(p.amount)).plus(1).times(4).pow10(),requiresPay:()=>!t(C.achievements.reform.earned)})),display:bi(S.protoversal),effect(){return o.cbrt(t(this.amount))},classes:()=>({auto:t(C.achievements.reform.earned)})}),Ce)};C.on("update",()=>{if(t(C.achievements.reform.earned)&&(!t(r.condense.bought)&&t(r.condense.canPurchase)&&r.condense.purchase(),t(r.reform.canClick)&&r.reform.onClick()),t(C.achievements[S.protoversal].earned))for(const p of Object.values(ne))t(r[p].canClick)&&r[p].onClick()});const l=v(()=>t(C.globalBoostBonus).plus(he(S.quantum,5)).plus(he(S.subspatial,3))),c=v(()=>t(l).plus(he(S.protoversal,5))),d={index:Me(1),1:Ye(p=>({display:()=>`Multiply the generation of Protoversal Foam by ${D(he(S.protoversal,1))}`,effect:()=>new o(t(p.total)).times(t(F.spinor.upgrades.delta.effect)).plus(1),bonus:c})),2:Ye(p=>({display:()=>`Gain ${D(he(S.protoversal,2))} bonus Pion and Spinor Upgrade \u03B1 levels`,effect:()=>new o(t(p.total)),bonus:c})),3:Ye(p=>({display:()=>`Gain ${D(he(S.protoversal,3))} bonus Pion and Spinor Upgrade \u03B2 levels`,effect:()=>o.sqrt(t(p.total)),bonus:c})),4:Ye(p=>({display:()=>`Gain ${D(he(S.protoversal,4))} bonus Pion and Spinor Upgrade \u03B3 levels`,effect:()=>new o(t(p.total)),bonus:c})),5:Ye(p=>({display:()=>`Add ${D(he(S.protoversal,5))} levels to all above boosts`,effect:()=>o.times(t(p.total),.1),bonus:l}))},m=Tt(`${e.displayName} Modifiers`,()=>[{title:e.displayName,modifier:n,base:()=>t(F.totalSkyrmions).times(.01),baseText:$(()=>a(g,null,[u("["),F.name,u("] Total "),F.skyrmions.displayName]))}]);return{amount:e,upgrades:r,boosts:d,production:i,modifierModal:m,display:"This page intentionally left blank"}}),Wg="quantum",en=st(Wg,function(){const e=at(0,{displayName:"Quantum Foam"}),n=dt(()=>[...C.production,H(()=>({multiplier:r[ne.height].effect,enabled:()=>o.gt(t(r[ne.height].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Quantum Foam Height ("),te(t(r[ne.height].amount)),u(")")]))})),H(()=>({multiplier:r[ne.width].effect,enabled:()=>o.gt(t(r[ne.width].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Quantum Foam Width ("),te(t(r[ne.width].amount)),u(")")]))})),H(()=>({multiplier:r[ne.depth].effect,enabled:()=>o.gt(t(r[ne.depth].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Quantum Foam Depth ("),te(t(r[ne.depth].amount)),u(")")]))})),Wn(()=>({exponent:r.reform.effect,enabled:()=>o.gt(t(r.reform.amount),1),description:$(()=>a(g,null,[u("["),C.name,u("] Quantum Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),H(()=>({multiplier:0,enabled:()=>o.eq(t(r.reform.amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Quantum Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),...C.timelineProduction,H(()=>({multiplier:()=>t(Y.upgrades.toil.effect)[S.quantum],enabled:()=>t(Y.upgrades.toil.bought)&&t(Y.timelines.inTimeline),description:$(()=>a(g,null,[u("["),Y.name,u("] Toil")]))}))]),i=v(()=>n.apply(t(F.totalSkyrmions).times(.01)));C.on("preUpdate",m=>{if(!t(C.unlocked)||o.eq(t(r.reform.amount),0))return;const p=t(V.timeMult).times(m);e.value=p.times(t(i)).plus(e.value)});const s=v(()=>t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||o.gt(t(r.reform.amount),0)),r={[ne.height]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(8).times(20),requiresPay:()=>!t(C.achievements[S.quantum].earned)})),display:xt(S.quantum,ne.height),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.quantum].earned)}),onClick:()=>Mt(S.quantum)}),Ce),[ne.width]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(10).times(30),requiresPay:()=>!t(C.achievements[S.quantum].earned)})),display:xt(S.quantum,ne.width),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.quantum].earned)}),onClick:()=>Mt(S.quantum)}),Ce),[ne.depth]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(12).times(100),requiresPay:()=>!t(C.achievements[S.quantum].earned)})),display:xt(S.quantum,ne.depth),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.quantum].earned)}),onClick:()=>Mt(S.quantum)}),Ce),condense:be(m=>({visibility:()=>!t(m.bought)&&(t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||t(C[S.subplanck].upgrades.condense.bought)),requirements:K(()=>({resource:B(e),cost:1e5})),display:{description:`Condense your ${e.displayName}`},classes:()=>({auto:t(C.achievements.reform.earned)})})),reform:Qe(m=>({visibility:B(r.condense.bought),requirements:[K(()=>({resource:B(e),cost:()=>o.minus(t(m.amount),3).max(2).pow_base(t(m.amount)).plus(1).times(4).pow10(),requiresPay:()=>!t(C.achievements.reform.earned)})),vn(()=>({fomeType:S.subplanck,cost:w.variable(m.amount).plus(2)}))],display:bi(S.quantum),effect(){return o.cbrt(t(this.amount))},classes:()=>({auto:t(C.achievements.reform.earned)})}),Ce)};C.on("update",()=>{if(t(C.achievements.reform.earned)&&(!t(r.condense.bought)&&t(r.condense.canPurchase)&&r.condense.purchase(),t(r.reform.canClick)&&r.reform.onClick()),t(C.achievements[S.quantum].earned))for(const m of Object.values(ne))t(r[m].canClick)&&r[m].onClick()});const l=v(()=>t(C.globalBoostBonus).plus(he(S.quantum,5))),c={index:Me(1),1:Ye(m=>({display:()=>`Multiply the generation of all Foam types by ${D(he(S.quantum,1))}`,effect:()=>new o(t(m.total)).times(t(F.pion.upgrades.kappa.effect)).plus(1),bonus:l})),2:Ye(m=>({display:()=>`Reduce the Pion and Spinor cost nerf exponent to 1/${D(o.times(he(S.quantum,2),100).reciprocate())}%`,effect:()=>{let p=t(m.total);return o.gt(p,16)&&(p=o.ln(2).recip().times(4).times(p)),o.pow(.975,p)},bonus:l})),3:Ye(m=>({display:()=>`Multiply the generation of all Foam types again by ${D(he(S.quantum,3))}\xD7`,effect:()=>{let p=t(m.total);return o.gt(p,16)&&(p=o.sqrt(p).times(4)),o.sqrt(he(S.quantum,1)).times(p).dividedBy(10).plus(1)},bonus:l})),4:Ye(m=>({display:()=>`Gain ${D(he(S.quantum,4))} bonus Pion and Spinor Upgrade \u03B8, \u03B9, and \u03BA levels`,effect:()=>o.times(t(m.total),.25),bonus:l})),5:Ye(m=>({display:()=>`Add ${D(he(S.quantum,5))} bonus levels to all above boosts`,effect:()=>o.times(t(m.total),.1),bonus:C.globalBoostBonus}))},d=Tt(`${e.displayName} Modifiers`,()=>[{title:e.displayName,modifier:n,base:()=>t(F.totalSkyrmions).times(.01),baseText:$(()=>a(g,null,[u("["),F.name,u("] Total "),F.skyrmions.displayName]))}]);return{amount:e,upgrades:r,boosts:c,production:i,modifierModal:d,display:"This page intentionally left blank"}}),Yg="subplanck",Ui=st(Yg,function(){const e=at(0,{displayName:"Subplanck Foam"}),n=dt(()=>[...C.production,H(()=>({multiplier:r[ne.height].effect,enabled:()=>o.gt(t(r[ne.height].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subplanck Foam Height ("),te(t(r[ne.height].amount)),u(")")]))})),H(()=>({multiplier:r[ne.width].effect,enabled:()=>o.gt(t(r[ne.width].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subplanck Foam Width ("),te(t(r[ne.width].amount)),u(")")]))})),H(()=>({multiplier:r[ne.depth].effect,enabled:()=>o.gt(t(r[ne.depth].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subplanck Foam Depth ("),te(t(r[ne.depth].amount)),u(")")]))})),H(()=>({multiplier:c[1].effect,enabled:()=>o.gt(t(c[1].total),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subplanck Boost 1 ("),te(t(c[1].total)),u(")")]))})),H(()=>({multiplier:Se.enhancements.invention.effect,enabled:B(Se.enhancements.invention.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Entropic Invention")]))})),Wn(()=>({exponent:r.reform.effect,enabled:()=>o.gt(t(r.reform.amount),1),description:$(()=>a(g,null,[u("["),C.name,u("] Subplanck Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),H(()=>({multiplier:0,enabled:()=>o.eq(t(r.reform.amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subplanck Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),...C.timelineProduction,H(()=>({multiplier:()=>t(Y.upgrades.toil.effect)[S.subplanck],enabled:()=>t(Y.upgrades.toil.bought)&&t(Y.timelines.inTimeline),description:$(()=>a(g,null,[u("["),Y.name,u("] Toil")]))}))]),i=v(()=>n.apply(t(F.totalSkyrmions).times(.01)));C.on("preUpdate",m=>{if(!t(C.unlocked)||o.eq(t(r.reform.amount),0))return;const p=t(V.timeMult).times(m);e.value=p.times(t(i)).plus(e.value)});const s=v(()=>t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||o.gt(t(r.reform.amount),0)),r={[ne.height]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(7).times(15),requiresPay:()=>!t(C.achievements[S.subplanck].earned)})),display:xt(S.subplanck,ne.height),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.subplanck].earned)}),onClick:()=>Mt(S.subplanck)}),Ce),[ne.width]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(9).times(25),requiresPay:()=>!t(C.achievements[S.subplanck].earned)})),display:xt(S.subplanck,ne.width),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.subplanck].earned)}),onClick:()=>Mt(S.subplanck)}),Ce),[ne.depth]:Qe(m=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(m.amount),1.15).pow_base(11).times(90),requiresPay:()=>!t(C.achievements[S.subplanck].earned)})),display:xt(S.subplanck,ne.depth),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.subplanck].earned)}),onClick:()=>Mt(S.subplanck)}),Ce),condense:be(m=>({visibility:()=>!t(m.bought)&&(t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||t(C[S.subspatial].upgrades.condense.bought)),requirements:K(()=>({resource:B(e),cost:1e6})),display:{description:`Condense your ${e.displayName}`},onPurchase(){C.quantum.upgrades.reform.amount.value=o.dOne},classes:()=>({auto:t(C.achievements.reform.earned)})})),reform:Qe(m=>({visibility:B(r.condense.bought),requirements:[K(()=>({resource:B(e),cost:()=>o.minus(t(m.amount),3).max(2).pow_base(t(m.amount)).plus(1).times(6).pow10(),requiresPay:()=>!t(C.achievements.reform.earned)})),vn(()=>({fomeType:S.subspatial,cost:w.variable(m.amount).plus(2)}))],display:bi(S.subplanck),effect(){return o.cbrt(t(this.amount))},classes:()=>({auto:t(C.achievements.reform.earned)})}),Ce)};C.on("update",()=>{if(t(C.achievements.reform.earned)&&(!t(r.condense.bought)&&t(r.condense.canPurchase)&&r.condense.purchase(),t(r.reform.canClick)&&r.reform.onClick()),t(C.achievements[S.subplanck].earned))for(const m of Object.values(ne))t(r[m].canClick)&&r[m].onClick()});const l=v(()=>t(C.globalBoostBonus).plus(he(S.quantum,5))),c={index:Me(1),1:Ye(m=>({display:()=>`Multiply the generation of Subplanck Foam by ${D(he(S.subplanck,1))}`,effect:()=>new o(t(m.total)).times(t(F.spinor.upgrades.kappa.effect)).times(t(F.pion.upgrades.kappa.effect)).plus(1),bonus:l})),2:Ye(m=>({display:()=>`Gain ${D(he(S.subplanck,2))} bonus Pion and Spinor Upgrade \u03B4 levels`,effect:()=>o.times(t(m.total),.5),bonus:l})),3:Ye(m=>({display:()=>`Gain ${D(he(S.subplanck,3))} bonus Pion and Spinor Upgrade \u03B5 levels`,effect:()=>o.times(t(m.total),.5),bonus:l})),4:Ye(m=>({display:()=>`Gain ${D(he(S.subplanck,4))} bonus Pion and Spinor Upgrade \u03B6 levels`,effect:()=>o.times(t(m.total),.5),bonus:l})),5:Ye(m=>({display:()=>`Gain ${D(he(S.subplanck,5))} bonus Pion and Spinor Upgrade \u03B7 levels`,effect:()=>o.times(t(m.total),.5),bonus:l}))},d=Tt(`${e.displayName} Modifiers`,()=>[{title:e.displayName,modifier:n,base:()=>t(F.totalSkyrmions).times(.01),baseText:$(()=>a(g,null,[u("["),F.name,u("] Total "),F.skyrmions.displayName]))}]);return{amount:e,upgrades:r,boosts:c,production:i,modifierModal:d,display:"This page intentionally left blank"}}),Kg="subspatial",Gi=st(Kg,function(){const e=at(0,{displayName:"Subspatial Foam"}),n=dt(()=>[...C.production,H(()=>({multiplier:r[ne.height].effect,enabled:()=>o.gt(t(r[ne.height].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subspatial Foam Height ("),te(t(r[ne.height].amount)),u(")")]))})),H(()=>({multiplier:r[ne.width].effect,enabled:()=>o.gt(t(r[ne.width].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subspatial Foam Width ("),te(t(r[ne.width].amount)),u(")")]))})),H(()=>({multiplier:r[ne.depth].effect,enabled:()=>o.gt(t(r[ne.depth].amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subspatial Foam Depth ("),te(t(r[ne.depth].amount)),u(")")]))})),H(()=>({multiplier:d[1].effect,enabled:()=>o.gt(t(d[1].total),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subspatial Boost 1 ("),te(t(d[1].total)),u(")")]))})),H(()=>({multiplier:F.pion.upgrades.zeta.effect,enabled:()=>o.gt(t(F.pion.upgrades.zeta.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Pion Upgrade \u03B6 ("),te(t(F.pion.upgrades.zeta.totalAmount)),u(")")]))})),H(()=>({multiplier:F.spinor.upgrades.theta.effect,enabled:()=>o.gt(t(F.spinor.upgrades.theta.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Spinor Upgrade \u03B8 ("),te(t(F.spinor.upgrades.theta.totalAmount)),u(")")]))})),H(()=>({multiplier:V.upgrades.alacrity.effect,enabled:t(V.upgrades.alacrity.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Subspatial Alacrity")]))})),H(()=>({multiplier:Se.enhancements.configuration.effect,enabled:B(Se.enhancements.configuration.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Entropic Configuration")]))})),Wn(()=>({exponent:r.reform.effect,enabled:()=>o.gt(t(r.reform.amount),1),description:$(()=>a(g,null,[u("["),C.name,u("] Subspatial Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),H(()=>({multiplier:0,enabled:()=>o.eq(t(r.reform.amount),0),description:$(()=>a(g,null,[u("["),C.name,u("] Subspatial Foam"),a("sup",null,[te(t(r.reform.amount))])]))})),...C.timelineProduction,H(()=>({multiplier:()=>t(Y.upgrades.toil.effect)[S.subspatial],enabled:()=>t(Y.upgrades.toil.bought)&&t(Y.timelines.inTimeline),description:$(()=>a(g,null,[u("["),Y.name,u("] Toil")]))}))]),i=v(()=>n.apply(t(F.totalSkyrmions).times(.01)));C.on("preUpdate",p=>{if(!t(C.unlocked)||o.eq(t(r.reform.amount),0))return;const b=t(V.timeMult).times(p);e.value=b.times(t(i)).plus(e.value)});const s=v(()=>t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||o.gt(t(r.reform.amount),0)),r={[ne.height]:Qe(p=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(p.amount),1.15).pow_base(6).times(10),requiresPay:()=>!t(C.achievements[S.subspatial].earned)})),display:xt(S.subspatial,ne.height),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.subspatial].earned)}),onClick:()=>Mt(S.subspatial)}),Ce),[ne.width]:Qe(p=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(p.amount),1.15).pow_base(8).times(18),requiresPay:()=>!t(C.achievements[S.subspatial].earned)})),display:xt(S.subspatial,ne.width),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.subspatial].earned)}),onClick:()=>Mt(S.subspatial)}),Ce),[ne.depth]:Qe(p=>({visibility:s,requirements:K(()=>({resource:B(e),cost:()=>o.pow(t(p.amount),1.15).pow_base(10).times(60),requiresPay:()=>!t(C.achievements[S.subspatial].earned)})),display:xt(S.subspatial,ne.depth),effect(){return o.add(t(this.amount),1)},classes:()=>({auto:t(C.achievements[S.subspatial].earned)}),onClick:()=>Mt(S.subspatial)}),Ce),condense:be(p=>({visibility:()=>!t(p.bought)&&(t(V.unlocked)||t(ce.unlocked)||t(ue.unlocked)||t(C[S.infinitesimal].upgrades.condense.bought)),requirements:K(()=>({resource:B(e),cost:4e5})),display:{description:`Condense your ${e.displayName}`},onPurchase(){C.subplanck.upgrades.reform.amount.value=o.dOne},classes:()=>({auto:t(C.achievements.reform.earned)})})),reform:Qe(p=>({visibility:B(r.condense.bought),requirements:[K(()=>({resource:B(e),cost:()=>o.minus(t(p.amount),3).max(2).pow_base(t(p.amount)).plus(1).times(6).pow10().dividedBy(2.5),requiresPay:()=>!t(C.achievements.reform.earned)})),vn(()=>({fomeType:S.infinitesimal,cost:w.variable(p.amount).plus(2)}))],display:bi(S.subspatial),effect(){return o.cbrt(t(this.amount))},classes:()=>({auto:t(C.achievements.reform.earned)})}),Ce)};C.on("update",()=>{if(t(C.achievements.reform.earned)&&(!t(r.condense.bought)&&t(r.condense.canPurchase)&&r.condense.purchase(),t(r.reform.canClick)&&r.reform.onClick()),t(C.achievements[S.subspatial].earned))for(const p of Object.values(ne))t(r[p].canClick)&&r[p].onClick()});const l=v(()=>t(C.globalBoostBonus).plus(he(S.quantum,5))),c=v(()=>t(l).plus(he(S.subspatial,3))),d={index:Me(1),1:Ye(p=>({display:()=>`Multiply the generation of Subspatial Foam by ${D(he(S.subspatial,1))}`,effect:()=>new o(t(p.total)).times(t(F.pion.upgrades.kappa.effect)),bonus:c})),2:Ye(p=>({display:()=>`The Pion and Spinor nerfs act as if you had ${D(he(S.subspatial,2))} fewer upgrades`,effect:()=>new o(t(p.total)),bonus:c})),3:Ye(p=>({display:()=>`Add ${D(he(S.subspatial,3))} levels to all above boosts`,effect:()=>o.times(t(p.total),.1),bonus:l})),4:Ye(p=>({display:()=>`Increase effective Skyrmion count by ${D(he(S.subspatial,4))}`,effect:()=>new o(t(p.total)),bonus:l})),5:Ye(p=>({display:()=>`Pion and Spinor upgrades cost as if you had ${D(he(S.subspatial,5))} fewer`,effect:()=>o.times(t(p.total),.25),bonus:l}))},m=Tt(`${e.displayName} Modifiers`,()=>[{title:e.displayName,modifier:n,base:()=>t(F.totalSkyrmions).times(.01),baseText:$(()=>a(g,null,[u("["),F.name,u("] Total "),F.skyrmions.displayName]))}]);return{amount:e,upgrades:r,boosts:d,production:i,modifierModal:m,display:"This page intentionally left blank"}});let S=function(e){return e.protoversal="protoversal",e.infinitesimal="infinitesimal",e.subspatial="subspatial",e.subplanck="subplanck",e.quantum="quantum",e}({}),ne=function(e){return e.height="height",e.width="width",e.depth="depth",e}({});function Mt(e){const n=C[e].boosts.index,i=C[e].boosts[t(n)].amount;i.value=o.add(t(i),1),n.value=t(n)===5?1:t(n)+1}function xt(e,n){let i;switch(n){case ne.height:i="Height";break;case ne.width:i="Width";break;case ne.depth:i="Depth";break}return $(()=>a(g,null,[a("h3",null,[u("Enlarge "),C[e].amount.displayName,u(" "),i,u(" by 1m")]),a("br",null,null),a("br",null,null),u("Current "),i,u(": "),D(t(C[e].upgrades[n].amount)),u("m"),a("br",null,null),a("br",null,null),Je(C[e].upgrades[n].requirements)]))}function bi(e){return $(()=>a(g,null,[u("Re-form your "),C[e].amount.displayName,a("br",null,null),a("br",null,null),u("Amount: "),te(t(C[e].upgrades.reform.amount)),a("br",null,null),a("br",null,null),Je(C[e].upgrades.reform.requirements)]))}const Qg="fome",C=st(Qg,function(){const e="Quantum Foam",n={"--feature-background":"#ffffff","--bought":"#929aa9"},i=v(()=>t(ue.milestones[1].earned)||t(F.upgrades.fome.bought)),s=v(()=>o.gt(t(en.upgrades.reform.amount),0)?S.quantum:o.gt(t(Ui.upgrades.reform.amount),0)?S.subplanck:o.gt(t(Gi.upgrades.reform.amount),0)?S.subspatial:o.gt(t(ji.upgrades.reform.amount),0)?S.infinitesimal:S.protoversal),r=[H(()=>({multiplier:F.spinor.upgrades.eta.effect,enabled:()=>o.gt(t(F.spinor.upgrades.eta.totalAmount),0),description:$(()=>a(g,null,[u("["),F.name,u("] Spinor Upgrade \u03B7 ("),te(t(F.spinor.upgrades.eta.totalAmount)),u(")")]))})),H(()=>({multiplier:V.upgrades.acceleration.effect,enabled:B(V.upgrades.acceleration.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Minute Acceleration")]))})),H(()=>({multiplier:V.loops.averageLoopValues[V.loops.loops.tempFome.id],enabled:B(V.loops.loops.tempFome.built),description:$(()=>a(g,null,[u("["),V.name,u("] Acceleron Loop #4")]))})),H(()=>({multiplier:Se.enhancements.formation.effect,enabled:B(Se.enhancements.formation.bought),description:$(()=>a(g,null,[u("["),V.name,u("] Entropic Formation")]))})),H(()=>({multiplier:ce.fomeBonus,enabled:()=>t(ce.coreResearch.research.fomeGain.researched),description:$(()=>a(g,null,[u("["),ce.name,u("] Inflaton Resonance")]))})),H(()=>({multiplier:ce.upgrades.moreFome.effect,enabled:B(ce.upgrades.moreFome.bought),description:$(()=>a(g,null,[u("["),ce.name,u("] Dynamic Inflational Formation")]))})),H(()=>({multiplier:en.boosts[1].effect,enabled:()=>o.gt(t(en.boosts[1].total),0),description:$(()=>a(g,null,[u("["),e,u("] Quantum Boost 1 ("),te(t(en.boosts[1].total)),u(")")]))})),H(()=>({multiplier:en.boosts[3].effect,enabled:()=>o.gt(t(en.boosts[3].total),0),description:$(()=>a(g,null,[u("["),e,u("] Quantum Boost 3 ("),te(t(en.boosts[3].total)),u(")")]))}))],l=[H(()=>({multiplier:ze.buffs[z.LEFT],enabled:B(Y.upgrades.tactics.bought),description:$(()=>a(g,null,[u("["),Y.name,u("] Passive Left Timeline Bonus")]))})),H(()=>({multiplier:()=>o.reciprocate(t(ze.nerfs[z.LEFT])),enabled:B(Y.upgrades.tactics.bought),description:$(()=>a(g,null,[u("["),Y.name,u("] Active Left Timeline Effect")]))}))],c=v(()=>o.add(Oe(Se.enhancements.entitlement,0),Oe(Y.upgrades.tier,0))),d={fontSize:"48px",fontWeight:"normal",color:"var(--feature-foreground)"},m={[S.protoversal]:kt(()=>({display:$(()=>a("span",{style:d},[u("P"),a("sup",{style:{fontWeight:"normal"}},[u("2")])])),requirements:At(()=>o.gte(t(gn.upgrades.reform.amount),2)),tooltip:{requirement:a(g,null,[u("Re-form your Protoversal Foam")]),effect:a(g,null,[u("Unlock the Pion and Spinor Buy All button"),a("br",null,null),u("Automatically enlarge your Protoversal Foam")])}})),[S.infinitesimal]:kt(()=>({display:$(()=>a(g,null,[a("span",{style:d},[u("P"),a("sup",{style:{fontWeight:"normal"}},[u("3")])])])),requirements:At(()=>o.gte(t(gn.upgrades.reform.amount),3)),tooltip:{requirement:a(g,null,[u("Obtain Protoversal Foam"),a("sup",null,[u("3")])]),effect:a(g,null,[u("Automatically enlarge your Infinitesimal Foam")])}})),[S.subspatial]:kt(()=>({display:$(()=>a(g,null,[a("span",{style:d},[u("P"),a("sup",{style:{fontWeight:"normal"}},[u("4")])])])),requirements:At(()=>o.gte(t(gn.upgrades.reform.amount),4)),tooltip:{requirement:a(g,null,[u("Obtain Protoversal Foam"),a("sup",null,[u("4")])]),effect:a(g,null,[u("Automatically enlarge your Subspatial Foam")])}})),[S.subplanck]:kt(()=>({display:$(()=>a(g,null,[a("span",{style:d},[u("P"),a("sup",{style:{fontWeight:"normal"}},[u("5")])])])),requirements:At(()=>o.gte(t(gn.upgrades.reform.amount),5)),tooltip:{requirement:a(g,null,[u("Obtain Protoversal Foam"),a("sup",null,[u("5")])]),effect:a(g,null,[u("Automatically enlarge your Subplanck Foam")])}})),[S.quantum]:kt(()=>({display:$(()=>a(g,null,[a("span",{style:d},[u("P"),a("sup",{style:{fontWeight:"normal"}},[u("6")])])])),requirements:At(()=>o.gte(t(gn.upgrades.reform.amount),6)),tooltip:{requirement:a(g,null,[u("Obtain Protoversal Foam"),a("sup",null,[u("6")])]),effect:a(g,null,[u("Automatically enlarge your Quantum Foam")])}})),reform:kt(()=>({display:$(()=>a(g,null,[a("span",{style:d},[u("Q"),a("sup",{style:{fontWeight:"normal"}},[u("2")])])])),requirements:At(()=>o.gte(t(en.upgrades.reform.amount),2)),tooltip:{requirement:a(g,null,[u("Re-form your Quantum Foam")]),effect:a(g,null,[u("Automatically re-form your Foam")])}}))};for(const f of Object.values(m))Hn(f,{display:$(()=>a(g,null,[a("h3",null,[f.tooltip.requirement]),a("br",null,null),f.tooltip.effect]))});const p={buyAll:St(()=>({enabled(){return!t(i)||Object.values(m).every(f=>t(f.earned))?!1:o.gt(t(ce.inflatons),0)||t(V.achievements.protoversal.earned)},key:"shift+f",description:"Buy one of each Foam upgrade",onPress(){for(const f of[gn,ji,Gi,Ui,en]){f.upgrades.condense.purchase();for(const h of[...Object.values(ne),"reform"])f.upgrades[h].onClick()}}})),switchTab:St(()=>({enabled:i,key:"ctrl+f",description:"Move to Foam",onPress(){Nn.tabs.selected.value=e}}))},b=pi({main:()=>({display:"Foam",tab:rn(()=>({display:$(()=>a(g,null,[a("div",null,[u("You have "),a(Vn,{resource:C[t(s)].amount,color:"var(--feature-background)"},null),u(" "),C[t(s)].amount.displayName,o.gt(t(C[t(s)].upgrades.reform.amount),1)?a("sup",null,[te(t(C[t(s)].upgrades.reform.amount))]):void 0]),a(Ne,null,null),a(Eg,null,null),a(Ne,{height:"8px"},null),Ql(...Object.values(m))]))}))}),boosts:()=>({display:"Boosts",tab:rn(()=>({display:$(()=>a(Gg,null,null))}))})});return{name:e,theme:n,unlocked:i,production:r,timelineProduction:l,globalBoostBonus:c,achievements:m,hotkeys:p,display:$(()=>a(g,null,[o.gt(t(gn.boosts[1].total),0)?ie(b):ie(t(b.tabs.main.tab))])),tabs:b,[S.protoversal]:gn,[S.infinitesimal]:ji,[S.subspatial]:Gi,[S.subplanck]:Ui,[S.quantum]:en}}),ue=st("entangled",()=>{const e="Entangled Strings",n={"--feature-background":"#9a4500","--bought":"#9a450099"},i=v(()=>t(y[1].earned)||t(V.upgrades.mastery.bought)&&t(ce.coreResearch.research.mastery.researched)),s=at(0,{displayName:e,singularName:"Entangled String"}),r=Me("",!1);function l(T){return t(y[1].earned)?!0:T===t(r)}const c="160px",d=(()=>{const T=v(()=>[M,P,A,W,de].filter(X=>t(X.bought)).length+2),M=be(()=>({requirements:K(()=>({resource:B(s),cost:T,requiresPay:!1})),visibility:y[2].earned,display:{title:"Grasp the Void",description:"You have long since extracted all you can from your Skyrmions, but new insights show there may be yet more to gain"},style:{width:c,height:c}})),P=be(()=>({requirements:[K(()=>({resource:B(s),cost:T,requiresPay:!1})),At(!1)],visibility:y[2].earned,display:{title:"Architectural Renaissance (TBD)",description:"Look to the past, and see what glories the future may hold"},style:{width:c,height:c}})),A=be(()=>({requirements:[K(()=>({resource:B(s),cost:T,requiresPay:!1})),At(!1)],visibility:y[2].earned,display:{title:"Tetradimensional Engineering (TBD)",description:"Application of structural ideas gained from Entropic Loops may give rise to a powerful new sector of exploration and progress"},style:{width:c,height:c}})),W=be(()=>({requirements:K(()=>({resource:B(s),cost:T,requiresPay:!1})),visibility:y[2].earned,display:{title:"Enigmatic Engineering",description:"Time Cubes seem helpful, but limited in power. Maybe your newfound mastery over space and time can reveal more of their secrets"},style:{width:c,height:c}})),de=be(()=>({requirements:[K(()=>({resource:B(s),cost:T,requiresPay:!1})),At(!1)],visibility:y[2].earned,display:{title:"Technological Ascendency (TBD)",description:"You have shown mastery over space and time, at least individually. Together, though, there are more secrets to unlock"},style:{width:c,height:c}}));return{skyrmion:M,fome:P,acceleron:A,timecube:W,inflaton:de}})(),m=v(()=>Object.values(d).filter(T=>T.bought.value).length),p=v(()=>(t(d.skyrmion.bought)?1:0)+(t(d.fome.bought)?2:0)+(t(d.acceleron.bought)?4:0)+(t(d.timecube.bought)?8:0)+(t(d.inflaton.bought)?16:0)),b=v(()=>o.lte(s.value,1)?!0:o.lte(s.value,m.value+1)),f={expansion:At(b),acceleron:K(()=>({resource:B(V.accelerons),cost(){const T=(()=>o.eq(t(s),0)?1e19:[1e29,15e40,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,25e40,1e64,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf][t(p)])();return o.times(T,t(F.pion.upgrades.xi.effect))}})),inflaton:K(()=>({resource:B(ce.inflatons),cost(){const T=(()=>o.eq(t(s),0)?8e3:[18e3,85e11,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,37e4,45e16,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf][t(p)])();return o.times(T,t(F.spinor.upgrades.xi.effect)).pow10()}})),timecube:K(()=>({resource:at(v(()=>Object.values(Y.timelines.timelines).map(T=>t(T.score)).reduce((T,M)=>T.plus(M),o.dZero))),cost(){return t(d.timecube.bought)?[o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,1e4,5e6,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf,o.dInf][t(p)]:0},visibility:B(d.timecube.bought)}))},h=ct(()=>({canClick(){return Vt(Object.values(f))},onClick(){s.value=o.add(t(s.value),1),r.value="",un(()=>{const T=(t(y[3].earned)?[ce.coreResearch.research.queueTwo,ce.coreResearch.research.queueFour]:[]).filter(M=>t(M.researched));N.reset(),t(y[2].earned)&&(C.protoversal.upgrades.reform.amount.value=o.dOne);for(const M of T)M.researched.value=!0;F.skyrmions.value=t(V.achievements.skyrmion.earned)?10:1})},display:"<h2>Condense reality into 1 Entangled String</h2>",style:{width:c,height:c}})),N=ys(()=>({thingsToReset(){const T=[F.skyrmions,F.pion,F.spinor,C.protoversal,C.infinitesimal,C.subspatial,C.subplanck,C.quantum,V.accelerons,V.bestAccelerons,V.totalAccelerons,V.time,V.upgrades,V.loops,Y,ce.inflatons,ce.inflating,ce.upgrades,ce.buildings,ce.coreResearch];return t(y[2].earned)||T.push(F.upgrades,C.achievements),T}})),y={1:kt(()=>({requirements:K(()=>({resource:B(s),cost:1})),display:{requirement:`1 ${s.singularName}`,effect:`${V.accelerons.displayName} and ${ce.inflatons.displayName} no longer inflate each other's costs`},small:!1})),2:kt(()=>({requirements:K(()=>({resource:B(s),cost:2})),display:{requirement:`2 ${s.displayName}`,effect:$(()=>a(g,null,[u("Unlock expansions to previous content"),a("br",null,null),u("Keep Skyrmion upgrades and Foam milestones")]))},small:!1})),3:kt(()=>({requirements:K(()=>({resource:B(s),cost:3})),display:{requirement:`3 ${s.displayName}`,effect:"Keep all parallel research and research queue researches"},small:!1})),7:kt(()=>({requirements:K(()=>({resource:B(s),cost:7})),display:{requirement:`7 ${s.displayName}`,effect:"Unlock Fundamental Particles"},small:!1}))},q={reset:St(()=>({enabled:i,key:"e",description:"Entangle spacetime into another String",onPress:h.onClick})),switchTab:St(()=>({enabled:i,key:"ctrl+e",description:"Move to Entangled Strings",onPress(){Nn.tabs.selected.value=e}}))};return{name:e,theme:n,unlocked:i,strings:s,expansions:d,milestones:y,hotkeys:q,display:$(()=>a(g,null,[a(Ai,{resource:s},null),a(Qt,null,{default:()=>[Li(d.skyrmion,d.fome),a(dn,null,{default:()=>[ie(h),t(y[2].earned)?a(Ne,{height:c},null):void 0,ie(d.acceleron)]}),Li(d.inflaton,d.timecube)]}),a(Ne,null,null),a("div",null,[u("The next "),s.singularName,u(" requires:")]),a(Ne,null,null),a("div",{style:{color:V.theme["--feature-background"]}},[V.accelerons.displayName,u(": "),D(t(f.acceleron.resource)),u(" / "),D(t(f.acceleron.cost))]),a("div",{style:{color:ce.theme["--feature-background"]}},[u("Stored "),ce.inflatons.displayName,u(": "),D(t(f.inflaton.resource)),u(" / "),D(t(f.inflaton.cost))]),ye(f.timecube.visibility)?a("div",{style:{color:Y.theme["--feature-background"]}},[u("Total Timeline Score: "),D(t(f.timecube.resource)),u(" / "),D(t(f.timecube.cost))]):void 0,a(Ne,null,null),Li(...Object.values(y))])),branchOrder:r,isFirstBranch:l}}),bn="acceleron",V=st(bn,function(){const e="Accelerons",n={"--feature-background":"#0f52ba"},i=v(()=>t(ue.milestones[1].earned)||ue.isFirstBranch(bn)||t(ce.coreResearch.research.mastery.researched)?!0:!ue.isFirstBranch(wt)&&t(C[S.quantum].upgrades.condense.bought)),s=at(0,{displayName:e,singularName:"Acceleron"}),r=hs(s),l=Td(s),c=dt(()=>[H(()=>({multiplier:1e71,enabled:()=>!(t(ue.branchOrder)===""||ue.isFirstBranch(bn)),description:$(()=>a(g,null,[u("["),ce.name,u("] Inflational Interference")])),smallerIsBetter:!0})),H(()=>({multiplier:()=>t(P.translation.effect).reciprocate(),enabled:B(P.translation.bought),description:$(()=>a(g,null,[u("["),e,u("] Quantum Translation")])),smallerIsBetter:!0})),H(()=>({multiplier:()=>1/t(P.fluctuation.effect),enabled:B(P.fluctuation.bought),description:$(()=>a(g,null,[u("["),e,u("] Temporal Fluctuation")])),smallerIsBetter:!0})),H(()=>({multiplier:()=>t(Ue.averageLoopValues[Ue.loops.tempAcceleron.id]).reciprocate(),enabled:B(Ue.loops.tempAcceleron.built),description:$(()=>a(g,null,[u("["),e,u("] Entropic Loop #5")])),smallerIsBetter:!0})),H(()=>({multiplier:()=>t(Se.enhancements.contraction.effect).reciprocate(),enabled:B(Se.enhancements.contraction.bought),description:$(()=>a(g,null,[u("["),Se.name,u("] Entropic Contraction")])),smallerIsBetter:!0})),H(()=>({multiplier:()=>t(Se.enhancements.inversion.effect).reciprocate(),enabled:B(Se.enhancements.inversion.bought),description:$(()=>a(g,null,[u("["),Se.name,u("] Entropic Inversion")])),smallerIsBetter:!0})),H(()=>({multiplier:()=>t(Se.enhancements.rotation.effect).reciprocate(),enabled:B(Se.enhancements.rotation.bought),description:$(()=>a(g,null,[u("["),Se.name,u("] Entropic Rotation")])),smallerIsBetter:!0}))]),d=Hd(()=>({formula:E=>E.dividedBy(c.getFormula(1e9)).pow(v(()=>t(ue.branchOrder)===""||ue.isFirstBranch(bn)?.1:.05)),baseResource:B(C[S.quantum].amount),gainResource:B(s),onConvert(){t(ue.milestones[1].earned)||t(ue.branchOrder)===""&&(ue.branchOrder.value=bn)}})),m=ys(()=>({thingsToReset(){const E=[F.skyrmions,F.pion,F.spinor,C.protoversal.amount,C.protoversal.upgrades.condense,C.protoversal.upgrades.reform,C.infinitesimal.amount,C.infinitesimal.upgrades.condense,C.infinitesimal.upgrades.reform,C.subspatial.amount,C.subspatial.upgrades.condense,C.subspatial.upgrades.reform,C.subplanck.amount,C.subplanck.upgrades.condense,C.subplanck.upgrades.reform,C.quantum.amount,C.quantum.upgrades.condense,C.quantum.upgrades.reform];return t(M.protoversal.earned)||E.push(C.protoversal),t(M.infinitesimal.earned)||E.push(C.infinitesimal),t(M.subspatial.earned)||E.push(C.subspatial),t(M.subplanck.earned)||E.push(C.subplanck),t(M.quantum.earned)||E.push(C.quantum),E},onReset(){C.protoversal.upgrades.reform.amount.value=o.dOne,t(M.skyrmion.earned)&&(F.skyrmions.value=o.dTen)}})),p=Rd(()=>({conversion:d,style:{width:"fit-content",padding:"5px 10px",minHeight:"60px"},onClick(){un(()=>{m.reset(),F.skyrmions.value=t(M.skyrmion.earned)?10:1})}})),b=v(()=>{let E=o.max(t(r),0).plus(1);return E.gte(1e12)?E.log10().times(5e5/6):E.sqrt()}),f=dt(()=>[H(()=>({multiplier:Y.upgrades.time.effect,enabled:B(Y.upgrades.time.bought),description:$(()=>a(g,null,[u("["),Y.name,u("] Time")]))})),H(()=>({multiplier:Se.enhancements.dilation.effect,enabled:B(Se.enhancements.dilation.bought),description:$(()=>a(g,null,[u("["),e,u("] Entropic Dilation")]))})),H(()=>({multiplier:Y.getTimesquareEffect(z.BACK),enabled:()=>o.gt(t(Y.timesquares.squares[z.BACK].square.amount),0),description:$(()=>a(g,null,[u("["),Y.name,u("] Back Time Squares ("),te(t(Y.timesquares.squares[z.BACK].square.amount)),u(")")]))})),H(()=>({multiplier:2,enabled:Y.upgrades.tour.bought,description:$(()=>a(g,null,[u("["),Y.name,u("] Tour")]))})),H(()=>({multiplier:()=>o.reciprocate(t(Y.timelines.nerfs[z.BACK])),enabled:()=>t(Y.timelines.depths[z.BACK])>0,description:$(()=>a(g,null,[u("["),Y.name,u("] Active Back Timeline Effect")]))})),H(()=>({multiplier:Y.timelines.buffs[z.BACK],enabled:()=>t(Y.timelines.scores[z.BACK]).gt(0),description:$(()=>a(g,null,[u("["),Y.name,u("] Passive Back Timeline Bonus")]))}))]),h=v(()=>new o(f.apply(t(b)))),N=Me(0);this.on("preUpdate",E=>{N.value=o.add(t(N),E)});const y=at(B(l)),q={fontSize:"48px",fontWeight:"normal"},T=E=>v(()=>({background:"var(--quarter-transparent)",border:`solid ${t(E.earned)?"var(--bought)":"var(--feature-background)"} 2px`,borderRadius:0,color:t(E.earned)?"var(--bought)":"var(--feature-foreground)"})),M={protoversal:kt(E=>({display:$(()=>a("span",{style:q},[u("P")])),requirements:K(()=>({resource:B(y),cost:1})),small:!0,style:T(E),tooltip:{requirement:a(g,null,[u("1 Acceleron")]),effect:a(g,null,[u("Keep Protoversal Boosts and Size Upgrades on Acceleron reset"),a("br",null,null),u("Keep Foam Achievements on Acceleron reset")])}})),infinitesimal:kt(E=>({display:$(()=>a("span",{style:q},[u("I")])),requirements:K(()=>({resource:B(y),cost:2})),small:!0,style:T(E),tooltip:{requirement:a(Et,{resource:B(s),override:2},null),effect:a(g,null,[u("Keep Infinitesimal Boosts and Size Upgrades on Acceleron reset")])}})),subspatial:kt(E=>({display:$(()=>a("span",{style:q},[u("Ss")])),requirements:K(()=>({resource:B(y),cost:3})),small:!0,style:T(E),tooltip:{requirement:a(Et,{resource:B(s),override:3},null),effect:a(g,null,[u("Keep Subspatial Boosts and Size Upgrades on Acceleron reset")])}})),skyrmion:kt(E=>({display:$(()=>a("span",{style:q},[u("S")])),requirements:K(()=>({resource:B(y),cost:5})),small:!0,style:T(E),tooltip:{requirement:a(Et,{resource:B(s),override:5},null),effect:a(g,null,[u("Start with 10 Skyrmions on Acceleron reset")])}})),subplanck:kt(E=>({display:$(()=>a("span",{style:q},[u("Sp")])),requirements:K(()=>({resource:B(y),cost:7})),small:!0,style:T(E),tooltip:{requirement:a(Et,{resource:B(s),override:7},null),effect:a(g,null,[u("Keep Subplanck Boosts and Size Upgrades on Acceleron reset")])}})),quantum:kt(E=>({display:$(()=>a("span",{style:q},[u("Q")])),requirements:K(()=>({resource:B(y),cost:10})),small:!0,style:T(E),tooltip:{requirement:a(Et,{resource:B(s),override:10},null),effect:a(g,null,[u("Keep Quantum Boosts and Size Upgrades on Acceleron reset")])}}))};for(const E of Object.values(M))Hn(E,{display:$(()=>a(g,null,[a("h3",null,[E.tooltip.requirement]),a("br",null,null),E.tooltip.effect]))});const P=(()=>{const E=be(Ee=>({visibility(){return t(this.bought)||o.gte(t(l),4)},display:$(()=>a(g,null,[a("h3",null,[u("Minute Acceleration")]),a("br",null,null),a("br",null,null),u("Time speed massively multiplies Foam generation"),a("br",null,null),a("br",null,null),u("Currently: "),D(Oe(Ee,void 0,!0)),u("\xD7"),a("br",null,null),Je(Ee.requirements)])),effect(){return t(h).abs().sqrt().times(1e3)},requirements:K(()=>({cost:1,resource:B(s)}))}),Ce),G=be(Ee=>({visibility(){return t(this.bought)||t(E.bought)},display:$(()=>a(g,null,[a("h3",null,[u("Quantum Translation")]),a("br",null,null),a("br",null,null),u("Acceleron cost is divided based on the number of Foam re-formations"),a("br",null,null),a("br",null,null),u("Currently: /"),te(Oe(Ee,void 0,!0)),a("br",null,null),Je(Ee.requirements)])),effect(){return Object.values(S).map(pn=>t(C[pn].upgrades.reform.amount)).reduce((pn,Kn)=>pn.plus(Kn),o.dZero)},requirements:K(()=>({cost:5,resource:B(s)}))}),Ce),ee=be(Ee=>({visibility(){return t(this.bought)||t(E.bought)},display:$(()=>a(g,null,[a("h3",null,[u("Superpositional Acceleration")]),a("br",null,null),a("br",null,null),u("Gain a new Pion upgrade"),a("br",null,null),u("Gain a new Spinor upgrade"),a("br",null,null),a("br",null,null),a("br",null,null),Je(Ee.requirements)])),requirements:K(()=>({cost:25,resource:B(s)}))})),I=be(Ee=>({visibility(){return t(this.bought)||t(ee.bought)},display:$(()=>a(g,null,[a("h3",null,[u("Quasi-temporal Superstructures")]),a("br",null,null),a("br",null,null),u("Consume the past to build the future"),a("br",null,null),a("br",null,null),a("br",null,null),a("br",null,null),Je(Ee.requirements)])),requirements:K(()=>({cost:50,resource:B(s)}))})),R=be(Ee=>({visibility(){return t(this.bought)||t(Ue.loops.acceleron.built)},display:$(()=>a(g,null,[a("h3",null,[u("Temporal Fluctuation")]),a("br",null,null),a("br",null,null),u("Acceleron cost is divided based on the number of completed Entropic Loops"),a("br",null,null),a("br",null,null),u("Currently: /"),te(Oe(Ee,void 0,!0)),a("br",null,null),Je(Ee.requirements)])),effect(){return t(Ue.numBuiltLoops)+1},requirements:K(()=>({cost:100,resource:B(s)}))}),Ce),rt=be(Ee=>({visibility(){return t(this.bought)||t(Ue.loops.instantProd.built)},display:$(()=>a(g,null,[a("h3",null,[u("Unstable Expansion")]),a("br",null,null),a("br",null,null),u("Unlock Entropic Enhancements"),a("br",null,null),a("br",null,null),a("br",null,null),a("br",null,null),Je(Ee.requirements)])),requirements:K(()=>({cost:300,resource:B(s)}))})),It=be(Ee=>({visibility(){return t(this.bought)||t(Ue.loops.timecube.built)},display:$(()=>a(g,null,[a("h3",null,[u("Stability Conversion")]),a("br",null,null),a("br",null,null),u("Each Entropic Loop multiplies Time Cube gain"),a("br",null,null),a("br",null,null),u("Currently: "),te(Oe(Ee,void 0,!0)),u("\xD7"),a("br",null,null),Je(Ee.requirements)])),effect(){return t(Ue.numBuiltLoops)+1},requirements:K(()=>({cost:15e4,resource:B(s)}))}),Ce),zt=be(Ee=>({visibility(){return t(this.bought)||t(It.bought)},display:$(()=>a(g,null,[a("h3",null,[u("Subspatial Alacrity")]),a("br",null,null),a("br",null,null),u("Increase Subspatial Foam gain by "),te(Oe(Ee,void 0,!0)),u("\xD7"),a("br",null,null),a("br",null,null),a("br",null,null),Je(Ee.requirements)])),effect:1e4,requirements:K(()=>({cost:2e6,resource:B(s)}))})),Ze=be(Ee=>({visibility(){return t(this.bought)||t(zt.bought)},display:$(()=>a(g,null,[a("h3",null,[u("Cubic Tetration")]),a("br",null,null),a("br",null,null),u("Remove the ability to Acceleron reset"),a("br",null,null),u("Unlock two additional Entropic Loops"),a("br",null,null),a("br",null,null),a("br",null,null),Je(Ee.requirements)])),requirements:K(()=>({cost:1e8,resource:B(s)}))})),$n=be(Ee=>({visibility(){return t(this.bought)||t(Ze.bought)},display:$(()=>a(g,null,[a("h3",null,[u("Temporal Mastery")]),a("br",null,null),a("br",null,null),u("Unlock "),ue.isFirstBranch(bn)||o.gt(t(ue.strings),0)?ce.inflatons.displayName:ue.strings.displayName,a("br",null,null),a("br",null,null),a("br",null,null),a("br",null,null),Je(Ee.requirements)])),requirements:K(()=>({cost:1e19,resource:B(s)}))}));return{acceleration:E,translation:G,skyrmion:ee,superstructures:I,fluctuation:R,expansion:rt,conversion:It,alacrity:zt,tetration:Ze,mastery:$n}})(),A=[P.acceleration,P.fluctuation,P.tetration,P.conversion,P.skyrmion],W=[P.translation,P.expansion,P.mastery,P.alacrity,P.superstructures],de={reset:St(()=>({enabled:()=>t(i)&&!t(P.tetration.bought),key:"a",description:"Form your Quantum Foam into Accelerons",onPress:p.onClick})),switchTab:St(()=>({enabled:i,key:"ctrl+a",description:"Move to Accelerons",onPress(){Nn.tabs.selected.value=e}}))},X=Tt("Acceleron Modifiers",()=>[{title:"Acceleron Cost",modifier:c,base:1e9,baseText:$(()=>a(g,null,[u("["),C.name,u("] Base Amount")])),smallerIsBetter:!0},{title:"Time Speed",modifier:f,base:b,baseText:$(()=>a(g,null,[u("["),e,u("] Best Accelerons ("),te(t(r)),u(")")]))}]),U=$(()=>a(g,null,[a(Ai,{resource:s,effect:$(()=>a(g,null,[u("which are causing time to go "),D(t(h)),u("\xD7 faster"),ie(X),a("br",null,null),u("For every second in real time, "),a("pre",{style:{display:"inline"}},[rs(t(h))]),u(" passes")]))},null)])),Be=pi({loops:()=>({display:"Entropic Loops",tab:rn(()=>({display:$(()=>a(g,null,[ie(U),t(P.tetration.bought)?a(Ne,{height:"70px"},null):ie(p),ie(Ue.upperDisplay),a(fm,{radius:192,width:60,distance:150,top:4,right:W,bottom:4,left:A},null),a(Ne,null,null),ie(Ue.lowerDisplay),a(Ne,null,null),a(Ne,null,null),wn(...Object.values(M))]))}))}),enhancements:()=>({display:"Entropic Enhancements",tab:rn(()=>({display:$(()=>a(g,null,[ie(U),ie(Se.display)]))}))})});return{name:e,theme:n,accelerons:s,bestAccelerons:r,totalAccelerons:l,conversion:d,timeMult:h,time:N,upgrades:P,achievements:M,tabs:Be,hotkeys:de,display:$(()=>a(g,null,[t(P.expansion.bought)?ie(Be):ie(t(Be.tabs.loops.tab))])),unlocked:i,loops:Ue,entropy:Se}});const Xg={class:"skyrmion-container"},Zg={class:"skyrmion-grid"},Jg=oe({__name:"Skyrmion",setup(e){const n=F.upgrades,i={fome:{row:2,col:7},autoGain:{row:2,col:11},alpha:{row:3,col:5},beta:{row:3,col:9},gamma:{row:3,col:13},delta:{row:4,col:3},epsilon:{row:4,col:7},zeta:{row:4,col:11},eta:{row:4,col:15},theta:{row:5,col:1},iota:{row:5,col:5},kappa:{row:5,col:9},lambda:{row:5,col:13},mu:{row:5,col:17},nu:{row:6,col:3},xi:{row:6,col:7},pi:{row:6,col:11},rho:{row:6,col:15}};function s(r){return{"--row":i[r].row,"--col":i[r].col}}return(r,l)=>(k(),x("div",Xg,[_("ul",Zg,[_("li",Rt({class:"skyrmion-upgrade reset"},r.$attrs),[Kt(r.$slots,"default",{},void 0,!0)],16),(k(!0),x(g,null,Pe(t(t(n)),(c,d)=>(k(),x(g,{key:d},[t(c.visibility)!==t(De).None?(k(),x("li",Rt({key:0,class:"skyrmion-upgrade"},r.$attrs,{style:s(d)}),[(k(),se($e(t(ie)(c))))],16)):j("",!0)],64))),128))])]))}});var eb=ge(Jg,[["__scopeId","data-v-5ab76001"]]);function tb(e){const n=be(()=>({visibility:e.visibility,requirements:e.requirements,display:e.display.title,onPurchase:e.onPurchase}));return Hn(n,{direction:Ae.Up,display:$(()=>a(g,null,[e.display.description,a(Ne,null,null),Je(e.requirements)]))}),n}function nb(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Os(e)}const ib="skyrmion",F=st(ib,function(){const e="Skyrmions",n={"--feature-background":"#37d7ff"},i=dt(()=>[H(()=>({multiplier:()=>o.reciprocate(t(xe.upgrades.alpha.effect)),enabled:()=>o.gt(t(xe.upgrades.alpha.totalAmount),0),description:$(()=>a(g,null,[u("["),e,u("] Spinor Upgrade \u03B1 ("),te(t(xe.upgrades.alpha.totalAmount)),u(")")])),smallerIsBetter:!0})),H(()=>({multiplier:()=>o.reciprocate(t(C.infinitesimal.boosts[4].effect)),enabled:()=>o.gt(t(C.infinitesimal.boosts[4].total),0),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Boost 4 ("),te(t(C.infinitesimal.boosts[4].total)),u(")")])),smallerIsBetter:!0})),H(()=>({multiplier:Se.enhancements.amplification.effect,enabled:B(Se.enhancements.amplification.bought),description:$(()=>a(g,null,[u("["),Se.name,u("] Entropic Amplification")])),smallerIsBetter:!0}))]),s=h=>w.variable(h).pow10().times(i.getFormula(1)),r=Qe(h=>({initialAmount:1,requirements:[K(()=>({resource:B(Le.pions),requiresPay:()=>!t(m.autoGain.bought),cumulativeCost:!0,maxBulkAmount:10,cost:s(h.amount)})),K(()=>({resource:B(xe.spinors),requiresPay:()=>!t(m.autoGain.bought),cumulativeCost:!0,maxBulkAmount:10,cost:s(h.amount)}))],display:$(()=>{const N=s(h.amount),y=o.clampMin(ui(r.requirements),1),q=sn(N,o.clampMin(y,1),!0),T=o.gt(q,1.5)||o.lt(q,.5)||o.eq(D(q),1)?"displayName":"singularName";return a(g,null,[a("span",null,[u("Convert"),a("br",null,null),D(q),a("br",null,null),Le.pions[T],u(" and "),xe.spinors[T],a("br",null,null),u("to "),a(Et,{resource:l,override:y},null),a(Ne,{height:"5px"},null)])])})}));Hn(r,{direction:Ae.Up,display:$(()=>{const h=s(r.amount),N=ui(r.requirements),y=sn(h,o.add(N,1),!0);return a(g,null,[u("Next at "),D(y),u(" Pions and Spinors")])})}),this.on("update",()=>{t(m.autoGain.bought)&&r.onClick()});const l=at(B(r.amount),{displayName:e,singularName:"Skyrmion"}),c=v(()=>o.add(t(l),he(S.subspatial,4))),d=[H(()=>({multiplier:Le.upgrades.alpha.effect,enabled:()=>o.gt(t(Le.upgrades.alpha.totalAmount),0),description:$(()=>a(g,null,[u("["),e,u("] Pion Upgrade \u03B1 ("),D(t(Le.upgrades.alpha.totalAmount)),u(")")]))})),H(()=>({multiplier:xe.upgrades.zeta.effect,enabled:()=>o.gt(t(xe.upgrades.zeta.totalAmount),0),description:$(()=>a(g,null,[u("["),e,u("] Spinor Upgrade \u03B6 ("),D(t(xe.upgrades.zeta.totalAmount)),u(")")]))})),H(()=>({multiplier:xe.upgrades.lambda.effect,enabled:()=>o.gt(t(xe.upgrades.lambda.totalAmount),0),description:$(()=>a(g,null,[u("["),e,u("] Spinor Upgrade \u03BB ("),D(t(xe.upgrades.lambda.totalAmount)),u(")")]))})),H(()=>({multiplier:xe.upgrades.pi.effect,enabled:()=>o.gt(t(xe.upgrades.pi.totalAmount),0),description:$(()=>a(g,null,[u("["),e,u("] Spinor Upgrade \u03C0 ("),D(t(xe.upgrades.pi.totalAmount)),u(")")]))})),H(()=>({multiplier:C[S.infinitesimal].boosts[2].effect,enabled:()=>o.gt(t(C[S.infinitesimal].boosts[2].total),0),description:$(()=>a(g,null,[u("["),C.name,u("] Infinitesimal Boost 2 ("),te(t(C[S.infinitesimal].boosts[2].total)),u(")")]))})),H(()=>({multiplier:V.loops.averageLoopValues[V.loops.loops.tempSkyrmion.id],enabled:B(V.loops.loops.tempSkyrmion.built),description:$(()=>a(g,null,[u("["),V.name,u("] Entropic Loop #6")]))})),H(()=>({multiplier:()=>o.reciprocate(t(Y.timelines.nerfs[z.BOTTOM])),enabled:()=>t(Y.timelines.depths[z.BOTTOM])>0,description:$(()=>a(g,null,[u("["),Y.name,u("] Active Bottom Timeline Effect")]))})),H(()=>({multiplier:Y.timelines.buffs[z.BOTTOM],enabled:()=>t(Y.timelines.scores[z.BOTTOM]).gt(0),description:$(()=>a(g,null,[u("["),Y.name,u("] Passive Bottom Timeline Bonus")]))}))],m={fome:f({display:{title:"Condensation",description:a(g,null,[u("Begin Foam generation")])},cost:10,onPurchase(){C.protoversal.upgrades.reform.amount.value=o.dOne}}),autoGain:f({display:{title:"Reformation",description:a(g,null,[u("Automatically gain Skyrmions; they don't cost Pions or Spinors")])},cost:16}),alpha:f({visibility(){return t(this.bought)||o.gte(t(l),20)},display:{title:"Alteration",description:a(g,null,[u("Autobuy \u03B1 upgrades"),a("br",null,null),u("\u03B1 upgrades no longer consume Pions or Spinors")])},cost:24}),beta:f({visibility(){return t(this.bought)||o.gte(t(l),25)},display:{title:"Benediction",description:a(g,null,[u("Autobuy \u03B2 upgrades"),a("br",null,null),u("\u03B2 upgrades no longer consume Pions or Spinors")])},cost:28}),gamma:f({visibility(){return t(this.bought)||o.gte(t(l),30)},display:{title:"Consolidation",description:a(g,null,[u("Autobuy \u03B3 upgrades"),a("br",null,null),u("\u03B3 upgrades no longer consume Pions or Spinors")])},cost:32}),delta:f({visibility(){return t(this.bought)||o.gte(t(l),35)},display:{title:"Diversification",description:a(g,null,[u("Autobuy \u03B4 upgrades"),a("br",null,null),u("\u03B4 upgrades no longer consume Pions or Spinors")])},cost:36}),epsilon:f({visibility(){return t(this.bought)||o.gte(t(l),40)},display:{title:"Encapsulation",description:a(g,null,[u("Autobuy \u03B5 upgrades"),a("br",null,null),u("\u03B5 upgrades no longer consume Pions or Spinors")])},cost:42}),zeta:f({visibility(){return t(this.bought)||o.gte(t(l),45)},display:{title:"Fabrication",description:a(g,null,[u("Autobuy \u03B6 upgrades"),a("br",null,null),u("\u03B6 upgrades no longer consume Pions or Spinors")])},cost:48}),eta:f({visibility(){return t(this.bought)||o.gte(t(l),50)},display:{title:"Germination",description:a(g,null,[u("Autobuy \u03B7 upgrades"),a("br",null,null),u("\u03B7 upgrades no longer consume Pions or Spinors")])},cost:52}),theta:f({visibility(){return t(this.bought)||o.gte(t(l),55)},display:{title:"Hesitation",description:a(g,null,[u("Autobuy \u03B8 upgrades"),a("br",null,null),u("\u03B8 upgrades no longer consume Pions or Spinors")])},cost:56}),iota:f({visibility(){return t(this.bought)||o.gte(t(l),60)},display:{title:"Immitation",description:a(g,null,[u("Autobuy \u03B9 upgrades"),a("br",null,null),u("\u03B9 upgrades no longer consume Pions or Spinors")])},cost:64}),kappa:f({visibility(){return t(this.bought)||o.gte(t(l),65)},display:{title:"Juxtaposition",description:a(g,null,[u("Autobuy \u03BA upgrades"),a("br",null,null),u("\u03BA upgrades no longer consume Pions or Spinors")])},cost:69}),lambda:f({visibility(){return t(this.bought)||t(V.upgrades.skyrmion.bought)},display:{title:"Lateralization",description:a(g,null,[u("Autobuy \u03BB upgrades"),a("br",null,null),u("\u03BB upgrades no longer consume Pions or Spinors")])},cost:()=>ue.isFirstBranch(bn)?72:150}),mu:f({visibility(){return t(this.bought)||t(ce.upgrades.skyrmionUpgrades.bought)},display:{title:"Materialization",description:a(g,null,[u("Autobuy \u03BC upgrades"),a("br",null,null),u("\u03BC upgrades no longer consume Pions or Spinors")])},cost:()=>ue.isFirstBranch(wt)?101:150}),nu:f({visibility(){return t(this.bought)||t(me.challenge.active)},display:{title:"Neutralization",description:a(g,null,[u("Autobuy \u03BD upgrades"),a("br",null,null),u("\u03BD upgrades no longer consume Pions or Spinors")])},requirement:vn(()=>({fomeType:()=>{var h;return(h=[S.infinitesimal,S.subspatial,S.subplanck,S.quantum][t(me.abyssUpgradeCount)])!=null?h:S.quantum},cost:2}))}),xi:f({visibility(){return t(this.bought)||t(me.challenge.active)},display:{title:"Externalization",description:a(g,null,[u("Autobuy \u03BE upgrades"),a("br",null,null),u("\u03BE upgrades no longer consume Pions or Spinors")])},requirement:vn(()=>({fomeType:()=>{var h;return(h=[S.infinitesimal,S.subspatial,S.subplanck,S.quantum][t(me.abyssUpgradeCount)])!=null?h:S.quantum},cost:2}))}),pi:f({visibility(){return t(this.bought)||t(me.challenge.active)},display:{title:"Prioritization",description:a(g,null,[u("Autobuy \u03C0 upgrades"),a("br",null,null),u("\u03C0 upgrades no longer consume Pions or Spinors")])},requirement:vn(()=>({fomeType:()=>{var h;return(h=[S.infinitesimal,S.subspatial,S.subplanck,S.quantum][t(me.abyssUpgradeCount)])!=null?h:S.quantum},cost:2}))}),rho:f({visibility(){return t(this.bought)||t(me.challenge.active)},display:{title:"Obfuscation",description:a(g,null,[u("Autobuy \u03C1 upgrades"),a("br",null,null),u("\u03C1 upgrades no longer consume Pions or Spinors")])},requirement:vn(()=>({fomeType:()=>{var h;return(h=[S.infinitesimal,S.subspatial,S.subplanck,S.quantum][t(me.abyssUpgradeCount)])!=null?h:S.quantum},cost:2}))})},p={resetOrSell:St(()=>({enabled:()=>t(me.challenge.active)?!0:!t(m.autoGain.bought),key:"s",description:()=>t(me.challenge.active)?"Sell all Pion and Spinor Upgrades":"Condense some Pions and Spinors into Skyrmions",onPress(){if(t(me.challenge.active))for(const h of[...Object.values(Le.upgrades),...Object.values(xe.upgrades)])h.amount.value=0;else r.onClick()}})),switchTab:St(()=>({enabled:()=>t(C.unlocked),key:"ctrl+s",description:"Move to Skyrmions",onPress(){Nn.tabs.selected.value=e}})),buy:St(()=>({enabled(){return t(C.unlocked)?Object.keys(m).filter(h=>!t(m[h].bought)).filter(h=>h!=="autoGain").filter(h=>ye(Le.upgrades[h].visibility)).filter(h=>ye(xe.upgrades[h].visibility)).length>0:!1},key:"shift+s",description:"Buy one of each Pion and Spinor Upgrade",onPress(){for(const h of[...Object.values(Le.upgrades),...Object.values(xe.upgrades)])h.onClick()}}))},b=Tt("Skyrmion Modifiers",()=>[{title:"Skyrmion Cost",modifier:i,base:()=>o.pow10(t(r.amount)),baseText:$(()=>a(g,null,[u("["),e,u("] Pions and Spinors")])),smallerIsBetter:!0}]);return{name:e,theme:n,conversion:r,skyrmions:l,totalSkyrmions:c,production:d,upgrades:m,hotkeys:p,display:$(()=>{let h;return a(g,null,[u("You have "),a(Vn,{resource:l,color:"var(--feature-background)",tag:"h2",includeName:!0},null),ie(b),o.gt(he(S.subspatial,4),0)?a(g,null,[a("br",null,null),u("Your "),C.subspatial.amount.displayName,u(" is granting an additional "),a(Vn,{resource:l,override:he(S.subspatial,4),color:"var(--feature-background)",tag:"h3",includeName:!0},null)]):a(Ne,{height:"25px"},null),a(Ne,null,null),a("div",{class:"row",style:{flexFlow:"row nowrap"}},[ie(Le.display),t(ue.expansions.skyrmion.bought)?ie(me.display):a(Ne,{width:"250px",height:"250px"},null),ie(xe.display)]),a(Ne,null,null),a(eb,null,nb(h=ie(r))?h:{default:()=>[h]})])}),pion:Le,spinor:xe,abyss:me};function f(h){const{visibility:N,cost:y,requirement:q,display:T,onPurchase:M}=h;return tb({visibility:N,requirements:q!=null?q:K(()=>({cost:y,resource:B(l),requiresPay:!1})),display:T,onPurchase:M})}}),sb="root",$i=[F,C,V,Y,ce,ue],Nn=st(sb,()=>{const e=pi(Object.fromEntries($i.map(i=>[i.name,()=>({display:i.name,tab:rn(()=>({style:v(()=>{var s;return(s=t(me.challenge.active)?me.theme:i.theme)!=null?s:{}}),display:$(()=>a(g,null,[a("div",null,[ie(t(i.display))])]))})),visibility:"unlocked"in i?()=>{var s;return t((s=i.unlocked)!=null?s:!0)}:!0})]))),n={left:St(()=>({key:"ArrowLeft",description:"Previous Tab",onPress(){const i=e.selected.value;if(i===void 0)return;const s=Object.entries(e.tabs).filter(([l,c])=>ye(c.visibility)).map(([l,c])=>l);if(s.length<=0)return;const r=s.indexOf(i);switch(r){case-1:break;case 0:e.selected.value=s.at(-1);break;default:e.selected.value=s[r-1];break}}})),right:St(()=>({key:"ArrowRight",description:"Next Tab",onPress(){const i=e.selected.value;if(i===void 0)return;const s=Object.entries(e.tabs).filter(([l,c])=>ye(c.visibility)).map(([l,c])=>l);if(s.length<=0)return;const r=s.indexOf(i);switch(r){case-1:break;case s.length-1:e.selected.value=s[0];break;default:e.selected.value=s[r+1];break}}})),shiftLeft:St(()=>({key:"shift+ArrowLeft",description:"Previous Subtab",onPress(){const i=e.selected.value;if(i===void 0)return;const s=$i.find(m=>m.name===i);if(s===void 0||!("tabs"in s))return;const r=s.tabs,l=r.selected.value;if(l===void 0)return;const c=Object.entries(r.tabs).filter(([m,p])=>ye(p.visibility)).map(([m,p])=>m);if(c.length<=0)return;const d=c.indexOf(l);switch(d){case-1:break;case 0:r.selected.value=c.at(-1);break;default:r.selected.value=c[d-1];break}}})),shiftRight:St(()=>({key:"shift+ArrowRight",description:"Next Subtab",onPress(){const i=e.selected.value;if(i===void 0)return;const s=$i.find(m=>m.name===i);if(s===void 0||!("tabs"in s))return;const r=s.tabs,l=r.selected.value;if(l===void 0)return;const c=Object.entries(r.tabs).filter(([m,p])=>ye(p.visibility)).map(([m,p])=>m);if(c.length<=0)return;const d=c.indexOf(l);switch(d){case-1:break;case c.length-1:r.selected.value=c[0];break;default:r.selected.value=c[d+1];break}}})),pause:St(()=>({key:"p",description:"Pause",onPress(){ve.devSpeed===0?ve.devSpeed=null:ve.devSpeed=0}}))};return{name:"Root",minWidth:300,display:$(()=>t(C.unlocked)?a(g,null,[ie(e)]):a("div",{style:F.theme},[ie(t(e.tabs[F.name].tab))])),hotkeys:n,tabs:e}}),rb=e=>[...Object.values($i),Nn],$s=v(()=>!1);function ob(e,n){}var ab=Object.freeze(Object.defineProperty({__proto__:null,root:Nn,getInitialLayers:rb,hasWon:$s,fixOldSave:ob},Symbol.toStringTag,{value:"Module"}));const hi=e=>(lt("data-v-4a50ce42"),e=e(),ut(),e),lb={class:"game-over-modal-header"},ub=["src","alt"],cb={class:"game-over-modal-title"},db=hi(()=>_("h2",null,"Congratulations!",-1)),mb={key:0},pb=hi(()=>_("br",null,null,-1)),fb=hi(()=>_("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),gb=hi(()=>_("br",null,null,-1)),bb=["href"],hb=hi(()=>_("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),vb=oe({__name:"GameOverScreen",setup(e){const{title:n,logo:i,discordName:s,discordLink:r,versionNumber:l,versionTitle:c}=_e,d=v(()=>os(ve.timePlayed)),m=v(()=>$s.value&&!ve.keepGoing),p=cn(ve,"autosave");function b(){ve.keepGoing=!0}function f(){ln(Fn())}return(h,N)=>(k(),se(Zt,{"model-value":t(m)},{header:ae(()=>[_("div",lb,[t(i)?(k(),x("img",{key:0,class:"game-over-modal-logo",src:t(i),alt:t(n)},null,8,ub)):j("",!0),_("div",cb,[db,_("h4",null,"You've beaten "+Z(t(n))+" v"+Z(t(l))+": "+Z(t(c)),1)])])]),body:ae(({shown:y})=>[y?(k(),x("div",mb,[_("div",null,"It took you "+Z(t(d))+" to beat the game.",1),pb,fb,gb,_("div",null,[_("a",{href:t(r),class:"game-over-modal-discord-link"},[hb,u(" "+Z(t(s)),1)],8,bb)]),a(Wt,{title:"Autosave",modelValue:t(p),"onUpdate:modelValue":N[0]||(N[0]=q=>He(p)?p.value=q:null)},null,8,["modelValue"])])):j("",!0)]),footer:ae(()=>[_("div",{class:"game-over-footer"},[_("button",{onClick:b,class:"button"},"Keep Going"),_("button",{onClick:f,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var yb=ge(vb,[["__scopeId","data-v-4a50ce42"]]);const Fi=e=>(lt("data-v-6a99220e"),e=e(),ut(),e),_b=Fi(()=>_("div",{class:"nan-modal-header"},[_("h2",null,"NaN value detected!")],-1)),wb={key:0},kb=Fi(()=>_("br",null,null,-1)),Sb=["href"],Cb=Fi(()=>_("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Nb=Fi(()=>_("br",null,null,-1)),$b={class:"nan-footer"},Ib=oe({__name:"NaNScreen",setup(e){const{discordName:n,discordLink:i}=_e,s=le(!0),r=le(!0),l=cn(tt,"hasNaN"),c=le(null);gt(l,h=>{h?(s.value=ve.autosave,r.value=ve.devSpeed===0):(ve.autosave=s.value,ve.devSpeed=r.value?0:null)});const d=v(()=>{var h;return(h=tt.NaNPath)==null?void 0:h.join(".")}),m=v(()=>tt.NaNPersistent!=null?tt.NaNPersistent.value:null);function p(){tt.NaNPersistent!=null&&(tt.NaNPersistent.value=new o(0),tt.hasNaN=!1)}function b(){tt.NaNPersistent&&(tt.NaNPersistent.value=new o(1),tt.hasNaN=!1)}function f(){tt.NaNPersistent&&(tt.NaNPersistent.value=new o(NaN),tt.hasNaN=!1)}return(h,N)=>(k(),x(g,null,[a(Zt,Rt({modelValue:t(l),"onUpdate:modelValue":N[4]||(N[4]=y=>He(l)?l.value=y:null)},h.$attrs),{header:ae(()=>[_b]),body:ae(()=>[_("div",null,[u(' Attempted to assign "'+Z(t(d))+'" to NaN',1),t(m)?(k(),x("span",wb,Z(" ")+"(previously "+Z(t(Rn)(t(m)))+")",1)):j("",!0),u(". Auto-saving has been "+Z(s.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),kb,_("div",null,[_("a",{href:t(i)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[Cb,u(" "+Z(t(n)||"Profectus & Friends"),1)],8,Sb)]),Nb,a(Wt,{title:"Autosave",modelValue:s.value,"onUpdate:modelValue":N[0]||(N[0]=y=>s.value=y)},null,8,["modelValue"]),t(_e).enablePausing?(k(),se(Wt,{key:0,title:"Pause game",modelValue:r.value,"onUpdate:modelValue":N[1]||(N[1]=y=>r.value=y)},null,8,["modelValue"])):j("",!0)]),footer:ae(()=>[_("div",$b,[_("button",{onClick:N[2]||(N[2]=y=>{var q;return(q=c.value)==null?void 0:q.open()}),class:"button"},"Open Saves Manager"),_("button",{onClick:p,class:"button"},"Set to 0"),_("button",{onClick:b,class:"button"},"Set to 1"),t(m)&&t(o).neq(t(m),0)&&t(o).neq(t(m),1)?(k(),x("button",{key:0,onClick:N[3]||(N[3]=y=>l.value=!1),class:"button"}," Set to previous ")):j("",!0),_("button",{onClick:f,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),a(sr,{ref_key:"savesManager",ref:c},null,512)],64))}});var qb=ge(Ib,[["__scopeId","data-v-6a99220e"]]);const Mb={key:0,class:"tpsDisplay"},xb=oe({__name:"TPS",setup(e){const n=v(()=>o.div(tt.lastTenTicks.length,tt.lastTenTicks.reduce((i,s)=>i+s,0)));return(i,s)=>t(n).isNan()?j("",!0):(k(),x("div",Mb,"TPS: "+Z(t(Tn)(t(n))),1))}});var Tb=ge(xb,[["__scopeId","data-v-89b89152"]]);const Pb={"--foreground":"#D8DEE9","--background":"#2E3440","--raised-background":"#3B4252","--tooltip-foreground":"#E5E9F0","--tooltip-background":"rgba(0, 0, 0, 0.75)","--locked":"#4c566a","--hotkey":"rgba(0, 0, 0, 0.5)","--star":"#fc0","--svg-background":"#2e3440","--box-shadow-color":"#E5E9F0","--highlighted":"#434c5e","--outline":"#3B4252","--danger":"#D08770","--link":"#88C0D0","--modal-border":"solid 2px #3B4252","--quarter-transparent":"rgba(0, 0, 0, 0.25)","--transparent":"#0000","--changelog-feature":"#B48EAD","--changelog-fix":"#A3BE8C","--changelog-balance":"#EBCB8B","--feature-foreground":"#000","--feature-background":"#4c566a","--bought":"#8FBCBB","--border-radius":"15px","--feature-margin":"5px"};var Ab=oe({__name:"App",setup(e){const n=_e.useHeader,i=Pb,s=cn(we,"showTPS"),r=cn(tt,"errors"),l=v(()=>pe($(()=>a(g,null,[Do.map(ie)]))));return(c,d)=>t(r).length>0?(k(),x("div",{key:0,class:"error-container",style:Re(t(i))},[a(Ls,{errors:t(r)},null,8,["errors"])],4)):(k(),x(g,{key:1},[_("div",{id:"modal-root",style:Re(t(i))},null,4),_("div",{class:Ie(["app",{useHeader:t(n)}]),style:Re(t(i))},[t(n)?(k(),se(rr,{key:0})):j("",!0),a(ad),t(t(s))?(k(),se(Tb,{key:1})):j("",!0),a(yb),a(qb),a(Uu),(k(),se($e(t(l))))],6)],64))}});var Bb=ge(Ab,[["__scopeId","data-v-7af19ea5"]]);function Fb(e={}){const{immediate:n=!1,onNeedRefresh:i,onOfflineReady:s,onRegistered:r,onRegisteredSW:l,onRegisterError:c}=e;let d,m,p,b;const f=async(N=!0)=>{await p,N&&(d==null||d.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()})),await(b==null?void 0:b())};async function h(){if("serviceWorker"in navigator){const{Workbox:N,messageSW:y}=await ii(()=>import("./workbox-window.4a8794bb.js"),[]);b=async()=>{m&&m.waiting&&await y(m.waiting,{type:"SKIP_WAITING"})},d=new N("./sw.js",{scope:"./",type:"classic"}),d.addEventListener("activated",q=>{q.isUpdate||s==null||s()});{const q=()=>{i==null||i()};d.addEventListener("waiting",q),d.addEventListener("externalwaiting",q)}d.register({immediate:n}).then(q=>{m=q,l?l("./sw.js",q):r==null||r(q)}).catch(q=>{c==null||c(q)})}}return p=h(),f}function Eb(e={}){const{immediate:n=!0,onNeedRefresh:i,onOfflineReady:s,onRegistered:r,onRegisteredSW:l,onRegisterError:c}=e,d=le(!1),m=le(!1);return{updateServiceWorker:Fb({immediate:n,onNeedRefresh(){d.value=!0,i==null||i()},onOfflineReady(){m.value=!0,s==null||s()},onRegistered:r,onRegisteredSW:l,onRegisterError:c}),offlineReady:m,needRefresh:d}}const Is=console.error;console.error=function(...e){Is(...e)};window.onerror=function(e,n,i,s,r){return tt.errors.push(r instanceof Error?r:new Error(JSON.stringify(r))),Is(r),!0};window.onunhandledrejection=function(e){tt.errors.push(e.reason instanceof Error?e.reason:new Error(JSON.stringify(e.reason))),Is(e.reason)};document.title=_e.title;window.projInfo=_e;_e.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Po();const{globalBus:e}=await ii(()=>Promise.resolve().then(function(){return xo}),void 0),{startGameLoop:n}=await ii(()=>import("./gameLoop.1d4e44fa.js"),["assets/gameLoop.1d4e44fa.js","assets/@fontsource.f66d05e7.css","assets/vue.98022121.js","assets/lz-string.bfbf8ec3.js","assets/@vue.6f8187b0.js","assets/nanoevents.1080beb7.js","assets/unofficial-galaxy-sdk.0a7ae67e.js","assets/vue-textarea-autosize.35804eaf.js","assets/vue-next-select.a07b6867.js","assets/vue-next-select.9e6f4164.css","assets/vuedraggable.7e35b681.js","assets/sortablejs.93acc2fb.js","assets/vue-toastification.73283838.js","assets/vue-toastification.4b5f8ac8.css"]),i=window.vue=Cr(Bb);i.config.errorHandler=function(s,r,l){console.error(s,l,r)},e.emit("setupVue",i),i.mount("#app"),un(()=>{const s=Ds(),{updateServiceWorker:r}=Eb({onNeedRefresh(){s.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){r()}})},onOfflineReady(){s.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(l){l&&setInterval(()=>l.update(),60*60*1e3)}})}),n()});export{o as D,ii as _,tt as a,_e as b,ab as c,$t as g,Ji as l,ve as p,we as s};
